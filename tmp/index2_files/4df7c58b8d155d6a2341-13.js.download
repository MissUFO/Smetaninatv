webpackJsonp([13],{1e3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(275),r=n(1001);ns.View.define(Object(i.default)("banner"),{events:{"ns-view-init":"onInit","ns-view-htmlinit":"onHtmlInit","ns-view-hide":"onHide","ns-page-after-load":"onAfterPageLoad","yabs:ready@show":"forceDraw","daria:vThemesSelector:new-schema@show":"forceDraw","daria:vScrollerLeft:scroll@show":"updatePosition","daria:vApp:changeLeftColumWidth@show":"onChangeLeftColumnWidth","daria:advertising:render:left-col-rtb-1":"onRenderMainBanner","daria:advertising:render:left-col-rtb-2":"onRenderExtraBanner"},models:{dimensions:{"ns-model-changed":"keepValid",resize:"updatePosition"},"scroller-left":"keepValid","scroller-messages":"keepValid","timeline-state":"keepValid"},yateModule:"mail",methods:Object.assign({onInit:function(){var e=Daria.AdBlock.enabled?6e4:100;this.draw=_.throttle(this.draw,e),this.nodeId=Object(i.default)("js-main-rtb"),this.nodeId2=Object(i.default)("js-main-rtb-2"),this.getModel("scroller-left").init()},onHtmlInit:function(){this.node.innerHTML='\n                <div class="'+Object(i.default)("b-banner")+'" id="'+this.nodeId+'"></div>\n                <div class="'+Object(i.default)("b-banner")+'" id="'+this.nodeId2+'"></div>\n            '},onHide:function(){this.draw.cancel()},onAfterPageLoad:function(){this.draw()},onRenderMainBanner:function(){this.updateExtraBanner(),this.syncHeightWithWrapperAndUpdatePosition()},onRenderExtraBanner:function(){this.syncHeightWithWrapperAndUpdatePosition()},forceDraw:function(){this.draw.cancel(),this.draw(!0)},draw:function(e){this.fillExtraHeights(),this.drawMainBanner(e)},drawMainBanner:function(e){Daria.yabs&&Daria.yabs.showMainBanner(this.nodeId,e)},drawExtraBanner:function(){Daria.yabs&&Daria.yabs.showExtraBanner(this.nodeId2)},updateExtraBanner:function(){var e=document.getElementById(this.nodeId),t=e?e.offsetHeight:0;t<=0||t>420?this.removeExtraBanner():this.drawExtraBanner()},removeExtraBanner:function(){$("#"+this.nodeId2).children().remove()}},r.a)})},1001:function(e,t,n){"use strict";t.a={_lastViewportTop:null,_skinSaverHeight:0,_themeCopyrightHeight:0,fillExtraHeights:function(){this._skinSaverHeight=$(".js-skin-saver").outerHeight()||0,this._themeCopyrightHeight=$(".js-theme-copyright").outerHeight()||0},updatePosition:function(){if(this.isVisible()&&!this._shouldPreventSticking()){var e=[this._getStaticBannerTop(),this._getViewportTop()],t=e[0],n=e[1],i=this._getBannerOverheight(),r=i>0,o=this._isBannerStuck(),a=this._getTopGap();if(!(n>t+(o?0:i)-(r&&!o?0:a)))return this._unstickBanner(),void this._resetLastViewportTop();!o&&this._syncWidthWithLeftColumn();var s=void 0;r?(s=this._getTopOffset(this._getCurrentTop(),n,i),this._lastViewportTop=n):(s=a,this._resetLastViewportTop());var c=this._getWindowHorizontalScroll(),d=this._alignPositionToPreventOverflow(s,c),u=d.top,l=d.left;this._stickBanner(u,l)}},onChangeLeftColumnWidth:function(){this.isVisible()&&this._lazyCheckBannerStuck()&&this._syncWidthWithLeftColumn()},syncHeightWithWrapperAndUpdatePosition:function(){this.isVisible()&&this._lazyCheckBannerStuck()&&(this._syncHeightWithWrapper(),this.updatePosition())},_shouldPreventSticking:function(){return Daria.is3pane()||"MSIE"===Daria.UA.BrowserName},_getStaticBannerTop:function(){return this.$node.parent().offset().top},_getViewportTop:function(){return this.getModel("scroller-left").getScrollTop()},_getWindowHorizontalScroll:function(){return window.pageXOffset},_getBannerHeight:function(){return this.$node.height()},_getBannerOverheight:function(){var e=this.getModel("timeline-state"),t=window.innerHeight,n=this._getBannerHeight(),i=e.get(".height"),r=n+i;return Math.max(r-t,0)},_isBannerStuck:function(){return"fixed"===this.$node.css("position")},_lazyCheckBannerStuck:function(){return!this._shouldPreventSticking()&&this._isBannerStuck()},_getTopGap:function(){return this.getModel("scroller-messages").FIXED_TOOLBAR_HEIGHT-1},_getCurrentTop:function(){return parseInt(this.$node.css("top"),10)||0},_getTopOffset:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=null===this._lastViewportTop,r=i?-n:this._lastViewportTop-t,o=r>0,a=r<0;return r?o?Math.min(e+r,this._getTopGap()):a?Math.max(e+r,-n):void 0:e},_alignPositionToPreventOverflow:function(e,t){var n=this._leftColumnOffset();return{top:this._alignTopToPreventOverflow(e,n),left:this._alignLeftToPreventOverflow(t,n)}},_alignTopToPreventOverflow:function(e,t){var n=this._getViewportTop(),i=this._getBannerHeight(),r=this._getThemeBottomGap(),o=t.bottom,a=n+e+i+r,s=o-n-i-r;return a>o?s:e},_alignLeftToPreventOverflow:function(e,t){return t.left-e},_leftColumnOffset:function(){var e=this.$node.closest(".js-layout-aside-inner-box"),t=e.offset();return{top:t.top,bottom:t.top+e.outerHeight(),left:t.left}},_getThemeBottomGap:function(){return this._skinSaverHeight+this._themeCopyrightHeight},_stickBanner:function(e,t){this._syncHeightWithWrapper(),this.$node.css({position:"fixed",zIndex:2,bottom:"",top:e,left:t})},_syncHeightWithWrapper:function(){this.$node.parent().outerHeight(this.$node.outerHeight())},_resetLastViewportTop:function(){this._lastViewportTop=null},_syncWidthWithLeftColumn:function(){var e=this.$node.closest(".js-layout-aside-inner-box");this.$node.width(e.width())},_unstickBanner:function(){this.$node.removeAttr("style"),this.$node.parent().removeAttr("style")}}},1002:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(275);ns.View.define(Object(i.default)("messages-direct"),{events:{"ns-view-init":"onInit","ns-view-htmlinit":"onHtmlInit","ns-view-hide":"onHide","ns-page-after-load":"onAfterPageLoad","yabs:ready@show":"forceDraw","daria:vThemesSelector:new-schema@show":"forceDraw"},yateModule:"mail",methods:{onInit:function(){this.draw=_.throttle(this.draw,100),this.nodeId=Object(i.default)("js-messages-direct")},onHtmlInit:function(){this.$node.addClass(Object(i.default)("mail-DirectLineContainer")),this.node.innerHTML='\n                <div class="'+Object(i.default)("mail-DirectLine")+'">\n                    <div class="'+Object(i.default)("mail-DirectLine-Content")+'" id="'+this.nodeId+'"></div>\n                </div>'},onHide:function(){this.draw.cancel()},onAfterPageLoad:function(){this.draw()},forceDraw:function(){this.draw.cancel(),this.draw(!0)},draw:function(e){this.showDirect(e)},showDirect:function(e){Daria.yabs&&Daria.yabs.showDirect(this.nodeId,e)}}})},127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(984),r=(n.n(i),n(985)),o=n(987),a=n(320);Jane.module("direct.js",function(){Object.assign(Daria,{getDirectViewLayout:r.a,directRunner:o.a,statIdInfo:a.statIdInfo,getStatId:a.getStatId}),Daria.hasExperiment("72171")?(n(998),n(999)):(n(1e3),n(1002))})},275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},276:function(e,t,n){"use strict";function i(){var e=Boolean(Daria.Config.pddDomain),t="TUR"===Daria.Config.product,n=/\.ua$/.test(Daria.Config["yandex-domain"]),i=Daria.Config["pdd-direct"],r=Boolean(e&&i),a=Daria.is3pane()?"3pane":"2pane",s="done"===ns.page.current.page;return{isOld:r,isPDD:e,isTUR:t,isUA:n,customId:i,layout:a,isMessage:"message"===ns.page.current.page,isCompose:"compose2"===ns.page.current.page,isDone:s,isDark:o(),hasAdblock:Daria.AdBlock.enabled,isExperiment:Daria.hasExperiment("72172")||Daria.hasExperiment("72171")}}function r(){return{uid:Daria.uid}}function o(){return ns.Model.get("themes").getModifier().indexOf("with-dark-content")>-1}Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=i,t.getBaseExtParams=r},296:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return l});var i={"2pane":"R-I-92550-95",COMPOSE:"R-I-92550-98",DONE:"R-I-257968-5",MESSAGE:"R-I-92550-101",MESSAGE_EXTRA:"R-I-92550-102",EXTRA:"R-I-92550-96","2pane_pdd":"R-I-137740-11"},r={"2pane":"R-I-92550-11",COMPOSE:"R-I-92550-65",DONE:"R-I-257968-2",MESSAGE:"R-I-92550-85",MESSAGE_EXTRA:"R-I-92550-86",EXTRA:"R-I-92550-63","2pane_pdd":"R-I-137740-1"},o=Object.assign({"2pane":"R-I-92550-11","3pane":"R-I-92550-13",COMPOSE:"R-I-92550-65",DONE:"R-I-257968-2",MESSAGE:"R-I-92550-85",MESSAGE_PDD:"R-I-137740-13",MESSAGE_EXTRA:"R-I-92550-86",TUR:"R-I-96386-1",UA:"R-I-92550-22",EXTRA:"R-I-92550-63","2pane_pdd":"R-I-137740-1","3pane_pdd":"R-I-137740-6"},i,Daria.hasExperiment("72171")?r:{}),a={"2pane":"R-I-92550-94","2pane_pdd":"R-I-137740-12",MESSAGE:"R-I-92550-97"},s={"2pane":"D-I-92550-9","2pane_pdd":"D-I-137740-4",MESSAGE:"R-I-92550-64"},c=Object.assign({"2pane":"D-I-92550-9","2pane_pdd":"D-I-137740-4",MESSAGE:"R-I-92550-64",TUR:"D-I-96386-2",UA:"D-I-92550-23"},a,Daria.hasExperiment("72171")?s:{}),d={DEFAULT:"R-I-257968-4"},u={DEFAULT:"R-I-257968-1"},l=Object.assign({DEFAULT:"R-I-257968-1"},d,Daria.hasExperiment("72171")?u:{})},320:function(e,t,n){"use strict";function i(e){var t=e.isCompose,n=e.isDone,i=e.isMessage;switch(!0){case t:return"compose";case n:return"done";case i:return"message";default:return"messages"}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0;try{n=Object(a.a)(e,"blockId")|Object(a.a)(i(t),"page")|Object(a.a)(t,"flags")}catch(i){n=c,Jane.ErrorLog.send(s({errorType:"statId_exception",blockId:e},t))}return n}function o(e){return{page:Object(a.b)(e,"page"),blockId:Object(a.b)(e,"blockId"),flags:Object(a.b)(e,"flags")}}Object.defineProperty(t,"__esModule",{value:!0}),t.getStatId=r,t.statIdInfo=o;var a=n(991),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=0},984:function(e,t){},985:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(986),o=n(275);t.a=function(e){var t=ns.Model.get("settings").getSetting("size-layout-left"),n=t&&parseInt(t,10)<200;switch(e){case Object(r.a)("ban","ner"):return n?{}:i({},Object(o.default)("banner"),{});case Object(r.a)("messages-dir","ect"):return Daria.is2pane()?i({},Object(o.default)("messages-direct"),{}):{};default:throw new Error('Unexpected direct view name "'+e+'"')}}},986:function(e,t,n){"use strict";t.a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("")}},987:function(e,t,n){"use strict";var i=n(988);t.a={run:function(){var e=new i.a;return Daria.AdBlock.detect().then(function(){return e.load()}).then(function(){var e=Daria.hasExperiment("72171")?n(990):n(993).default;Daria.yabs=new e,ns.events.trigger("yabs:ready")})}}},988:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return d});var r,o,a=n(275),s=n(989),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=(o=r=function(){function e(){i(this,e),this._yaContextReadyPromise=null}return c(e,[{key:"_resetOnTimeout",value:function(){return new Promise(function(t,n){return setTimeout(n,e.INIT_TIMEOUT)})}},{key:"_waitContextReady",value:function(){return this._yaContextReadyPromise||(this.yaContextReadyPromise=new Promise(function(t){window[e.CALLBACKS_KEY].push(t)})),this.yaContextReadyPromise}},{key:"load",value:function(){return Promise.race([Promise.all([this._waitContextReady(),Object(s.a)(e.CONTEXT_URL)]),this._resetOnTimeout()])}}]),e}(),r.CONTEXT_URL=Object(a.default)("https://an.yandex.ru/system/context.js"),r.INIT_TIMEOUT=1e4,r.CALLBACKS_KEY=Object(a.default)("yandexContextAsyncCallbacks"),o);window[d.CALLBACKS_KEY]=[]},989:function(e,t,n){"use strict";function i(e){return new Promise(function(t,n){var i=document.getElementsByTagName("script")[0],r=document.createElement("script");r.type="text/javascript",r.src=e,r.async=!0,r.addEventListener("load",t),r.addEventListener("error",n),i.parentNode.insertBefore(r,i)})}t.a=i},990:function(e,t,n){"use strict";function i(){this._prepareUrls()}function r(){return ns.Model.get("themes").getModifier().indexOf("with-dark-content")>-1}var o=n(320),a=o.getStatId,s=n(276),c=s.getEnv;e.exports=i,i.prototype._prepareUrls=function(){var e=Modernizr["is-pdd"],t=e?Daria.Config["pdd-direct"]:null;this._DONE_DIRECT_ID="R-I-257968-1",this._MESSAGE_DIRECT_ID="R-I-92550-64",this._COMPOSE_RTB_ID="R-I-92550-65",this._DONE_RTB_ID="R-I-257968-2",this._2PANE_RTB_ID="R-I-92550-11",this._RTB_EXTRA_ID="R-I-92550-63",this._RTB_MESSAGE_ID=e?t&&"R-I-"+t+"-1"||"R-I-137740-13":"R-I-92550-85",this._RTB_MESSAGE_EXTRA_ID="R-I-92550-86",this._isTUR="TUR"===Daria.Config.product;var n=Daria.is3pane()?"3pane":"2pane",i=e?"_pdd":"",r=/\.ua$/.test(Daria.Config["yandex-domain"]);this._renderOldDirect=t;var o=null,a=null;this._isTUR&&(o="TUR",a="TUR"),r&&(o="UA",a="UA"),ns.Model.get("settings").isSet("google-ads")&&(o="gads");var s={TUR:"R-I-96386-1",UA:"R-I-92550-22",gads:"R-I-92550-21","3pane":"R-I-92550-13","3pane_pdd":t?"R-I-"+t+"-1":"R-I-137740-6","2pane":this._2PANE_RTB_ID,"2pane_pdd":t?"R-I-"+t+"-1":"R-I-137740-1"},c={TUR:"D-I-96386-2",UA:"D-I-92550-23","2pane":"D-I-92550-9","2pane_pdd":t||"D-I-137740-4"};this._DIRECT_ID=c[a||n+i],this._RTB_ID=s[o||n+i],this._RTB_ID_2=this._RTB_EXTRA_ID;var d={uid:Daria.uid},u=_.extend({},d,{page:"done",awaps_section:this._isTUR?"9079":"9010"});this._EXT_PARAMS="&"+ns.params2query(d),this._DONE_EXT_PARAMS="&"+ns.params2query(u)},i.prototype.has2PaneRtbBlock=function(){return this._RTB_ID===this._2PANE_RTB_ID},i.prototype.showBanner=function(e,t,n){if(this._canLoadRtb(n)){var i={};r()&&(i={headerBgColor:"#000",bgColor:"#000",siteBgColor:"#000",titleColor:"#999",urlColor:"#666",hoverColor:"#fff",borderColor:"#262626",textColor:"#999",sitelinksColor:"#666"});var o=ns.page.current.page,s=this._RTB_ID,d=this._RTB_ID_2;"compose2"===o?s=this._COMPOSE_RTB_ID:"message"===o?(s=this._RTB_MESSAGE_ID,d=this._RTB_MESSAGE_EXTRA_ID):"done"===o&&this.has2PaneRtbBlock()&&(s=this._DONE_RTB_ID),this._ACTUAL_RTB_ID=s,this._ACTUAL_EXTRA_RTB_ID=d;var u=a(s,c());Ya.Context.AdvManager.render({blockId:s,renderTo:e,horizontalAlign:!0,async:!0,extParams:"done"===o?this._DONE_EXT_PARAMS:this._EXT_PARAMS,directSettings:i,statId:u,cspNonce:Daria.nonce,onRender:function(){if(!t)return void ns.events.trigger("daria:advertising:render");var n=document.getElementById(e);if((n?n.offsetHeight:0)>420)return void $("#"+t).children().remove();var r=a(d,c());Ya.Context.AdvManager.render({blockId:d,renderTo:t,horizontalAlign:!0,statId:r,async:!0,directSettings:i,onRender:function(){return ns.events.trigger("daria:advertising:render")}}),Daria.monitoring.workflow.ads({action:"show",block:"left-col-rtb-2",type:"common",id:d,statId:r})}}),Daria.monitoring.workflow.ads({action:"show",block:"left-col-rtb",type:"common",id:s,statId:u})}},i.prototype.showDoneDirect=function(e){if(this._canLoadDoneDirect()&&e){var t={};r()&&(t={headerBgColor:"#000",bgColor:"#000",siteBgColor:"#000",titleColor:"#999",urlColor:"#666",hoverColor:"#fff",borderColor:"#262626",textColor:"#999",sitelinksColor:"#666"});var n=a(this._DONE_DIRECT_ID,c());Ya.Context.AdvManager.render({blockId:this._DONE_DIRECT_ID,renderTo:e,async:!0,extParams:this._EXT_PARAMS,directSettings:t,cspNonce:Daria.nonce,statId:n}),Daria.monitoring.workflow.ads({action:"show",block:"done-direct",type:"common",id:this._DONE_DIRECT_ID,statId:n})}},i.prototype.showDirect=function(e){var t="message"===ns.page.current.page,n=t?this._MESSAGE_DIRECT_ID:this._DIRECT_ID,i=t?"message":"messages";if(e&&n){var o=a(n,c());if(this._renderOldDirect){var s=this._getOldDirectShowParams();Ya.Direct.insertInto(n,e,s),Daria.monitoring.workflow.ads({action:"show",block:"messages-direct",type:"old",id:n,statId:o})}else{var d={};r()&&(d={siteBgColor:"#000",titleColor:"#999",urlColor:"#999",hoverColor:"#fff",borderColor:"#262626",textColor:"#999",sitelinksColor:"#999"}),Ya.Context.AdvManager.render({blockId:n,renderTo:e,async:!0,extParams:this._EXT_PARAMS,directSettings:d,cspNonce:Daria.nonce,statId:o}),Daria.monitoring.workflow.ads({action:"show",block:i+"-direct",type:"new",id:n,statId:o})}}},i.prototype._canLoadRtb=function(e){return e||Jane.watcher.get("pageVisible")},i.prototype._canLoadDoneDirect=function(){return!this._isTUR},i.prototype._getOldDirectShowParams=function(){var e={ext_params:this._EXT_PARAMS,site_charset:"utf-8",ad_format:"direct",type:"row",limit:1,font_size:1.1,font_family:"Arial, sans-serif",title_font_size:2,links_underline:!1,favicon:!1,csp_nonce:Daria.nonce},t={site_bg_color:"EAEDF7",title_color:"000000",url_color:"BBBBBB",text_color:"000000",hover_color:"FF0000"},n={site_bg_color:"000000",title_color:"999999",url_color:"999999",hover_color:"FFFFFF",border_color:"262626",text_color:"999999",site_links_color:"999999"};return _.assign({},e,r()?n:t)}},991:function(e,t,n){"use strict";function i(e,t){var n=t.valuesToBitmaps;return n[e]||n[l]}function r(e,t){var n=t.name;return t.bitmapsToValues[Object(u.b)(e,n)]||l}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.valuesOrder,i=t.valuesToBitmaps;return n.reduce(function(t,n){return t|(e[n]&&i[n])},0)}function a(e,t){var n=t.valuesOrder,i=t.valuesToBitmaps;return n.reduce(function(t,n){return t[n]=Boolean(e&i[n]),t},{})}function s(e,t){return I[t].getValue(e)}function c(e,t){return I[t].getBitmap(e)}t.b=s,t.a=c;var d=n(296),u=n(992),l="NOT_MATCHED",h=[l,d.a["2pane"],d.a["3pane"],d.a.COMPOSE,d.a.DONE,d.a.TUR,d.a.UA,d.a.EXTRA,d.a["2pane_pdd"],d.a["3pane_pdd"],d.c["2pane"],d.c["2pane_pdd"],d.c.MESSAGE,d.c.TUR,d.c.UA,d.b.DEFAULT,d.a.MESSAGE,d.a.MESSAGE_PDD,d.a.MESSAGE_EXTRA],f=[l,"messages","message","compose","done"],p=["hasAdblock","isPDD","isTUR","isUA","isExperiment"],g=h.reduce(function(e,t,n){return e[t]=Object(u.a)(n,"blockId"),e},{}),v=f.reduce(function(e,t,n){return e[t]=Object(u.a)(n,"page"),e},{}),m=p.reduce(function(e,t,n){return e[t]=Object(u.a)(1<<n,"flags"),e},{}),b=_.invert(g),w=_.invert(v),I={blockId:{name:"blockId",valuesOrder:h,valuesToBitmaps:g,bitmapsToValues:b,getValue:function(e){return r(e,this)},getBitmap:function(e){return i(e,this)}},page:{name:"page",valuesOrder:f,valuesToBitmaps:v,bitmapsToValues:w,getValue:function(e){return r(e,this)},getBitmap:function(e){return i(e,this)}},flags:{name:"flags",valuesOrder:p,valuesToBitmaps:m,getValue:function(e){return a(e,this)},getBitmap:function(e){return o(e,this)}}}},992:function(e,t,n){"use strict";function i(e){if("number"!=typeof e)throw new TypeError("Incorrect value type")}function r(e,t){if(e>>>t)throw new RangeError("Value is overflowed")}function o(e){var t=c[e];if(!t)throw new TypeError("Incorrect mask type");return t}function a(e,t){var n=o(t),a=n.capacity,s=n.offset;return i(e),r(e,a),e<<s}function s(e,t){var n=o(t),r=n.mask;return i(e),e&r}t.a=a,t.b=s;var c={blockId:{name:"blockId",mask:parseInt("00000000000000000000000000111111",2),capacity:6,offset:0},page:{name:"page",mask:parseInt("00000000000000000000001111000000",2),capacity:4,offset:6},flags:{name:"flags",mask:parseInt("11111111111111110000000000000000",2),capacity:16,offset:16}}},993:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return h});var r=n(276),o=n(994),a=n(995),s=n(996),c=n(997),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(e){return function(t){return!1===t?Promise.resolve(t):Promise.resolve().then(e).then(function(){return t})}},h=function(){function e(){i(this,e),this._firstRender={},this._lastId={}}return d(e,[{key:"showMainBanner",value:function(e,t){return this.showBanner(e,Object(a.b)(),"left-col-rtb-1",t)}},{key:"showExtraBanner",value:function(e,t){return this.showBanner(e,Object(a.a)(),"left-col-rtb-2",t)}},{key:"showDoneDirect",value:function(e,t){return this.showBanner(e,Object(s.a)(),"done-direct",t)}},{key:"showBanner",value:function(e,t,n,i){var r=this,a=Object(o.a)(t);return Promise.resolve().then(function(){return r._showBanner(e,t,n,a,i)}).then(l(function(){return r._logFirstRender({blockId:t,blockName:n,blockOptions:a})})).catch(function(e){return r._logError({blockId:t,blockName:n,blockOptions:a},e)})}},{key:"_showBanner",value:function(e,t,n,i,r){var o=this;return new Promise(function(a){if(!o._canRender(e,t,n,r))return void a(!1);o._renderRtb(e,t,n,i,a),o._setLastId(n,t),Daria.monitoring.workflow.ads({action:"show",block:n,id:t,statId:i.statId,type:"common"})})}},{key:"_renderRtb",value:function(e,t,n,i,r){var o=this;Ya.Context.AdvManager.render(u({renderTo:e,blockId:t},i,{onRender:function(){o._onRenderRtb(n),r()}}))}},{key:"_onRenderRtb",value:function(e){ns.events.trigger("daria:advertising:render:"+e)}},{key:"showDirect",value:function(e,t){var n=this,i=Object(r.getEnv)(),a=i.isMessage,s=Object(c.b)(),d=(a?"message":"messages")+"-direct",u=Object(o.a)(s);return Promise.resolve().then(function(){return n._showDirect(e,s,d,u,t)}).then(l(function(){return n._logFirstRender({blockId:s,blockName:d,blockOptions:u})})).catch(function(e){return n._logError({blockId:s,blockName:d,blockOptions:u},e)})}},{key:"_showDirect",value:function(e,t,n,i,o){var a=this;return new Promise(function(s){if(!a._canRender(e,t,n,o))return void s(!1);var c=Object(r.getEnv)(),d=c.isOld;d?a._renderOldDirect(e,t,s):a._renderDirect(e,t,i,s),a._setLastId(n,t),Daria.monitoring.workflow.ads({action:"show",block:n,id:t,statId:i.statId,type:d?"old":"new"})})}},{key:"_renderDirect",value:function(e,t,n,i){Ya.Context.AdvManager.render(u({renderTo:e,blockId:t},n,{directSettings:Object(c.a)(),onRender:i}))}},{key:"_renderOldDirect",value:function(e,t,n){Ya.Direct.insertInto(t,e,Object(c.c)()),setTimeout(n,10)}},{key:"_canRender",value:function(e,t,n,i){if(!e||!t)return!1;var r=this._lastId[n];return!(!i&&r===t)||!!Jane.watcher.get("pageVisible")}},{key:"_setLastId",value:function(e,t){this._lastId[e]=t}},{key:"_logFirstRender",value:function(e){var t=e.blockId,n=e.blockName,i=e.blockOptions;if(!this._firstRender[n]){this._firstRender[n]=!0;var r=this._getNavigationStart();r&&Daria.monitoring.workflow.ads({action:"first-render",block:n,id:t,statId:i.statId,lifetime:Date.now()-r})}}},{key:"_logError",value:function(e,t){var n=e.blockName,i=e.blockId,r=e.blockOptions;Daria.monitoring.workflow.ads({action:"error",block:n,id:i,statId:r.statId,message:t.message||t})}},{key:"_getNavigationStart",value:function(){return window.performance&&window.performance.timing&&window.performance.timing.navigationStart}}]),e}()},994:function(e,t,n){"use strict";function i(e){var t=Object(a.getEnv)();return{statId:Object(s.getStatId)(e,t),extParams:r(t),horizontalAlign:!0,async:!0,cspNonce:Daria.nonce,directSettings:o(t)}}function r(e){var t=e.isTUR,n=e.isDone,i=Object(a.getBaseExtParams)();return n&&Object.assign(i,{page:"done",awaps_section:t?"9079":"9010"}),"&"+ns.params2query(i)}function o(e){return e.isDark?{headerBgColor:"#000",bgColor:"#000",siteBgColor:"#000",titleColor:"#999",urlColor:"#666",hoverColor:"#fff",borderColor:"#262626",textColor:"#999",sitelinksColor:"#666"}:{}}t.a=i;var a=n(276),s=n(320)},995:function(e,t,n){"use strict";function i(){var e=Object(c.getEnv)(),t=e.isPDD,n=e.isOld,i=e.customId,r=n?"R-I-"+i+"-1":null;return o(e,{TUR:d.a.TUR,UA:d.a.UA,COMPOSE:d.a.COMPOSE,DONE:d.a.DONE,MESSAGE:t?r||d.a.MESSAGE_PDD:d.a.MESSAGE,"3pane":d.a["3pane"],"2pane":d.a["2pane"],"2pane_pdd":r||d.a["2pane_pdd"],"3pane_pdd":r||d.a["3pane_pdd"]})}function r(){return o(Object(c.getEnv)(),{TUR:"",UA:d.a.EXTRA,COMPOSE:d.a.EXTRA,DONE:d.a.EXTRA,MESSAGE:d.a.MESSAGE_EXTRA,"3pane":d.a.EXTRA,"2pane":d.a.EXTRA,"2pane_pdd":d.a.EXTRA,"3pane_pdd":d.a.EXTRA})}function o(e,t){var n=s(e,t);return void 0!==n?n:a(e,t)}function a(e,t){return t[e.layout+(e.isPDD?"_pdd":"")]}function s(e,t){var n=e.isMessage,i=e.isTUR,r=e.isUA,o=e.isDone,s=e.isCompose;return i?t.TUR:r?t.UA:n?t.MESSAGE:s?t.COMPOSE:o&&a(e,t)===t["2pane"]?t.DONE:void 0}t.b=i,t.a=r;var c=n(276),d=n(296)},996:function(e,t,n){"use strict";function i(){return Object(r.getEnv)().isTUR?"":o.b.DEFAULT}t.a=i;var r=n(276),o=n(296)},997:function(e,t,n){"use strict";function i(){var e=Object(d.getEnv)(),t=e.isOld?String(e.customId):null;return r(e,{MESSAGE:u.c.MESSAGE,TUR:u.c.TUR,UA:u.c.UA,"2pane":u.c["2pane"],"3pane":"","2pane_pdd":t||u.c["2pane_pdd"],"3pane_pdd":""})}function r(e,t){var n=o(e,t);return void 0!==n?n:a(e,t)}function o(e,t){var n=e.isMessage,i=e.isTUR,r=e.isUA;return n?t.MESSAGE:i?t.TUR:r?t.UA:void 0}function a(e,t){return t[e.layout+(e.isPDD?"_pdd":"")]}function s(){var e=Object(d.getEnv)(),t=e.isDark,n={ext_params:Object(d.getBaseExtParams)(),site_charset:"utf-8",ad_format:"direct",type:"row",limit:1,font_size:1.1,font_family:"Arial, sans-serif",title_font_size:2,links_underline:!1,favicon:!1,csp_nonce:Daria.nonce},i={site_bg_color:"EAEDF7",title_color:"000000",url_color:"BBBBBB",text_color:"000000",hover_color:"FF0000"},r={site_bg_color:"000000",title_color:"999999",url_color:"999999",hover_color:"FFFFFF",border_color:"262626",text_color:"999999",site_links_color:"999999"};return _.assign({},n,t?r:i)}function c(){return Object(d.getEnv)().isDark?{siteBgColor:"#000",titleColor:"#999",urlColor:"#999",hoverColor:"#fff",borderColor:"#262626",textColor:"#999",sitelinksColor:"#999"}:{}}t.b=i,t.c=s,t.a=c;var d=n(276),u=n(296)},998:function(e,t,n){"use strict";var i=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n(275).default;ns.View.define(r("banner"),{events:{"ns-page-before-load":"onBeforePageLoad","ns-page-after-load@init":"init","ns-page-after-load@show":"draw","yabs:ready@show":"draw","daria:vThemesSelector:new-schema@show":"draw","daria:vScrollerLeft:scroll@show":"updatePosition","daria:vApp:changeLeftColumWidth@show":"onChangeLeftColumnWidth","daria:advertising:render":"syncHeightWithWrapperAndUpdatePosition","ns-view-show":"onShow","ns-view-hide":"hide"},models:{dimensions:{"ns-model-changed":"keepValid",resize:"updatePosition"},"scroller-left":"keepValid","scroller-messages":"keepValid","timeline-state":"keepValid"},yateModule:"mail",ctor:function(){Daria.AdBlock.enabled&&(this._draw=_.throttle(this._draw,6e4))},methods:{lastViewportTop:null,skinSaverHeight:0,themeCopyrightHeight:0,_transitionFromDone:!1,init:function(){if(!this.nodeId){this.nodeId=r("js-main-rtb"),this.nodeId2=r("js-main-rtb-2");var e='<div class="'+r("b-banner")+'" id="'+this.nodeId+'"></div>';e+='<div class="'+r("b-banner")+'" id="'+this.nodeId2+'"></div>',this.node.innerHTML=e}},onBeforePageLoad:function(e,t){if(!Array.isArray(t)||2!==t.length)return void(this._transitionFromDone=!1);var n=i(t,2),r=n[0].page,o=n[1].page;this._transitionFromDone=r!==o&&"done"===r},draw:function(){if(Daria.yabs){var e=this._transitionFromDone&&Daria.yabs.has2PaneRtbBlock();this._transitionFromDone=!1,this._draw(e),this.skinSaverHeight=$(".js-skin-saver").outerHeight()||0,this.themeCopyrightHeight=$(".js-theme-copyright").outerHeight()||0}},_draw:function(e){var t=this;clearTimeout(this._timeout),this._timeout=setTimeout(function(){Daria.yabs.showBanner(t.nodeId,t.nodeId2,e)},500)},updatePosition:function(){if(!this.shouldPreventSticking()){var e=[this.getStaticBannerTop(),this.getViewportTop()],t=e[0],n=e[1],i=this.getBannerOverheight(),r=i>0,o=this.isBannerStuck(),a=this.getTopGap();if(!(n>t+(o?0:i)-(r&&!o?0:a)))return this.unstickBanner(),void this.resetLastViewportTop();!o&&this.syncWidthWithLeftColumn();var s=void 0;r?(s=this.getTopOffset(this.getCurrentTop(),n,i),this.lastViewportTop=n):(s=a,this.resetLastViewportTop());var c=this.getWindowHorizontalScroll(),d=this.alignPositionToPreventOverflow(s,c),u=d.top,l=d.left;this.stickBanner(u,l)}},shouldPreventSticking:function(){return Daria.is3pane()||"MSIE"===Daria.UA.BrowserName},getStaticBannerTop:function(){return this.$node.parent().offset().top},getViewportTop:function(){return this.getModel("scroller-left").getScrollTop()},getWindowHorizontalScroll:function(){return window.pageXOffset},getBannerHeight:function(){return this.$node.height()},getBannerOverheight:function(){var e=this.getModel("timeline-state"),t=window.innerHeight,n=this.getBannerHeight(),i=e.get(".height"),r=n+i;return Math.max(r-t,0)},isBannerStuck:function(){return"fixed"===this.$node.css("position")},lazyCheckBannerStuck:function(){return!this.shouldPreventSticking()&&this.isBannerStuck()},getTopGap:function(){return this.getModel("scroller-messages").FIXED_TOOLBAR_HEIGHT-1},getCurrentTop:function(){return parseInt(this.$node.css("top"),10)||0},getTopOffset:function(e,t,n){var i=null===this.lastViewportTop,r=i?-n:this.lastViewportTop-t,o=r>0,a=r<0;return r?o?Math.min(e+r,this.getTopGap()):a?Math.max(e+r,-n):void 0:e},alignPositionToPreventOverflow:function(e,t){var n=this.leftColumnOffset();return{top:this.alignTopToPreventOverflow(e,n),left:this.alignLeftToPreventOverflow(t,n)}},alignTopToPreventOverflow:function(e,t){var n=t.bottom,i=this.getViewportTop(),r=this.getBannerHeight(),o=this.getThemeBottomGap(),a=i+e+r+o,s=n-i-r-o;return a>n?s:e},alignLeftToPreventOverflow:function(e,t){return t.left-e},leftColumnOffset:function(){var e=this.$node.closest(".js-layout-aside-inner-box"),t=e.offset();return{top:t.top,bottom:t.top+e.outerHeight(),left:t.left}},getThemeBottomGap:function(){return this.skinSaverHeight+this.themeCopyrightHeight},stickBanner:function(e,t){this.syncHeightWithWrapper(),this.$node.css({position:"fixed",zIndex:2,bottom:"",top:e,left:t})},unstickBanner:function(){this.$node.removeAttr("style"),this.$node.parent().removeAttr("style")},resetLastViewportTop:function(){this.lastViewportTop=null},syncHeightWithWrapperAndUpdatePosition:function(){this.lazyCheckBannerStuck()&&(this.syncHeightWithWrapper(),this.updatePosition())},syncHeightWithWrapper:function(){this.$node.parent().outerHeight(this.$node.outerHeight())},onShow:function(){this.getModel("scroller-left").init()},onChangeLeftColumnWidth:function(){this.lazyCheckBannerStuck()&&this.syncWidthWithLeftColumn()},syncWidthWithLeftColumn:function(){var e=$(document).find(".js-layout-aside-inner-box");this.$node.width(e.width())},hide:function(){Daria.AdBlock.enabled&&(clearTimeout(this._timeout),this._draw.cancel())}}})},999:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(275);ns.View.define(Object(i.default)("messages-direct"),{events:{"ns-page-after-load@show":"showDirect","yabs:ready@init":"showDirect","daria:vThemesSelector:new-schema@init":"showDirect","ns-view-htmlinit":"onHtmlInit"},yateModule:"mail",methods:{_renderContent:function(){this.nodeId=Object(i.default)("js-messages-direct"),this.node.innerHTML='<div class="'+Object(i.default)("mail-DirectLine")+'">\n                <div class="'+Object(i.default)("mail-DirectLine-Content")+'" id="'+this.nodeId+'"></div>\n            </div>',Jane.HAS_AD||this.$node.addClass("is-hidden")},showDirect:function(){Jane.HAS_AD&&Daria.yabs&&Daria.yabs.showDirect(this.nodeId)},onHtmlInit:function(){this.$node.addClass(Object(i.default)("mail-DirectLineContainer")),this._renderContent()}}})}});