webpackJsonp([0],Array(133).concat([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1067);n.n(i);Jane.module("mail.js",function(){n(1068),n(1069),n(1070),n(1071),n(1072),n(1076),n(1077),n(1081),n(1082),n(1083),n(1084),n(1085),n(1086),n(1087),n(1088),n(1089),n(1090),n(1091),n(1092),n(1093),n(1094),n(1095),n(1096),n(1097),n(1098),n(1101),n(1102),n(1103),n(1104),n(1105),n(1106),n(1107),n(1108),n(1109),n(1113),n(1114),n(1115),n(1116),n(1117),n(1118),n(1119),n(1120),n(1121),n(1122),n(1138),n(1470),n(1471),n(1578),n(1581),n(1582),n(1583),n(1661),n(1663),n(1664),n(1665),n(1666),n(1667),n(1668),n(1669),n(1671),Daria.hasFeature("react-statusline")?Daria.Statusline=Daria.React.initStatusline():n(2024)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(1771)()},function(e,t,n){"use strict";function i(e){return!!e&&"yes"}var r=n(232),o=n(230),s=n(398),a=n(399),u=a({preset:{Render:r.createElement.bind(r),Base:r.Component,classAttribute:"className",PropTypes:o},naming:s.origin});r.Component.bool2string=i,e.exports=u.Bem,e.exports.decl=u.decl,e.exports.declMod=u.declMod,e.exports.bool2string=i},function(e,t,n){"use strict";e.exports=n(280)},function(e,t,n){"use strict";function i(e,t,n,i,o,s,a,u){if(r(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,o,s,a,u],d=0;l=new Error(t.replace(/%s/g,function(){return c[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var r=function(e){};e.exports=i},function(e,t,n){"use strict";function i(e,t){function n(){this.constructor=e}Ht(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function r(e){return e.interceptors&&e.interceptors.length>0}function o(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),Se(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function s(e,t){var n=ct();try{var i=e.interceptors;if(i)for(var r=0,o=i.length;r<o&&(t=i[r](t),ye(!t||t.type,"Intercept handlers should return nothing or a change object"),t);r++);return t}finally{dt(n)}}function a(e){return e.changeListeners&&e.changeListeners.length>0}function u(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),Se(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function l(e,t){var n=ct(),i=e.changeListeners;if(i){i=i.slice();for(var r=0,o=i.length;r<o;r++)i[r](t);dt(n)}}function c(){return!!jn.spyListeners.length}function d(e){if(jn.spyListeners.length)for(var t=jn.spyListeners,n=0,i=t.length;n<i;n++)t[n](e)}function f(e){d(Oe({},e,{spyReportStart:!0}))}function p(e){d(e?Oe({},e,Kt):Kt)}function h(e){return jn.spyListeners.push(e),Se(function(){var t=jn.spyListeners.indexOf(e);-1!==t&&jn.spyListeners.splice(t,1)})}function m(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function g(e){ye(!0!==e[Jt],"Illegal state: cannot recycle array as iterator"),Ee(e,Jt,!0);var t=-1;return Ee(e,"next",function(){return t++,{done:t>=this.length,value:t<this.length?this[t]:void 0}}),e}function v(e,t){Ee(e,m(),t)}function _(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function b(e){Object.defineProperty(en.prototype,""+e,_(e))}function y(e){for(var t=Xt;t<e;t++)b(t);Xt=e}function w(e){return Me(e)&&nn(e.$mobx)}function S(e){return an[e]}function k(e,t){ye("function"==typeof t,S("m026")),ye("string"==typeof e&&e.length>0,"actions should have valid names, got: '"+e+"'");var n=function(){return C(e,t,this,arguments)};return n.originalFn=t,n.isMobxAction=!0,n}function C(e,t,n,i){var r=M(e,t,n,i);try{return t.apply(n,i)}finally{D(r)}}function M(e,t,n,i){var r=c()&&!!e,o=0;if(r){o=Date.now();var s=i&&i.length||0,a=new Array(s);if(s>0)for(var u=0;u<s;u++)a[u]=i[u];f({type:"action",name:e,fn:t,object:n,arguments:a})}var l=ct();return Ye(),{prevDerivation:l,prevAllowStateChanges:P(!0),notifySpy:r,startTime:o}}function D(e){E(e.prevAllowStateChanges),Xe(),dt(e.prevDerivation),e.notifySpy&&p({time:Date.now()-e.startTime})}function O(e){ye(null===jn.trackingDerivation,S("m028")),jn.strictMode=e,jn.allowStateChanges=!e}function x(){return jn.strictMode}function T(e,t){var n,i=P(e);try{n=t()}finally{E(i)}return n}function P(e){var t=jn.allowStateChanges;return jn.allowStateChanges=e,t}function E(e){jn.allowStateChanges=e}function I(e,t,n,i,r){function o(o,s,a,u,l){if(void 0===l&&(l=0),ye(r||R(arguments),"This function is a decorator, but it wasn't invoked like a decorator"),a){Te(o,"__mobxLazyInitializers")||Pe(o,"__mobxLazyInitializers",o.__mobxLazyInitializers&&o.__mobxLazyInitializers.slice()||[]);var c=a.value,d=a.initializer;return o.__mobxLazyInitializers.push(function(t){e(t,s,d?d.call(t):c,u,a)}),{enumerable:i,configurable:!0,get:function(){return!0!==this.__mobxDidRunLazyInitializers&&j(this),t.call(this,s)},set:function(e){!0!==this.__mobxDidRunLazyInitializers&&j(this),n.call(this,s,e)}}}var f={enumerable:i,configurable:!0,get:function(){return this.__mobxInitializedProps&&!0===this.__mobxInitializedProps[s]||A(this,s,void 0,e,u,a),t.call(this,s)},set:function(t){this.__mobxInitializedProps&&!0===this.__mobxInitializedProps[s]?n.call(this,s,t):A(this,s,t,e,u,a)}};return(arguments.length<3||5===arguments.length&&l<3)&&Object.defineProperty(o,s,f),f}return r?function(){if(R(arguments))return o.apply(null,arguments);var e=arguments,t=arguments.length;return function(n,i,r){return o(n,i,r,e,t)}}:o}function A(e,t,n,i,r,o){Te(e,"__mobxInitializedProps")||Pe(e,"__mobxInitializedProps",{}),e.__mobxInitializedProps[t]=!0,i(e,t,n,r,o)}function j(e){!0!==e.__mobxDidRunLazyInitializers&&e.__mobxLazyInitializers&&(Pe(e,"__mobxDidRunLazyInitializers",!0),e.__mobxDidRunLazyInitializers&&e.__mobxLazyInitializers.forEach(function(t){return t(e)}))}function R(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]}function L(e){return function(t,n,i){return i&&"function"==typeof i.value?(i.value=k(e,i.value),i.enumerable=!1,i.configurable=!0,i):un(e).apply(this,arguments)}}function N(e,t,n){var i="string"==typeof e?e:e.name||"<unnamed action>",r="function"==typeof e?e:t,o="function"==typeof e?t:n;return ye("function"==typeof r,S("m002")),ye(0===r.length,S("m003")),ye("string"==typeof i&&i.length>0,"actions should have valid names, got: '"+i+"'"),C(i,r,o,void 0)}function F(e){return"function"==typeof e&&!0===e.isMobxAction}function B(e,t,n){var i=function(){return C(t,n,e,arguments)};i.isMobxAction=!0,Pe(e,t,i)}function U(e,t,n){function i(){o(a)}var r,o,s;"string"==typeof e?(r=e,o=t,s=n):(r=e.name||"Autorun@"+_e(),o=e,s=t),ye("function"==typeof o,S("m004")),ye(!1===F(o),S("m005")),s&&(o=o.bind(s));var a=new Ln(r,function(){this.track(i)});return a.schedule(),a.getDisposer()}function $(e,t,n,i){var r,o,s,a;return"string"==typeof e?(r=e,o=t,s=n,a=i):(r="When@"+_e(),o=e,s=t,a=n),U(r,function(e){if(o.call(a)){e.dispose();var t=ct();s.call(a),dt(t)}})}function z(e,t,n,i){function r(){s(c)}var o,s,a,u;"string"==typeof e?(o=e,s=t,a=n,u=i):(o=e.name||"AutorunAsync@"+_e(),s=e,a=t,u=n),ye(!1===F(s),S("m006")),void 0===a&&(a=1),u&&(s=s.bind(u));var l=!1,c=new Ln(o,function(){l||(l=!0,setTimeout(function(){l=!1,c.isDisposed||c.track(r)},a))});return c.schedule(),c.getDisposer()}function V(e,t,n){function i(){if(!u.isDisposed){var n=!1;u.track(function(){var t=e(u);n=xe(r.compareStructural,o,t),o=t}),s&&r.fireImmediately&&t(o,u),s||!0!==n||t(o,u),s&&(s=!1)}}arguments.length>3&&be(S("m007")),ae(e)&&be(S("m008"));var r;r="object"==typeof n?n:{},r.name=r.name||e.name||t.name||"Reaction@"+_e(),r.fireImmediately=!0===n||!0===r.fireImmediately,r.delay=r.delay||0,r.compareStructural=r.compareStructural||r.struct||!1,t=cn(r.name,r.context?t.bind(r.context):t),r.context&&(e=e.bind(r.context));var o,s=!0,a=!1,u=new Ln(r.name,function(){s||r.delay<1?i():a||(a=!0,setTimeout(function(){a=!1,i()},r.delay))});return u.schedule(),u.getDisposer()}function H(e,t){if(Z(e))return e.$mobx;ye(Object.isExtensible(e),S("m035")),De(e)||(t=(e.constructor.name||"ObservableObject")+"@"+_e()),t||(t="ObservableObject@"+_e());var n=new pn(e,t);return Ee(e,"$mobx",n),n}function q(e,t,n,i){if(e.values[t])return ye("value"in n,"The property "+t+" in "+e.name+" is already observable, cannot redefine it as computed property"),void(e.target[t]=n.value);if("value"in n)if(ae(n.value)){var r=n.value;W(e,t,r.initialValue,r.enhancer)}else F(n.value)&&!0===n.value.autoBind?B(e.target,t,n.value.originalFn):fn(n.value)?K(e,t,n.value):W(e,t,n.value,i);else G(e,t,n.get,n.set,!1,!0)}function W(e,t,n,i){if(Ae(e.target,t),r(e)){var o=s(e,{object:e.target,name:t,type:"add",newValue:n});if(!o)return;n=o.newValue}n=(e.values[t]=new on(n,i,e.name+"."+t,!1)).value,Object.defineProperty(e.target,t,J(t)),Q(e,e.target,t,n)}function G(e,t,n,i,r,o){o&&Ae(e.target,t),e.values[t]=new dn(n,e.target,r,e.name+"."+t,i),o&&Object.defineProperty(e.target,t,Y(t))}function K(e,t,n){var i=e.name+"."+t;n.name=i,n.scope||(n.scope=e.target),e.values[t]=n,Object.defineProperty(e.target,t,Y(t))}function J(e){return hn[e]||(hn[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.values[e].get()},set:function(t){X(this,e,t)}})}function Y(e){return mn[e]||(mn[e]={configurable:!0,enumerable:!1,get:function(){return this.$mobx.values[e].get()},set:function(t){return this.$mobx.values[e].set(t)}})}function X(e,t,n){var i=e.$mobx,o=i.values[t];if(r(i)){var u=s(i,{type:"update",object:e,name:t,newValue:n});if(!u)return;n=u.newValue}if((n=o.prepareNewValue(n))!==rn){var d=a(i),h=c(),u=d||h?{type:"update",object:e,oldValue:o.value,name:t,newValue:n}:null;h&&f(u),o.setNewValue(n),d&&l(i,u),h&&p()}}function Q(e,t,n,i){var r=a(e),o=c(),s=r||o?{type:"add",object:t,name:n,newValue:i}:null;o&&f(s),r&&l(e,s),o&&p()}function Z(e){return!!Me(e)&&(j(e),gn(e.$mobx))}function ee(e,t){if(null===e||void 0===e)return!1;if(void 0!==t){if(w(e)||Dn(e))throw new Error(S("m019"));if(Z(e)){var n=e.$mobx;return n.values&&!!n.values[t]}return!1}return Z(e)||!!e.$mobx||Gt(e)||Bn(e)||fn(e)}function te(e){return ye(!!e,":("),I(function(t,n,i,r,o){Ae(t,n),ye(!o||!o.get,S("m022")),W(H(t,void 0),n,i,e)},function(e){var t=this.$mobx.values[e];if(void 0!==t)return t.get()},function(e,t){X(this,e,t)},!0,!1)}function ne(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return re(e,le,t)}function ie(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return re(e,de,t)}function re(e,t,n){ye(arguments.length>=2,S("m014")),ye("object"==typeof e,S("m015")),ye(!Dn(e),S("m016")),n.forEach(function(e){ye("object"==typeof e,S("m017")),ye(!ee(e),S("m018"))});for(var i=H(e),r={},o=n.length-1;o>=0;o--){var s=n[o];for(var a in s)if(!0!==r[a]&&Te(s,a)){if(r[a]=!0,e===s&&!Ie(e,a))continue;var u=Object.getOwnPropertyDescriptor(s,a);q(i,a,u,t)}}return e}function oe(e){if(void 0===e&&(e=void 0),"string"==typeof arguments[1])return vn.apply(null,arguments);if(ye(arguments.length<=1,S("m021")),ye(!ae(e),S("m020")),ee(e))return e;var t=le(e,void 0,void 0);return t!==e?t:kn.box(e)}function se(e){be("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}function ae(e){return"object"==typeof e&&null!==e&&!0===e.isMobxModifierDescriptor}function ue(e,t){return ye(!ae(t),"Modifiers cannot be nested"),{isMobxModifierDescriptor:!0,initialValue:t,enhancer:e}}function le(e,t,n){return ae(e)&&be("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),ee(e)?e:Array.isArray(e)?kn.array(e,n):De(e)?kn.object(e,n):Be(e)?kn.map(e,n):e}function ce(e,t,n){return ae(e)&&be("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),void 0===e||null===e?e:Z(e)||w(e)||Dn(e)?e:Array.isArray(e)?kn.shallowArray(e,n):De(e)?kn.shallowObject(e,n):Be(e)?kn.shallowMap(e,n):be("The shallow modifier / decorator can only used in combination with arrays, objects and maps")}function de(e){return e}function fe(e,t,n){if(Re(e,t))return t;if(ee(e))return e;if(Array.isArray(e))return new en(e,fe,n);if(Be(e))return new Mn(e,fe,n);if(De(e)){var i={};return H(i,n),re(i,fe,[e]),i}return e}function pe(e,t,n){return Re(e,t)?t:e}function he(e,t){return void 0===t&&(t=void 0),we(S("m023")),me.apply(void 0,arguments)}function me(e,t){return void 0===t&&(t=void 0),C("",e)}function ge(e){return we("`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead"),kn.map(e)}function ve(){return global}function _e(){return++jn.mobxGuid}function be(e,t){throw ye(!1,e,t),"X"}function ye(e,t,n){if(!e)throw new Error("[mobx] Invariant failed: "+t+(n?" in '"+n+"'":""))}function we(e){return-1===Tn.indexOf(e)&&(Tn.push(e),console.error("[mobx] Deprecated: "+e),!0)}function Se(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}function ke(e){var t=[];return e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t}function Ce(e,t,n){return void 0===t&&(t=100),void 0===n&&(n=" - "),e?e.slice(0,t).join(n)+(e.length>t?" (... and "+(e.length-t)+"more)":""):""}function Me(e){return null!==e&&"object"==typeof e}function De(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function Oe(){for(var e=arguments[0],t=1,n=arguments.length;t<n;t++){var i=arguments[t];for(var r in i)Te(i,r)&&(e[r]=i[r])}return e}function xe(e,t,n){return"number"==typeof t&&isNaN(t)?"number"!=typeof n||!isNaN(n):e?!Re(t,n):t!==n}function Te(e,t){return En.call(e,t)}function Pe(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Ee(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Ie(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!n||!1!==n.configurable&&!1!==n.writable}function Ae(e,t){ye(Ie(e,t),"Cannot make property '"+t+"' observable, it is not configurable and writable in the target object")}function je(e){var t=[];for(var n in e)t.push(n);return t}function Re(e,t){if(null===e&&null===t)return!0;if(void 0===e&&void 0===t)return!0;if("object"!=typeof e)return e===t;var n=Ne(e),i=Fe(e);if(n!==Ne(t))return!1;if(i!==Fe(t))return!1;if(n){if(e.length!==t.length)return!1;for(var r=e.length-1;r>=0;r--)if(!Re(e[r],t[r]))return!1;return!0}if(i){if(e.size!==t.size)return!1;var o=!0;return e.forEach(function(e,n){o=o&&Re(t.get(n),e)}),o}if("object"==typeof e&&"object"==typeof t){if(null===e||null===t)return!1;if(Fe(e)&&Fe(t))return e.size===t.size&&Re(kn.shallowMap(e).entries(),kn.shallowMap(t).entries());if(je(e).length!==je(t).length)return!1;for(var s in e){if(!(s in t))return!1;if(!Re(e[s],t[s]))return!1}return!0}return!1}function Le(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return Me(e)&&!0===e[n]}}function Ne(e){return Array.isArray(e)||w(e)}function Fe(e){return Be(e)||Dn(e)}function Be(e){return void 0!==ve().Map&&e instanceof ve().Map}function Ue(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function $e(e){return null===e?null:"object"==typeof e?""+e:e}function ze(){var e=ve(),t=jn;if(e.__mobservableTrackingStack||e.__mobservableViewStack)throw new Error("[mobx] An incompatible version of mobservable is already loaded.");if(e.__mobxGlobal&&e.__mobxGlobal.version!==t.version)throw new Error("[mobx] An incompatible version of mobx is already loaded.");e.__mobxGlobal?jn=e.__mobxGlobal:e.__mobxGlobal=t}function Ve(){return jn}function He(){jn.resetId++;var e=new An;for(var t in e)-1===In.indexOf(t)&&(jn[t]=e[t]);jn.allowStateChanges=!jn.strictMode}function qe(e){return e.observers&&e.observers.length>0}function We(e){return e.observers}function Ge(e,t){var n=e.observers.length;n&&(e.observersIndexes[t.__mapid]=n),e.observers[n]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Ke(e,t){if(1===e.observers.length)e.observers.length=0,Je(e);else{var n=e.observers,i=e.observersIndexes,r=n.pop();if(r!==t){var o=i[t.__mapid]||0;o?i[r.__mapid]=o:delete i[r.__mapid],n[o]=r}delete i[t.__mapid]}}function Je(e){e.isPendingUnobservation||(e.isPendingUnobservation=!0,jn.pendingUnobservations.push(e))}function Ye(){jn.inBatch++}function Xe(){if(0==--jn.inBatch){mt();for(var e=jn.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.length&&n.onBecomeUnobserved()}jn.pendingUnobservations=[]}}function Qe(e){var t=jn.trackingDerivation;null!==t?t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e):0===e.observers.length&&Je(e)}function Ze(e){if(e.lowestObserverState!==xn.STALE){e.lowestObserverState=xn.STALE;for(var t=e.observers,n=t.length;n--;){var i=t[n];i.dependenciesState===xn.UP_TO_DATE&&i.onBecomeStale(),i.dependenciesState=xn.STALE}}}function et(e){if(e.lowestObserverState!==xn.STALE){e.lowestObserverState=xn.STALE;for(var t=e.observers,n=t.length;n--;){var i=t[n];i.dependenciesState===xn.POSSIBLY_STALE?i.dependenciesState=xn.STALE:i.dependenciesState===xn.UP_TO_DATE&&(e.lowestObserverState=xn.UP_TO_DATE)}}}function tt(e){if(e.lowestObserverState===xn.UP_TO_DATE){e.lowestObserverState=xn.POSSIBLY_STALE;for(var t=e.observers,n=t.length;n--;){var i=t[n];i.dependenciesState===xn.UP_TO_DATE&&(i.dependenciesState=xn.POSSIBLY_STALE,i.onBecomeStale())}}}function nt(e){return e instanceof Rn}function it(e){switch(e.dependenciesState){case xn.UP_TO_DATE:return!1;case xn.NOT_TRACKING:case xn.STALE:return!0;case xn.POSSIBLY_STALE:for(var t=ct(),n=e.observing,i=n.length,r=0;r<i;r++){var o=n[r];if(fn(o)){try{o.get()}catch(e){return dt(t),!0}if(e.dependenciesState===xn.STALE)return dt(t),!0}}return ft(e),dt(t),!1}}function rt(){return null!==jn.trackingDerivation}function ot(e){var t=e.observers.length>0;jn.computationDepth>0&&t&&be(S("m031")+e.name),!jn.allowStateChanges&&t&&be(S(jn.strictMode?"m030a":"m030b")+e.name)}function st(e,t,n){ft(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++jn.runId;var i=jn.trackingDerivation;jn.trackingDerivation=e;var r;try{r=t.call(n)}catch(e){r=new Rn(e)}return jn.trackingDerivation=i,at(e),r}function at(e){var t=e.observing,n=e.observing=e.newObserving,i=xn.UP_TO_DATE;e.newObserving=null;for(var r=0,o=e.unboundDepsCount,s=0;s<o;s++){var a=n[s];0===a.diffValue&&(a.diffValue=1,r!==s&&(n[r]=a),r++),a.dependenciesState>i&&(i=a.dependenciesState)}for(n.length=r,o=t.length;o--;){var a=t[o];0===a.diffValue&&Ke(a,e),a.diffValue=0}for(;r--;){var a=n[r];1===a.diffValue&&(a.diffValue=0,Ge(a,e))}i!==xn.UP_TO_DATE&&(e.dependenciesState=i,e.onBecomeStale())}function ut(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)Ke(t[n],e);e.dependenciesState=xn.NOT_TRACKING}function lt(e){var t=ct(),n=e();return dt(t),n}function ct(){var e=jn.trackingDerivation;return jn.trackingDerivation=null,e}function dt(e){jn.trackingDerivation=e}function ft(e){if(e.dependenciesState!==xn.UP_TO_DATE){e.dependenciesState=xn.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=xn.UP_TO_DATE}}function pt(e){ye(this&&this.$mobx&&Bn(this.$mobx),"Invalid `this`"),ye(!this.$mobx.errorHandler,"Only one onErrorHandler can be registered"),this.$mobx.errorHandler=e}function ht(e){return jn.globalReactionErrorHandlers.push(e),function(){var t=jn.globalReactionErrorHandlers.indexOf(e);t>=0&&jn.globalReactionErrorHandlers.splice(t,1)}}function mt(){jn.inBatch>0||jn.isRunningReactions||Fn(gt)}function gt(){jn.isRunningReactions=!0;for(var e=jn.pendingReactions,t=0;e.length>0;){++t===Nn&&(console.error("Reaction doesn't converge to a stable state after "+Nn+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction()}jn.isRunningReactions=!1}function vt(e){var t=Fn;Fn=function(n){return e(function(){return t(n)})}}function _t(e){return we("asReference is deprecated, use observable.ref instead"),kn.ref(e)}function bt(e){return we("asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead."),kn.struct(e)}function yt(e){return we("asFlat is deprecated, use observable.shallow instead"),kn.shallow(e)}function wt(e){return we("asMap is deprecated, use observable.map or observable.shallowMap instead"),kn.map(e||{})}function St(e){return I(function(t,n,i,r,o){ye(void 0!==o,S("m009")),ye("function"==typeof o.get,S("m010")),G(H(t,""),n,o.get,o.set,e,!1)},function(e){var t=this.$mobx.values[e];if(void 0!==t)return t.get()},function(e,t){this.$mobx.values[e].set(t)},!1,!1)}function kt(e,t){if("object"==typeof e&&null!==e){if(w(e))return ye(void 0===t,S("m036")),e.$mobx.atom;if(Dn(e)){var n=e;if(void 0===t)return kt(n._keys);var i=n._data[t]||n._hasMap[t];return ye(!!i,"the entry '"+t+"' does not exist in the observable map '"+Mt(e)+"'"),i}if(j(e),Z(e)){if(!t)return be("please specify a property");var i=e.$mobx.values[t];return ye(!!i,"no observable property '"+t+"' found on the observable object '"+Mt(e)+"'"),i}if(Gt(e)||fn(e)||Bn(e))return e}else if("function"==typeof e&&Bn(e.$mobx))return e.$mobx;return be("Cannot obtain atom from "+e)}function Ct(e,t){return ye(e,"Expecting some object"),void 0!==t?Ct(kt(e,t)):Gt(e)||fn(e)||Bn(e)?e:Dn(e)?e:(j(e),e.$mobx?e.$mobx:void ye(!1,"Cannot obtain administration from "+e))}function Mt(e,t){var n;return n=void 0!==t?kt(e,t):Z(e)||Dn(e)?Ct(e):kt(e),n.name}function Dt(e,t){if(null===e||void 0===e)return!1;if(void 0!==t){if(!1===Z(e))return!1;var n=kt(e,t);return fn(n)}return fn(e)}function Ot(e,t,n,i){return"function"==typeof n?Tt(e,t,n,i):xt(e,t,n)}function xt(e,t,n){return Ct(e).observe(t,n)}function Tt(e,t,n,i){return Ct(e,t).observe(n,i)}function Pt(e,t,n){return"function"==typeof n?It(e,t,n):Et(e,t)}function Et(e,t){return Ct(e).intercept(t)}function It(e,t,n){return Ct(e,t).intercept(n)}function At(e,t){return rt()||console.warn(S("m013")),zn(e,{context:t}).get()}function jt(e,t,n){function i(i){return t&&n.push([e,i]),i}if(void 0===t&&(t=!0),void 0===n&&(n=[]),ee(e)){if(t&&null===n&&(n=[]),t&&null!==e&&"object"==typeof e)for(var r=0,o=n.length;r<o;r++)if(n[r][0]===e)return n[r][1];if(w(e)){var s=i([]),a=e.map(function(e){return jt(e,t,n)});s.length=a.length;for(var r=0,o=a.length;r<o;r++)s[r]=a[r];return s}if(Z(e)){var s=i({});for(var u in e)s[u]=jt(e[u],t,n);return s}if(Dn(e)){var l=i({});return e.forEach(function(e,i){return l[i]=jt(e,t,n)}),l}if(sn(e))return jt(e.get(),t,n)}return e}function Rt(e,t){ye("function"==typeof e&&e.length<2,"createTransformer expects a function that accepts one argument");var n={},r=jn.resetId,o=function(r){function o(t,n){var i=r.call(this,function(){return e(n)},void 0,!1,"Transformer-"+e.name+"-"+t,void 0)||this;return i.sourceIdentifier=t,i.sourceObject=n,i}return i(o,r),o.prototype.onBecomeUnobserved=function(){var e=this.value;r.prototype.onBecomeUnobserved.call(this),delete n[this.sourceIdentifier],t&&t(e,this.sourceObject)},o}(dn);return function(e){r!==jn.resetId&&(n={},r=jn.resetId);var t=Lt(e),i=n[t];return i?i.get():(i=n[t]=new o(t,e),i.get())}}function Lt(e){if("string"==typeof e||"number"==typeof e)return e;if(null===e||"object"!=typeof e)throw new Error("[mobx] transform expected some kind of object or primitive value, got: "+e);var t=e.$transformId;return void 0===t&&(t=_e(),Pe(e,"$transformId",t)),t}function Nt(e){return console.log(e),e}function Ft(e,t){switch(arguments.length){case 0:if(!(e=jn.trackingDerivation))return Nt(S("m024"));break;case 2:e=kt(e,t)}return e=kt(e),fn(e)?Nt(e.whyRun()):Bn(e)?Nt(e.whyRun()):be(S("m025"))}function Bt(e,t){return Ut(kt(e,t))}function Ut(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=ke(e.observing).map(Ut)),t}function $t(e,t){return zt(kt(e,t))}function zt(e){var t={name:e.name};return qe(e)&&(t.observers=We(e).map(zt)),t}function Vt(e,t,n){var i;if(Dn(e)||w(e)||sn(e))i=Ct(e);else{if(!Z(e))return be("Expected observable map, object or array as first array");if("string"!=typeof t)return be("InterceptReads can only be used with a specific property, not with an object in general");i=Ct(e,t)}return void 0!==i.dehancer?be("An intercept reader was already established"):(i.dehancer="function"==typeof t?t:n,function(){i.dehancer=void 0})}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"extras",function(){return Vn}),n.d(t,"Reaction",function(){return Ln}),n.d(t,"untracked",function(){return lt}),n.d(t,"IDerivationState",function(){return xn}),n.d(t,"Atom",function(){return Wt}),n.d(t,"BaseAtom",function(){return qt}),n.d(t,"useStrict",function(){return O}),n.d(t,"isStrictModeEnabled",function(){return x}),n.d(t,"spy",function(){return h}),n.d(t,"asReference",function(){return _t}),n.d(t,"asFlat",function(){return yt}),n.d(t,"asStructure",function(){return bt}),n.d(t,"asMap",function(){return wt}),n.d(t,"isModifierDescriptor",function(){return ae}),n.d(t,"isObservableObject",function(){return Z}),n.d(t,"isBoxedObservable",function(){return sn}),n.d(t,"isObservableArray",function(){return w}),n.d(t,"ObservableMap",function(){return Mn}),n.d(t,"isObservableMap",function(){return Dn}),n.d(t,"map",function(){return ge}),n.d(t,"transaction",function(){return he}),n.d(t,"observable",function(){return kn}),n.d(t,"IObservableFactories",function(){return Sn}),n.d(t,"computed",function(){return zn}),n.d(t,"isObservable",function(){return ee}),n.d(t,"isComputed",function(){return Dt}),n.d(t,"extendObservable",function(){return ne}),n.d(t,"extendShallowObservable",function(){return ie}),n.d(t,"observe",function(){return Ot}),n.d(t,"intercept",function(){return Pt}),n.d(t,"autorun",function(){return U}),n.d(t,"autorunAsync",function(){return z}),n.d(t,"when",function(){return $}),n.d(t,"reaction",function(){return V}),n.d(t,"action",function(){return cn}),n.d(t,"isAction",function(){return F}),n.d(t,"runInAction",function(){return N}),n.d(t,"expr",function(){return At}),n.d(t,"toJS",function(){return jt}),n.d(t,"createTransformer",function(){return Rt}),n.d(t,"whyRun",function(){return Ft}),n.d(t,"isArrayLike",function(){return Ne});var Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},qt=function(){function e(e){void 0===e&&(e="Atom@"+_e()),this.name=e,this.isPendingUnobservation=!0,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=xn.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.reportObserved=function(){Qe(this)},e.prototype.reportChanged=function(){Ye(),Ze(this),Xe()},e.prototype.toString=function(){return this.name},e}(),Wt=function(e){function t(t,n,i){void 0===t&&(t="Atom@"+_e()),void 0===n&&(n=Pn),void 0===i&&(i=Pn);var r=e.call(this,t)||this;return r.name=t,r.onBecomeObservedHandler=n,r.onBecomeUnobservedHandler=i,r.isPendingUnobservation=!1,r.isBeingTracked=!1,r}return i(t,e),t.prototype.reportObserved=function(){return Ye(),e.prototype.reportObserved.call(this),this.isBeingTracked||(this.isBeingTracked=!0,this.onBecomeObservedHandler()),Xe(),!!jn.trackingDerivation},t.prototype.onBecomeUnobserved=function(){this.isBeingTracked=!1,this.onBecomeUnobservedHandler()},t}(qt),Gt=Le("Atom",qt),Kt={spyReportEnd:!0},Jt="__$$iterating",Yt=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),Xt=0,Qt=function(){function e(){}return e}();!function(e,t){void 0!==Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):void 0!==e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}(Qt,Array.prototype);var Zt=function(){function e(e,t,n,i){this.array=n,this.owned=i,this.values=[],this.lastKnownLength=0,this.interceptors=null,this.changeListeners=null,this.atom=new qt(e||"ObservableArray@"+_e()),this.enhancer=function(n,i){return t(n,i,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer?e.map(this.dehancer):e},e.prototype.intercept=function(e){return o(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),u(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>Xt&&y(e+t+1)},e.prototype.spliceWithArray=function(e,t,n){var i=this;ot(this.atom);var o=this.values.length;if(void 0===e?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=1===arguments.length?o-e:void 0===t||null===t?0:Math.max(0,Math.min(t,o-e)),void 0===n&&(n=[]),r(this)){var a=s(this,{object:this.array,type:"splice",index:e,removedCount:t,added:n});if(!a)return On;t=a.removedCount,n=a.added}n=n.map(function(e){return i.enhancer(e,void 0)});var u=n.length-t;this.updateArrayLength(o,u);var l=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,l),this.dehanceValues(l)},e.prototype.spliceItemsIntoValues=function(e,t,n){if(n.length<1e4)return(r=this.values).splice.apply(r,[e,t].concat(n));var i=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),i;var r},e.prototype.notifyArrayChildUpdate=function(e,t,n){var i=!this.owned&&c(),r=a(this),o=r||i?{object:this.array,type:"update",index:e,newValue:t,oldValue:n}:null;i&&f(o),this.atom.reportChanged(),r&&l(this,o),i&&p()},e.prototype.notifyArraySplice=function(e,t,n){var i=!this.owned&&c(),r=a(this),o=r||i?{object:this.array,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;i&&f(o),this.atom.reportChanged(),r&&l(this,o),i&&p()},e}(),en=function(e){function t(t,n,i,r){void 0===i&&(i="ObservableArray@"+_e()),void 0===r&&(r=!1);var o=e.call(this)||this,s=new Zt(i,n,o,r);return Ee(o,"$mobx",s),t&&t.length&&o.spliceWithArray(0,0,t),Yt&&Object.defineProperty(s.array,"0",tn),o}return i(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map(function(e){return w(e)?e.peek():e}))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(e,t,n){void 0===n&&(n=0);var i=this.findIndex.apply(this,arguments);return-1===i?void 0:this.get(i)},t.prototype.findIndex=function(e,t,n){void 0===n&&(n=0);for(var i=this.peek(),r=i.length,o=n;o<r;o++)if(e.call(t,i[o],o,this))return o;return-1},t.prototype.splice=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,n)},t.prototype.spliceWithArray=function(e,t,n){return this.$mobx.spliceWithArray(e,t,n)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,e),n.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(0,0,e),n.values.length},t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function n(e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=this.$mobx.values.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}if(n.call(this,e),n.call(this,t),e!==t){var i,r=this.$mobx.values;i=e<t?r.slice(0,e).concat(r.slice(e+1,t+1),[r[e]],r.slice(t+1)):r.slice(0,t).concat([r[e]],r.slice(t,e),r.slice(e+1)),this.replace(i)}},t.prototype.get=function(e){var t=this.$mobx;if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},t.prototype.set=function(e,t){var n=this.$mobx,i=n.values;if(e<i.length){ot(n.atom);var o=i[e];if(r(n)){var a=s(n,{type:"update",object:this,index:e,newValue:t});if(!a)return;t=a.newValue}t=n.enhancer(t,o);t!==o&&(i[e]=t,n.notifyArrayChildUpdate(e,t,o))}else{if(e!==i.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+i.length);n.spliceWithArray(e,0,[t])}},t}(Qt);v(en.prototype,function(){return g(this.slice())}),Object.defineProperty(en.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(e){var t=Array.prototype[e];ye("function"==typeof t,"Base function not defined on Array prototype: '"+e+"'"),Pe(en.prototype,e,function(){return t.apply(this.peek(),arguments)})}),function(e,t){for(var n=0;n<t.length;n++)Pe(e,t[n],e[t[n]])}(en.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var tn=_(0);y(1e3);var nn=Le("ObservableArrayAdministration",Zt),rn={},on=function(e){function t(t,n,i,r){void 0===i&&(i="ObservableValue@"+_e()),void 0===r&&(r=!0);var o=e.call(this,i)||this;return o.enhancer=n,o.hasUnreportedChange=!1,o.dehancer=void 0,o.value=n(t,void 0,i),r&&c()&&d({type:"create",object:o,newValue:o.value}),o}return i(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==rn){var n=c();n&&f({type:"update",object:this,newValue:e,oldValue:t}),this.setNewValue(e),n&&p()}},t.prototype.prepareNewValue=function(e){if(ot(this),r(this)){var t=s(this,{object:this,type:"update",newValue:e});if(!t)return rn;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.value!==e?e:rn},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),a(this)&&l(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return o(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),u(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return $e(this.get())},t}(qt);on.prototype[Ue()]=on.prototype.valueOf;var sn=Le("ObservableValue",on),an={m001:"It is not allowed to assign new values to @action fields",m002:"`runInAction` expects a function",m003:"`runInAction` expects a function without arguments",m004:"autorun expects a function",m005:"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m006:"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m007:"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object",m008:"wrapping reaction expression in `asReference` is no longer supported, use options object instead",m009:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.",m010:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'",m011:"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments",m012:"computed takes one or two arguments if used as function",m013:"[mobx.expr] 'expr' should only be used inside other reactive functions.",m014:"extendObservable expected 2 or more arguments",m015:"extendObservable expects an object as first argument",m016:"extendObservable should not be used on maps, use map.merge instead",m017:"all arguments of extendObservable should be objects",m018:"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540",m019:"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.",m020:"modifiers can only be used for individual object properties",m021:"observable expects zero or one arguments",m022:"@observable can not be used on getters, use @computed instead",m023:"Using `transaction` is deprecated, use `runInAction` or `(@)action` instead.",m024:"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.",m025:"whyRun can only be used on reactions and computed values",m026:"`action` can only be invoked on functions",m028:"It is not allowed to set `useStrict` when a derivation is running",m029:"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row",m030a:"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ",m030b:"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ",m031:"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: ",m032:"* This computation is suspended (not in use by any reaction) and won't run automatically.\n\tDidn't expect this computation to be suspended at this point?\n\t  1. Make sure this computation is used by a reaction (reaction, autorun, observer).\n\t  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).",m033:"`observe` doesn't support the fire immediately property for observable maps.",m034:"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead",m035:"Cannot make the designated object observable; it is not extensible",m036:"It is not possible to get index atoms from arrays",m037:'Hi there! I\'m sorry you have just run into an exception.\nIf your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)\nthrew an exception and that mobx caught it, to avoid that it brings the rest of your application down.\nThe original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.\n\nHowever, more interesting is the actual stack trace of the error itself.\nHopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.\nSee `error.stack` property, or press the very subtle "(...)" link you see near the console.error message that probably brought you here.\nThat stack is more interesting than the stack of this console.error itself.\n\nIf the exception you see is an exception you created yourself, make sure to use `throw new Error("Oops")` instead of `throw "Oops"`,\nbecause the javascript environment will only preserve the original stack trace in the first form.\n\nYou can also make sure the debugger pauses the next time this very same exception is thrown by enabling "Pause on caught exception".\n(Note that it might pause on many other, unrelated exception as well).\n\nIf that all doesn\'t help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!\n',m038:"Missing items in this list?\n    1. Check whether all used values are properly marked as observable (use isObservable to verify)\n    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.\n"},un=I(function(e,t,n,i,r){var o=i&&1===i.length?i[0]:n.name||t||"<unnamed action>";Pe(e,t,cn(o,n))},function(e){return this[e]},function(){ye(!1,S("m001"))},!1,!0),ln=I(function(e,t,n){B(e,t,n)},function(e){return this[e]},function(){ye(!1,S("m001"))},!1,!1),cn=function(e,t,n,i){return 1===arguments.length&&"function"==typeof e?k(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?k(e,t):1===arguments.length&&"string"==typeof e?L(e):L(t).apply(null,arguments)};cn.bound=function(e,t,n){if("function"==typeof e){var i=k("<not yet bound action>",e);return i.autoBind=!0,i}return ln.apply(null,arguments)};var dn=function(){function e(e,t,n,i,r){this.derivation=e,this.scope=t,this.compareStructural=n,this.dependenciesState=xn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=xn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+_e(),this.value=void 0,this.isComputing=!1,this.isRunningSetter=!1,this.name=i||"ComputedValue@"+_e(),r&&(this.setter=k(i+"-setter",r))}return e.prototype.onBecomeStale=function(){tt(this)},e.prototype.onBecomeUnobserved=function(){ut(this),this.value=void 0},e.prototype.get=function(){ye(!this.isComputing,"Cycle detected in computation "+this.name,this.derivation),0===jn.inBatch?(Ye(),it(this)&&(this.value=this.computeValue(!1)),Xe()):(Qe(this),it(this)&&this.trackAndCompute()&&et(this));var e=this.value;if(nt(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(nt(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){ye(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else ye(!1,"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")},e.prototype.trackAndCompute=function(){c()&&d({object:this.scope,type:"compute",fn:this.derivation});var e=this.value,t=this.value=this.computeValue(!0);return nt(t)||xe(this.compareStructural,t,e)},e.prototype.computeValue=function(e){this.isComputing=!0,jn.computationDepth++;var t;if(e)t=st(this,this.derivation,this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new Rn(e)}return jn.computationDepth--,this.isComputing=!1,t},e.prototype.observe=function(e,t){var n=this,i=!0,r=void 0;return U(function(){var o=n.get();if(!i||t){var s=ct();e({type:"update",object:n,newValue:o,oldValue:r}),dt(s)}i=!1,r=o})},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return $e(this.get())},e.prototype.whyRun=function(){var e=Boolean(jn.trackingDerivation),t=ke(this.isComputing?this.newObserving:this.observing).map(function(e){return e.name}),n=ke(We(this).map(function(e){return e.name}));return"\nWhyRun? computation '"+this.name+"':\n * Running because: "+(e?"[active] the value of this computation is needed by a reaction":this.isComputing?"[get] The value of this computed was requested outside a reaction":"[idle] not running at the moment")+"\n"+(this.dependenciesState===xn.NOT_TRACKING?S("m032"):" * This computation will re-run if any of the following observables changes:\n    "+Ce(t)+"\n    "+(this.isComputing&&e?" (... or any observable accessed during the remainder of the current run)":"")+"\n\t"+S("m038")+"\n\n  * If the outcome of this computation changes, the following observers will be re-run:\n    "+Ce(n)+"\n")},e}();dn.prototype[Ue()]=dn.prototype.valueOf;var fn=Le("ComputedValue",dn),pn=function(){function e(e,t){this.target=e,this.name=t,this.values={},this.changeListeners=null,this.interceptors=null}return e.prototype.observe=function(e,t){return ye(!0!==t,"`observe` doesn't support the fire immediately property for observable objects."),u(this,e)},e.prototype.intercept=function(e){return o(this,e)},e}(),hn={},mn={},gn=Le("ObservableObjectAdministration",pn),vn=te(le),_n=te(ce),bn=te(de),yn=te(fe),wn=te(pe),Sn=function(){function e(){}return e.prototype.box=function(e,t){return arguments.length>2&&se("box"),new on(e,le,t)},e.prototype.shallowBox=function(e,t){return arguments.length>2&&se("shallowBox"),new on(e,de,t)},e.prototype.array=function(e,t){return arguments.length>2&&se("array"),new en(e,le,t)},e.prototype.shallowArray=function(e,t){return arguments.length>2&&se("shallowArray"),new en(e,de,t)},e.prototype.map=function(e,t){return arguments.length>2&&se("map"),new Mn(e,le,t)},e.prototype.shallowMap=function(e,t){return arguments.length>2&&se("shallowMap"),new Mn(e,de,t)},e.prototype.object=function(e,t){arguments.length>2&&se("object");var n={};return H(n,t),ne(n,e),n},e.prototype.shallowObject=function(e,t){arguments.length>2&&se("shallowObject");var n={};return H(n,t),ie(n,e),n},e.prototype.ref=function(){return arguments.length<2?ue(de,arguments[0]):bn.apply(null,arguments)},e.prototype.shallow=function(){return arguments.length<2?ue(ce,arguments[0]):_n.apply(null,arguments)},e.prototype.deep=function(){return arguments.length<2?ue(le,arguments[0]):vn.apply(null,arguments)},e.prototype.struct=function(){return arguments.length<2?ue(fe,arguments[0]):yn.apply(null,arguments)},e}(),kn=oe;Object.getOwnPropertyNames(Sn.prototype).filter(function(e){return"constructor"!==e}).forEach(function(e){return kn[e]=Sn.prototype[e]}),kn.deep.struct=kn.struct,kn.ref.struct=function(){return arguments.length<2?ue(pe,arguments[0]):wn.apply(null,arguments)};var Cn={},Mn=function(){function e(e,t,n){void 0===t&&(t=le),void 0===n&&(n="ObservableMap@"+_e()),this.enhancer=t,this.name=n,this.$mobx=Cn,this._data=Object.create(null),this._hasMap=Object.create(null),this._keys=new en(void 0,de,this.name+".keys()",!0),this.interceptors=null,this.changeListeners=null,this.dehancer=void 0,this.merge(e)}return e.prototype._has=function(e){return void 0!==this._data[e]},e.prototype.has=function(e){return!!this.isValidKey(e)&&(e=""+e,this._hasMap[e]?this._hasMap[e].get():this._updateHasMapEntry(e,!1).get())},e.prototype.set=function(e,t){this.assertValidKey(e),e=""+e;var n=this._has(e);if(r(this)){var i=s(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(this.assertValidKey(e),e=""+e,r(this)){var n=s(this,{type:"delete",object:this,name:e});if(!n)return!1}if(this._has(e)){var i=c(),o=a(this),n=o||i?{type:"delete",object:this,oldValue:this._data[e].value,name:e}:null;return i&&f(n),me(function(){t._keys.remove(e),t._updateHasMapEntry(e,!1),t._data[e].setNewValue(void 0),t._data[e]=void 0}),o&&l(this,n),i&&p(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap[e];return n?n.setNewValue(t):n=this._hasMap[e]=new on(t,de,this.name+"."+e+"?",!1),n},e.prototype._updateValue=function(e,t){var n=this._data[e];if((t=n.prepareNewValue(t))!==rn){var i=c(),r=a(this),o=r||i?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;i&&f(o),n.setNewValue(t),r&&l(this,o),i&&p()}},e.prototype._addValue=function(e,t){var n=this;me(function(){var i=n._data[e]=new on(t,n.enhancer,n.name+"."+e,!1);t=i.value,n._updateHasMapEntry(e,!0),n._keys.push(e)});var i=c(),r=a(this),o=r||i?{type:"add",object:this,name:e,newValue:t}:null;i&&f(o),r&&l(this,o),i&&p()},e.prototype.get=function(e){return e=""+e,this.has(e)?this.dehanceValue(this._data[e].get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return g(this._keys.slice())},e.prototype.values=function(){return g(this._keys.map(this.get,this))},e.prototype.entries=function(){var e=this;return g(this._keys.map(function(t){return[t,e.get(t)]}))},e.prototype.forEach=function(e,t){var n=this;this.keys().forEach(function(i){return e.call(t,n.get(i),i,n)})},e.prototype.merge=function(e){var t=this;return Dn(e)&&(e=e.toJS()),me(function(){De(e)?Object.keys(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(e){var n=e[0],i=e[1];return t.set(n,i)}):Be(e)?e.forEach(function(e,n){return t.set(n,e)}):null!==e&&void 0!==e&&be("Cannot initialize map from "+e)}),this},e.prototype.clear=function(){var e=this;me(function(){lt(function(){e.keys().forEach(e.delete,e)})})},e.prototype.replace=function(e){var t=this;return me(function(){t.clear(),t.merge(e)}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.toJS=function(){var e=this,t={};return this.keys().forEach(function(n){return t[n]=e.get(n)}),t},e.prototype.toJSON=function(){return this.toJS()},e.prototype.isValidKey=function(e){return null!==e&&void 0!==e&&("string"==typeof e||"number"==typeof e||"boolean"==typeof e)},e.prototype.assertValidKey=function(e){if(!this.isValidKey(e))throw new Error("[mobx.map] Invalid key: '"+e+"', only strings, numbers and booleans are accepted as key in observable maps.")},e.prototype.toString=function(){var e=this;return this.name+"[{ "+this.keys().map(function(t){return t+": "+e.get(t)}).join(", ")+" }]"},e.prototype.observe=function(e,t){return ye(!0!==t,S("m033")),u(this,e)},e.prototype.intercept=function(e){return o(this,e)},e}();v(Mn.prototype,function(){return this.entries()});var Dn=Le("ObservableMap",Mn),On=[];Object.freeze(On);var xn,Tn=[],Pn=function(){},En=Object.prototype.hasOwnProperty,In=["mobxGuid","resetId","spyListeners","strictMode","runId"],An=function(){function e(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.strictMode=!1,this.resetId=0,this.spyListeners=[],this.globalReactionErrorHandlers=[]}return e}(),jn=new An;!function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(xn||(xn={}));var Rn=function(){function e(e){this.cause=e}return e}(),Ln=function(){function e(e,t){void 0===e&&(e="Reaction@"+_e()),this.name=e,this.onInvalidate=t,this.observing=[],this.newObserving=[],this.dependenciesState=xn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+_e(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,jn.pendingReactions.push(this),mt())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){this.isDisposed||(Ye(),this._isScheduled=!1,it(this)&&(this._isTrackPending=!0,this.onInvalidate(),this._isTrackPending&&c()&&d({object:this,type:"scheduled-reaction"})),Xe())},e.prototype.track=function(e){Ye();var t,n=c();n&&(t=Date.now(),f({object:this,type:"reaction",fn:e})),this._isRunning=!0;var i=st(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&ut(this),nt(i)&&this.reportExceptionInDerivation(i.cause),n&&p({time:Date.now()-t}),Xe()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)return void this.errorHandler(e,this);var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this,i=S("m037");console.error(n||i,e),c()&&d({type:"error",message:n,error:e,object:this}),jn.globalReactionErrorHandlers.forEach(function(n){return n(e,t)})},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ye(),ut(this),Xe()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e.onError=pt,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.whyRun=function(){var e=ke(this._isRunning?this.newObserving:this.observing).map(function(e){return e.name});return"\nWhyRun? reaction '"+this.name+"':\n * Status: ["+(this.isDisposed?"stopped":this._isRunning?"running":this.isScheduled()?"scheduled":"idle")+"]\n * This reaction will re-run if any of the following observables changes:\n    "+Ce(e)+"\n    "+(this._isRunning?" (... or any observable accessed during the remainder of the current run)":"")+"\n\t"+S("m038")+"\n"},e}(),Nn=100,Fn=function(e){return e()},Bn=Le("Reaction",Ln),Un=St(!1),$n=St(!0),zn=function(e,t,n){if("string"==typeof t)return Un.apply(null,arguments);ye("function"==typeof e,S("m011")),ye(arguments.length<3,S("m012"));var i="object"==typeof t?t:{};return i.setter="function"==typeof t?t:i.setter,new dn(e,i.context,i.compareStructural||i.struct||!1,i.name||e.name||"",i.setter)};zn.struct=$n;var Vn={allowStateChanges:T,deepEqual:Re,getAtom:kt,getDebugName:Mt,getDependencyTree:Bt,getAdministration:Ct,getGlobalState:Ve,getObserverTree:$t,interceptReads:Vt,isComputingDerivation:rt,isSpyEnabled:c,onReactionError:ht,reserveArrayBuffer:y,resetGlobalState:He,shareGlobalState:ze,spyReport:d,spyReportEnd:p,spyReportStart:f,setReactionScheduler:vt},Hn={Reaction:Ln,untracked:lt,Atom:Wt,BaseAtom:qt,useStrict:O,isStrictModeEnabled:x,spy:h,asReference:_t,asFlat:yt,asStructure:bt,asMap:wt,isModifierDescriptor:ae,isObservableObject:Z,isBoxedObservable:sn,isObservableArray:w,ObservableMap:Mn,isObservableMap:Dn,map:ge,transaction:he,observable:kn,computed:zn,isObservable:ee,isComputed:Dt,extendObservable:ne,extendShallowObservable:ie,observe:Ot,intercept:Pt,autorun:U,autorunAsync:z,when:$,reaction:V,action:cn,isAction:F,runInAction:N,expr:At,toJS:jt,createTransformer:Rt,whyRun:Ft,isArrayLike:Ne,extras:Vn},qn=!1;for(var Wn in Hn)!function(e){var t=Hn[e];Object.defineProperty(Hn,e,{get:function(){return qn||(qn=!0,console.warn("Using default export (`import mobx from 'mobx'`) is deprecated and won’t work in mobx@4.0.0\nUse `import * as mobx from 'mobx'` instead")),t}})}(Wn);"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:h,extras:Vn}),t.default=Hn},function(e,t,n){"use strict";function i(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var r=new Error(n);throw r.name="Invariant Violation",r.framesToPop=1,r}e.exports=i},function(e,t,n){"use strict";var i=n(249),r=i;e.exports=r},function(e,t,n){"use strict";e.exports=n(1672)},function(e,t,n){!function(e,i){i(t,n(234),n(232),n(237))}(0,function(e,t,n,i){"use strict";function r(e){function n(n,i,r,o,s,a){for(var u=arguments.length,l=Array(u>6?u-6:0),c=6;c<u;c++)l[c-6]=arguments[c];return t.untracked(function(){if(o=o||"<<anonymous>>",a=a||r,null==i[r]){if(n){var t=null===i[r]?"null":"undefined";return new Error("The "+s+" `"+a+"` is marked as required in `"+o+"`, but its value is `"+t+"`.")}return null}return e.apply(void 0,[i,r,o,s,a].concat(l))})}var i=n.bind(null,!1);return i.isRequired=n.bind(null,!0),i}function o(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function s(e){var t=void 0===e?"undefined":C(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":o(t,e)?"symbol":t}function a(e){var t=s(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function u(e,n){return r(function(i,r,o,u,l){return t.untracked(function(){if(e&&s(i[r])===n.toLowerCase())return null;var u=void 0;switch(n){case"Array":u=t.isObservableArray;break;case"Object":u=t.isObservableObject;break;case"Map":u=t.isObservableMap;break;default:throw new Error("Unexpected mobxType: "+n)}var c=i[r];if(!u(c)){var d=a(c),f=e?" or javascript `"+n.toLowerCase()+"`":"";return new Error("Invalid prop `"+l+"` of type `"+d+"` supplied to `"+o+"`, expected `mobx.Observable"+n+"`"+f+".")}return null})})}function l(e,n){return r(function(i,r,o,s,a){for(var l=arguments.length,c=Array(l>5?l-5:0),d=5;d<l;d++)c[d-5]=arguments[d];return t.untracked(function(){if("function"!=typeof n)return new Error("Property `"+a+"` of component `"+o+"` has invalid PropType notation.");var t=u(e,"Array")(i,r,o);if(t instanceof Error)return t;for(var l=i[r],d=0;d<l.length;d++)if((t=n.apply(void 0,[l,d,o,s,a+"["+d+"]"].concat(c)))instanceof Error)return t;return null})})}function c(e){return!e.prototype.render}function d(e,t,i){var r,o,s="inject-"+(t.displayName||t.name||t.constructor&&t.constructor.name||"Unknown");i&&(s+="-with-"+i);var a=(o=r=function(n){function i(){var e,t,n,r;M(this,i);for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return t=n=x(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(s))),n.storeRef=function(e){n.wrappedInstance=e},r=t,x(n,r)}return O(i,n),D(i,[{key:"render",value:function(){var n={};for(var i in this.props)this.props.hasOwnProperty(i)&&(n[i]=this.props[i]);var r=e(this.context.mobxStores||{},n,this.context)||{};for(var o in r)n[o]=r[o];return c(t)||(n.ref=this.storeRef),S.createElement(t,n)}}]),i}(n.Component),r.displayName=s,o);return $(a,t),a.wrappedComponent=t,Object.defineProperties(a,V),a}function f(e){return function(t,n){return e.forEach(function(e){if(!(e in n)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");n[e]=t[e]}}),n}}function p(){var e=void 0;if("function"==typeof arguments[0])return e=arguments[0],function(t){var n=d(e,t);return n.isMobxInjector=!1,n=y(n),n.isMobxInjector=!0,n};for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=f(t),function(n){return d(e,n,t.join("-"))}}function h(e){if(k)try{return k.findDOMNode(e)}catch(e){return null}return null}function m(e){var t=h(e);t&&G&&G.set(t,e),K.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}function g(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");H||(H=!0)}function v(e){q=e}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e[t],r=Y[t],o=i?!0===n?function(){r.apply(this,arguments),i.apply(this,arguments)}:function(){i.apply(this,arguments),r.apply(this,arguments)}:r;e[t]=o}function b(e,t){if(null==e||null==t||"object"!==(void 0===e?"undefined":C(e))||"object"!==(void 0===t?"undefined":C(t)))return e!==t;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(var i=void 0,r=n.length-1;i=n[r];r--)if(t[i]!==e[i])return!0;return!1}function y(e,t){if("string"==typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return W||(W=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),t?p.apply(null,e)(y(t)):function(t){return y(e,t)};var i=e;if(!0===i.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),!("function"!=typeof i||i.prototype&&i.prototype.render||i.isReactClass||S.Component.isPrototypeOf(i))){var r,o;return y((o=r=function(e){function t(){return M(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),D(t,[{key:"render",value:function(){return i.call(this,this.props,this.context)}}]),t}(n.Component),r.displayName=i.displayName||i.name,r.contextTypes=i.contextTypes,r.propTypes=i.propTypes,r.defaultProps=i.defaultProps,o))}if(!i)throw new Error("Please pass a valid component to 'observer'");return w(i.prototype||i),i.isMobXReactObserver=!0,i}function w(e){_(e,"componentWillMount",!0),["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(t){_(e,t)}),e.shouldComponentUpdate||(e.shouldComponentUpdate=Y.shouldComponentUpdate)}var S="default"in n?n.default:n,k="default"in i?i.default:i,C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},x=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},T=function(){function e(){M(this,e),this.listeners=[]}return D(e,[{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(t){return t(e)})}}]),e}(),P=u(!1,"Array"),E=l.bind(null,!1),I=u(!1,"Map"),A=u(!1,"Object"),j=u(!0,"Array"),R=l.bind(null,!0),L=u(!0,"Object"),N=Object.freeze({observableArray:P,observableArrayOf:E,observableMap:I,observableObject:A,arrayOrObservableArray:j,arrayOrObservableArrayOf:R,objectOrObservableObject:L}),F={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},B={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},U="function"==typeof Object.getOwnPropertySymbols,$=function(e,t,n){if("string"!=typeof t){var i=Object.getOwnPropertyNames(t);U&&(i=i.concat(Object.getOwnPropertySymbols(t)));for(var r=0;r<i.length;++r)if(!(F[i[r]]||B[i[r]]||n&&n[i[r]]))try{e[i[r]]=t[i[r]]}catch(e){}}return e},z={mobxStores:L};Object.seal(z);var V={contextTypes:{get:function(){return z},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}},H=!1,q=!1,W=!1,G="undefined"!=typeof WeakMap?new WeakMap:void 0,K=new T,J=new T,Y={componentWillMount:function(){function e(e){var n=this[e],i=new t.Atom("reactive "+e);Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:function(){return i.reportObserved(),n},set:function(e){!s&&b(n,e)?(n=e,o=!0,i.reportChanged(),o=!1):n=e}})}var n=this;if(!0!==q){var i=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",r=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID,o=!1,s=!1;e.call(this,"props"),e.call(this,"state");var a=this.render.bind(this),u=null,l=!1,c=function(){return u=new t.Reaction(i+"#"+r+".render()",function(){if(!l&&(l=!0,"function"==typeof n.componentWillReact&&n.componentWillReact(),!0!==n.__$mobxIsUnmounted)){var e=!0;try{s=!0,o||S.Component.prototype.forceUpdate.call(n),e=!1}finally{s=!1,e&&u.dispose()}}}),d.$mobx=u,n.render=d,d()},d=function(){l=!1;var e=void 0,i=void 0;if(u.track(function(){H&&(n.__$mobRenderStart=Date.now());try{i=t.extras.allowStateChanges(!1,a)}catch(t){e=t}H&&(n.__$mobRenderEnd=Date.now())}),e)throw J.emit(e),e;return i};this.render=c}},componentWillUnmount:function(){if(!0!==q&&(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0,H)){var e=h(this);e&&G&&G.delete(e),K.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){H&&m(this)},componentDidUpdate:function(){H&&m(this)},shouldComponentUpdate:function(e,t){return q&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||b(this.props,e)}},X=y(function(e){return(0,e.children)()});X.propTypes={children:function(e,t,n,i,r){if("function"!=typeof e[t])return new Error("Invalid prop `"+r+"` of type `"+C(e[t])+"` supplied to `"+n+"`, expected `function`.")}};var Q,Z,ee={children:!0,key:!0,ref:!0},te=(Z=Q=function(e){function t(){return M(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),D(t,[{key:"render",value:function(){return S.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={},t=this.context.mobxStores;if(t)for(var n in t)e[n]=t[n];for(var i in this.props)ee[i]||"suppressChangedStoreWarning"===i||(e[i]=this.props[i]);return{mobxStores:e}}},{key:"componentWillReceiveProps",value:function(e){if(Object.keys(e).length!==Object.keys(this.props).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var t in e)ee[t]||this.props[t]===e[t]||console.warn("MobX Provider: Provided store '"+t+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),t}(n.Component),Q.contextTypes={mobxStores:L},Q.childContextTypes={mobxStores:L.isRequired},Z),ne=void 0;if(ne="mobx-react",!t)throw new Error(ne+" requires the MobX package");if(!S)throw new Error(ne+" requires React to be available");"function"==typeof i.unstable_batchedUpdates&&t.extras.setReactionScheduler(i.unstable_batchedUpdates);var ie=function(e){return J.on(e)};"object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":C(__MOBX_DEVTOOLS_GLOBAL_HOOK__))&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(e,t),e.propTypes=N,e.PropTypes=N,e.onError=ie,e.default=e,e.observer=y,e.Observer=X,e.renderReporter=K,e.componentByNodeRegistery=G,e.trackComponents=g,e.useStaticRendering=v,e.Provider=te,e.inject=p,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){"use strict";var i=n(1983);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,u=i(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(r){a=r(n);for(var d=0;d<a.length;d++)s.call(n,a[d])&&(u[a[d]]=n[a[d]])}}return u}},,function(e,t,n){e.exports=n.p+"_/d6db9b2a3473c3a8123e980333e3230f-b-mail-icon_error.png"},function(e,t,n){"use strict";function i(e,t){return 1===e.nodeType&&e.getAttribute(h)===String(t)||8===e.nodeType&&e.nodeValue===" react-text: "+t+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+t+" "}function r(e){for(var t;t=e._renderedComponent;)e=t;return e}function o(e,t){var n=r(e);n._hostNode=t,t[g]=n}function s(e){var t=e._hostNode;t&&(delete t[g],e._hostNode=null)}function a(e,t){if(!(e._flags&m.hasCachedChildNodes)){var n=e._renderedChildren,s=t.firstChild;e:for(var a in n)if(n.hasOwnProperty(a)){var u=n[a],l=r(u)._domID;if(0!==l){for(;null!==s;s=s.nextSibling)if(i(s,l)){o(u,s);continue e}d("32",l)}}e._flags|=m.hasCachedChildNodes}}function u(e){if(e[g])return e[g];for(var t=[];!e[g];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,i;e&&(i=e[g]);e=t.pop())n=i,t.length&&a(i,e);return n}function l(e){var t=u(e);return null!=t&&t._hostNode===e?t:null}function c(e){if(void 0===e._hostNode&&d("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||d("34"),e=e._hostParent;for(;t.length;e=t.pop())a(e,e._hostNode);return e._hostNode}var d=n(235),f=n(277),p=n(361),h=(n(233),f.ID_ATTRIBUTE_NAME),m=p,g="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:u,getInstanceFromNode:l,getNodeFromInstance:c,precacheChildNodes:a,precacheNode:o,uncacheNode:s};e.exports=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.decl)({block:"control",willInit:function(e){var t=e.hovered;this.__base.apply(this,arguments),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.state.hovered=t},mods:function(){var e=this.state,t=e.hovered,n=e.disabled;return i({},this.__base.apply(this,arguments),{hovered:n?void 0:(0,s.bool2string)(t)})},attrs:function(){var e=this.state.disabled;return i({},this.__base.apply(this,arguments),{onMouseEnter:e?void 0:this.onMouseEnter,onMouseLeave:e?void 0:this.onMouseLeave})},onMouseEnter:function(e){this.setState({hovered:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e)},onMouseLeave:function(e){this.setState({hovered:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)}},{propTypes:{hovered:o.default.bool,onMouseEnter:o.default.func,onMouseLeave:o.default.func}})},function(e,t,n){"use strict";function i(e){var t=e.split("/");if(1===t.length)throw new Error('Invalid key: "'+e+'"');return{keyset:t[0],loc:t.slice(1).join("/")}}function r(e,t){var n=t.lang,r=e.loc?i(e.loc):{};r.lang=n;var s=Object.keys(e).reduce(function(t,o){switch(o){case"loc":return t;case"params":return Object.assign(r,e[o]),t;case"tag":case"children":return r[o]=e[o],t}if(/^loc-/.test(o)){var s=i(e[o]),u=o.slice(4);t[u]=a(n,s.keyset,s.loc,e["params-"+u])}else/^params-/.test(o)||(t[o]=e[o]);return t},{}),l=r.tag||"span";return r.loc?(Object.keys(s).length&&(r.tag=function(e){return o.createElement(l,s,e.children)}),u(r)):o.createElement(l,s,e.children)}var o=n(232),s=n(230),a=n(286).getKey,u=n(1994);r.contextTypes={lang:s.string.isRequired},r.propTypes={loc:s.string,params:s.object,children:s.node},e.exports=r},function(e,t,n){"use strict";function i(){return Daria.Config.dev||Daria.DEBUG}function r(){return Boolean(Daria.Config.pddDomain)}function o(){return Daria.IS_CORP}function s(){return Daria.isComposeButtonMoved()}function a(e){return Daria.Page.isParamsForSearch(e)}function u(){return Daria.Config.NO_SETTINGS}function l(){return Daria.Config.locale}function c(){return Daria.suid}function d(){return Daria.uid}function f(){return Daria.urlParams}function p(){return Daria.UISettings.shouldShowCheckboxInsideUserpic()}t.h=i,t.i=r,t.g=o,t.f=s,t.j=a,t.a=u,t.b=l,t.c=c,t.d=d,t.e=f,t.k=p},function(e,t,n){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231),o={BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46};t.default=(0,r.decl)({block:"keycodes"},i({},o,{list:function(){return Object.keys(o)},is:function(e,t){return(Array.isArray(t)?t:Array.prototype.slice.call(arguments,1)).some(function(t){return this[t]===e},this)}}))},function(e,t,n){"use strict";function i(e){return function(){return e}}var r=function(){};r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";var i=n(1788);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";var i=null;e.exports={debugTool:i}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return v});var s,a,u,l,c,d,f,p,h=n(234),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=Symbol("unsubscribePopupState instance"),v=(p=f=function(){function e(t){if(i(this,e),r(this,"isPopupVisible",a,this),r(this,"currentTab",u,this),r(this,"currentAction",l,this),r(this,"popupMode",c,this),r(this,"promoFolderVisible",d,this),e[g])return e[g];this.store=t,e[g]=this}return m(e,[{key:"clearAction",value:function(){this.currentAction=null}},{key:"popupModeToDefault",value:function(){this.popupMode="default"}},{key:"popupModeToCreateDone",value:function(){this.popupMode="createDone"}},{key:"openPopup",value:function(){this.isPopupVisible=!0}},{key:"closePopup",value:function(){this.isPopupVisible=!1}},{key:"changeCurrentTab",value:function(e){this.currentTab=e}},{key:"showPromoFolderTooltip",value:function(){this.promoFolderVisible=!0}},{key:"closePromoFolderTooltip",value:function(){this.promoFolderVisible=!1}},{key:"dispose",value:function(){e[g]&&(e[g]=null)}},{key:"shouldRenderUnsubscribeList",value:function(){var t=e[g];return(0,t.isCurrentTabState)(t.store.READY)}},{key:"shouldRenderLoader",value:function(){var t=e[g];return(0,t.isCurrentTabState)(t.store.LOADING)}},{key:"shouldRenderReload",value:function(){var t=e[g];return(0,t.isCurrentTabState)(t.store.ERROR)}},{key:"isCurrentTabState",value:function(t){var n=e[g],i=n.currentTab,r=n.store,o=r.newslettersTabState,s=r.filtersTabState;return("newsletters"===i?o:s)===t}}]),e}(),f[g]=null,s=p,a=o(s.prototype,"isPopupVisible",[h.observable],{enumerable:!0,initializer:function(){return!1}}),u=o(s.prototype,"currentTab",[h.observable],{enumerable:!0,initializer:function(){return"newsletters"}}),l=o(s.prototype,"currentAction",[h.observable],{enumerable:!0,initializer:function(){return null}}),o(s.prototype,"clearAction",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"clearAction"),s.prototype),c=o(s.prototype,"popupMode",[h.observable],{enumerable:!0,initializer:function(){return"default"}}),o(s.prototype,"popupModeToDefault",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"popupModeToDefault"),s.prototype),o(s.prototype,"popupModeToCreateDone",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"popupModeToCreateDone"),s.prototype),o(s.prototype,"openPopup",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"openPopup"),s.prototype),o(s.prototype,"closePopup",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"closePopup"),s.prototype),o(s.prototype,"changeCurrentTab",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"changeCurrentTab"),s.prototype),d=o(s.prototype,"promoFolderVisible",[h.observable],{enumerable:!0,initializer:function(){return!1}}),o(s.prototype,"showPromoFolderTooltip",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"showPromoFolderTooltip"),s.prototype),o(s.prototype,"closePromoFolderTooltip",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"closePromoFolderTooltip"),s.prototype),s)},function(e,t,n){"use strict";function i(){x.ReactReconcileTransaction&&S||c("123")}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=f.getPooled(),this.reconcileTransaction=x.ReactReconcileTransaction.getPooled(!0)}function o(e,t,n,r,o,s){return i(),S.batchedUpdates(e,t,n,r,o,s)}function s(e,t){return e._mountOrder-t._mountOrder}function a(e){var t=e.dirtyComponentsLength;t!==_.length&&c("124",t,_.length),_.sort(s),b++;for(var n=0;n<t;n++){var i=_[n],r=i._pendingCallbacks;i._pendingCallbacks=null;var o;if(h.logTopLevelRenders){var a=i;i._currentElement.type.isReactTopLevelWrapper&&(a=i._renderedComponent),o="React update: "+a.getName(),console.time(o)}if(m.performUpdateIfNecessary(i,e.reconcileTransaction,b),o&&console.timeEnd(o),r)for(var u=0;u<r.length;u++)e.callbackQueue.enqueue(r[u],i.getPublicInstance())}}function u(e){if(i(),!S.isBatchingUpdates)return void S.batchedUpdates(u,e);_.push(e),null==e._updateBatchNumber&&(e._updateBatchNumber=b+1)}function l(e,t){v(S.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),y.enqueue(e,t),w=!0}var c=n(235),d=n(240),f=n(365),p=n(267),h=n(366),m=n(278),g=n(297),v=n(233),_=[],b=0,y=f.getPooled(),w=!1,S=null,k={initialize:function(){this.dirtyComponentsLength=_.length},close:function(){this.dirtyComponentsLength!==_.length?(_.splice(0,this.dirtyComponentsLength),D()):_.length=0}},C={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},M=[k,C];d(r.prototype,g,{getTransactionWrappers:function(){return M},destructor:function(){this.dirtyComponentsLength=null,f.release(this.callbackQueue),this.callbackQueue=null,x.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return g.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),p.addPoolingTo(r);var D=function(){for(;_.length||w;){if(_.length){var e=r.getPooled();e.perform(a,null,e),r.release(e)}if(w){w=!1;var t=y;y=f.getPooled(),t.notifyAll(),f.release(t)}}},O={injectReconcileTransaction:function(e){e||c("126"),x.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||c("127"),"function"!=typeof e.batchedUpdates&&c("128"),"boolean"!=typeof e.isBatchingUpdates&&c("129"),S=e}},x={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:D,injection:O,asap:l};e.exports=x},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a});var r=n(234),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this._cancel=null,this._cancel=Object(r.reaction)(t,n,s({name:this.constructor.name},o))}return o(e,[{key:"destroy",value:function(){}}]),o(e,[{key:"cancel",value:function(){this._cancel&&(this._cancel(),this._cancel=null,this.destroy())}}]),e}()},function(e,t,n){"use strict";var i=n(397),r=n.n(i),o=n(404);n.n(o);t.a=r.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.decl)({block:"icon",tag:"span",mods:function(e){return{type:e.type,action:e.action,direction:e.direction,glyph:e.glyph,size:e.size,disabled:e.disabled}},attrs:function(e){var t=e.url,n=e.id,r=e.alt,o=e.style,s=void 0===o?{}:o,a=e.attrs;return void 0!==t&&(s.backgroundImage="url('"+t+"')"),i({id:n,alt:r,style:s},a)}},{propTypes:{id:o.default.string,url:o.default.string,style:o.default.object,direction:o.default.string,glyph:o.default.string,size:o.default.oneOf(["ns","xs","s","m","n","l","head"])},isIcon:function(e){return e&&"function"==typeof e.type&&("icon"===e.type.displayName||"x-icon"===e.type.displayName)}})},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return u});var o,s,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=(s=o=function(){function e(t,n){r(this,e),this._stores=t,this._services=n}return a(e,[{key:"sendMetrics",value:function(t,n){var r=[];switch(t){case"promo-settings":r=["Промо","показ промо"];break;case"promo-folder":r=["Промо","показ промо в левой колонке"];break;case"popup":r=["Попап рассылок"]}Jane.c([e.base].concat(i(r),i(n)))}}]),e}(),o.base="Управление рассылками",s)},function(e,t,n){"use strict";function i(e,t,n,i){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];a?this[o]=a(n):"target"===o?this.target=i:this[o]=n[o]}var u=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=u?s.thatReturnsTrue:s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse,this}var r=n(240),o=n(267),s=n(249),a=(n(236),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),u={type:null,target:null,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};r(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=s.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=s.thatReturnsTrue)},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<a.length;n++)this[a[n]]=null}}),i.Interface=u,i.augmentClass=function(e,t){var n=this,i=function(){};i.prototype=n.prototype;var s=new i;r(s,e.prototype),e.prototype=s,e.prototype.constructor=e,e.Interface=r({},n.Interface,t),e.augmentClass=n.augmentClass,o.addPoolingTo(e,o.fourArgumentPooler)},o.addPoolingTo(i,o.fourArgumentPooler),e.exports=i},function(e,t,n){"use strict";var i={current:null};e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.decl)({block:"control",willInit:function(e){var t=e.disabled,n=e.focused,i=e.pressed;this.state={disabled:t,focused:n,pressed:i},this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onClick=this.onClick.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.docOnMouseUp=this.docOnMouseUp.bind(this)},willReceiveProps:function(e){var t=e.disabled;t!==this.props.disabled&&this.setState({disabled:t})},mods:function(){var e=this.state,t=e.pressed,n=e.disabled,i=e.focused;return{disabled:(0,s.bool2string)(n),focused:n?void 0:(0,s.bool2string)(i),pressed:n?void 0:(0,s.bool2string)(t)}},attrs:function(){var e=this.state.disabled;return i({onFocus:e?void 0:this.onFocus,onBlur:e?void 0:this.onBlur,onMouseDown:e?void 0:this.onMouseDown,onMouseUp:e?void 0:this.onMouseUp,onKeyUp:e?void 0:this.onKeyUp,onKeyDown:e?void 0:this.onKeyDown,onClick:e?void 0:this.onClick},this._getControlAttrs.apply(this,arguments))},_getControlAttrs:function(e){return e.controlAttrs},onMouseDown:function(e){3!==e.nativeEvent.which&&(this.setState({pressed:!0}),this.props.onMouseDown&&this.props.onMouseDown(e),this.docOnMouseDown())},onMouseUp:function(e){this.setState({pressed:!1}),this.props.onMouseUp&&this.props.onMouseUp(e)},onClick:function(e){this.props.onClick&&this.props.onClick(e)},onKeyDown:function(e){this.props.onKeyDown&&this.props.onKeyDown(e)},onKeyUp:function(e){this.props.onKeyUp&&this.props.onKeyUp(e)},onFocus:function(e){this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus(e)},onBlur:function(e){this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur(e)},docOnMouseDown:function(){document.addEventListener("mouseup",this.docOnMouseUp),document.addEventListener("dragend",this.docOnMouseUp)},docOnMouseUp:function(){this.setState({pressed:!1}),document.removeEventListener("mouseup",this.docOnMouseUp),document.removeEventListener("dragend",this.docOnMouseUp)}},{propTypes:{disabled:o.default.bool,focused:o.default.bool,pressed:o.default.bool,onFocus:o.default.func,onBlur:o.default.func,onMouseDown:o.default.func,onMouseUp:o.default.func,controlAttrs:o.default.object}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.declMod)({theme:"normal"},{block:"popup2",willInit:function(){this.__base.apply(this,arguments),this.defaultMainOffset=5,this.defaultViewportOffset=5}})},function(e,t,n){"use strict";(function(e){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(265),o=n.n(r),s=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),a=function(e){var t=e.text,n=e.cls,r=void 0===n?"":n,a=o()(i({"mail-SuggestItem-LimitLongText":!0},r,!0));return s("span",{className:a,dangerouslySetInnerHTML:{__html:t}})};a.propTypes={text:e.string.isRequired,cls:e.string},t.a=a}).call(t,n(230))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return w});var u,l,c,d,f,p,h,m,g=n(234),v=n(292),_=n(282),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=Symbol("unsubscribePopupStore instance"),w=(m=h=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(s(e,"newsletters",l,e),s(e,"filters",c,e),e.LOADING="loading",e.READY="ready",e.ERROR="error",s(e,"newslettersTabState",d,e),s(e,"filtersTabState",f,e),e.generateUniqIdForMaillist=function(e){return function(){return(e++).toString()}}(1),s(e,"sortOption",p,e),t[y]){var n;return n=t[y],r(e,n)}return t[y]=e,e._addModelSubscription("unsubscribe-furita-newsletters",{},{onChanged:function(t){t&&t.newsletters&&(t.newsletters.map(function(t){t.index=e.generateUniqIdForMaillist(),t.checked=!1}),e.newsletters.replace(t.newsletters))},onDestroyed:function(){e.newsletters=[]}}),e._addModelSubscription("unsubscribe-furita-filters",{},{onChanged:function(t){t&&t.filters&&(t.filters.map(function(t){t.index=e.generateUniqIdForMaillist(),t.checked=!1}),e.filters.replace(t.filters))},onDestroyed:function(){e.filters=[]}}),e.getNewslettersAndFilters(),e}return o(t,e),b(t,[{key:"dispose",value:function(){t[y]&&(t[y]=null)}},{key:"getItems",value:function(e){return"newsletters"===e?this.newsletters:this.filters}},{key:"getTabCounter",value:function(e){return"newsletters"===e?this.newsletters.length:this.filters.length}},{key:"findItemByIndex",value:function(e,t){return this[t].filter(function(t){return t.index===e})[0]}},{key:"checkItem",value:function(e,t){this.findItemByIndex(e,t).checked=!0}},{key:"uncheckItem",value:function(e,t){this.findItemByIndex(e,t).checked=!1}},{key:"uncheckAllItems",value:function(e){switch(e){case"newsletters":this.newsletters.map(Object(g.action)(function(e){e.checked=!1}));break;case"filters":this.filters.map(Object(g.action)(function(e){e.checked=!1}))}}},{key:"hasItemChecked",value:function(e,t){return this.findItemByIndex(e,t).checked}},{key:"hasCheckedItems",value:function(e){switch(e){case"newsletters":return this.allCheckedNewsletters.length>0;case"filters":return this.allCheckedUnsubscribeFilters.length>0}}},{key:"setListState",value:function(e,t){this["newsletters"===e?"newslettersTabState":"filtersTabState"]=t}},{key:"getNewslettersAndFilters",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.forced?"forcedRequest":"request";this.setListState("newsletters",this.LOADING),this.setListState("filters",this.LOADING),_.a[n](["unsubscribe-furita-newsletters","unsubscribe-furita-filters"]).then(function(){e.setListState("newsletters",e.READY),e.setListState("filters",e.READY)}).catch(function(t){var n=t.invalid,i=void 0===n?[]:n,r=i.map(function(e){return e.id});e.setListState("newsletters",-1===r.indexOf("unsubscribe-furita-newsletters")?e.READY:e.ERROR),e.setListState("filters",-1===r.indexOf("unsubscribe-furita-filters")?e.READY:e.ERROR)})}},{key:"getReadFrequencySuffix",value:function(e){var t=100*e,n=function(e,t,n){return t>=e&&t<=n};return n(0,t,2)?"noRead":n(3,t,49)?"rareRead":"alwaysRead"}},{key:"getSortOptions",value:function(){return[{field:"date",name:i18n("%UnsubscribePopup_sort_by_date")},{field:"displayName",name:i18n("%UnsubscribePopup_sort_by_name")},{field:"readFrequency",name:i18n("%UnsubscribePopup_sort_by_read")}]}},{key:"getSortOption",value:function(){return this.sortOption||null}},{key:"setSortOption",value:function(e){var t=this.getSortOptions().filter(Object(g.action)(function(t){return t.field===e}))||[{}];this.sortOption=t[0]}},{key:"clearSortOption",value:function(){this.sortOption=null}},{key:"sortItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(this.getSortOption()||{}).field;return n&&"date"!==n?t.sort(function(t,i){switch(n){case"displayName":var r=t[n]&&t[n].toLowerCase()||"",o=i[n]&&i[n].toLowerCase()||"";return r<o?-1:r>o?1:0;case"readFrequency":return"noRead"===e.getReadFrequencySuffix(t[n])?-1:"rareRead"===e.getReadFrequencySuffix(t[n])?0:1}}):t}},{key:"allNotReadableNewsletters",get:function(){return this.newsletters.filter(function(e){return e.readFrequency>=0&&e.readFrequency<=.02})}},{key:"allCheckedNewsletters",get:function(){return this.newsletters.filter(function(e){return!0===e.checked})}},{key:"allCheckedUnsubscribeFilters",get:function(){return this.filters.filter(function(e){return!0===e.checked})}}]),t}(v.a),h[y]=null,u=m,l=a(u.prototype,"newsletters",[g.observable],{enumerable:!0,initializer:function(){return[]}}),c=a(u.prototype,"filters",[g.observable],{enumerable:!0,initializer:function(){return[]}}),d=a(u.prototype,"newslettersTabState",[g.observable],{enumerable:!0,initializer:function(){return this.READY}}),f=a(u.prototype,"filtersTabState",[g.observable],{enumerable:!0,initializer:function(){return this.READY}}),a(u.prototype,"allNotReadableNewsletters",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"allNotReadableNewsletters"),u.prototype),a(u.prototype,"checkItem",[g.action],Object.getOwnPropertyDescriptor(u.prototype,"checkItem"),u.prototype),a(u.prototype,"uncheckItem",[g.action],Object.getOwnPropertyDescriptor(u.prototype,"uncheckItem"),u.prototype),a(u.prototype,"uncheckAllItems",[g.action],Object.getOwnPropertyDescriptor(u.prototype,"uncheckAllItems"),u.prototype),a(u.prototype,"allCheckedNewsletters",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"allCheckedNewsletters"),u.prototype),a(u.prototype,"allCheckedUnsubscribeFilters",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"allCheckedUnsubscribeFilters"),u.prototype),a(u.prototype,"setListState",[g.action],Object.getOwnPropertyDescriptor(u.prototype,"setListState"),u.prototype),p=a(u.prototype,"sortOption",[g.observable],{enumerable:!0,initializer:function(){return null}}),a(u.prototype,"setSortOption",[g.action],Object.getOwnPropertyDescriptor(u.prototype,"setSortOption"),u.prototype),a(u.prototype,"clearSortOption",[g.action],Object.getOwnPropertyDescriptor(u.prototype,"clearSortOption"),u.prototype),u)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return v});var u,l,c=n(96),d=n.n(c),f=n(234),p=n(292),h=n(1761),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=d.a.memoize,v=(u=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s(e,"folders",l,e),g.Cache=Map,e.getFolderBySymbol=g(function(t){for(var n=0,i=e.folders.length;n<i;n++){var r=e.folders[n];if(r.data.symbol===t)return r}return null}),e.getFolderByName=g(function(t){for(var n=0,i=e.folders.length;n<i;n++){var r=e.folders[n];if(r.data.name===t)return r}return null}),e._addModelSubscription("folders",{},{onChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.folders=(t.folder||[]).map(function(e){return new h.a(e)}),e.getFolderBySymbol.cache.clear()},onDestroyed:function(){e.folders=[]}}),e}return o(t,e),m(t,[{key:"isFidSymbol",value:function(e,t){var n=this.getFolderBySymbol(t);return n&&n.data.fid===e}},{key:"foldersForSearch",get:function(){return this.folders.filter(function(e){return"outbox"!==e.data.symbol&&"spam"!==e.data.symbol})}}]),t}(p.a),l=a(u.prototype,"folders",[f.observable],{enumerable:!0,initializer:function(){return[]}}),a(u.prototype,"foldersForSearch",[f.computed],Object.getOwnPropertyDescriptor(u.prototype,"foldersForSearch"),u.prototype),u)},function(e,t,n){var i,r;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===r)for(var s in i)o.call(i,s)&&i[s]&&e.push(s)}}return e.join(" ")}var o={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(i=[],void 0!==(r=function(){return n}.apply(t,i))&&(e.exports=r))}()},function(e,t,n){"use strict";var i=n(2002);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";var i=n(235),r=(n(233),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),o=function(e,t){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,e,t),i}return new n(e,t)},s=function(e,t,n){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,e,t,n),r}return new i(e,t,n)},a=function(e,t,n,i){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n,i),o}return new r(e,t,n,i)},u=function(e){var t=this;e instanceof t||i("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},l=r,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=10),n.release=u,n},d={addPoolingTo:c,oneArgumentPooler:r,twoArgumentPooler:o,threeArgumentPooler:s,fourArgumentPooler:a};e.exports=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return w});var s,a,u,l,c,d,f=n(234),p=n(96),h=n.n(p),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=h.a.defaults,_=h.a.pick,b=Object.freeze({scope:"",fid:"",lid:"",unread:null,attaches:null,from:null,to:null}),y=Object.keys(b),w=(s=function(){function e(){i(this,e),r(this,"currentSearchText",a,this),r(this,"currentSuggestText",u,this),r(this,"_advanced",l,this),r(this,"shouldShowCurrentSearchText",c,this),r(this,"resetAdvanced",d,this)}return m(e,[{key:"getAdvanced",value:function(e){switch(e){case"lid":return"yes"===this._advanced.unread?"unread":this._advanced.lid;case"attaches":return"yes"===this._advanced.attaches;default:return this._advanced[e]}}},{key:"setAdvanced",value:function(e,t){switch(e){case"lid":"unread"===t?(this._advanced.lid="",this._advanced.unread="yes"):(this._advanced.lid=t,this._advanced.unread=null);break;case"attaches":this._advanced.attaches=t?"yes":null;break;default:this._advanced[e]=t}}},{key:"updateAdvancedParams",value:function(e,t){var n=v(e,_(t,y),b);"yes"===n.unread?delete n.lid:delete n.unread;for(var i in n)this.setAdvanced(i,n[i])}},{key:"reset",value:function(){this.currentSearchText="",this.currentSuggestText="",y.forEach(this.resetAdvanced)}},{key:"getAutosearchParams",value:function(){return g({},this._advanced)}},{key:"isAdvancedDirty",get:function(){var e=this;return y.some(function(t){return("scope"!==t||"rpopinfo"!==e._advanced[t])&&e._advanced[t]!==b[t]})}},{key:"isDefaultSuggest",get:function(){return!this.currentSuggestText&&!this.isAdvancedDirty}},{key:"paramsForSearch",get:function(){return e._omitEmpty(g({request:this.currentSearchText},this._advanced))}},{key:"paramsForSuggest",get:function(){return e._omitEmpty(g({request:this.currentSuggestText},this._advanced))}}],[{key:"_omitEmpty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=void 0;for(var i in e)(n=e[i])&&"all"!==n&&(t[i]=n);return t}}]),e}(),a=o(s.prototype,"currentSearchText",[f.observable],{enumerable:!0,initializer:function(){return""}}),u=o(s.prototype,"currentSuggestText",[f.observable],{enumerable:!0,initializer:function(){return""}}),l=o(s.prototype,"_advanced",[f.observable],{enumerable:!0,initializer:function(){return g({},b)}}),c=o(s.prototype,"shouldShowCurrentSearchText",[f.observable],{enumerable:!0,initializer:function(){return!0}}),o(s.prototype,"isAdvancedDirty",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"isAdvancedDirty"),s.prototype),o(s.prototype,"isDefaultSuggest",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"isDefaultSuggest"),s.prototype),o(s.prototype,"paramsForSearch",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"paramsForSearch"),s.prototype),o(s.prototype,"paramsForSuggest",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"paramsForSuggest"),s.prototype),o(s.prototype,"setAdvanced",[f.action],Object.getOwnPropertyDescriptor(s.prototype,"setAdvanced"),s.prototype),o(s.prototype,"updateAdvancedParams",[f.action],Object.getOwnPropertyDescriptor(s.prototype,"updateAdvancedParams"),s.prototype),o(s.prototype,"reset",[f.action],Object.getOwnPropertyDescriptor(s.prototype,"reset"),s.prototype),d=o(s.prototype,"resetAdvanced",[f.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.setAdvanced(t,b[t])}}}),s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AVAILABLE_DIRECTIONS=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(237),u=i(a),l=n(231),c=i(l),d=n(230),f=i(d),p=(n(410).default||n(410)).applyDecls(),h=i(p),m=t.AVAILABLE_DIRECTIONS=["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"];t.default=(0,l.decl)({block:"popup2",getChildContext:function(){return{registerChildPopup:this._registerChildPopup,unRegisterChildPopup:this._unRegisterChildPopup,parentPopup:{anchor:this.props.anchor,instance:this},zIndexGroupLevel:this._zIndexGroupLevel}},willInit:function(e){var t=e.scope;this.__base.apply(this,arguments),this.defaultMainOffset=0,this.defaultViewportOffset=0,this.drawn=!1,this.redrawTimer=null,this._style={popup:{},tail:{}},this._scope=t||("undefined"!=typeof document?document.body:null),this._childPopups=[],this._hasOpenedChildPopups=!1,this._zIndex=null,this._zIndexGroupLevel=null,this._onWinScrollAndResize=this._onWinScrollAndResize.bind(this),this._registerChildPopup=this._registerChildPopup.bind(this),this._unRegisterChildPopup=this._unRegisterChildPopup.bind(this),this.toggleWatchBaseEvents=this.toggleWatchBaseEvents.bind(this)},didMount:function(){var e=this;"function"==typeof this.context.registerChildPopup&&this.context.registerChildPopup(this),this.hasDOMNode=!1,this._container=document.createElement("div"),"function"==typeof this._scope&&(this._scope=this._scope()),this._scope.appendChild(this._container),this.redraw(this.props),this.props.visible&&(this.toggleWatchBaseEvents(!0),this.redrawTimer=setTimeout(function(){return e.redraw(e.props)},0))},willReceiveProps:function(e){var t=e.visible,n=e.scope,i="function"==typeof n?n():n;t&&i&&this._scope!==i&&(this._scope.removeChild(this._container),this._scope=i,this._scope.appendChild(this._container)),this.props.visible!==t&&(t||this._releaseZIndex(),this.toggleWatchBaseEvents(t))},willUpdate:function(e){var t=this;this.hasDOMNode=!0,this.redraw(e),this.redrawTimer&&clearTimeout(this.redrawTimer),this.redrawTimer=setTimeout(function(){t.hasDOMNode&&t.redraw(e),t.redrawTimer=null},0)},willUnmount:function(){"function"==typeof this.context.unRegisterChildPopup&&this.context.unRegisterChildPopup(this),this.hasDOMNode=!1,(0,a.unmountComponentAtNode)(this._container),this._scope.removeChild(this._container),this.toggleWatchBaseEvents(!1),null!==this.redrawTimer&&(clearTimeout(this.redrawTimer),this.redrawTimer=null)},mods:function(e){var t=e.theme,n=e.visible;e.direction;return{view:e.view,tone:e.tone,theme:t,direction:this._direction,visible:(0,l.bool2string)(n)}},attrs:function(e){var t=e.onMouseOver,n=e.onMouseLeave;return r({},this.__base.apply(this,arguments),{onMouseOver:t,onMouseLeave:n})},content:function(e){return e.children},toggleWatchBaseEvents:function(e){e?(window.addEventListener("scroll",this._onWinScrollAndResize),window.addEventListener("resize",this._onWinScrollAndResize)):(window.removeEventListener("scroll",this._onWinScrollAndResize),window.removeEventListener("resize",this._onWinScrollAndResize))},redraw:function(e){var t=this.draw(e);return this.__self.inject(this,t,this._container)},draw:function(e){var t=this,n=e.hasTail,i=e.tailSize;if(e.visible&&this.domElementPopup){var o=this._calcBestDrawingParams(e),u=o.left,l=o.top,d=o.tail,f=o.direction,p=this._scope.getBoundingClientRect();u-=p.left+window.pageXOffset,l-=p.top+window.pageYOffset,!this.drawn&&this.props.visible&&(this._captureZIndex(),this.drawn=!0),e.calcPossible&&this._calcPossibleDrawingParams(e),this._style.popup=r({},this._style.popup,{left:u,top:l},e.style),this._direction=f,n&&(this._style.tail=r({},d,{width:i,height:i}))}return s.default.createElement(c.default,{cls:this.cls(e),tag:this.tag(e),block:this.block,elem:this.elem,mods:this.mods(e),mix:this.mix(e),attrs:r({style:r({},this._style.popup)},this.attrs(e)),ref:function(e){return t.domElementPopup=(0,a.findDOMNode)(e)}},n&&s.default.createElement(h.default,{style:this._style.tail,ref:function(e){return t.domElementTail=(0,a.findDOMNode)(e)}}),this.content(e))},render:function(){return null},_registerChildPopup:function(e){this._childPopups.push(e)},_unRegisterChildPopup:function(e){var t=this._childPopups.indexOf(e);-1!==t&&this._childPopups.splice(t,1)},isElementInsideChildPopups:function(e){return this._childPopups.some(function(t){return t.domElementPopup.contains(e)||t.isElementInsideChildPopups(e)})},_onWinScrollAndResize:function(){this.redraw(this.props)},_calcPossibleDrawingParams:function(e){var t=this,n=this._calcTargetDimensions(e),i=this._calcViewportDimensions(),r=this._calcOffsets(),o=e.directions;e.calcPossible(o.map(function(e){var o={direction:e,width:0,height:0,left:0,top:0};return t._checkMainDirection(e,"bottom")?(o.top=n.top+n.height+r.main,o.height=i.bottom-o.top-r.viewport):t._checkMainDirection(e,"top")?(o.height=n.top-i.top-r.main-r.viewport,o.top=n.top-o.height-r.main):(t._checkSecondaryDirection(e,"center")?(o.height=i.bottom-i.top-2*r.viewport,o.top=n.top+(n.height-o.height)/2):t._checkSecondaryDirection(e,"bottom")?(o.height=n.top+n.height-i.top-r.secondary-r.viewport,o.top=n.top+n.height-o.height-r.secondary):t._checkSecondaryDirection(e,"top")&&(o.top=n.top+r.secondary,o.height=i.bottom-o.top-r.viewport),t._checkMainDirection(e,"left")?(o.width=n.left-i.left-r.main-r.viewport,o.left=n.left-o.width-r.main):(o.left=n.left+n.width+r.main,o.width=i.right-o.left-r.viewport)),t._checkSecondaryDirection(e,"right")?(o.width=n.left+n.width-i.left-r.secondary-r.viewport,o.left=n.left+n.width-o.width-r.secondary):t._checkSecondaryDirection(e,"left")?(o.left=n.left+r.secondary,o.width=i.right-o.left-r.viewport):t._checkSecondaryDirection(e,"center")&&t._checkMainDirection(e,"top","bottom")&&(o.width=i.right-i.left-2*r.viewport,o.left=n.left+n.width/2-o.width/2),o}))},_calcBestDrawingParams:function(e){for(var t=this._calcPopupDimensions(),n=this._calcTargetDimensions(e),i=this._calcViewportDimensions(),r=e.directions,o=r.length,s=void 0,a=void 0,u=void 0,l=void 0,c=void 0,d=void 0,f=0;f<o&&(s=r[f],a=this._calcPos(s,n,t),u=this._calcViewportFactor(a,i,t),(0===f||u>d||!d&&e.direction===s)&&(l=s,d=u,c=a),!(d>this.__self.VIEWPORT_ACCURACY_FACTOR));f++);return{direction:l,left:c.left,top:c.top,tail:this._calcTailPos(l,n,t,c)}},_calcPopupDimensions:function(){var e=this.domElementPopup,t=e.clientWidth,n=e.clientHeight,i=this.domElementPopup.getBoundingClientRect(),r=i.width,o=i.height;return{width:Math.round(r),height:Math.round(o),popupWidth:t,popupHeight:n,area:t*n}},_calcTargetDimensions:function(e){var t=e.target,n=e.position;return t||n?r({},n,{width:0,height:0}):{left:0,top:0,width:0,height:0}},_calcTailDimension:function(){return this.props.tailSize?this.props.tailSize:this.domElementTail&&"none"!==this.domElementTail.style.display?this.domElementTail.offsetWidth:0},_calcViewportDimensions:function(){var e=window.pageYOffset,t=window.pageXOffset,n=window.innerWidth;return{top:e,left:t,bottom:e+window.innerHeight,right:t+n}},_calcPos:function(e,t,n){var i={},r=this._calcOffsets();return this._checkMainDirection(e,"bottom")?i.top=t.top+t.height+r.main:this._checkMainDirection(e,"top")?i.top=t.top-n.height-r.main:this._checkMainDirection(e,"left")?i.left=t.left-n.width-r.main:this._checkMainDirection(e,"right")&&(i.left=t.left+t.width+r.main),this._checkSecondaryDirection(e,"right")?i.left=t.left+t.width-n.width-r.secondary:this._checkSecondaryDirection(e,"left")?i.left=t.left+r.secondary:this._checkSecondaryDirection(e,"bottom")?i.top=t.top+t.height-n.height-r.secondary:this._checkSecondaryDirection(e,"top")?i.top=t.top+r.secondary:this._checkSecondaryDirection(e,"center")&&(this._checkMainDirection(e,"top","bottom")?i.left=t.left+t.width/2-n.width/2:this._checkMainDirection(e,"left","right")&&(i.top=t.top+t.height/2-n.height/2)),i},_calcViewportFactor:function(e,t,n){var i=this.props.viewportOffset||this.defaultViewportOffset,r=Math.max(e.left,t.left+i),o=Math.min(e.left+n.width,t.right-i),s=Math.max(e.top,t.top+i),a=Math.min(e.top+n.height,t.bottom-i);return r<o&&s<a?(o-r)*(a-s)/n.area:0},_calcTailPos:function(e,t,n,i){var r={},o=this._calcTailDimension()/2,s=this.props.tailOffset;return this._checkMainDirection(e,"bottom")?r.top=-o:this._checkMainDirection(e,"top")?r.top=Math.floor(n.popupHeight-o):this._checkMainDirection(e,"left")?r.left=Math.floor(n.popupWidth-o):this._checkMainDirection(e,"right")&&(r.left=-o),this._checkSecondaryDirection(e,"right")?r.left=n.popupWidth-Math.ceil(Math.min(n.popupWidth,t.width)/2)-o-s:this._checkSecondaryDirection(e,"left")?r.left=Math.ceil(Math.min(n.popupWidth,t.width)/2)-o+s:this._checkSecondaryDirection(e,"bottom")?r.top=n.popupHeight-Math.ceil(Math.min(n.popupHeight,t.height)/2)-o-s:this._checkSecondaryDirection(e,"top")?r.top=Math.ceil(Math.min(n.popupHeight,t.height)/2)-o+s:this._checkSecondaryDirection(e,"center")&&(this._checkMainDirection(e,"top","bottom")?r.left=Math.ceil(n.popupWidth/2)-o+s:r.top=Math.ceil(n.popupHeight/2)-o+s),r},_calcOffsets:function(){var e=this._calcTailDimension(),t=void 0===this.props.mainOffset?this.defaultMainOffset:this.props.mainOffset;return{main:e>0?Math.max(t,Math.round(e*Math.SQRT1_2)):t,secondary:this.props.secondaryOffset,viewport:this.props.viewportOffset||this.defaultViewportOffset}},_checkMainDirection:function(e,t,n){return 0===e.indexOf(t)||n&&0===e.indexOf(n)},_checkSecondaryDirection:function(e,t){return e.indexOf("-"+t)>0},_checkDirection:function(e,t){return e.indexOf(t)>=0},_calcZIndexGroupLevel:function(){return this.props.zIndexGroupLevel||this.context.zIndexGroupLevel||0},_setPreventHideByClick:function(){var e=this;do{e._preventHideByClick=!0,e=e._getParentPopup()}while(e)},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var e=this.__self._visiblePopupsZIndexes,t=this._zIndexGroupLevel,n=e[t],i=this._zIndex;return n||(n=e[t]=[(t+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=n[n.length-1]+1,n.push(this._zIndex),this._zIndex!==i&&(this._style.popup.zIndex=this._zIndex),this},_releaseZIndex:function(){var e=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return e&&e.length>1&&(this.drawn&&e.splice(e.indexOf(this._zIndex),1),this.drawn=!1),this},_recaptureZIndex:function(){return this._releaseZIndex(),this._zIndexGroupLevel=null,this._captureZIndex()}},{propTypes:{theme:f.default.string,target:f.default.oneOf(["anchor","position"]).isRequired,view:f.default.oneOf(["classic","default"]),tone:f.default.string,hasTail:f.default.bool,tailSize:f.default.number,position:f.default.object,autoclosable:f.default.bool,visible:f.default.bool,directions:f.default.array,mainOffset:f.default.number,zIndexGroupLevel:f.default.number,secondaryOffset:f.default.number,viewportOffset:f.default.number,tailOffset:f.default.number,onMouseOver:f.default.func,onMouseLeave:f.default.func,calcPossible:f.default.func},defaultProps:{view:"classic",target:"anchor",directions:m,secondaryOffset:0,tailOffset:0,zIndexGroupLevel:0},_visiblePopupsZIndexes:{},ZINDEX_FACTOR:1e3,VIEWPORT_ACCURACY_FACTOR:.99,UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL:100,inject:u.default.unstable_renderSubtreeIntoContainer,contextTypes:{registerChildPopup:f.default.func,unRegisterChildPopup:f.default.func,zIndexGroupLevel:f.default.number,parentPopup:f.default.object},childContextTypes:{registerChildPopup:f.default.func,unRegisterChildPopup:f.default.func,zIndexGroupLevel:f.default.number,parentPopup:f.default.object}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(230),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(237),s=n(231);t.default=(0,s.declMod)({target:"anchor"},{block:"popup2",willInit:function(e){e.anchor;this._onDocumentChange=this._onDocumentChange.bind(this),this.__base.apply(this,arguments)},toggleWatchBaseEvents:function(e){this.__base.apply(this,arguments),e?document.addEventListener("documentchange",this._onDocumentChange):document.removeEventListener("documentchange",this._onDocumentChange)},_onDocumentChange:function(){this.redraw(this.props)},_getAnchorDomNode:function(e){return"function"==typeof e?e():e},_calcBestDrawingParams:function(e){var t=e.anchor,n=this.__base.apply(this,arguments);t=(0,o.findDOMNode)(this._getAnchorDomNode(t));var i=this._getFirstFixedParent(t);if(i){var r=0,s=0,a=this._getFirstFixedParent(this._scope);if(a){var u=a.getBoundingClientRect(),l=u.left,c=u.top;r=l,s=c}n.left-=window.pageXOffset-r,n.top-=window.pageYOffset-s}return this._style.popup.position=i?"fixed":"",n},_getFirstFixedParent:function(e){for(;e;){if(1===e.nodeType&&"fixed"===getComputedStyle(e).getPropertyValue("position"))return e;e=e.parentNode}},_calcTargetDimensions:function(e){var t=e.anchor;this.__base.apply(this,arguments),t=(0,o.findDOMNode)(this._getAnchorDomNode(t));var n=t.getBoundingClientRect(),i=n.left,r=n.top;return{left:i+window.pageXOffset,top:r+window.pageYOffset,width:t.offsetWidth,height:t.offsetHeight}}},{propTypes:{anchor:r.default.oneOfType([r.default.func,r.default.object])}})},function(e,t,n){"use strict";var i=n(1812);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(230),o=i(r),s=n(237),a=n(231),u=(n(248).default||n(248)).applyDecls(),l=i(u);t.default=(0,a.declMod)(function(e){var t=e.autoclosable,n=e.onOutsideClick;return t||n},{block:"popup2",willInit:function(){this.__base.apply(this,arguments),this._onDocKeyDown=this._onDocKeyDown.bind(this),this._onOutsideClick=this._onOutsideClick.bind(this),this.toggleWatchAutoClosableEvents=this.toggleWatchAutoClosableEvents.bind(this)},didMount:function(){this.__base.apply(this,arguments),this.props.visible&&this.toggleWatchAutoClosableEvents(!0)},willReceiveProps:function(e){var t=e.visible;this.__base.apply(this,arguments),this.props.visible!==t&&(this._preventHideByClick=!0,this.toggleWatchAutoClosableEvents(t))},willUnmount:function(){this.__base.apply(this,arguments),this.toggleWatchAutoClosableEvents(!1)},toggleWatchAutoClosableEvents:function(e){e?(window.addEventListener("keydown",this._onDocKeyDown),window.addEventListener("click",this._onOutsideClick)):(window.removeEventListener("keydown",this._onDocKeyDown),window.removeEventListener("click",this._onOutsideClick))},_anchor:function(){var e=this.props.anchor;return e&&e.call?e():e},_isElementOutside:function(e){if(this.domElementPopup.contains(e)||this.isElementInsideChildPopups(e))return!1;var t=(0,s.findDOMNode)(this._anchor());return!(t&&t.contains(e))},_onOutsideClick:function(e){if(this._preventHideByClick)return void(this._preventHideByClick=null);this._isElementOutside(e.target)&&this.props.onOutsideClick&&this.props.onOutsideClick(e)},_onDocKeyDown:function(e){e.keyCode!==l.default.ESC||this._hasOpenedChildPopups||this.props.onOutsideClick&&this.props.onOutsideClick(e)}},{propTypes:{onOutsideClick:function(e){return(e.autoclosable?o.default.func.isRequired:o.default.func).apply(void 0,arguments)}}})},,function(e,t,n){"use strict";function i(e,t,n){if(Object(o.h)()&&!e.errorType)throw new Error("Необходимо указать errorType при логировании ошибки");if(Object(o.h)()&&e.failIfPossible)throw e;Jane.ErrorLog.send(e,t,n)}function r(e){Object(o.h)()&&console.warn(e)}t.b=i,t.a=r;var o=n(246)},,,function(e,t,n){"use strict";function i(e,t){return(e&t)===t}var r=n(235),o=(n(233),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=o,n=e.Properties||{},s=e.DOMAttributeNamespaces||{},u=e.DOMAttributeNames||{},l=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&a._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var d in n){a.properties.hasOwnProperty(d)&&r("48",d);var f=d.toLowerCase(),p=n[d],h={attributeName:f,attributeNamespace:null,propertyName:d,mutationMethod:null,mustUseProperty:i(p,t.MUST_USE_PROPERTY),hasBooleanValue:i(p,t.HAS_BOOLEAN_VALUE),hasNumericValue:i(p,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:i(p,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:i(p,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(h.hasBooleanValue+h.hasNumericValue+h.hasOverloadedBooleanValue<=1||r("50",d),u.hasOwnProperty(d)){var m=u[d];h.attributeName=m}s.hasOwnProperty(d)&&(h.attributeNamespace=s[d]),l.hasOwnProperty(d)&&(h.propertyName=l[d]),c.hasOwnProperty(d)&&(h.mutationMethod=c[d]),a.properties[d]=h}}}),s=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",a={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:s,ATTRIBUTE_NAME_CHAR:s+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<a._isCustomAttributeFunctions.length;t++){if((0,a._isCustomAttributeFunctions[t])(e))return!0}return!1},injection:o};e.exports=a},function(e,t,n){"use strict";function i(){r.attachRefs(this,this._currentElement)}var r=n(1680),o=(n(251),n(236),{mountComponent:function(e,t,n,r,o,s){var a=e.mountComponent(t,n,r,o,s);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(i,e),a},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){r.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,o){var s=e._currentElement;if(t!==s||o!==e._context){var a=r.shouldUpdateRefs(s,t);a&&r.detachRefs(e,s),e.receiveComponent(t,n,o),a&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(i,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});e.exports=o},function(e,t,n){"use strict";function i(e){if(h){var t=e.node,n=e.children;if(n.length)for(var i=0;i<n.length;i++)m(t,n[i],null);else null!=e.html?d(t,e.html):null!=e.text&&p(t,e.text)}}function r(e,t){e.parentNode.replaceChild(t.node,e),i(t)}function o(e,t){h?e.children.push(t):e.node.appendChild(t.node)}function s(e,t){h?e.html=t:d(e.node,t)}function a(e,t){h?e.text=t:p(e.node,t)}function u(){return this.node.nodeName}function l(e){return{node:e,children:[],html:null,text:null,toString:u}}var c=n(329),d=n(299),f=n(330),p=n(370),h="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),m=f(function(e,t,n){11===t.node.nodeType||1===t.node.nodeType&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(i(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),i(t))});l.insertTreeBefore=m,l.replaceChildWithTree=r,l.queueChild=o,l.queueHTML=s,l.queueText=a,e.exports=l},function(e,t,n){"use strict";var i=n(240),r=n(376),o=n(1708),s=n(1713),a=n(281),u=n(1714),l=n(1715),c=n(1716),d=n(1717),f=a.createElement,p=a.createFactory,h=a.cloneElement,m=i,g=function(e){return e},v={Children:{map:o.map,forEach:o.forEach,count:o.count,toArray:o.toArray,only:d},Component:r.Component,PureComponent:r.PureComponent,createElement:f,cloneElement:h,isValidElement:a.isValidElement,PropTypes:u,createClass:c,createFactory:p,createMixin:g,DOM:s,version:l,__spread:m};e.exports=v},function(e,t,n){"use strict";function i(e){return void 0!==e.ref}function r(e){return void 0!==e.key}var o=n(240),s=n(259),a=(n(236),n(378),Object.prototype.hasOwnProperty),u=n(379),l={key:!0,ref:!0,__self:!0,__source:!0},c=function(e,t,n,i,r,o,s){var a={$$typeof:u,type:e,key:t,ref:n,props:s,_owner:o};return a};c.createElement=function(e,t,n){var o,u={},d=null,f=null;if(null!=t){i(t)&&(f=t.ref),r(t)&&(d=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source;for(o in t)a.call(t,o)&&!l.hasOwnProperty(o)&&(u[o]=t[o])}var p=arguments.length-2;if(1===p)u.children=n;else if(p>1){for(var h=Array(p),m=0;m<p;m++)h[m]=arguments[m+2];u.children=h}if(e&&e.defaultProps){var g=e.defaultProps;for(o in g)void 0===u[o]&&(u[o]=g[o])}return c(e,d,f,0,0,s.current,u)},c.createFactory=function(e){var t=c.createElement.bind(null,e);return t.type=e,t},c.cloneAndReplaceKey=function(e,t){return c(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},c.cloneElement=function(e,t,n){var u,d=o({},e.props),f=e.key,p=e.ref,h=(e._self,e._source,e._owner);if(null!=t){i(t)&&(p=t.ref,h=s.current),r(t)&&(f=""+t.key);var m;e.type&&e.type.defaultProps&&(m=e.type.defaultProps);for(u in t)a.call(t,u)&&!l.hasOwnProperty(u)&&(void 0===t[u]&&void 0!==m?d[u]=m[u]:d[u]=t[u])}var g=arguments.length-2;if(1===g)d.children=n;else if(g>1){for(var v=Array(g),_=0;_<g;_++)v[_]=arguments[_+2];d.children=v}return c(e.type,f,p,0,0,h,d)},c.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===u},e.exports=c},function(e,t,n){"use strict";var i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new vow.Promise(function(i,r){ns.request(e,t,n).then(function(e){if(!e||!e.length)return void r({error:"request-failed"});var t=e[0];if(!t.isValid())return void r(t.getError()||{error:"invalid-data"});i(e[0].getData())},function(e){r(Object.assign(e,{error:"model-request-failed"}))})})};t.a={get:function(e,t){return ns.Model.get(e,t)},request:function(e,t){return i(e,t)},forcedRequest:function(e,t){return i(e,t,{forced:!0})}}},function(e,t,n){"use strict";var i=n(1874);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return function(){var t=e.apply(this,arguments);return new y(function(e,n){function i(r,o){try{var s=t[r](o),a=s.value}catch(e){return void n(e)}if(!s.done)return y.resolve(a).then(function(e){i("next",e)},function(e){i("throw",e)});e(a)}return i("next")})}}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function u(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"f",function(){return w}),n.d(t,"d",function(){return k}),n.d(t,"b",function(){return C}),n.d(t,"a",function(){return M}),n.d(t,"e",function(){return D}),n.d(t,"c",function(){return O});var l,c,d,f,p,h,m=n(234),g=n(282),v=n(560),_=n.n(v),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=_.a.Promise,w=(f=d=function(){function e(t,n){o(this,e),a(this,"requestNewUnsubscribeData",c,this),this._stores=t,this._services=n}return b(e,[{key:"getUnsubscribeFiltersFolderFid",value:function(){return this._services.foldersService.getUnsubscribeFiltersFolderFid()}},{key:"createFiltersForMaillists",value:function(){var e=this,t=this._stores,n=t.unsubscribePopupStore,i=t.settingsStore,r=t.foldersStore,o=this._services.settingsService,s=r.getFolderBySymbol("unsubscribe");s||y.reject(new Error("UnsubscribeFilters: no unsubscribe fid"));var a=s.data&&s.data.fid,u=[];return n.allCheckedNewsletters.map(Object(m.action)(function(e){u.push({email:e.email,type:e.type,displayName:e.displayName,fid:a})})),g.a.forcedRequest("do-unsubscribe-furita-filters-create",{maillistList:JSON.stringify(u)}).then(Object(m.action)(function(t){return e._stores.unsubscribePopupStore.filterIds=t.filters,i.isSet("create-u-filters-once")||o.setSettings({"create-u-filters-once":!0}),t.filters}))}},{key:"applyNewMessagesFromFiltersToFolder",value:function(){var e=this;return this._stores.unsubscribePopupStore.filterIds?g.a.forcedRequest("do-unsubscribe-furita-filters-apply",{filterIdList:JSON.stringify(this._stores.unsubscribePopupStore.filterIds)}).then(Object(m.action)(function(){e._stores.unsubscribePopupStore.filterIds=null})):y.reject(new Error("UnsubscribeFilters: no filterIds for create/apply"))}},{key:"deleteUnsubscribeFilters",value:function(e){return e||e.filterIds?g.a.forcedRequest("do-unsubscribe-furita-filters-delete",{filterIds:JSON.stringify(e.filterIds)}):y.reject(new Error("UnsubscribeFilters: no filterIds for create/apply"))}},{key:"runAction",value:function(t){var n=this,i=this;return s(regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t instanceof S){n.next=2;break}throw new Error("UnsubscribeFilters: unexpected action");case 2:if(o=e.actions[t.name]){n.next=5;break}throw new Error("UnsubscribeFilters: unexpected action");case 5:return t.status="progress",n.prev=6,n.next=9,o.call(i,t.params);case 9:Object(m.runInAction)(Object(m.action)(function(){t.status="done"})),n.next=16;break;case 12:return n.prev=12,n.t0=n.catch(6),Object(m.runInAction)(Object(m.action)(function(){t.status="error"})),n.abrupt("return",y.reject(new Error("UnsubscribeFilters: "+n.t0)));case 16:case"end":return n.stop()}},r,n,[[6,12]])}))()}}]),e}(),d.actions={DeleteFiltersAction:function(e){return this.deleteUnsubscribeFilters(e)},CreateFiltersAction:function(){return this.createFiltersForMaillists()},ApplyFiltersAction:function(){return this.applyNewMessagesFromFiltersToFolder()},UpdateAllUnsubscribeAction:function(e){return this.requestNewUnsubscribeData(e)},CreateUnsubscribeFolderAction:function(){return this.getUnsubscribeFiltersFolderFid()}},l=f,u(l.prototype,"getUnsubscribeFiltersFolderFid",[m.action],Object.getOwnPropertyDescriptor(l.prototype,"getUnsubscribeFiltersFolderFid"),l.prototype),u(l.prototype,"createFiltersForMaillists",[m.action],Object.getOwnPropertyDescriptor(l.prototype,"createFiltersForMaillists"),l.prototype),u(l.prototype,"applyNewMessagesFromFiltersToFolder",[m.action],Object.getOwnPropertyDescriptor(l.prototype,"applyNewMessagesFromFiltersToFolder"),l.prototype),u(l.prototype,"deleteUnsubscribeFilters",[m.action],Object.getOwnPropertyDescriptor(l.prototype,"deleteUnsubscribeFilters"),l.prototype),c=u(l.prototype,"requestNewUnsubscribeData",[m.action],{enumerable:!0,initializer:function(){var e=this;return function(t){return t.requestMaster&&(Daria.React.UnsubscribePopup.isMaster=!0),t.forced=!0,e._stores.unsubscribePopupStore.getNewslettersAndFilters(t)}}}),u(l.prototype,"runAction",[m.action],Object.getOwnPropertyDescriptor(l.prototype,"runAction"),l.prototype),l),S=(p=function e(t,n){o(this,e),a(this,"status",h,this),this.name=t,this.params=n||{}},h=u(p.prototype,"status",[m.observable],{enumerable:!0,initializer:function(){return"init"}}),p),k=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"DeleteFiltersAction",e))}return r(t,e),t}(S),C=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"CreateFiltersAction",e))}return r(t,e),t}(S),M=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ApplyFiltersAction"))}return r(t,e),t}(S),D=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"UpdateAllUnsubscribeAction",e))}return r(t,e),t}(S),O=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"CreateUnsubscribeFolderAction"))}return r(t,e),t}(S)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(315);t.default=(0,i.decl)({block:"yaplus",elem:"badge",tag:"span"})},function(e,t,n){"use strict";var i="",r={},o=function(e){return i=e},s=function(e,t,n,i){return r[e][t][n](i)},a=function(e,t){return r[e]=t[i]};e.exports={setTankerProjectId:o,getKey:s,addTranslation:a}},function(e,t,n){"use strict";function i(e,t,n){var i=t.dispatchConfig.phasedRegistrationNames[n];return v(e,i)}function r(e,t,n){var r=i(e,n,t);r&&(n._dispatchListeners=m(n._dispatchListeners,r),n._dispatchInstances=m(n._dispatchInstances,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.traverseTwoPhase(e._targetInst,r,e)}function s(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?h.getParentInstance(t):null;h.traverseTwoPhase(n,r,e)}}function a(e,t,n){if(n&&n.dispatchConfig.registrationName){var i=n.dispatchConfig.registrationName,r=v(e,i);r&&(n._dispatchListeners=m(n._dispatchListeners,r),n._dispatchInstances=m(n._dispatchInstances,e))}}function u(e){e&&e.dispatchConfig.registrationName&&a(e._targetInst,null,e)}function l(e){g(e,o)}function c(e){g(e,s)}function d(e,t,n,i){h.traverseEnterLeave(n,i,a,e,t)}function f(e){g(e,u)}var p=n(288),h=n(323),m=n(362),g=n(363),v=(n(236),p.getListener),_={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:f,accumulateEnterLeaveDispatches:d};e.exports=_},function(e,t,n){"use strict";function i(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}function r(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!i(t));default:return!1}}var o=n(235),s=n(322),a=n(323),u=n(324),l=n(362),c=n(363),d=(n(233),{}),f=null,p=function(e,t){e&&(a.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},h=function(e){return p(e,!0)},m=function(e){return p(e,!1)},g=function(e){return"."+e._rootNodeID},v={injection:{injectEventPluginOrder:s.injectEventPluginOrder,injectEventPluginsByName:s.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n&&o("94",t,typeof n);var i=g(e);(d[t]||(d[t]={}))[i]=n;var r=s.registrationNameModules[t];r&&r.didPutListener&&r.didPutListener(e,t,n)},getListener:function(e,t){var n=d[t];if(r(t,e._currentElement.type,e._currentElement.props))return null;var i=g(e);return n&&n[i]},deleteListener:function(e,t){var n=s.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var i=d[t];if(i){delete i[g(e)]}},deleteAllListeners:function(e){var t=g(e);for(var n in d)if(d.hasOwnProperty(n)&&d[n][t]){var i=s.registrationNameModules[n];i&&i.willDeleteListener&&i.willDeleteListener(e,n),delete d[n][t]}},extractEvents:function(e,t,n,i){for(var r,o=s.plugins,a=0;a<o.length;a++){var u=o[a];if(u){var c=u.extractEvents(e,t,n,i);c&&(r=l(r,c))}}return r},enqueueEvents:function(e){e&&(f=l(f,e))},processEventQueue:function(e){var t=f;f=null,e?c(t,h):c(t,m),f&&o("95"),u.rethrowCaughtError()},__purge:function(){d={}},__getListenerBank:function(){return d}};e.exports=v},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(258),o=n(325),s={view:function(e){if(e.view)return e.view;var t=o(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var r=new Error(n);throw r.name="Invariant Violation",r.framesToPop=1,r}e.exports=i},function(e,t,n){"use strict";var i={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return c});var r=n(234),o=n(96),s=n.n(o),a=n(282),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=s.a.debounce,c=function(){function e(){i(this,e),this._modelSubscriptions={}}return u(e,[{key:"_addModelSubscription",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.a.get(e,t),r=i.key;return r in this._modelSubscriptions?this._modelSubscriptions[r]:(this._modelSubscriptions[r]=this._createModelSubscription(i,n),this._modelSubscriptions[r])}},{key:"_requestModelData",value:function(e,t){return a.a.request(e,t).then(function(e){return e},function(){return{}})}},{key:"_createModelSubscription",value:function(e,t){var n=this,i=e.key,o={},s=void 0,a=void 0;for(var u in t)switch(u){case"onChanged":s=function(){t.onChanged(e.getData()||void 0,e.getError()||void 0)},a=l(Object(r.action)(s),0),o["ns-model-changed"]=a,e.on("ns-model-changed",a),s();break;case"onDestroyed":s=Object(r.action)(t.onDestroyed),o["ns-model-destroyed"]=s,e.on("ns-model-destroyed",s);break;default:throw new Error('unknown handler "'+u+'" for model subscription')}return function(){for(var t in o)e.off(t,o[t]);delete n._modelSubscriptions[i]}}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return v});var s,a,u,l,c,d,f,p,h=n(234),m=n(246),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=(s=function(){function e(t){i(this,e),r(this,"_isFolded",a,this),r(this,"_showSuggest",u,this),r(this,"_showAdvanced",l,this),r(this,"isAnimated",c,this),r(this,"currentShowText",d,this),r(this,"_highlightedSuggestItemIndex",f,this),r(this,"_lastSelectedSuggestItem",p,this),this.settingsStore=t}return g(e,[{key:"getHighlightedSuggestItemIndex",value:function(){return this._highlightedSuggestItemIndex}},{key:"setHighlightedSuggestItemIndex",value:function(e){this._highlightedSuggestItemIndex=e}},{key:"getLastSelectedSuggestItem",value:function(){return this._lastSelectedSuggestItem}},{key:"setLastSelectedSuggestItem",value:function(e){this._lastSelectedSuggestItem=e}},{key:"resetCurrentSuggestItem",value:function(){this._highlightedSuggestItemIndex=-1,this._lastSelectedSuggestItem=null}},{key:"isFolded",get:function(){return this._isFolded},set:function(e){this._isFolded=e,this._isFolded&&(this._showSuggest=!1,this._showAdvanced=!1,this.resetCurrentSuggestItem())}},{key:"showSuggest",get:function(){return this._showSuggest},set:function(e){this._showSuggest=e,this._showSuggest&&(this._showAdvanced=!1)}},{key:"showAdvanced",get:function(){return this._showAdvanced},set:function(e){this._showAdvanced=e,this._showAdvanced&&(this._showSuggest=!1)}},{key:"hasLeftGap",get:function(){return this.settingsStore.settings.messages_avatars&&!Object(m.k)()}}]),e}(),a=o(s.prototype,"_isFolded",[h.observable],{enumerable:!0,initializer:function(){return!0}}),u=o(s.prototype,"_showSuggest",[h.observable],{enumerable:!0,initializer:function(){return!1}}),l=o(s.prototype,"_showAdvanced",[h.observable],{enumerable:!0,initializer:function(){return!1}}),c=o(s.prototype,"isAnimated",[h.observable],{enumerable:!0,initializer:function(){return!1}}),d=o(s.prototype,"currentShowText",[h.observable],{enumerable:!0,initializer:function(){return""}}),f=o(s.prototype,"_highlightedSuggestItemIndex",[h.observable],{enumerable:!0,initializer:function(){return-1}}),p=o(s.prototype,"_lastSelectedSuggestItem",[h.observable],{enumerable:!0,initializer:function(){return null}}),o(s.prototype,"setHighlightedSuggestItemIndex",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"setHighlightedSuggestItemIndex"),s.prototype),o(s.prototype,"setLastSelectedSuggestItem",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"setLastSelectedSuggestItem"),s.prototype),o(s.prototype,"resetCurrentSuggestItem",[h.action],Object.getOwnPropertyDescriptor(s.prototype,"resetCurrentSuggestItem"),s.prototype),o(s.prototype,"hasLeftGap",[h.computed],Object.getOwnPropertyDescriptor(s.prototype,"hasLeftGap"),s.prototype),s)},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){return Object(a.i)()?"pdd":Object(a.g)()?"corp":"big"}function o(e){return["project=search_mail","product="+p,"reqid="+e.getSearchSessionId()]}function s(e){var t=[];return c.forEach(function(n){e.hasOwnProperty(n)&&t.push(n+":"+e[n])}),t.join(",")}n.d(t,"a",function(){return f}),n.d(t,"b",function(){return p});var a=n(246),u=n(274),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=["scope","fid","lid","unread","attaches","from","to","type"],d=Object.freeze({history:'Выбор "прошлый запрос"',subject:'Выбор "тема"',important:'Выбор "важные"',unread:'Выбор "непрочитанное письмо"',folder:'Выбор "папки"',ql:'Выбор "язык запросов"',contact:'Выбор "контакты"',mail:'Выбор "письма"',label:'Выбор "метки"'}),f=function(){function e(t,n){i(this,e),this._suggestWasLogged=!1,this._stores=t,this._services=n}return l(e,[{key:"logMessageClick",value:function(e,t,n,i,r){var u=this._stores,l=u.searchStore,c=u.routerStore,d=c.currentPage.params;if(Object(a.j)(d)){var f=l.showSearchResultsTimestamp,p=Date.now()-f,h=[].concat(o(l),["r="+encodeURIComponent(r.request),"pos="+n,"user="+Object(a.d)(),"mid="+t,"time="+p,"clicktype="+e]);i&&h.push("tophits=yes");var m=s(r);m&&h.push("filter="+m);var g=(Daria.Config["exp-test-ids"]||[]).join(",");g&&h.push("exp="+g),Daria.searchClickCounter(h)}}},{key:"logSearchSuggest",value:function(e){var t=this._stores.searchStore,n=t.suggestItems.length;if(!e.suggestWithEmptyRequest||0!==n){var i=[].concat(o(t),["action=suggest","uid="+Object(a.d)(),"user_text="+encodeURIComponent(e.text||""),"count="+n]);if(e.suggestUsed){var r=e.target||"";i.push("pos="+e.itemPos,"target="+r,"show_text="+encodeURIComponent(e.show_text||""),"search_text="+encodeURIComponent(e.search_text||""),"suggest_used=yes"),this._metrikaCountSuggestItemClick(r)}else e.suggestWithEmptyRequest||i.push("suggest_used=no");Daria.searchClickCounter(i)}}},{key:"_metrikaCountSuggestItemClick",value:function(e){var t=d[e];if(!t)return void Object(u.b)({errorType:"search-log-service:unknown-target",failIfPossible:!0});Jane.c("Поиск","Cаджест",t)}},{key:"countSearchActivation",value:function(){Jane.c("Поиск","Активация поисковой строки")}},{key:"logSearch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],o=this._stores.searchStore,s=void 0;if(t.from){var u=t.from.substr(0,6);s=u!==(t.to||"").substr(0,6)?u.substr(0,4):u}var l={type:"search.start-search",suid:Object(a.c)(),advanced:i,action:n.metrika,text:e||"",message_type:t.type||"",folder:t.fid||"",label:t.lid||"",date:s||"",mail_type:r(),searchid:o.getSearchId(),reqid:o.getSearchSessionId()};Jane.ErrorLog.send(l)}},{key:"logToggleAdvanced",value:function(e,t){Jane.ErrorLog.send({type:"search.toggle-advanced",suid:Object(a.c)(),text:e,action:t?"open":"close",mail_type:r()}),Jane.c("Поиск","Клик по расширенному поиску")}},{key:"suggestWasLogged",get:function(){return this._suggestWasLogged},set:function(e){this._suggestWasLogged=e}}]),e}(),p=function(){return Object(a.i)()?"webpdd":Object(a.g)()?"YT":"web"}()},,function(e,t,n){"use strict";var i=n(235),r=(n(233),{}),o={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,r,o,s,a,u){this.isInTransaction()&&i("27");var l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=e.call(t,n,r,o,s,a,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i=t[n];try{this.wrapperInitData[n]=r,this.wrapperInitData[n]=i.initialize?i.initialize.call(this):null}finally{if(this.wrapperInitData[n]===r)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()||i("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var o,s=t[n],a=this.wrapperInitData[n];try{o=!0,a!==r&&s.close&&s.close.call(this,a),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}};e.exports=o},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(289),o=n(369),s=n(327),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:s,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};r.augmentClass(i,a),e.exports=i},function(e,t,n){"use strict";var i,r=n(247),o=n(329),s=/^[ \r\n\t\f]/,a=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=n(330),l=u(function(e,t){if(e.namespaceURI!==o.svg||"innerHTML"in e)e.innerHTML=t;else{i=i||document.createElement("div"),i.innerHTML="<svg>"+t+"</svg>";for(var n=i.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(r.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(l=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),s.test(t)||"<"===t[0]&&a.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}e.exports=l},function(e,t,n){"use strict";function i(e){var t=""+e,n=o.exec(t);if(!n)return t;var i,r="",s=0,a=0;for(s=n.index;s<t.length;s++){switch(t.charCodeAt(s)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#x27;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}a!==s&&(r+=t.substring(a,s)),a=s+1,r+=i}return a!==s?r+t.substring(a,s):r}function r(e){return"boolean"==typeof e||"number"==typeof e?""+e:i(e)}var o=/["'&<>]/;e.exports=r},function(e,t,n){"use strict";function i(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=p++,d[e[m]]={}),d[e[m]]}var r,o=n(240),s=n(322),a=n(1701),u=n(369),l=n(1702),c=n(326),d={},f=!1,p=0,h={topAbort:"abort",topAnimationEnd:l("animationend")||"animationend",topAnimationIteration:l("animationiteration")||"animationiteration",topAnimationStart:l("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:l("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),g=o({},a,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,r=i(n),o=s.registrationNameDependencies[e],a=0;a<o.length;a++){var u=o[a];r.hasOwnProperty(u)&&r[u]||("topWheel"===u?c("wheel")?g.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):c("mousewheel")?g.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):g.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===u?c("scroll",!0)?g.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):g.ReactEventListener.trapBubbledEvent("topScroll","scroll",g.ReactEventListener.WINDOW_HANDLE):"topFocus"===u||"topBlur"===u?(c("focus",!0)?(g.ReactEventListener.trapCapturedEvent("topFocus","focus",n),g.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):c("focusin")&&(g.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),g.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),r.topBlur=!0,r.topFocus=!0):h.hasOwnProperty(u)&&g.ReactEventListener.trapBubbledEvent(u,h[u],n),r[u]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===r&&(r=g.supportsEventPageXY()),!r&&!f){var e=u.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),f=!0}}});e.exports=g},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o});var i=400,r="#333",o=5e3},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return h});var u,l,c=n(234),d=n(292),f=n(1762),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=(u=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s(e,"labels",l,e),e._addModelSubscription("labels",{},{onChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.labels=(t.label||[]).map(function(e){return new f.a(e)})},onDestroyed:function(){e.labels=[]}}),e}return o(t,e),p(t,[{key:"getLabelBySymbolicName",value:function(e){var t=this.labels.findIndex(function(t){return t.data.symbolicName===e});return t>-1?this.labels[t]:null}},{key:"getLabelById",value:function(e){var t=this.labels.findIndex(function(t){return t.data.lid===e});return t>-1?this.labels[t]:null}},{key:"labelItemsForSearch",get:function(){var e=this.getLabelBySymbolicName("important_label"),t=[];return e&&t.push({value:e.data.lid,text:e.data.name,icon:"important"}),t.push({value:"unread",text:i18n("%Labels_Only_New"),icon:"unread"}),t.concat(this.labels.filter(function(e){return e.data.user}).sort(function(e,t){return e.data.name>t.data.name}).map(function(e){return{value:e.data.lid,text:e.data.name,color:"#"+e.data.color}}))}}]),t}(d.a),l=a(u.prototype,"labels",[c.observable],{enumerable:!0,initializer:function(){return[]}}),a(u.prototype,"labelItemsForSearch",[c.computed],Object.getOwnPropertyDescriptor(u.prototype,"labelItemsForSearch"),u.prototype),u)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return g});var u,l,c,d=n(234),f=n(246),p=n(292),h=n(268),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=(u=function(e){function t(){var e,n,o,a;i(this,t);for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(d))),o._searchSessionId="",o._searchId="",o._showSearchResultsTimestamp=null,o.searchQuery=new h.a,s(o,"suggestItems",l,o),s(o,"simplifiedParams",c,o),a=n,r(o,a)}return o(t,e),m(t,[{key:"saveShowSearchResultsTimestamp",value:function(){this._showSearchResultsTimestamp=Date.now()}},{key:"getSuggestItemRelative",value:function(e,t){var n=this.suggestItems,i=e+t,r=null;return i<-1?i=n.length-1:i>=n.length&&(i=-1),i>-1&&(r=n[i]),{newIndex:i,newItem:r}}},{key:"getItemPosition",value:function(e){return this.suggestItems?this.suggestItems.indexOf(e):-1}},{key:"getSearchSessionId",value:function(){return this._searchSessionId||(this._searchSessionId=[Date.now(),Object(f.d)()].join("")),this._searchSessionId}},{key:"dropSearchSession",value:function(){this._searchSessionId=""}},{key:"getSearchId",value:function(){return this._searchId||this.generateSearchId(),this._searchId}},{key:"generateSearchId",value:function(){this._searchId=Math.random().toString().substr(2)}},{key:"showSearchResultsTimestamp",get:function(){return this._showSearchResultsTimestamp}},{key:"wasSearchRequestSimplified",get:function(){return Boolean(this.simplifiedParams)}},{key:"hasSuggestItems",get:function(){return Boolean(this.suggestItems&&this.suggestItems.length)}}]),t}(p.a),l=a(u.prototype,"suggestItems",[d.observable],{enumerable:!0,initializer:function(){return[]}}),c=a(u.prototype,"simplifiedParams",[d.observable],{enumerable:!0,initializer:function(){return null}}),a(u.prototype,"wasSearchRequestSimplified",[d.computed],Object.getOwnPropertyDescriptor(u.prototype,"wasSearchRequestSimplified"),u.prototype),a(u.prototype,"hasSuggestItems",[d.computed],Object.getOwnPropertyDescriptor(u.prototype,"hasSuggestItems"),u.prototype),u)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return m});var u,l,c=n(234),d=n(292),f=n(246),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h={enable_hotkeys:!0,dnd_enabled:!0},m=(u=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s(e,"settings",l,e),e._addModelSubscription("settings",{},{onChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.settings=t},onDestroyed:function(){e.settings={}}}),e}return o(t,e),p(t,[{key:"isSet",value:function(e){return Object(f.a)()?Boolean(h[e]):Boolean(this.settings[e])}},{key:"isCompactHeaderMode",get:function(){return this.isSet("liza_minified_header")}}]),t}(d.a),l=a(u.prototype,"settings",[c.observable],{enumerable:!0,initializer:function(){return{}}}),a(u.prototype,"isCompactHeaderMode",[c.computed],Object.getOwnPropertyDescriptor(u.prototype,"isCompactHeaderMode"),u.prototype),u)},function(e,t,n){"use strict";var i=n(1764);n.d(t,"b",function(){return i.a});var r=n(295);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"textinput",elem:"box",tag:"span"},{isBox:function(e){return e&&"function"==typeof e.type&&"textinput__box"===e.type.displayName}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.declMod)({glyph:"*"},{block:"icon",mods:function(){return i({},this.__base.apply(this,arguments),{"has-glyph":"yes"})}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(232),o=i(r),s=n(230),a=i(s),u=n(231),l=i(u);t.default=(0,u.decl)({block:"menu",elem:"group",tag:function(e){return e.isNavigation?"ul":this.__base()},attrs:function(){return{role:"group"}},content:function(e){var t=e.title,n=e.children,i=[];return t&&i.push(o.default.createElement(l.default,{block:this.block,elem:"title",attrs:{"aria-hidden":"true"}},t)),[].concat(i,n).map(function(e,t){return o.default.cloneElement(e,{key:"in-group-"+t})})}},{propTypes:{title:a.default.string},isGroup:function(e){return e&&"function"==typeof e.type&&"menu__group"===e.type.displayName}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(231),s=n(230),a=i(s),u=n(237),l=(n(248).default||n(248)).applyDecls(),c=i(l);t.default=(0,o.decl)({block:"menu",willInit:function(e){e.val;this.__base.apply(this,arguments),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.hoverItem=this.hoverItem.bind(this),this.removeHover=this.removeHover.bind(this),this.scrollToItem=this.scrollToItem.bind(this),this._isNav=this._isNav.bind(this)},getChildContext:function(){return r({},this.__base.apply(this,arguments),{hoverItem:this.hoverItem,removeHover:this.removeHover})},attrs:function(e){var t=e.disabled;return r({onFocus:t?void 0:this.onFocus,onBlur:t?void 0:this.onBlur,onKeyDown:t?void 0:this.onKeyDown,onKeyPress:t?void 0:this.onKeyPress,onKeyUp:t?void 0:this.onKeyUp},this.__base.apply(this,arguments))},onFocus:function(e){this._hoveredItem||!this.items[0]||this._isNav()||(this.hoverItem(this.items[0]),this.scrollToItem(this._hoveredItem)),this.props.onFocus&&this.props.onFocus(e)},onBlur:function(e){this.removeHover(),this.props.onBlur&&this.props.onBlur(e)},onKeyDown:function(e){if(this._isNav())return!1;var t=e.keyCode;c.default.is(t,"UP","DOWN")&&(e.preventDefault(),this.hoverNext(c.default.is(t,"UP")),this._dropSearchCache())},onKeyUp:function(e){if(c.default.is(e.keyCode,"ENTER","SPACE")){var t=this._hoveredItem;if(!t)return;var n=void 0===t.props.val?null:t.props.val;t.props.onClick&&t.props.onClick(e,n)}},onKeyPress:function(e){var t=Number(new Date),n=e.charCode,i=String.fromCharCode(n).toLowerCase(),r=i===this._lastChar&&1===this._searchTerm.length,o=this._hoveredItem,s=this.items,a=s.indexOf(o);if(n<=c.default.SPACE||e.ctrlKey||e.altKey||e.metaKey)return void(this._lastTime=t);t-this._lastTime>this.SEARCH_TIMEOUT||r?this._searchTerm=i:this._searchTerm=(this._searchTerm||"")+i,this._lastChar=i,this._lastTime=t,a=a>=0?a:0;var u=o?o.getText():"";r&&0===this._normalizeText(u).indexOf(this._searchTerm)&&(a=a>=s.length-1?0:a+1),this.hoverText(this._searchTerm,a)},hoverItem:function(e){this._hoveredItem!==e&&(this._hoveredItem&&this._hoveredItem.setState({hovered:!1}),!e.props.disabled&&e.setState({hovered:!0}),this._hoveredItem=e)},removeHover:function(){this._hoveredItem&&(this._hoveredItem.setState({hovered:!1}),this._hoveredItem=null)},hoverNext:function(e){var t=this.items.slice(),n=void 0;t=e?t.reverse():t;for(var i,r=0,o=!1;i=t[r];r++)if(!i.props.disabled)if(i.state.hovered)o=!0;else{if(o){n=i;break}n||(n=i)}n&&(this.removeHover(),this.hoverItem(n),this.scrollToItem(n))},hoverText:function(e,t){if(this.items.length)for(var n=this.items,i=this._normalizeText(e),r=n.length,o=t||0,s=void 0;o<r;){if(s=n[o],!s.props.disabled&&0===this._normalizeText(s.getText()).indexOf(i))return this.removeHover(),this.hoverItem(s),void this.scrollToItem(s);o++,o===n.length&&(o=0,r=t)}},scrollToItem:function(e){var t=(0,u.findDOMNode)(e),n=(0,u.findDOMNode)(this),i=n.getBoundingClientRect().top,r=t.getBoundingClientRect().top,o=0;r<i?o=r-i:(o=r+t.offsetHeight-i-n.offsetHeight)<0&&(o=0),n.scrollTop=n.scrollTop+o},_normalizeText:function(e){return(e||"").toLowerCase().replace(/ё/,"е")},_dropSearchCache:function(){this._lastTime=this._lastChar=this._searchTerm=void 0},_isNav:function(){return"navigation"===this.props.type},SEARCH_TIMEOUT:1500},{childContextTypes:{hoverItem:a.default.func,removeHover:a.default.func,registerItem:a.default.func,unregisterItem:a.default.func}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.declMod)({view:"default"},{block:"menu",mods:function(e){var t=e.tone,n=e.size;return i({},this.__base.apply(this,arguments),{tone:t||"default",size:n||"n"})}},{propTypes:{tone:o.default.string}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(1875),(n(557).default||n(557)).applyDecls()),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"link",elem:"inner",tag:"span"})},function(e,t,n){"use strict";function i(e){return!!e&&"yes"}var r=n(232),o=n(567),s=n(398).origin,a=n(399),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=a({preset:{Render:function(){var e=[].slice.call(arguments);return e[1]=u({"data-lego":"react"},e[1]),r.createElement.apply(r,e)},Base:r.Component,classAttribute:"className",PropTypes:o},naming:s});r.Component.bool2string=i,e.exports=l.Bem,e.exports.decl=l.decl,e.exports.declMod=l.declMod,e.exports.bool2string=i},function(e,t,n){function i(e){return null==e?"":r(e)}var r=n(1957);e.exports=i},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=console.assert.bind(console),a=Symbol("default"),u=function(){function e(){i(this,e),this._scopes={}}return o(e,[{key:"add",value:function(e,t,n){s(t,"Unexpected empty key"),s(n,"Unexpected empty link");var i=this.scope(e);if(i[t])throw new Error("");i[t]=n}},{key:"get",value:function(e,t){s(t,"Unexpected empty key");var n=this.scope(e),i=n[t];if(i)return i;var r=n[a]||this.scope(a)[a];if(r)return r(e,t);throw new Error("Undefined key '"+t+"' in scope '"+e+"'")}},{key:"default",value:function(e,t){"function"==typeof e&&(t=e,e=null),void 0==e&&(e=a),s(t,"Unexpected empty callback"),this.scope(e)[a]=t}},{key:"scope",value:function(e,t){return s(e,"Unexpected empty scope"),"object"===(void 0===t?"undefined":r(t))&&s(!this._scopes[e],"Override of existing links scope"),this._scopes[e]||(this._scopes[e]=t||{}),this._scopes[e]}}]),e}();e.exports=new u},,,,function(e,t,n){"use strict";function i(){if(a)for(var e in u){var t=u[e],n=a.indexOf(e);if(n>-1||s("96",e),!l.plugins[n]){t.extractEvents||s("97",e),l.plugins[n]=t;var i=t.eventTypes;for(var o in i)r(i[o],t,o)||s("98",o,e)}}}function r(e,t,n){l.eventNameDispatchConfigs.hasOwnProperty(n)&&s("99",n),l.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var r in i)if(i.hasOwnProperty(r)){var a=i[r];o(a,t,n)}return!0}return!!e.registrationName&&(o(e.registrationName,t,n),!0)}function o(e,t,n){l.registrationNameModules[e]&&s("100",e),l.registrationNameModules[e]=t,l.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var s=n(235),a=(n(233),null),u={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){a&&s("101"),a=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];u.hasOwnProperty(n)&&u[n]===r||(u[n]&&s("102",n),u[n]=r,t=!0)}t&&i()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return l.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var n=t.phasedRegistrationNames;for(var i in n)if(n.hasOwnProperty(i)){var r=l.registrationNameModules[n[i]];if(r)return r}}return null},_resetEventPlugins:function(){a=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];l.plugins.length=0;var t=l.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var i=l.registrationNameModules;for(var r in i)i.hasOwnProperty(r)&&delete i[r]}};e.exports=l},function(e,t,n){"use strict";function i(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e}function r(e){return"topMouseMove"===e||"topTouchMove"===e}function o(e){return"topMouseDown"===e||"topTouchStart"===e}function s(e,t,n,i){var r=e.type||"unknown-event";e.currentTarget=v.getNodeFromInstance(i),t?m.invokeGuardedCallbackWithCatch(r,n,e):m.invokeGuardedCallback(r,n,e),e.currentTarget=null}function a(e,t){var n=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!e.isPropagationStopped();r++)s(e,t,n[r],i[r]);else n&&s(e,t,n,i);e._dispatchListeners=null,e._dispatchInstances=null}function u(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var i=0;i<t.length&&!e.isPropagationStopped();i++)if(t[i](e,n[i]))return n[i]}else if(t&&t(e,n))return n;return null}function l(e){var t=u(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)&&h("103"),e.currentTarget=t?v.getNodeFromInstance(n):null;var i=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,i}function d(e){return!!e._dispatchListeners}var f,p,h=n(235),m=n(324),g=(n(233),n(236),{injectComponentTree:function(e){f=e},injectTreeTraversal:function(e){p=e}}),v={isEndish:i,isMoveish:r,isStartish:o,executeDirectDispatch:c,executeDispatchesInOrder:a,executeDispatchesInOrderStopAtTrue:l,hasDispatches:d,getInstanceFromNode:function(e){return f.getInstanceFromNode(e)},getNodeFromInstance:function(e){return f.getNodeFromInstance(e)},isAncestor:function(e,t){return p.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return p.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return p.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return p.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,i,r){return p.traverseEnterLeave(e,t,n,i,r)},injection:g};e.exports=v},function(e,t,n){"use strict";function i(e,t,n){try{t(n)}catch(e){null===r&&(r=e)}}var r=null,o={invokeGuardedCallback:i,invokeGuardedCallbackWithCatch:i,rethrowCaughtError:function(){if(r){var e=r;throw r=null,e}}};e.exports=o},function(e,t,n){"use strict";function i(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var s=document.createElement("div");s.setAttribute(n,"return;"),i="function"==typeof s[n]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var r,o=n(247);o.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=i},function(e,t,n){"use strict";function i(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var i=o[e];return!!i&&!!n[i]}function r(e){return i}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=r},function(e,t,n){"use strict";function i(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function r(e,t,n){c.insertTreeBefore(e,t,n)}function o(e,t,n){Array.isArray(t)?a(e,t[0],t[1],n):m(e,t,n)}function s(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],u(e,t,n),e.removeChild(n)}e.removeChild(t)}function a(e,t,n,i){for(var r=t;;){var o=r.nextSibling;if(m(e,r,i),r===n)break;r=o}}function u(e,t,n){for(;;){var i=t.nextSibling;if(i===n)break;e.removeChild(i)}}function l(e,t,n){var i=e.parentNode,r=e.nextSibling;r===t?n&&m(i,document.createTextNode(n),r):n?(h(r,n),u(i,r,t)):u(i,e,t)}var c=n(279),d=n(1686),f=(n(243),n(251),n(330)),p=n(299),h=n(370),m=f(function(e,t,n){e.insertBefore(t,n)}),g=d.dangerouslyReplaceNodeWithMarkup,v={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:l,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var a=t[n];switch(a.type){case"INSERT_MARKUP":r(e,a.content,i(e,a.afterNode));break;case"MOVE_EXISTING":o(e,a.fromNode,i(e,a.afterNode));break;case"SET_MARKUP":p(e,a.content);break;case"TEXT_CONTENT":h(e,a.content);break;case"REMOVE_NODE":s(e,a.fromNode)}}}};e.exports=v},function(e,t,n){"use strict";var i={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=i},function(e,t,n){"use strict";var i=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e};e.exports=i},function(e,t,n){"use strict";function i(e){null!=e.checkedLink&&null!=e.valueLink&&a("87")}function r(e){i(e),(null!=e.value||null!=e.onChange)&&a("88")}function o(e){i(e),(null!=e.checked||null!=e.onChange)&&a("89")}function s(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var a=n(235),u=n(1704),l=n(374),c=n(280),d=l(c.isValidElement),f=(n(233),n(236),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),p={value:function(e,t,n){return!e[t]||f[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:d.func},h={},m={checkPropTypes:function(e,t,n){for(var i in p){if(p.hasOwnProperty(i))var r=p[i](t,i,e,"prop",null,u);if(r instanceof Error&&!(r.message in h)){h[r.message]=!0;s(n)}}},getValue:function(e){return e.valueLink?(r(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(o(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(r(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(o(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=m},function(e,t,n){"use strict";var i=n(235),r=(n(233),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r&&i("104"),o.replaceNodeWithMarkup=e.replaceNodeWithMarkup,o.processChildrenUpdates=e.processChildrenUpdates,r=!0}}};e.exports=o},function(e,t,n){"use strict";function i(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function r(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var s=0;s<n.length;s++)if(!o.call(t,n[s])||!i(e[n[s]],t[n[s]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";function i(e,t){var n=null===e||!1===e,i=null===t||!1===t;if(n||i)return n===i;var r=typeof e,o=typeof t;return"string"===r||"number"===r?"string"===o||"number"===o:"object"===o&&e.type===t.type&&e.key===t.key}e.exports=i},function(e,t,n){"use strict";function i(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function r(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(t,function(e){return n[e]})}var o={escape:i,unescape:r};e.exports=o},function(e,t,n){"use strict";function i(e){u.enqueueUpdate(e)}function r(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,i=Object.keys(e);return i.length>0&&i.length<20?n+" (keys: "+i.join(", ")+")":n}function o(e,t){var n=a.get(e);if(!n){return null}return n}var s=n(235),a=(n(259),n(291)),u=(n(251),n(253)),l=(n(233),n(236),{isMounted:function(e){var t=a.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){l.validateCallback(t,n);var r=o(e);if(!r)return null;r._pendingCallbacks?r._pendingCallbacks.push(t):r._pendingCallbacks=[t],i(r)},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],i(e)},enqueueForceUpdate:function(e){var t=o(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,i(t))},enqueueReplaceState:function(e,t,n){var r=o(e,"replaceState");r&&(r._pendingStateQueue=[t],r._pendingReplaceState=!0,void 0!==n&&null!==n&&(l.validateCallback(n,"replaceState"),r._pendingCallbacks?r._pendingCallbacks.push(n):r._pendingCallbacks=[n]),i(r))},enqueueSetState:function(e,t){var n=o(e,"setState");if(n){(n._pendingStateQueue||(n._pendingStateQueue=[])).push(t),i(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,i(e)},validateCallback:function(e,t){e&&"function"!=typeof e&&s("122",t,r(e))}});e.exports=l},function(e,t,n){"use strict";var i=(n(240),n(249)),r=(n(236),i);e.exports=r},function(e,t,n){"use strict";function i(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,t>=32||13===t?t:0}e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return f});var s,a,u,l,c,d=n(234),f=(s=function e(t,n){i(this,e),r(this,"data",a,this),r(this,"error",u,this),r(this,"setData",l,this),r(this,"setError",c,this),n?this.setError(n):t&&this.setData(t)},a=o(s.prototype,"data",[d.observable],{enumerable:!0,initializer:function(){return{}}}),u=o(s.prototype,"error",[d.observable],{enumerable:!0,initializer:function(){return{}}}),l=o(s.prototype,"setData",[d.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.data=t,e.error={}}}}),c=o(s.prototype,"setError",[d.action],{enumerable:!0,initializer:function(){var e=this;return function(t){"string"==typeof t&&(t={message:t}),e.data={},e.error=t}}}),s)},function(e,t){e.exports={anime:{name:"anime","loc-name":i18n("%Theme_name_anime"),skins:{count:1}},art:{name:"art","loc-name":i18n("%Theme_name_art"),skins:{count:25}},bears:{name:"bears","loc-name":i18n("%Theme_name_bears"),skins:{scopes:{grass:{count:6},sea:{count:4},room:{count:2,"skin-1":{},"skin-2":{}}}},"new-theme":{aside_is_dark:!0,skins:{scopes:{grass:{count:6,page_is_dark:!0},sea:{count:4,page_is_dark:!0},room:{count:2,page_is_dark:!0,"skin-1":{},"skin-2":{}}}}}},belarus:{name:"belarus","loc-name":i18n("%Theme_name_belarus"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:10,"skin-5":{},"skin-10":{page_is_dark:!0}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{"skin-4":{disabled:!0}}}},besiktas:{name:"besiktas","loc-name":i18n("%Theme_name_besiktas"),page_is_dark:!0,skins:{count:1}},capitals:{name:"capitals","loc-name":i18n("%Theme_name_capitals"),skins:{count:39,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{},"skin-12":{},"skin-13":{},"skin-14":{},"skin-15":{},"skin-16":{},"skin-17":{},"skin-18":{},"skin-19":{},"skin-20":{},"skin-21":{},"skin-22":{},"skin-23":{},"skin-24":{},"skin-25":{},"skin-26":{},"skin-27":{},"skin-28":{},"skin-29":{},"skin-30":{},"skin-31":{},"skin-32":{},"skin-33":{},"skin-34":{},"skin-35":{},"skin-36":{},"skin-37":{},"skin-38":{},"skin-39":{}}},cat:{name:"cat","loc-name":i18n("%Theme_name_cat"),skins:{count:1}},colorful:{name:"colorful","loc-name":i18n("%Theme_name_color"),settings:"theme-colorful-selector","new-theme":{},skins:{scopes:{blue:{},lightblue:{},green:{},grass_green:{},turquoise:{},yellow:{},orange:{},red:{},pink:{},violet:{},white:{},gray:{},black:{page_is_dark:!0,aside_is_dark:!0},"pink-navy-sand":{},"plum-navy":{},"teal-orange":{},"terra-salad":{}}}},cosmos:{name:"cosmos","loc-name":i18n("%Theme_name_cosmos"),page_is_dark:!0,aside_is_dark:!0,content_is_dark:!0,skins:{count:24,"skin-7":{},"skin-22":{}},"new-theme":{skins:{count:24,"skin-7":{extend:!1},"skin-22":{extend:!1}}}},dandelions:{name:"dandelions","loc-name":i18n("%Theme_name_dandelions"),skins:{count:1},"new-theme":{page_is_dark:!0,aside_is_dark:!0}},dreams:{name:"dreams",skinSaver:!0,"loc-name":i18n("%Theme_name_dreams"),page_is_dark:!0,skins:{count:10,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{}}},fenerbahce:{name:"fenerbahce","loc-name":i18n("%Theme_name_fenerbahce"),skins:{count:1}},foxes:{name:"foxes","loc-name":i18n("%Theme_name_foxes"),skins:{count:6,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{}},"new-theme":{skins:{extend:!1,count:6,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{}}}},galatasaray:{name:"galatasaray","loc-name":i18n("%Theme_name_galatasaray"),skins:{count:1}},"galatasaray-net":{name:"galatasaray-net","loc-name":i18n("%Theme_name_galatasaray_net"),page_is_dark:!0,skins:{count:1}},"ice-cream":{name:"ice-cream","loc-name":i18n("%Theme_name_ice-cream"),skins:{count:1}},khl:{name:"khl","loc-name":i18n("%Theme_name_khl"),"can-be-selected":!1,"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{extend:!1,count:1}}},kindergarten:{name:"kindergarten","loc-name":i18n("%Theme_name_kindergarten"),skins:{count:4,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{}}},kitekat:{name:"kitekat","loc-name":i18n("%Theme_name_kitekat"),"can-be-selected":!1,skins:{scopes:{summer:{count:4,"skin-1":{disabled:!0},"skin-2":{},"skin-3":{},"skin-4":{disabled:!0}}}}},lamp:{name:"lamp","loc-name":i18n("%Theme_name_lamp"),page_is_dark:!0,aside_is_dark:!0,content_is_dark:!0,skins:{count:1},"new-theme":{}},love_is:{name:"love_is","loc-name":i18n("%Theme-love-is-title"),skinSaver:!0,skins:{scopes:{grass:{count:3},snow:{count:3},rain:{count:3}}},"new-theme":{skins:{extend:!1,scopes:{grass:{count:3},snow:{count:3},rain:{count:3}}}}},nemo:{name:"nemo","loc-name":i18n("%Theme_nemo"),page_is_dark:!0,skins:{scopes:{one:{count:39,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{},"skin-12":{},"skin-13":{},"skin-14":{},"skin-15":{},"skin-16":{},"skin-17":{},"skin-18":{},"skin-19":{},"skin-20":{},"skin-21":{},"skin-22":{},"skin-23":{},"skin-24":{},"skin-25":{},"skin-26":{},"skin-27":{},"skin-28":{},"skin-29":{},"skin-30":{},"skin-31":{},"skin-32":{},"skin-33":{},"skin-34":{},"skin-35":{},"skin-36":{},"skin-37":{},"skin-38":{},"skin-39":{}},two:{count:39,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{},"skin-12":{},"skin-13":{},"skin-14":{},"skin-15":{},"skin-16":{},"skin-17":{},"skin-18":{},"skin-19":{},"skin-20":{},"skin-21":{},"skin-22":{},"skin-23":{},"skin-24":{},"skin-25":{},"skin-26":{},"skin-27":{},"skin-28":{},"skin-29":{},"skin-30":{},"skin-31":{},"skin-32":{},"skin-33":{},"skin-34":{},"skin-35":{},"skin-36":{},"skin-37":{},"skin-38":{},"skin-39":{}},three:{count:39,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{},"skin-12":{},"skin-13":{},"skin-14":{},"skin-15":{},"skin-16":{},"skin-17":{},"skin-18":{},"skin-19":{},"skin-20":{},"skin-21":{},"skin-22":{},"skin-23":{},"skin-24":{},"skin-25":{},"skin-26":{},"skin-27":{},"skin-28":{},"skin-29":{},"skin-30":{},"skin-31":{},"skin-32":{},"skin-33":{},"skin-34":{},"skin-35":{},"skin-36":{},"skin-37":{},"skin-38":{},"skin-39":{}}}},"new-theme":{aside_is_dark:!0}},newspaper:{name:"newspaper","loc-name":i18n("%Theme_name_newspaper"),skins:{count:1},"new-theme":{}},newyear2010:{name:"newyear2010","loc-name":i18n("%Theme_name_newyear2011"),skins:{count:3,"skin-3":{page_is_dark:!0}}},olympics:{name:"olympics","loc-name":i18n("%Theme_name_olympics"),skins:{count:1}},orangetree:{name:"orangetree","loc-name":i18n("%Theme_name_orangetree"),skins:{count:1},"new-theme":{page_is_dark:!0,aside_is_dark:!0}},origami:{name:"origami","loc-name":i18n("%Theme_name_origami"),skins:{count:1}},owls:{name:"owls","loc-name":i18n("%Theme_name_owls"),skinSaver:!0,skins:{count:9,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{}},"new-theme":{skins:{extend:!1,count:9,"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{}}}},pinkbear:{name:"pinkbear","loc-name":i18n("%Theme_name_pinkbear"),skins:{count:1},"new-theme":{}},plasticine:{name:"plasticine","loc-name":i18n("%Theme_name_plasticine"),skinSaver:!0,skins:{count:8,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{extend:!1,count:8,"skin-1":{page_is_dark:!0,aside_is_dark:!0},"skin-2":{page_is_dark:!0,aside_is_dark:!0},"skin-3":{page_is_dark:!0,aside_is_dark:!0},"skin-4":{page_is_dark:!0,aside_is_dark:!0},"skin-5":{page_is_dark:!0,aside_is_dark:!0},"skin-6":{page_is_dark:!0,aside_is_dark:!0},"skin-7":{page_is_dark:!0,aside_is_dark:!0},"skin-8":{page_is_dark:!0,aside_is_dark:!0}}}},pushkin:{name:"pushkin","loc-name":i18n("%Theme_name_pushkin"),skins:{count:7,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{}}},"red-list":{name:"red-list","loc-name":i18n("%Theme_name_red-list"),skins:{count:20,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{},"skin-12":{},"skin-13":{},"skin-14":{},"skin-15":{},"skin-16":{},"skin-17":{},"skin-18":{},"skin-19":{page_is_dark:!0},"skin-20":{}}},relax:{name:"relax","loc-name":i18n("%Theme_name_relax"),skinSaver:!0,skins:{scopes:{morning:{count:11,"skin-1":{disabled:!0},"skin-2":{},"skin-3":{disabled:!0},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{disabled:!0},"skin-9":{},"skin-10":{},"skin-11":{}},day:{count:11,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{disabled:!0},"skin-6":{},"skin-7":{disabled:!0},"skin-8":{disabled:!0},"skin-9":{disabled:!0},"skin-10":{},"skin-11":{}},evening:{count:12,"skin-1":{},"skin-2":{disabled:!0},"skin-3":{disabled:!0},"skin-4":{disabled:!0},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{},"skin-12":{}},night:{count:16,page_is_dark:!0,aside_is_dark:!0,"skin-1":{},"skin-2":{disabled:!0},"skin-3":{disabled:!0},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{disabled:!0},"skin-12":{disabled:!0},"skin-13":{disabled:!0},"skin-14":{disabled:!0},"skin-15":{disabled:!0},"skin-16":{disabled:!0}}}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{extend:!1,scopes:{morning:{count:11,"skin-1":{disabled:!0},"skin-2":{page_is_dark:!0},"skin-3":{disabled:!0},"skin-4":{page_is_dark:!0},"skin-5":{page_is_dark:!0},"skin-6":{page_is_dark:!0},"skin-7":{page_is_dark:!0},"skin-8":{disabled:!0},"skin-9":{page_is_dark:!0},"skin-10":{page_is_dark:!0},"skin-11":{page_is_dark:!0}},day:{count:11,"skin-1":{page_is_dark:!0},"skin-2":{page_is_dark:!0},"skin-3":{page_is_dark:!0},"skin-4":{page_is_dark:!0},"skin-5":{disabled:!0},"skin-6":{page_is_dark:!0},"skin-7":{disabled:!0},"skin-8":{disabled:!0},"skin-9":{disabled:!0},"skin-10":{page_is_dark:!0},"skin-11":{page_is_dark:!0}},evening:{count:12,"skin-1":{page_is_dark:!0},"skin-2":{disabled:!0},"skin-3":{disabled:!0},"skin-4":{disabled:!0},"skin-5":{page_is_dark:!0},"skin-6":{page_is_dark:!0},"skin-7":{page_is_dark:!0},"skin-8":{page_is_dark:!0},"skin-9":{page_is_dark:!0},"skin-10":{page_is_dark:!0},"skin-11":{page_is_dark:!0},"skin-12":{page_is_dark:!0}},night:{count:16,"skin-1":{page_is_dark:!0},"skin-2":{disabled:!0},"skin-3":{disabled:!0},"skin-4":{page_is_dark:!0},"skin-5":{page_is_dark:!0},"skin-6":{page_is_dark:!0},"skin-7":{page_is_dark:!0},"skin-8":{page_is_dark:!0},"skin-9":{page_is_dark:!0},"skin-10":{page_is_dark:!0},"skin-11":{disabled:!0},"skin-12":{disabled:!0},"skin-13":{disabled:!0},"skin-14":{disabled:!0},"skin-15":{disabled:!0},"skin-16":{disabled:!0}}}}}},sea:{name:"sea","loc-name":i18n("%Theme_name_sea"),page_is_dark:!0,skins:{count:1},"new-theme":{aside_is_dark:!0}},seasons:{name:"seasons","loc-name":i18n("%Theme_name_seasons"),skinSaver:!0,settings:"theme-seasons-selector",skins:{scopes:{winter:{"loc-name":i18n("%Theme_seasons_winter"),count:6,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{page_is_dark:!0},"skin-6":{}},newyear:{count:7,"skin-1":{},"skin-2":{page_is_dark:!0},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{}},spring:{"loc-name":i18n("%Theme_seasons_spring"),count:7,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{}},summer:{"loc-name":i18n("%Theme_seasons_summer"),count:8,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{page_is_dark:!0},"skin-8":{}},autumn:{"loc-name":i18n("%Theme_seasons_autumn"),count:7,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{}}}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{scopes:{newyear:{},winter:{},spring:{},autumn:{},summer:{}}}}},soccer:{name:"soccer","loc-name":i18n("%Theme_name_soccer"),page_is_dark:!0,skins:{count:12},"new-theme":{aside_is_dark:!0,skins:{count:12}}},starwars:{name:"starwars","loc-name":i18n("%Theme_name_starwars"),skinSaver:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,content_is_dark:!0,skins:{scopes:{lightside:{count:11,"skin-1":{},"skin-6":{},"skin-10":{}},darkside:{count:9,"skin-4":{},"skin-5":{},"skin-6":{}}}},"new-theme":{skins:{extend:!1,scopes:{lightside:{count:11,"skin-1":{},"skin-5":{},"skin-6":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{}},darkside:{count:9,"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{}}}}}},stitch:{name:"stitch","loc-name":i18n("%Theme_name_stitch"),skins:{count:3},"new-theme":{}},tanks:{name:"tanks","loc-name":"World of Tanks",skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,skins:{count:4},"new-theme":{aside_is_dark:!0}},u2709:{name:"u2709","loc-name":i18n("%Theme_name_grass"),page_is_dark:!1,skins:{scopes:{regular:{count:1},ny2016:{count:1}}},"new-theme":{page_is_dark:!0,aside_is_dark:!0}},weather:{name:"weather","loc-name":i18n("%Theme_name_weather"),settings:"theme-weather-settings",skins:{scopes:{spring:{scopes:{clear:{scopes:{day:{},night:{page_is_dark:!0}}},partly_cloudy:{scopes:{day:{},night:{page_is_dark:!0}}},clouds:{scopes:{day:{},night:{page_is_dark:!0}}},rain:{scopes:{day:{},night:{page_is_dark:!0}}},storm:{scopes:{day:{page_is_dark:!0},night:{page_is_dark:!0}}},wind:{scopes:{day:{},night:{page_is_dark:!0}}}}},may:{scopes:{clear:{scopes:{day:{},night:{page_is_dark:!0}}},clouds:{scopes:{day:{},night:{page_is_dark:!0}}},partly_cloudy:{scopes:{day:{},night:{page_is_dark:!0}}},rainy:{scopes:{day:{},night:{page_is_dark:!0}}},rain:{scopes:{day:{},night:{page_is_dark:!0}}},storm:{scopes:{day:{page_is_dark:!0},night:{page_is_dark:!0}}},wind:{scopes:{day:{},night:{page_is_dark:!0}}},fog:{scopes:{day:{},night:{page_is_dark:!0}}},hail:{scopes:{day:{},night:{page_is_dark:!0}}}}},summer:{scopes:{clear:{scopes:{day:{},night:{page_is_dark:!0}}},clouds:{scopes:{day:{},night:{page_is_dark:!0}}},partly_cloudy:{scopes:{day:{},night:{page_is_dark:!0}}},rainy:{scopes:{day:{},night:{page_is_dark:!0}}},rain:{scopes:{day:{},night:{page_is_dark:!0}}},storm:{scopes:{day:{page_is_dark:!0},night:{page_is_dark:!0}}},wind:{scopes:{day:{},night:{page_is_dark:!0}}},fog:{scopes:{day:{},night:{page_is_dark:!0}}},hail:{scopes:{day:{},night:{page_is_dark:!0}}}}},autumn:{scopes:{clear:{scopes:{day:{},night:{page_is_dark:!0}}},clouds:{scopes:{day:{},night:{page_is_dark:!0}}},partly_cloudy:{scopes:{day:{},night:{page_is_dark:!0}}},rainy:{scopes:{day:{},night:{page_is_dark:!0}}},rain:{scopes:{day:{},night:{page_is_dark:!0}}},storm:{scopes:{day:{page_is_dark:!0},night:{page_is_dark:!0}}},wind:{scopes:{day:{},night:{page_is_dark:!0}}},fog:{scopes:{day:{},night:{page_is_dark:!0}}}}},winter:{scopes:{clear:{scopes:{day:{},night:{page_is_dark:!0}}},clouds:{scopes:{day:{},night:{page_is_dark:!0}}},heavy_snow:{scopes:{day:{},night:{page_is_dark:!0}}},cloudy_rain:{scopes:{day:{},night:{page_is_dark:!0}}},partly_cloudy_rain:{scopes:{day:{},night:{page_is_dark:!0}}},weak_snow:{scopes:{day:{},night:{page_is_dark:!0}}},fog:{scopes:{day:{},night:{page_is_dark:!0}}},blizzard:{scopes:{day:{},night:{page_is_dark:!0}}},thaw:{scopes:{day:{},night:{page_is_dark:!0}}},cloudy_thaw:{scopes:{day:{},night:{page_is_dark:!0}}}}},special:{scopes:{atlantis:{page_is_dark:!0},ig:{},kupala:{page_is_dark:!0},desert:{},wind:{},frozen:{},solar_eclipse:{page_is_dark:!0},lunar_eclipse:{page_is_dark:!0},shambala:{page_is_dark:!0},gadyukino:{},parusa:{},exo:{scopes:{day:{},night:{page_is_dark:!0}}},south_pole:{},north_pole:{page_is_dark:!0},newyear:{scopes:{day:{},night:{page_is_dark:!0}}}}}}}},zverushki:{name:"zverushki","loc-name":i18n("%Theme_name_zverushki"),skinSaver:!0,content_is_dark:!0,skins:{count:17,"skin-17":{page_is_dark:!0}},"new-theme":{page_is_dark:!0,aside_is_dark:!0}},region_bashkir:{name:"region_bashkir","loc-name":i18n("%Theme_name_region_bashkir"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:10,"skin-4":{page_is_dark:!0},"skin-5":{},"skin-6":{page_is_dark:!0},"skin-9":{page_is_dark:!0},"skin-10":{page_is_dark:!0}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{"skin-1":{disabled:!0}}}},region_chelly:{name:"region_chelly","loc-name":i18n("%Theme_name_region_chelly"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:9,"skin-1":{},"skin-2":{},"skin-3":{}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{"skin-7":{disabled:!0}}}},region_ekb:{name:"region_ekb","loc-name":i18n("%Theme_name_region_ekb"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:8,"skin-7":{disabled:!0}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{"skin-2":{disabled:!0},"skin-3":{disabled:!0}}}},region_krasnoyarsk:{name:"region_krasnoyarsk","loc-name":i18n("%Theme_name_region_krasnoyarsk"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:10,"skin-3":{},"skin-5":{},"skin-6":{},"skin-10":{}},"new-theme":{aside_is_dark:!0,page_is_dark:!0,skins:{"skin-3":{disabled:!0},"skin-10":{disabled:!0}}}},region_nn:{name:"region_nn","loc-name":i18n("%Theme_name_region_nn"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:7},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{"skin-2":{disabled:!0},"skin-4":{disabled:!0}}}},region_novosibirsk:{name:"region_novosibirsk","loc-name":i18n("%Theme_name_region_novosibirsk"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:8,"skin-4":{}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{"skin-4":{disabled:!0}}}},region_perm:{name:"region_perm","loc-name":i18n("%Theme_name_region_perm"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:11,"skin-6":{page_is_dark:!0},"skin-7":{page_is_dark:!0},"skin-9":{disabled:!0}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{"skin-2":{disabled:!0}}}},region_primorie:{name:"region_primorie","loc-name":i18n("%Theme_name_region_primorie"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:7,"skin-1":{},"skin-3":{page_is_dark:!0},"skin-4":{}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{"skin-2":{disabled:!0}}}},region_samara:{name:"region_samara","loc-name":i18n("%Theme_name_region_samara"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:8,"skin-3":{page_is_dark:!0},"skin-5":{},"skin-6":{page_is_dark:!0},"skin-8":{page_is_dark:!0}},"new-theme":{page_is_dark:!0,aside_is_dark:!0}},region_tatarstan:{name:"region_tatarstan","loc-name":i18n("%Theme_name_region_tatarstan"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:6,"skin-3":{},"skin-6":{}},"new-theme":{aside_is_dark:!0,page_is_dark:!0,skins:{"skin-3":{disabled:!0}}}},region_tomsk:{name:"region_tomsk","loc-name":i18n("%Theme_name_regions_tms"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:3},"new-theme":{page_is_dark:!0,aside_is_dark:!0}},region_volgograd:{name:"region_volgograd","loc-name":i18n("%Theme_name_region_volgograd"),skinSaver:!0,preview:!0,"can-be-selected":!1,skins:{count:6,"skin-1":{page_is_dark:!0},"skin-5":{},"skin-6":{}},"new-theme":{page_is_dark:!0,aside_is_dark:!0,skins:{"skin-4":{disabled:!0},"skin-6":{}}}}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return o});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this._handlers={}}return r(e,[{key:"on",value:function(e,t){this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push(t)}},{key:"off",value:function(e,t){if(this._handlers[e]){var n=this._handlers[e].indexOf(t);n>-1&&this._handlers[e].splice(n,1)}}},{key:"emit",value:function(e,t){for(var n=0,i=this._handlers[e]||[],r=i.length;n<r&&!i[n](t);n++);}}]),e}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(231),c=(n(260),(n(244).default||n(244)).applyDecls()),d=i(c),f=(n(256).default||n(256)).applyDecls(),p=i(f),h=(n(248).default||n(248)).applyDecls(),m=i(h),g=(n(400).default||n(400)).applyDecls(),v=i(g),_=(n(401).default||n(401)).applyDecls(),b=i(_);t.default=(0,l.decl)(d.default,{block:"button2",willInit:function(e){var t=e.checked,n=e.progress;this.__base.apply(this,arguments),this.defaultPressKeys=["SPACE","ENTER"],this.defaultPrvntKeys=[],this.state.checked=t,n&&(this.state.disabled=n),this.onKeyPress=this.onKeyPress.bind(this),this.setReference=this.setReference.bind(this)},tag:function(e){return e.tag||"button"},willReceiveProps:function(e){var t=e.disabled,n=e.checked,i=e.progress,r=e.pressed,o=e.focused;this.__base.apply(this,arguments),i!==this.props.progress&&this.setState({disabled:t||i}),t||r===this.props.pressed||this.setState({pressed:r}),o!==this.props.focused&&this.setState({focused:o,pressed:o&&r}),n!==this.props.checked&&this.setState({checked:n})},willUpdate:function(e){this.__base.apply(this,arguments),this.control&&e.focused&&!this.state.focused&&this.control.focus()},mods:function(e){var t=e.view,n=e.tone,i=e.size,o=e.theme,s=e.pin,a=e.pale,u=e.width,c=e.progress,d=e.action,f=this.state,p=f.disabled,h=f.checked;return r({},this.__base.apply(this,arguments),{view:t,tone:n,size:i,theme:o,pin:s,width:u,action:(0,l.bool2string)(d),pale:(0,l.bool2string)(a),checked:(0,l.bool2string)(h),disabled:(0,l.bool2string)(p),progress:(0,l.bool2string)(c)})},attrs:function(e){var t=e.title,n=e.id,i=e.name,o=e.val,s=e.tabIndex,a=e.style,u=e.attrs,l=(e.progress,this.state),c=l.disabled,d=l.checked;return r({},this.__base.apply(this,arguments),{id:n,title:t,name:i,style:a,disabled:c,value:o,type:"button",autoComplete:"off","aria-pressed":String(Boolean(d)),tabIndex:c?void 0:s,"aria-disabled":String(Boolean(c)),onKeyPress:c?void 0:this.onKeyPress,ref:this.setReference},u)},content:function(e){var t=e.size,n=e.textAttrs,i=e.text,r=e.icon,a=e.iconLeft,u=e.iconRight,l=e.children,c=[],d=[];return o.Children.forEach(l,function(e,i){1===o.Children.count(l)&&p.default.isIcon(e)?c.unshift(s.default.createElement(b.default,{key:"only-icon",size:t,children:e})):p.default.isIcon(e)&&0===i?c.unshift(s.default.createElement(b.default,{key:"icon-left",side:"left",size:t,children:e})):p.default.isIcon(e)&&c.length?c.unshift(s.default.createElement(b.default,{key:"icon-right",side:"right",size:t,children:e})):e&&(d.length||c.push(s.default.createElement(v.default,{key:"text",attrs:n},d)),d.push(e))}),i&&(d.length||c.push(s.default.createElement(v.default,{key:"text",attrs:n},d)),d.push(i)),r&&c.unshift(s.default.createElement(b.default,{key:"only-icon",size:t,children:p.default.isIcon(r)?r:s.default.createElement(p.default,r.mods)})),u&&c.unshift(s.default.createElement(b.default,{key:"icon-right",side:"right",size:t,children:p.default.isIcon(u)?u:s.default.createElement(p.default,u.mods)})),a&&c.unshift(s.default.createElement(b.default,{key:"icon-left",side:"left",size:t,children:p.default.isIcon(a)?a:s.default.createElement(p.default,a.mods)})),c},onKeyDown:function(e){m.default.is(e.keyCode,this.props.pressKeys||this.defaultPressKeys)&&(this.setState({pressed:!0}),m.default.is(e.keyCode,this.props.prvntKeys||this.defaultPrvntKeys)&&e.preventDefault()),this.__base.apply(this,arguments)},onKeyUp:function(e){m.default.is(e.keyCode,this.props.prvntKeys||this.defaultPrvntKeys)&&e.preventDefault(),m.default.is(e.keyCode,this.props.pressKeys||this.defaultPressKeys)&&this.setState({pressed:!1}),this.__base.apply(this,arguments)},onKeyPress:function(e){this.props.onKeyPress&&this.props.onKeyPress(e)},onClick:function(e){this.control&&this.control.focus(),this.__base.apply(this,arguments)},setReference:function(e){this.control=e,this.props.innerRef&&this.props.innerRef(e)},onMouseDown:function(e){this.__base.apply(this,arguments),e.preventDefault()}},{propTypes:{theme:u.default.string.isRequired,size:u.default.oneOf(["ns","xs","s","m","l","n","head"]),id:u.default.string,name:u.default.string,title:u.default.string,tabIndex:u.default.number,text:u.default.string,type:u.default.string,iconLeft:u.default.object,iconRight:u.default.object,onClick:u.default.func,progress:u.default.bool,action:u.default.bool,pale:u.default.bool,checked:u.default.bool,innerRef:u.default.func,pressKeys:u.default.arrayOf(u.default.oneOf(m.default.list())),prvntKeys:u.default.arrayOf(u.default.oneOf(m.default.list()))},defaultProps:{view:"classic",tabIndex:0}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(231),c=(n(1797),n(1798),(n(408).default||n(408)).applyDecls()),d=i(c);(n(344).default||n(344)).applyDecls();var f=function(e){return(e.hasClear||"websearch"===e.theme)&&!(e.controlAttrs&&e.controlAttrs.readOnly)};t.default=(0,l.declMod)(f,{block:"textinput",mods:function(e){var t=e.hasClear;return r({},this.__base.apply(this,arguments),{"has-clear":(0,l.bool2string)(t),"has-icon":(0,l.bool2string)(t)})},content:function(e){var t=e.text,n=e.size,i=e.view,r=e.theme,o=this.state.disabled;return[].concat(this.__base.apply(this,arguments),s.default.createElement(d.default,{onClick:this._onClearClick.bind(this),onMouseDown:this._preventLosingFocus.bind(this),key:"clear",view:i,disabled:o,visible:t,theme:r,size:n}))},_preventLosingFocus:function(e){this.state.focused&&e.preventDefault()},_onClearClick:function(e){this.focus(),this.setState({focused:!0}),this.props.onClearClick&&this.props.onClearClick(e),e.isDefaultPrevented()||this.props.onChange("",this.props,{source:"clear"})}},{propTypes:{hasClear:u.default.bool}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(231),c=(n(409).default||n(409)).applyDecls(),d=i(c);t.default=(0,l.declMod)(function(e){var t=e.iconLeft,n=e.iconRight,i=e.icon;return t||n||i},{block:"textinput",mods:function(e){var t=e.iconLeft,n=e.iconRight,i=e.icon;return r({},this.__base.apply(this,arguments),{"has-icon":(0,l.bool2string)(t||n||i)})},content:function(e){var t=e.iconLeft,n=e.iconRight,i=e.icon,r=[];return(i||t)&&r.push(s.default.createElement(d.default,{side:"left",key:"left"},t||i)),n&&r.push(s.default.createElement(d.default,{side:"right",key:"right"},n)),[].concat(r,this.__base.apply(this,arguments))}},{propTypes:{iconLeft:u.default.object,iconRight:u.default.object}})},function(e,t,n){"use strict";function i(e){s().on("resize",e)}function r(e){s().off("resize",e)}t.a=i,t.b=r;var o=void 0,s=function(){return o||(o=ns.Model.get("dimensions"))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return"string"==typeof e?o({text:e},t):e.items?s(e):o(e,t)}function o(e,t){var n=Object(e.elemMods).disabled;return l.default.createElement(h.default,a({key:"item-"+t,disabled:"yes"===n||n},e),e.text)}function s(e){return l.default.createElement(g.default,{title:e.title},e.items.map(r))}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=n(232),l=i(u),c=n(230),d=i(c),f=n(231),p=(n(415),n(420),n(347),(n(421).default||n(421)).applyDecls()),h=i(p),m=(n(310).default||n(310)).applyDecls(),g=i(m);t.default=(0,f.decl)({block:"menu",willInit:function(e){e.val;this.__base.apply(this,arguments),this.state={val:[]},this._provideClick=this._provideClick.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.items=[],this._registerItem=this._registerItem.bind(this),this._unregisterItem=this._unregisterItem.bind(this)},willReceiveProps:function(e){var t=e.val;this.__base.apply(this,arguments),this.setState({val:this._prepareVal(t)})},getChildContext:function(){return{registerItem:this._registerItem,unregisterItem:this._unregisterItem}},attrs:function(e){var t=e.tabIndex,n=e.disabled;return{style:e.style,disabled:n,"aria-disabled":!!n&&"true",onMouseUp:n?void 0:this.onMouseUp,onMouseDown:n?void 0:this.onMouseDown,tabIndex:n?void 0:null===t?void 0:t}},mods:function(e){var t=e.size,n=e.view,i=e.theme,r=e.width,o=e.disabled;return a({},this.__base.apply(this,arguments),{size:t,width:r,theme:i,view:n,disabled:(0,f.bool2string)(o)})},content:function(e){var t=e.type,n=e.size,i=e.view,r=e.nowrap,o=e.items,s=e.children,a=this.state.val,c="navigation"===t,d="default"===i&&-1!==["check","radio","radiocheck"].indexOf(t);return o&&(s=o.map(this.__self.normalizeItem)),u.Children.map(s,function e(i,o){if(!1!==i&&null!==i&&void 0!==i)return h.default.isItem(i)?-1!==["check","radio","radiocheck"].indexOf(t)?i=(0,u.cloneElement)(i,{size:n,needIconGlyph:d,type:"option",key:"option-"+o,checked:-1!==a.indexOf(i.props.val),onClick:i.props.disabled?void 0:this._provideClick(void 0===i.props.val?null:i.props.val,i.props.onClick)}):c&&(i=(0,u.cloneElement)(i,{size:n,needIconGlyph:d,type:i.props.url?"link":void 0,isNavigation:c,key:"link-"+o})):g.default.isGroup(i)?i=(0,u.cloneElement)(i,{isNavigation:c,key:"group-"+o,children:[].concat(i.props.children).map(e,this)}):r||(i=l.default.createElement(h.default,{needIconGlyph:d},i)),i},this)},_provideClick:function(e,t){var n=this;return function(i){n.onClick(i,e),t&&t(i,e)}},onMouseUp:function(e){this.props.onMouseUp&&this.props.onMouseUp(e)},onMouseDown:function(e){this.props.onMouseDown&&this.props.onMouseDown(e)},_prepareVal:function(e){return void 0===e?[]:[].concat(e)},_registerItem:function(e){this.items.push(e)},_unregisterItem:function(e){return this._hoveredItem===e&&(this._hoveredItem=null),this.items.splice(this.items.indexOf(e),1)}},{normalizeItem:r,Item:h.default,Group:g.default,propTypes:{theme:d.default.string.isRequired,val:d.default.oneOfType([d.default.string,d.default.array,d.default.number]),size:d.default.oneOf(["xs","s","m","n"]),type:d.default.string,nowrap:d.default.bool,tabIndex:d.default.string,view:d.default.oneOf(["classic","default"]),tone:d.default.string,onMouseDown:d.default.func,onMouseUp:d.default.func},defaultProps:{view:"classic"},childContextTypes:{registerItem:d.default.func,unregisterItem:d.default.func}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.declMod)({type:"option"},{block:"menu",elem:"item",attrs:function(){return i({},this.__base.apply(this,arguments),{role:"option"})},mods:function(e){var t=e.checked;return i({},this.__base.apply(this,arguments),{checked:(0,r.bool2string)(t)})}})},function(e,t,n){"use strict";var i=n(1832);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";var i=n(1845),r=n.n(i),o=n(1853);n.n(o);t.a=r.a},function(e,t,n){"use strict";var i=n(1863);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";var i=n(284);n.d(t,"d",function(){return i.d}),n.d(t,"b",function(){return i.b}),n.d(t,"c",function(){return i.c}),n.d(t,"a",function(){return i.a}),n.d(t,"e",function(){return i.e})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return l});var r=n(282),o=n(560),s=n.n(o),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=s.a.Promise,l=function(){function e(t,n){i(this,e),this._stores=t,this._services=n}return a(e,[{key:"_getUnsubscribeFolderName",value:function(){var e=this._stores.foldersStore,t=["Unsubscribe","Hidden messages","Muted messages","Silenced messages","Disabled messages"].find(function(t){return!e.getFolderByName(t)});if(t)return t;for(var n=1,i=void 0;;){var r="Unsubscribe ("+n+")";if(!e.getFolderByName(r)){i=r;break}n++}return i}},{key:"getUnsubscribeFiltersFolderFid",value:function(){var e=this._stores.foldersStore,t=e.getFolderBySymbol("unsubscribe");if(t)return u.resolve(t.data.fid);var n=this._getUnsubscribeFolderName();return r.a.request("do-folders-add",{symbol:"unsubscribe",folder_name:n}).then(function(e){var t=e.body.updated;return r.a.forcedRequest("folders").then(function(){return ns.events.trigger("daria:mFolders:symbolSet"),t})})}}]),e}()},function(e,t){},function(e,t){},function(e,t,n){var i=n(1958),r=i.Symbol;e.exports=r},,,,function(e,t){Object.assign(t,{request:function(){var e=this,t=this.params;t.model=this.id,ns.request.addRequestParams(t);var n=Daria.api.journal+"?_m="+this.id;return ns.http(n,t).then(function(t){e.setData(t)})}})},function(e,t,n){"use strict";t.a={isIE:function(){return"MSIE"===Daria.UA.BrowserName},isEdge:function(){return"Edge"===Daria.UA.BrowserName}}},function(e,t,n){"use strict";var i={hasCachedChildNodes:1};e.exports=i},function(e,t,n){"use strict";function i(e,t){return null==t&&r("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var r=n(235);n(233);e.exports=i},function(e,t,n){"use strict";function i(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}e.exports=i},function(e,t,n){"use strict";function i(){return!o&&r.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var r=n(247),o=null;e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(235),o=n(267),s=(n(233),function(){function e(t){i(this,e),this._callbacks=null,this._contexts=null,this._arg=t}return e.prototype.enqueue=function(e,t){this._callbacks=this._callbacks||[],this._callbacks.push(e),this._contexts=this._contexts||[],this._contexts.push(t)},e.prototype.notifyAll=function(){var e=this._callbacks,t=this._contexts,n=this._arg;if(e&&t){e.length!==t.length&&r("24"),this._callbacks=null,this._contexts=null;for(var i=0;i<e.length;i++)e[i].call(t[i],n);e.length=0,t.length=0}},e.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},e.prototype.rollback=function(e){this._callbacks&&this._contexts&&(this._callbacks.length=e,this._contexts.length=e)},e.prototype.reset=function(){this._callbacks=null,this._contexts=null},e.prototype.destructor=function(){this.reset()},e}());e.exports=o.addPoolingTo(s)},function(e,t,n){"use strict";var i={logTopLevelRenders:!1};e.exports=i},function(e,t,n){"use strict";function i(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function r(e){return e._wrapperState.valueTracker}function o(e,t){e._wrapperState.valueTracker=t}function s(e){e._wrapperState.valueTracker=null}function a(e){var t;return e&&(t=i(e)?""+e.checked:e.value),t}var u=n(243),l={_getTrackerFromNode:function(e){return r(u.getInstanceFromNode(e))},track:function(e){if(!r(e)){var t=u.getNodeFromInstance(e),n=i(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];t.hasOwnProperty(n)||"function"!=typeof a.get||"function"!=typeof a.set||(Object.defineProperty(t,n,{enumerable:a.enumerable,configurable:!0,get:function(){return a.get.call(this)},set:function(e){l=""+e,a.set.call(this,e)}}),o(e,{getValue:function(){return l},setValue:function(e){l=""+e},stopTracking:function(){s(e),delete t[n]}}))}},updateValueIfChanged:function(e){if(!e)return!1;var t=r(e);if(!t)return l.track(e),!0;var n=t.getValue(),i=a(u.getNodeFromInstance(e));return i!==n&&(t.setValue(i),!0)},stopTracking:function(e){var t=r(e);t&&t.stopTracking()}};e.exports=l},function(e,t,n){"use strict";function i(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!r[e.type]:"textarea"===t}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=i},function(e,t,n){"use strict";var i={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){i.currentScrollLeft=e.x,i.currentScrollTop=e.y}};e.exports=i},function(e,t,n){"use strict";var i=n(247),r=n(300),o=n(299),s=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};i.canUseDOM&&("textContent"in document.documentElement||(s=function(e,t){if(3===e.nodeType)return void(e.nodeValue=t);o(e,r(t))})),e.exports=s},function(e,t,n){"use strict";function i(e){try{e.focus()}catch(e){}}e.exports=i},function(e,t,n){"use strict";function i(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){o.forEach(function(t){r[i(t,e)]=r[e]})});var s={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:s};e.exports=a},function(e,t,n){"use strict";function i(e){return!!l.hasOwnProperty(e)||!u.hasOwnProperty(e)&&(a.test(e)?(l[e]=!0,!0):(u[e]=!0,!1))}function r(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var o=n(277),s=(n(243),n(251),n(1700)),a=(n(236),new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$")),u={},l={},c={createMarkupForID:function(e){return o.ID_ATTRIBUTE_NAME+"="+s(e)},setAttributeForID:function(e,t){e.setAttribute(o.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){if(r(n,t))return"";var i=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===t?i+'=""':i+"="+s(t)}return o.isCustomAttribute(e)?null==t?"":e+"="+s(t):null},createMarkupForCustomAttribute:function(e,t){return i(e)&&null!=t?e+"="+s(t):""},setValueForProperty:function(e,t,n){var i=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(i){var s=i.mutationMethod;if(s)s(e,n);else{if(r(i,n))return void this.deleteValueForProperty(e,t);if(i.mustUseProperty)e[i.propertyName]=n;else{var a=i.attributeName,u=i.attributeNamespace;u?e.setAttributeNS(u,a,""+n):i.hasBooleanValue||i.hasOverloadedBooleanValue&&!0===n?e.setAttribute(a,""):e.setAttribute(a,""+n)}}}else if(o.isCustomAttribute(t))return void c.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){if(i(t)){null==n?e.removeAttribute(t):e.setAttribute(t,""+n)}},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){var i=n.mutationMethod;if(i)i(e,void 0);else if(n.mustUseProperty){var r=n.propertyName;n.hasBooleanValue?e[r]=!1:e[r]=""}else e.removeAttribute(n.attributeName)}else o.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=c},function(e,t,n){"use strict";var i=n(1705);e.exports=function(e){return i(e,!1)}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function i(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||u}function r(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||u}function o(){}var s=n(290),a=n(240),u=n(377),l=(n(378),n(302));n(233),n(1707);i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&s("85"),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};o.prototype=i.prototype,r.prototype=new o,r.prototype.constructor=r,a(r.prototype,i.prototype),r.prototype.isPureReactComponent=!0,e.exports={Component:i,PureComponent:r}},function(e,t,n){"use strict";var i=(n(236),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}});e.exports=i},function(e,t,n){"use strict";var i=!1;e.exports=i},function(e,t,n){"use strict";var i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=i},function(e,t,n){"use strict";function i(e){return e}function r(e,t,n){function r(e,t){var n=_.hasOwnProperty(t)?_[t]:null;k.hasOwnProperty(t)&&a("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&a("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function l(e,n){if(n){a("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),a(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var i=e.prototype,o=i.__reactAutoBindPairs;n.hasOwnProperty(u)&&y.mixins(e,n.mixins);for(var s in n)if(n.hasOwnProperty(s)&&s!==u){var l=n[s],c=i.hasOwnProperty(s);if(r(c,s),y.hasOwnProperty(s))y[s](e,l);else{var d=_.hasOwnProperty(s),h="function"==typeof l,m=h&&!d&&!c&&!1!==n.autobind;if(m)o.push(s,l),i[s]=l;else if(c){var g=_[s];a(d&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,s),"DEFINE_MANY_MERGED"===g?i[s]=f(i[s],l):"DEFINE_MANY"===g&&(i[s]=p(i[s],l))}else i[s]=l}}}else;}function c(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var r=n in y;a(!r,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var o=n in e;if(o){var s=b.hasOwnProperty(n)?b[n]:null;return a("DEFINE_MANY_MERGED"===s,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=f(e[n],i))}e[n]=i}}}function d(e,t){a(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(a(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function f(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var r={};return d(r,n),d(r,i),r}}function p(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){var n=t.bind(e);return n}function m(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];e[i]=h(e,r)}}function g(e){var t=i(function(e,i,r){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=i,this.refs=s,this.updater=r||n,this.state=null;var o=this.getInitialState?this.getInitialState():null;a("object"==typeof o&&!Array.isArray(o),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=o});t.prototype=new C,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],v.forEach(l.bind(null,t)),l(t,w),l(t,e),l(t,S),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),a(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var r in _)t.prototype[r]||(t.prototype[r]=null);return t}var v=[],_={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},b={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},y={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)l(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=o({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=o({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=f(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=o({},e.propTypes,t)},statics:function(e,t){c(e,t)},autobind:function(){}},w={componentDidMount:function(){this.__isMounted=!0}},S={componentWillUnmount:function(){this.__isMounted=!1}},k={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},C=function(){};return o(C.prototype,e.prototype,k),g}var o=n(240),s=n(302),a=n(233),u="mixins";e.exports=r},function(e,t,n){"use strict";function i(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=a.getValue(e);null!=t&&r(this,Boolean(e.multiple),t)}}function r(e,t,n){var i,r,o=u.getNodeFromInstance(e).options;if(t){for(i={},r=0;r<n.length;r++)i[""+n[r]]=!0;for(r=0;r<o.length;r++){var s=i.hasOwnProperty(o[r].value);o[r].selected!==s&&(o[r].selected=s)}}else{for(i=""+n,r=0;r<o.length;r++)if(o[r].value===i)return void(o[r].selected=!0);o.length&&(o[0].selected=!0)}}function o(e){var t=this._currentElement.props,n=a.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),l.asap(i,this),n}var s=n(240),a=n(331),u=n(243),l=n(253),c=(n(236),!1),d={getHostProps:function(e,t){return s({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=a.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:o.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||c||(c=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var i=a.getValue(t);null!=i?(e._wrapperState.pendingUpdate=!1,r(e,Boolean(t.multiple),i)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?r(e,Boolean(t.multiple),t.defaultValue):r(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=d},function(e,t,n){"use strict";function i(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function r(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function o(e,t){var n;if(null===e||!1===e)n=l.create(o);else if("object"==typeof e){var a=e,u=a.type;if("function"!=typeof u&&"string"!=typeof u){var f="";f+=i(a._owner),s("130",null==u?u:typeof u,f)}"string"==typeof a.type?n=c.createInternalComponent(a):r(a.type)?(n=new a.type(a),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new d(a)}else"string"==typeof e||"number"==typeof e?n=c.createInstanceForText(e):s("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var s=n(235),a=n(240),u=n(1722),l=n(384),c=n(385),d=(n(1723),n(233),n(236),function(e){this.construct(e)});a(d.prototype,u,{_instantiateReactComponent:o}),e.exports=o},function(e,t,n){"use strict";var i=n(235),r=n(280),o=(n(233),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||!1===e?o.EMPTY:r.isValidElement(e)?"function"==typeof e.type?o.COMPOSITE:o.HOST:void i("26",e)}});e.exports=o},function(e,t,n){"use strict";var i,r={injectEmptyComponentFactory:function(e){i=e}},o={create:function(e){return i(e)}};o.injection=r,e.exports=o},function(e,t,n){"use strict";function i(e){return a||s("111",e.type),new a(e)}function r(e){return new u(e)}function o(e){return e instanceof u}var s=n(235),a=(n(233),null),u=null,l={injectGenericComponentClass:function(e){a=e},injectTextComponentClass:function(e){u=e}},c={createInternalComponent:i,createInstanceForText:r,isTextComponent:o,injection:l};e.exports=c},function(e,t,n){"use strict";function i(e,t){return e&&"object"==typeof e&&null!=e.key?l.escape(e.key):t.toString(36)}function r(e,t,n,o){var f=typeof e;if("undefined"!==f&&"boolean"!==f||(e=null),null===e||"string"===f||"number"===f||"object"===f&&e.$$typeof===a)return n(o,e,""===t?c+i(e,0):t),1;var p,h,m=0,g=""===t?c:t+d;if(Array.isArray(e))for(var v=0;v<e.length;v++)p=e[v],h=g+i(p,v),m+=r(p,h,n,o);else{var _=u(e);if(_){var b,y=_.call(e);if(_!==e.entries)for(var w=0;!(b=y.next()).done;)p=b.value,h=g+i(p,w++),m+=r(p,h,n,o);else for(;!(b=y.next()).done;){var S=b.value;S&&(p=S[1],h=g+l.escape(S[0])+d+i(p,0),m+=r(p,h,n,o))}}else if("object"===f){var k="",C=String(e);s("31","[object Object]"===C?"object with keys {"+Object.keys(e).join(", ")+"}":C,k)}}return m}function o(e,t,n){return null==e?0:r(e,"",t,n)}var s=n(235),a=(n(259),n(1724)),u=n(1725),l=(n(233),n(335)),c=(n(236),"."),d=":";e.exports=o},function(e,t,n){"use strict";function i(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,i=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var r=t.call(e);return i.test(r)}catch(e){return!1}}function r(e){var t=l(e);if(t){var n=t.childIDs;c(e),n.forEach(r)}}function o(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function s(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function a(e){var t,n=M.getDisplayName(e),i=M.getElement(e),r=M.getOwnerID(e);return r&&(t=M.getDisplayName(r)),o(n,i&&i._source,t)}var u,l,c,d,f,p,h,m=n(290),g=n(259),v=(n(233),n(236),"function"==typeof Array.from&&"function"==typeof Map&&i(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&i(Map.prototype.keys)&&"function"==typeof Set&&i(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&i(Set.prototype.keys));if(v){var _=new Map,b=new Set;u=function(e,t){_.set(e,t)},l=function(e){return _.get(e)},c=function(e){_.delete(e)},d=function(){return Array.from(_.keys())},f=function(e){b.add(e)},p=function(e){b.delete(e)},h=function(){return Array.from(b.keys())}}else{var y={},w={},S=function(e){return"."+e},k=function(e){return parseInt(e.substr(1),10)};u=function(e,t){var n=S(e);y[n]=t},l=function(e){var t=S(e);return y[t]},c=function(e){var t=S(e);delete y[t]},d=function(){return Object.keys(y).map(k)},f=function(e){var t=S(e);w[t]=!0},p=function(e){var t=S(e);delete w[t]},h=function(){return Object.keys(w).map(k)}}var C=[],M={onSetChildren:function(e,t){var n=l(e);n||m("144"),n.childIDs=t;for(var i=0;i<t.length;i++){var r=t[i],o=l(r);o||m("140"),null==o.childIDs&&"object"==typeof o.element&&null!=o.element&&m("141"),o.isMounted||m("71"),null==o.parentID&&(o.parentID=e),o.parentID!==e&&m("142",r,o.parentID,e)}},onBeforeMountComponent:function(e,t,n){u(e,{element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0})},onBeforeUpdateComponent:function(e,t){var n=l(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=l(e);t||m("144"),t.isMounted=!0,0===t.parentID&&f(e)},onUpdateComponent:function(e){var t=l(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=l(e);if(t){t.isMounted=!1;0===t.parentID&&p(e)}C.push(e)},purgeUnmountedComponents:function(){if(!M._preventPurging){for(var e=0;e<C.length;e++){r(C[e])}C.length=0}},isMounted:function(e){var t=l(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=s(e),i=e._owner;t+=o(n,e._source,i&&i.getName())}var r=g.current,a=r&&r._debugID;return t+=M.getStackAddendumByID(a)},getStackAddendumByID:function(e){for(var t="";e;)t+=a(e),e=M.getParentID(e);return t},getChildIDs:function(e){var t=l(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=M.getElement(e);return t?s(t):null},getElement:function(e){var t=l(e);return t?t.element:null},getOwnerID:function(e){var t=M.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=l(e);return t?t.parentID:null},getSource:function(e){var t=l(e),n=t?t.element:null;return null!=n?n._source:null},getText:function(e){var t=M.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=l(e);return t?t.updateCount:0},getRootIDs:h,getRegisteredIDs:d,pushNonStandardWarningStack:function(e,t){if("function"==typeof console.reactStack){var n=[],i=g.current,r=i&&i._debugID;try{for(e&&n.push({name:r?M.getDisplayName(r):null,fileName:t?t.fileName:null,lineNumber:t?t.lineNumber:null});r;){var o=M.getElement(r),s=M.getParentID(r),a=M.getOwnerID(r),u=a?M.getDisplayName(a):null,l=o&&o._source;n.push({name:u,fileName:l?l.fileName:null,lineNumber:l?l.lineNumber:null}),r=s}}catch(e){}console.reactStack(n)}},popNonStandardWarningStack:function(){"function"==typeof console.reactStackEnd&&console.reactStackEnd()}};e.exports=M},function(e,t,n){"use strict";var i=n(249),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:i}},registerDefault:function(){}};e.exports=r},function(e,t,n){"use strict";function i(e){return o(document.documentElement,e)}var r=n(1737),o=n(1739),s=n(371),a=n(390),u={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=a();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=a(),n=e.focusedElem,r=e.selectionRange;t!==n&&i(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,r),s(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if(void 0===i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",i-n),o.select()}else r.setOffsets(e,t)}};e.exports=u},function(e,t,n){"use strict";function i(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=i},function(e,t,n){"use strict";function i(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++)if(e.charAt(i)!==t.charAt(i))return i;return e.length===t.length?-1:n}function r(e){return e?e.nodeType===j?e.documentElement:e.firstChild:null}function o(e){return e.getAttribute&&e.getAttribute(E)||""}function s(e,t,n,i,r){var o;if(w.logTopLevelRenders){var s=e._currentElement.props.child,a=s.type;o="React mount: "+("string"==typeof a?a:a.displayName||a.name),console.time(o)}var u=C.mountComponent(e,n,null,b(e,t),r,0);o&&console.timeEnd(o),e._renderedComponent._topLevelWrapper=e,B._mountImageIntoNode(u,t,e,i,n)}function a(e,t,n,i){var r=D.ReactReconcileTransaction.getPooled(!n&&y.useCreateElement);r.perform(s,null,e,t,r,n,i),D.ReactReconcileTransaction.release(r)}function u(e,t,n){for(C.unmountComponent(e,n),t.nodeType===j&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function l(e){var t=r(e);if(t){var n=_.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){return!(!e||e.nodeType!==A&&e.nodeType!==j&&e.nodeType!==R)}function d(e){var t=r(e),n=t&&_.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function f(e){var t=d(e);return t?t._hostContainerInfo._topLevelWrapper:null}var p=n(235),h=n(279),m=n(277),g=n(280),v=n(301),_=(n(259),n(243)),b=n(1754),y=n(1755),w=n(366),S=n(291),k=(n(251),n(1756)),C=n(278),M=n(336),D=n(253),O=n(302),x=n(382),T=(n(233),n(299)),P=n(334),E=(n(236),m.ID_ATTRIBUTE_NAME),I=m.ROOT_ATTRIBUTE_NAME,A=1,j=9,R=11,L={},N=1,F=function(){this.rootID=N++};F.prototype.isReactComponent={},F.prototype.render=function(){return this.props.child},F.isReactTopLevelWrapper=!0;var B={TopLevelWrapper:F,_instancesByReactRootID:L,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,i,r){return B.scrollMonitor(i,function(){M.enqueueElementInternal(e,t,n),r&&M.enqueueCallbackInternal(e,r)}),e},_renderNewRootComponent:function(e,t,n,i){c(t)||p("37"),v.ensureScrollValueMonitoring();var r=x(e,!1);D.batchedUpdates(a,r,t,n,i);var o=r._instance.rootID;return L[o]=r,r},renderSubtreeIntoContainer:function(e,t,n,i){return null!=e&&S.has(e)||p("38"),B._renderSubtreeIntoContainer(e,t,n,i)},_renderSubtreeIntoContainer:function(e,t,n,i){M.validateCallback(i,"ReactDOM.render"),g.isValidElement(t)||p("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var s,a=g.createElement(F,{child:t});if(e){var u=S.get(e);s=u._processChildContext(u._context)}else s=O;var c=f(n);if(c){var d=c._currentElement,h=d.props.child;if(P(h,t)){var m=c._renderedComponent.getPublicInstance(),v=i&&function(){i.call(m)};return B._updateRootComponent(c,a,s,n,v),m}B.unmountComponentAtNode(n)}var _=r(n),b=_&&!!o(_),y=l(n),w=b&&!c&&!y,k=B._renderNewRootComponent(a,n,w,s)._renderedComponent.getPublicInstance();return i&&i.call(k),k},render:function(e,t,n){return B._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){c(e)||p("40");var t=f(e);if(!t){l(e),1===e.nodeType&&e.hasAttribute(I);return!1}return delete L[t._instance.rootID],D.batchedUpdates(u,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,o,s){if(c(t)||p("41"),o){var a=r(t);if(k.canReuseMarkup(e,a))return void _.precacheNode(n,a);var u=a.getAttribute(k.CHECKSUM_ATTR_NAME);a.removeAttribute(k.CHECKSUM_ATTR_NAME);var l=a.outerHTML;a.setAttribute(k.CHECKSUM_ATTR_NAME,u);var d=e,f=i(d,l),m=" (client) "+d.substring(f-20,f+20)+"\n (server) "+l.substring(f-20,f+20);t.nodeType===j&&p("42",m)}if(t.nodeType===j&&p("43"),s.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);h.insertTreeBefore(t,e,null)}else T(t,e),_.precacheNode(n,t.firstChild)}};e.exports=B},function(e,t,n){"use strict";function i(e){for(var t;(t=e._renderedNodeType)===r.COMPOSITE;)e=e._renderedComponent;return t===r.HOST?e._renderedComponent:t===r.EMPTY?null:void 0}var r=n(383);e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return h});var s,a,u,l=n(96),c=n.n(l),d=n(234),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=c.a.isEqual,h=(s=function(){function e(){i(this,e),r(this,"currentPage",a,this),r(this,"_syncState",u,this),this._syncState(),ns.events.on("ns-page-before-load",this._syncState)}return f(e,[{key:"isCollectorSearch",value:function(e){return e=e||this.currentPage.params,"rpopinfo"===e.scope}},{key:"isSearchResultsPage",get:function(){return"search"===this.currentPage.params.search}}]),e}(),a=o(s.prototype,"currentPage",[d.observable],{enumerable:!0,initializer:function(){return{page:null,params:null}}}),o(s.prototype,"isSearchResultsPage",[d.computed],Object.getOwnPropertyDescriptor(s.prototype,"isSearchResultsPage"),s.prototype),u=o(s.prototype,"_syncState",[d.action],{enumerable:!0,initializer:function(){var e=this;return function(t,n){var i=n&&n[1]||ns.page.current,r=e.currentPage.page!==i.page,o=!p(e.currentPage.params,i.params);(r||o)&&(e.currentPage.page&&(e._prevPage=Object(d.toJS)(e.currentPage)),e.currentPage.page=i.page,o&&(e.currentPage.params=i.params))}}}),s)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return l});var r,o=n(234),s=n(246),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(340),l=(r=function(){function e(t){i(this,e),this.themesData=u,this.settingsStore=t}return a(e,[{key:"isContentDark",get:function(){var e=Object(s.e)().theme||this.settingsStore.settings.color_scheme,t=this.themesData[e];return!!t&&t.content_is_dark}}]),e}(),function(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(r.prototype,"isContentDark",[o.computed],Object.getOwnPropertyDescriptor(r.prototype,"isContentDark"),r.prototype),r)},function(e,t,n){"use strict";var i=n(1763);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.$app=null,this.$appHeader=null}return r(e,[{key:"getAppNode",value:function(){return this.$app||(this.$app=$(".js-mail-App"))}},{key:"getAppHeaderNode",value:function(){return $(".mail-App-Header")}},{key:"getSearchNode",value:function(){return $(".js-mail-search",this.getAppHeaderNode())}},{key:"headTabsRecalculate",value:function(){ns.events.trigger("head-tabs-recalculate")}}]),e}(),s=new o;t.a=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(342),n(1782),n(1783),n(1784),n(1785),(n(403).default||n(403)).applyDecls()),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";e.exports.origin=n(1779),e.exports.react=n(1780),e.exports["two-dashes"]=n(1781)},function(e,t,n){"use strict";function i(e){return d(e,{__constructor:function(){this.__base.apply(this,arguments),this.willInit(this.props)},addBemClassName:function(){return!0},willInit:h,tag:h,attrs:h,style:h,mods:h,addMix:h,cls:m("cls"),mix:m("mix"),content:m("children"),wrap:function(e,t,n){return n},render:function(){var e=this.props,t=this.state,n=this.attrs(e,t)||{},i=this.style(e,t)||{},r=this.__render({addBemClassName:this.addBemClassName(e,t),tag:this.tag(e,t),attrs:f({},n,{style:f({},n.style,i)}),block:this.block,elem:this.elem,mods:this.mods(e,t),mix:[].concat(this.mix(e,t),this.addMix(e,t)),cls:this.cls(e,t),children:this.content(e,t)}),o=this.replace?this.replace(e,t):r;return this.wrap(e,t,o)},generateId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniq";return this.__uniqId=this.__uniqId||{},this.__uniqId[e]?this.__uniqId[e]:this.__uniqId[e]=""+e+ ++p}})}function r(e,t){if(!e||!e.block)return"";var n=[e.block];void 0!==e.elem&&n.push(t.elem,e.elem);var i=e.mod;if(void 0!==i){var r=i.val;"string"==typeof i?n.push(t.mod.name,i):!r&&"val"in i||(n.push(t.mod.name,i.name),r&&!0!==r&&n.push(t.mod.val,r))}return n.join("")}function o(e){var t=e.block,n=e.elem;return""+t+v+n}function s(e){var t=e.split(v);return{block:t[0],elem:"undefined"===t[1]?void 0:t[1]}}function a(e){var t=e.preset,n=e.naming,i=t.Base,r=t.classAttribute,a=t.Render,u=t.PropTypes,l=t.typeField,c=t.attrsField,p=function(e,t){var n,i=f({},t.attrs,t,(n={},n[r]=e.__cnb(t),n));return Object.keys(i).reduce(function(e,t){return _[t]||(e[t]=i[t]),e},Object.create(null))},h=function(e){return(e.elem?e.elemMods||e.mods:e.mods)||{}},m=function(e){var t=g(e.__self.__dangerouslySetNaming||n);return function(n){var i=n.addBemClassName,r=void 0===i||i,a=n.block,u=n.mods,d=n.elem,p=n.elemMods,m=n.mix,g=n.cls;if(r){var v=h({block:a,mods:u,elem:d,elemMods:p}),_=(e.__self.bases||[]).map(function(e){return{block:e}}).concat({block:a,elem:d});if(v){var b=v.__entities||{};for(var y in v)if("__entities"!==y)if(b[y])for(var w in b[y])v[y]&&(w=s(w),_.push({block:w.block,elem:w.elem,mod:{name:y,val:v[y]}}));else _.push({block:a,elem:d,mod:{name:y,val:v[y]}})}if(m){var S={},k=function(e){e.mods=h(e);var t=o(e);S[t]?S[t].mods=f(h(f({},e,S[t])),e.mods):S[t]=e};!function e(t){for(var n=[].concat(t),i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var s=o;if(s){if("function"==typeof s[l]){var a=s[c],u=new s[l](a);s={block:u.block,elem:u.elem,mods:u.mods(a),mix:[u.mix(a),u.addMix(a)]}}k(s),s.mix&&e(s.mix)}}}(m),Object.keys(S).forEach(function(e){var t=S[e],n=t.mods,i=t.block||a,r=t.elem;_.push({block:i,elem:r}),n&&Object.keys(n).forEach(function(e){var t=n[e];t&&_.push({block:i,elem:r,mod:{name:e,val:t}})})})}return g&&_.push(g),_.map(function(e){return"string"==typeof e?e:t(e)}).join(" ")}}};return d(i,{__constructor:function(){this.__base.apply(this,arguments),this.__cnb||(this.__cnb=m(this))},getChildContext:function(){var e=this.block||this.props.block,t=this.elem||this.props.elem,n=this.context&&this.context.bemBlock;return e&&!t&&n!==e||void 0===n?{bemBlock:e}:{}},render:function(){var e=f({},this.props),t=this.context.bemBlock;if(!e.elem&&!e.block&&t)throw Error("Prop elem must be specified");var n=typeof e.block;if("undefined"===n?e.block=t:"object"===n?e.block=block.block:"function"===n&&(e.block=block.prototype.block),!e.block)throw Error("Can't get block from context");return this.__render(e)},__render:function(e){return a(e.tag||"div",p(this,e))}},{displayName:"Bem",childContextTypes:{bemBlock:u.string},contextTypes:{bemBlock:u.string},__displayName:function(e){var t=e.block,i=e.elem;return this.__cnb||(this.__cnb=g(this.__dangerouslySetNaming||n)),this.__cnb({block:t,elem:i})}})}function u(e){var t=a(e),n=i(t),r=function(e){if(!e.block)throw new Error("Declaration must specify block field")},s=n.__displayName.bind(n),u={},l=function(e){return"number"==typeof e?e.toString():e},c={didCatch:"componentDidCatch",willMount:"componentWillMount",didMount:"componentDidMount",willReceiveProps:"componentWillReceiveProps",shouldUpdate:"shouldComponentUpdate",willUpdate:"componentWillUpdate",didUpdate:"componentDidUpdate",willUnmount:"componentWillUnmount"},p=function e(t,n){if(Array.isArray(n))n.forEach(function(n){return e(t,n)});else if(t.hasOwnProperty(n)){var i=t[n];"function"!=typeof i&&(t[n]=function(){return i})}return t},h=function(e){return p(e,["addBemClassName","tag","attrs","style","content","cls","mods","mix","addMix","wrap"])},m=function(e){if(e.hasOwnProperty("mods")){var t=e.mods;e.mods=function(){var n=[t,this.__base][0].apply(this,arguments)||{},i=n.__entities||(n.__entities={});for(var r in n)"__entities"!==r&&((i[r]||(i[r]={}))[o(e)]=!0);return n}}return e},g=function(e){if("function"==typeof e)return e;var t=Object.keys(e);if(1===t.length){var n=t[0],i=e[n];return"function"==typeof i?i:"*"===(i=l(i))?function(e){return!!l(e[n])}:function(e){return e[n]===i}}return function(n){var i=this;return t.every(function(t){var r=e[t];return"function"==typeof r?r.call(i,n):"*"===r?!!l(n[t]):l(r)===l(n[t])})}},v=function(e){if("function"!=typeof e){var t=Object.keys(e);if(1===t.length){var n=t[0];return function(e){var t;return f({},this.__base.apply(this,arguments),(t={},t[n]=e[n],t))}}return function(e){return f({},this.__base.apply(this,arguments),t.reduce(function(t,n){return t[n]=e[n],t},{}))}}},_=function(e,t,n){return function(){var i=void 0;return t.call(this,this.props,this.state)?i=e:n&&n!==e&&(i=this.__base),i&&i.apply(this,arguments)}},b=function(e,t){if(e)for(var n in t)e[n]&&f(t[n],e[n])},y=function(e){for(var t in c)e[t]&&(e[c[t]]=e[t],delete e[t]);return e},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return["propTypes","defaultProps","contextTypes","childContextTypes"].reduce(function(t,n){return t[n]=f({},e[n]),t},{})},S=function(){function e(e,t){var r=t.staticFields,o=t.fields,a=w(e);return[].concat(e,r).forEach(function(e){return b(e,a)}),r=f({},r,a,{displayName:s(o)}),e!==n?d.self(e,o,r):d(n,o,f({},r,{bases:i.bases}))}function t(e,t){for(var n=e.prototype,r=w(e),o=i.appliedModDeclsCount,s=void 0;s=t[o++];){var a=s,u=a.predicate,l=a.fields,c=a.staticFields,p=g(u),h=v(u);h&&d.self(e,{mods:_(h,p,n.mods)});for(var m in l){var y=l[m];"function"==typeof y&&(l[m]=_(y,p,n[m]))}b(c,r),d.self(e,l,c)}return f(e,r)}var i=this,r=i.cls;!r&&i.decls&&(r=i.cls=i.decls.reduce(function(n,i){return Array.isArray(i)?t(n,i):e(n,i)},n)),r&&i.modDecls&&(t(r,i.modDecls),i.appliedModDeclsCount=i.modDecls.length),r&&i.declWrappers&&(i.wrappedCls=i.declWrappers.reduce(function(e,t){return t(e)},r),i.declWrappers=null);var o=i.wrappedCls||r;return o&&(o.default=o),o},k=function(e){return u[e]||(u[e]={cls:null,base:null,decls:null,modDecls:null,appliedModDeclsCount:0,applyDecls:S})};return{Bem:t,decl:function(e,t,n,i){"function"==typeof e||Array.isArray(e)||(i=n,n=t,t=e,e=void 0),"function"==typeof n&&(i=n,n=void 0),r(t),y(t),h(t);var o=s(t),a=k(o),u=a.bases||(a.bases=[]),l=a.decls||(a.decls=[]),c=a.declaredBases||(a.declaredBases={});return m(t),e&&(Array.isArray(e)?e:[e]).forEach(function(e){var t=e.displayName;if(!c[t]){var n=k(t);u.push(t),l.push.apply(l,n.decls),l.push(n.modDecls||(n.modDecls=[])),c[t]=!0}}),l.push({fields:t,staticFields:n}),i&&(a.declWrappers||(a.declWrappers=[])).push(i),a},declMod:function(e,t,n){r(t),y(t),h(t);var i=k(s(t));return(i.modDecls||(i.modDecls=[])).push({predicate:e,fields:t,staticFields:n}),i}}}var l="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){!function(t){function n(e){var t=c(e);if(g)for(var n,i=0;n=b[i++];)e.hasOwnProperty(n)&&t.push(n);return t}function i(e,t,i){for(var r,o,a=n(i),u=0,l=a.length;u<l;)"__self"!==(r=a[u++])&&(o=i[r],!h(o)||o.prototype&&o.prototype.__self||s&&!(o.toString().indexOf(".__base")>-1)?t[r]=o:t[r]=function(n,i){var r=e[n]?e[n]:"__constructor"===n?t.__self.__parent:m,o=function e(){var t=this.__base;this.__base=e.__base;var n=i.apply(this,arguments);return this.__base=t,n};return o.__base=r,o}(r,o))}function r(e,t){for(var n,i=1;n=e[i++];)t?h(n)?o.self(t,n.prototype,n):o.self(t,n):t=h(n)?o(e[0],n.prototype,n):o(e[0],n);return t||e[0]}function o(){var e=arguments,t=p(e[0]),n=t||h(e[0]),o=n?t?r(e[0]):e[0]:a,s=e[n?1:0]||{},u=e[n?2:1],c=s.__constructor||n&&o.prototype&&o.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:n?function(){return o.apply(this,arguments)}:function(){};if(!n)return c.prototype=s,c.prototype.__self=c.prototype.constructor=c,d(c,u);d(c,o),c.__parent=o;var f=o.prototype,m=c.prototype=l(f);return m.__self=m.constructor=c,s&&i(f,m,s),u&&i(o,c,u),c}var s=function(){return"_"}.toString().indexOf("_")>-1,a=function(){},u=Object.prototype.hasOwnProperty,l=Object.create||function(e){var t=function(){};return t.prototype=e,new t},c=Object.keys||function(e){var t=[];for(var n in e)u.call(e,n)&&t.push(n);return t},d=function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);return e},f=Object.prototype.toString,p=Array.isArray||function(e){return"[object Array]"===f.call(e)},h=function(e){return"[object Function]"===f.call(e)},m=function(){},g=!0,v={toString:""};for(var _ in v)v.hasOwnProperty(_)&&(g=!1);var b=g?["toString","valueOf"]:null;o.self=function(){var e=arguments,t=p(e[0]),n=t?r(e[0],e[0][0]):e[0],o=e[1],s=e[2],a=n.prototype;return o&&i(a,a,o),s&&i(n,n,s),n};var y=!0;e.exports=o,y=!1,"object"==typeof modules&&"function"==typeof modules.define&&(modules.define("inherit",function(e){e(o)}),y=!1),y&&(t.inherit=o)}(l)}),d=c,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p=0,h=function(){},m=function(e){return function(t){return t[e]}},g=function(e){return console.assert(e.delims&&e.delims.elem&&e.delims.mod,"@bem/sdk.naming.entity.stringify: convention should be an instance of BemNamingEntityConvention"),function(t){return r(t,e.delims)}},v="$",_={block:1,elem:1,addBemClassName:1,tag:1,attrs:1,mods:1,mix:1,cls:1};e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"button2",elem:"text",tag:"span",attrs:function(e){return e.attrs}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(232),r=n(231);t.default=(0,r.decl)({block:"button2",elem:"icon",render:function(){var e=this.block,t=this.elem,n=this.props,r=n.children,o=n.side,s=n.size;return(0,i.cloneElement)(r,{size:s,mix:[].concat(r.props.mix,{block:e,elem:t,mods:{side:o}})})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.decl)({block:"button2",elem:"control",tag:"input",attrs:function(e){var t=e.type,n=e.id,r=e.name,o=e.value,s=e.disabled,a=e.tabindex,u=e.attrs;return i({autoComplete:"off",disabled:s,"aria-disabled":s&&"true",type:t,id:n,name:r,value:o,tabIndex:a},u)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.declMod)({type:"submit"},{block:"button2",attrs:function(){return i({},this.__base.apply(this,arguments),{type:"submit"})}})},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"pointerfocus",willInit:function(){this.state={block:"utilityfocus"},this.timeoutId=0,this.isPointer=!1,this.onMouseDown=this.onMouseDown.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.setIsPointerOnTabFocus=this.setIsPointerOnTabFocus.bind(this)},onKeyDown:function(e){clearTimeout(this.timeoutId),this.isPointer=!1},onMouseDown:function(e){var t=this;this.isPointer=!0,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){t.isPointer=!1},600)},onFocus:function(e){this.isPointer?(document.body.classList.add("pointerfocus"),document.body.classList.remove("utilityfocus")):(document.body.classList.add("utilityfocus"),document.body.classList.remove("pointerfocus")),this.setState({block:this.isPointer?"pointerfocus":"utilityfocus"})},onBlur:function(e){window.addEventListener("focus",this.setIsPointerOnTabFocus,!0)},setIsPointerOnTabFocus:function(){var e=this;window.removeEventListener("focus",this.setIsPointerOnTabFocus,!0),"pointerfocus"===this.state.block&&(this.isPointer=!0,setTimeout(function(){e.isPointer=!1}))},didMount:function(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("mousedown",this.onMouseDown),document.addEventListener("mouseup",this.onMouseDown),document.addEventListener("focus",this.onFocus,!0),window.addEventListener("blur",this.onBlur),document.body.classList.add("utilityfocus")},willUnmount:function(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("mouseup",this.onMouseDown),document.removeEventListener("focus",this.onFocus,!0),window.removeEventListener("blur",this.onBlur)},render:function(){return null}})},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(230),s=n(231);t.default=(0,s.decl)({block:"textinput",elem:"control",tag:"input",attrs:function(e){var t=e.innerRef,n=i(e,["innerRef"]);return r({},n,{ref:t})}},{propTypes:{innerRef:o.func.isRequired}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(232),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.declMod)({glyph:"x-sign"},{block:"icon",content:function(e){e.size;return r.default.createElement("svg",{viewBox:"0 0 20 20"},r.default.createElement("path",{focusable:"false",width:"0",height:"0",d:"M10,20 C4.5,20 0,15.5 0,10 C0,4.5 4.5,0 10,0 C15.5,0 20,4.5 20,10 C20,15.5 15.5,20 10,20 L10,20 L10,20 L10,20 Z M15,6.4 L13.6,5 L10,8.6 L6.4,5 L5,6.4 L8.6,10 L5,13.6 L6.4,15 L10,11.4 L13.6,15 L15,13.6 L11.4,10 L15,6.4 L15,6.4 L15,6.4 L15,6.4 Z"}))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.declMod)({theme:"websearch"},{block:"textinput",elem:"clear",iconType:function(){return"cross-websearch"}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(232),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.decl)({block:"textinput",elem:"icon",mods:function(e){return{side:e.side}},render:function(){var e=this.block,t=this.elem,n=this.props,i=n.children,o=n.mix;if(i)return r.default.cloneElement(i,{mix:[{block:e,elem:t,mods:this.mods(this.props)},o]})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"popup2",elem:"tail",attrs:function(e){return{style:e.style}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.decl)({block:"textinput",elem:"suggest-item",attrs:function(){return i({},this.__base.apply(this,arguments),{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave})},onMouseEnter:function(e){this.setState({hovered:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e,this)},onMouseLeave:function(e){this.setState({hovered:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e,this)}},{propTypes:{onMouseEnter:o.default.func,onMouseLeave:o.default.func}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.declMod)({view:"default"},{block:"textinput",mods:function(e){var t=e.tone,n=e.size;return i({},this.__base.apply(this,arguments),{tone:t,size:n||"n"})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);(n(261).default||n(261)).applyDecls(),t.default=(0,i.declMod)({target:"position"},{block:"popup2",willInit:function(){this.__base.apply(this,arguments),this.defaultMainOffset=0,this.defaultViewportOffset=0},_calcTargetDimensions:function(e){var t=e.position;return{left:t.left,top:t.top,width:0,height:0}}})},function(e,t,n){"use strict";var i=n(1819),r=n.n(i),o=n(1821);n.n(o);t.a=r.a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(231),c=n(237),d=(n(260),(n(244).default||n(244)).applyDecls()),f=i(d),p=(n(256),n(309),(n(416).default||n(416)).applyDecls()),h=i(p),m=(n(417).default||n(417)).applyDecls(),g=i(m),v=(n(418).default||n(418)).applyDecls(),_=i(v),b=(n(419).default||n(419)).applyDecls(),y=i(b);t.default=(0,l.decl)(f.default,{block:"menu",elem:"item",didMount:function(){this.context.registerItem(this)},willUnmount:function(){this.context.unregisterItem(this)},attrs:function(e){var t=e.title,n=this.state,i=n.disabled,o=n.checked;return r({},this.__base.apply(this,arguments),{title:t,"aria-selected":!!o&&"true","aria-disabled":!!i&&"true"})},mods:function(){return this.__base.apply(this,arguments)},render:function(){return this.props.isNavigation?s.default.createElement(y.default,null,this.__base.apply(this,arguments)):this.__base.apply(this,arguments)},content:function(e){var t=e.size,n=e.icon,i=e.children,o=e.needIconGlyph,a=[];return(n?[n]:[]).concat(i).forEach(function(e,n){h.default.isIcon(e)&&0===n?a.push(s.default.createElement(g.default,r({size:t,key:"icon"},{mix:e.props.mix}),e)):a.push(s.default.createElement(_.default,{key:"text"},e))}),o&&a.unshift(s.default.createElement(h.default,{key:"check-icon",glyph:"type-check"})),a},getText:function(){return(0,c.findDOMNode)(this).textContent.trim()}},{isItem:function(e){return e&&"function"==typeof e.type&&"menu__item"===e.type.displayName},propTypes:{title:u.default.string,onClick:u.default.func},contextTypes:{registerItem:u.default.func,unregisterItem:u.default.func}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(232),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.declMod)({glyph:"type-check"},{block:"icon",content:function(){return r.default.createElement("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"10"},r.default.createElement("path",{d:"M7.207 7.506L3.629 3.81 2.343 4.939l4.841 5.002 8.462-8.428L14.382.362z"}))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(232),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.decl)({block:"menu",elem:"icon",render:function(){var e=this.block,t=this.elem,n=this.props,i=n.mix,o=n.children,s=n.size;return r.default.cloneElement(o,{size:s,mix:[].concat(i,{block:e,elem:t})})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"menu",elem:"text",tag:"span"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"menu",elem:"list-item",tag:"li"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.decl)({block:"menu",elem:"item",willUpdate:function(e,t){!this.state.hovered&&t.hovered&&(this.context.removeHover(),this.context.hoverItem(this))},attrs:function(){return i({},this.__base.apply(this,arguments),{onFocus:this.onFocus,onBlur:this.onBlur})},onFocus:function(e){return this.context.isIE?void e.stopPropagation():!this.state.disabled&&(this.setState({hovered:!0}),void(this.props.onFocus&&this.props.onFocus(e)))},onBlur:function(e){return this.context.isIE?void e.stopPropagation():!this.state.disabled&&(this.setState({hovered:!1}),void(this.props.onBlur&&this.props.onBlur(e)))},onMouseLeave:function(e){this.__base.apply(this,arguments),this.context.removeHover()}},{contextTypes:{hoverItem:o.default.func,removeHover:o.default.func,registerItem:o.default.func,unregisterItem:o.default.func,isIE:o.default.bool}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.declMod)({type:"link"},{block:"menu",elem:"item",tag:"a",attrs:function(e){var t=e.url,n=e.target;return i({},this.__base.apply(this,arguments),{role:"link",href:t,target:n})}},{propTypes:{target:o.default.string,url:o.default.string}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.declMod)({type:"check"},{block:"menu",willInit:function(e){var t=e.val;this.__base.apply(this,arguments),this.state.val=this._prepareVal(t),this.onClick=this.onClick.bind(this)},attrs:function(e){var t=e.tabIndex,n=void 0===t?0:t;return i({},this.__base.apply(this,arguments),{"aria-multiselectable":"true",role:"listbox",tabIndex:n})},onClick:function(e,t){if(null!==t){var n=this.state.val,i=n.indexOf(t);-1===i?n.push(t):n.splice(i,1),this.setState({val:n})}this.props.onClick&&this.props.onClick(e,t)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.declMod)({type:"radio"},{block:"menu",willInit:function(e){var t=e.val;this.__base.apply(this,arguments),this.state.val=void 0===t?[]:[Array.isArray(t)?t[0]:t],this.onClick=this.onClick.bind(this)},attrs:function(e){var t=e.tabIndex,n=void 0===t?0:t;return i({},this.__base.apply(this,arguments),{role:"listbox",tabIndex:n})},onClick:function(e,t){null!==t&&this.setState({val:[t]}),this.props.onClick&&this.props.onClick(e,t)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.declMod)({type:"radiocheck"},{block:"menu",willInit:function(e){var t=e.val;this.__base.apply(this,arguments),this.state.val=void 0===t?[]:[Array.isArray(t)?t[0]:t],this.onClick=this.onClick.bind(this)},attrs:function(e){var t=e.tabIndex,n=void 0===t?0:t;return i({},this.__base.apply(this,arguments),{role:"listbox",tabIndex:n})},onClick:function(e,t){null!==t&&this.setState({val:t===this.state.val[0]?[]:[t]}),this.props.onClick&&this.props.onClick(e,t)}})},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return s});var i=function(e){return Daria.MessageTime.getFormattedTime(1e3*e).list},r=function(e){return Jane.Date.toHumanFormat(e)},o=function(e){return Jane.Date.format("%Date_HM__colon",e)},s=function(e){return Daria.Recipients.add(e)}},function(e,t,n){"use strict";var i=n(425);n.d(t,"b",function(){return i.c}),n.d(t,"a",function(){return i.b}),n.d(t,"c",function(){return i.d})},function(e,t,n){"use strict";var i=n(1840),r=n.n(i),o=n(1842);n.n(o);t.a=r.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"checkbox",elem:"box",tag:"span"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.decl)({block:"checkbox",elem:"control",tag:"input",attrs:function(e){var t=e.id,n=e.name,r=e.value,o=e.checked,s=e.disabled,a=e.labeledBy,u=e.onChange,l=e.attrs,c=e.tabIndex;return i({id:t,name:n,disabled:s,value:r,tabIndex:c,type:"checkbox",autoComplete:"off",checked:Boolean(o),"aria-labelledby":a,onChange:s?void 0:u},l)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(232),o=i(r),s=n(231),a=(n(256),n(309),(n(431).default||n(431)).applyDecls()),u=i(a);t.default=(0,s.decl)({block:"checkbox",elem:"tick",tag:"i",content:function(e){var t=e.view;e.size;if("classic"!==t)return o.default.createElement(u.default,{glyph:"type-tick"})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(232),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.declMod)({glyph:"type-tick"},{block:"icon",content:function(){return r.default.createElement("svg",{focusable:"false",viewBox:"0 0 12 10",width:"0",height:"0",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M.49 5.385l1.644-1.644 4.385 4.385L4.874 9.77.49 5.385zm4.384 1.096L10.356 1 12 2.644 6.519 8.126 4.874 6.48v.001z"}))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"checkbox",elem:"label",tag:"label",attrs:function(e){var t=e.htmlFor;return{id:e.id,htmlFor:t,"aria-hidden":"true"}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.declMod)({view:"default"},{block:"checkbox",mods:function(e){var t=e.tone;return i({},this.__base.apply(this,arguments),{tone:t})}},{propTypes:{tone:o.default.string},defaultProps:{tone:"default"}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(231),u=(n(342).default||n(342)).applyDecls(),l=i(u),c=(n(256),n(309),(n(435).default||n(435)).applyDecls()),d=i(c);t.default=(0,a.decl)({block:"select2",elem:"button",render:function(){var e=this.block,t=this.elem,n=this.props,i=n.val,o=n.view,a=n.tone,u=n.items,c=n.opened,f=n.placeholder,p=n.multiselectable,h=n.buttonProps,m=this.generateId(),g=r({},"default"===o?{glyph:"carets-v"}:{type:"arrow",direction:c?"top":"bottom"},{key:"arrow",mix:{block:e,elem:"arrow"}}),v=void 0;return u.some(function(e){return!(-1===i.indexOf(e.props.val)||!e.props.icon)&&(v=s.default.cloneElement(e.props.icon,{key:"icon"}),!0)}),s.default.createElement(l.default,r({innerRef:this.props.setAnchor,width:"max",tone:a,view:o,mix:{block:e,elem:t},attrs:{role:"listbox","aria-expanded":c?"true":void 0,"aria-labelledby":m,"aria-multiselectable":p?"true":void 0},textAttrs:{id:m},text:f,iconLeft:v,iconRight:s.default.createElement(d.default,r({key:"arrow"},g))},h))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(232),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.declMod)({glyph:"carets-v"},{block:"icon",content:function(){return r.default.createElement("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",width:"8",height:"14"},r.default.createElement("path",{d:"M4 0l4 6H0l4-6zm0 14l4-6H0l4 6z"}))}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(231),u=(n(269),n(261),n(270),(n(272).default||n(272)).applyDecls()),l=i(u),c=(n(1847),(n(437).default||n(437)).applyDecls()),d=i(c);t.default=(0,a.decl)({block:"select2",elem:"popup",willInit:function(){this.__base.apply(this,arguments),this._calcDrawingParams=this._calcDrawingParams.bind(this),this._getDrawingParams=this._getDrawingParams.bind(this)},render:function(){var e=this.block,t=this.elem,n=this.props,i=n.items,o=n.maxHeight,a=n.menuProps,u=n.popupProps,c=n.zIndexGroupLevel,f=n.itemIconHidden;return s.default.createElement(l.default,r({autoclosable:!0,mix:{block:e,elem:t},directions:["bottom-left","bottom-right","top-left","top-right"],anchor:this.props.setAnchor,calcPossible:this._calcDrawingParams,viewportOffset:0,mainOffset:"default"===u.view?2:void 0,zIndexGroupLevel:c},u),s.default.createElement(d.default,{items:i,menuProps:a,maxHeight:o,itemIconHidden:f,getDrawingParams:this._getDrawingParams}))},_calcDrawingParams:function(e){this._drawingParams=e},_getDrawingParams:function(e){return this._drawingParams}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231),r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.decl)({block:"select2",elem:"menu",willInit:function(){this.__base.apply(this,arguments),this._hoverOnOpen=this._hoverOnOpen.bind(this)},didUpdate:function(){this.__base.apply(this,arguments),this.context.wasOpened&&this._menu.items.length&&this._hoverOnOpen()},_hoverOnOpen:function(){var e=this._menu;if(e.items.length){var t=e.items.filter(function(e){return e.props.checked})[0];e._hoveredItem||(t?e.hoverText(t.getText()):(e.hoverItem(e.items[0]),e.scrollToItem(e.items[0])))}}},{contextTypes:{getMenu:o.default.func,wasOpened:o.default.bool}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(232),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.decl)({block:"select2",elem:"control",tag:"select",attrs:function(e){var t=e.name,n=e.multiple,i=e.disabled,r=e.val,o=e.tabIndex,s=e.onChange;return{name:t,multiple:n,disabled:i,value:r,tabIndex:o,onChange:i?void 0:s}},content:function(e){var t=(e.val,e.native);return e.items.map(function(e,n){return r.default.createElement("option",{key:n,value:e.props.val,disabled:e.props.disabled},t?e.props.children:void 0)})}},{defaultProps:{tabIndex:"-1",onChange:function(){}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.declMod)({width:"fixed"},{block:"select2",didMount:function(){this.__base.apply(this,arguments),this.setState({width:this._getAnchorWidth()})},_getButtonProps:function(){return i({},this.__base.apply(this,arguments),{style:{width:this.state.width+"px"}})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(230),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.decl)({block:"spin2",mods:function(e){var t=e.size,n=e.progress,i=e.position;return{size:t,view:e.view,tone:e.tone,position:i,progress:(0,o.bool2string)(n)}}},{propTypes:{view:r.default.string,tone:r.default.string,size:r.default.oneOf(["xxs","xs","s","m","l"]),progress:r.default.bool,position:r.default.oneOf(["center"])},defaultProps:{view:"default",tone:"default"}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(232),r=n(231);t.default=(0,r.decl)({block:"link",elem:"icon",render:function(){var e=this.props.children;return(0,i.cloneElement)(e,{mix:[].concat(e.props.mix)})}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=(n(248).default||n(248)).applyDecls(),c=i(l),d=n(231),f=(n(314).default||n(314)).applyDecls(),p=i(f);t.default=(0,d.declMod)({pseudo:!0},{block:"link",mods:function(e){var t=e.pseudo,n=this.state.pressed;return r({},this.__base.apply(this,arguments),{pseudo:(0,d.bool2string)(t),pressed:n})},content:function(e){var t=e.inner,n=this.__base.apply(this,arguments);return t?n:s.default.createElement(p.default,{key:"inner"},n)},onClick:function(e){e.preventDefault(),this.props.onClick&&this.props.onClick(e)},onKeyDown:function(e){c.default.is(e.which,"ENTER","SPACE")&&(e.which===c.default.SPACE&&e.preventDefault(),this.setState({pressed:!0}))},onKeyUp:function(e){c.default.is(e.which,"ENTER","SPACE")&&this.setState({pressed:!1})}},{propTypes:{inner:u.default.bool}})},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.declMod)({theme:"normal"},{block:"modal",didMount:function(){this.__base.apply(this,arguments),this.props.visible&&(this._onceShown=!0)},willReceiveProps:function(e){var t=e.visible;this.__base.apply(this,arguments),t&&(this._onceShown=!0)},mods:function(){return i({},this.__base.apply(this,arguments),{js:this._onceShown?"inited":void 0,"has-animation":"yes"})}})},function(e,t,n){var i;!function(r){var o=function(){var e=[],t=function(t){return e.push(t),1===e.length},n=function(){var t=e,n=0,i=e.length;for(e=[];n<i;)t[n++]()};if("function"==typeof setImmediate)return function(e){t(e)&&setImmediate(n)};if("object"==typeof process&&process.nextTick)return function(e){t(e)&&process.nextTick(n)};var i=r.MutationObserver||r.WebKitMutationObserver;if(i){var o=1,s=document.createTextNode("");return new i(n).observe(s,{characterData:!0}),function(e){t(e)&&(s.data=o*=-1)}}if(r.postMessage){var a=!0;if(r.attachEvent){var u=function(){a=!1};r.attachEvent("onmessage",u),r.postMessage("__checkAsync","*"),r.detachEvent("onmessage",u)}if(a){var l="__promise"+Math.random()+"_"+new Date,c=function(e){e.data===l&&(e.stopPropagation&&e.stopPropagation(),n())};return r.addEventListener?r.addEventListener("message",c,!0):r.attachEvent("onmessage",c),function(e){t(e)&&r.postMessage(l,"*")}}}var d=r.document;if("onreadystatechange"in d.createElement("script")){var f=function(){var e=d.createElement("script");e.onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,n()},(d.documentElement||d.body).appendChild(e)};return function(e){t(e)&&f()}}return function(e){t(e)&&setTimeout(n,0)}}(),s=function(e){o(function(){throw e})},a=function(e){return"function"==typeof e},u=function(e){return null!==e&&"object"==typeof e},l=Object.prototype.toString,c=Array.isArray||function(e){return"[object Array]"===l.call(e)},d=function(e){for(var t=[],n=0,i=e.length;n<i;)t.push(n++);return t},f=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},p=function(e,t){return function(n){e.call(this,n,t)}},h=r.PromiseRejectionEvent?function(e,t){new r.PromiseRejectionEvent("unhandledrejection",{promise:t,reason:e})}:"object"==typeof process&&process.emit?function(e,t){process.emit("unhandledRejection",e,t)}:function(){},m=function(){this._promise=new v};m.prototype={promise:function(){return this._promise},resolve:function(e){this._promise.isResolved()||this._promise._resolve(e)},reject:function(e){this._promise.isResolved()||(y.isPromise(e)?(e=e.then(function(e){var t=y.defer();return t.reject(e),t.promise()}),this._promise._resolve(e)):this._promise._reject(e))},notify:function(e){this._promise.isResolved()||this._promise._notify(e)}};var g={PENDING:0,RESOLVED:1,FULFILLED:2,REJECTED:3},v=function(e){if(this._value=void 0,this._status=g.PENDING,this._shouldEmitUnhandledRejection=!0,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[],e){var t=this,n=e.length;try{e(function(e){t.isResolved()||t._resolve(e)},n>1?function(e){t.isResolved()||t._reject(e)}:void 0,n>2?function(e){t.isResolved()||t._notify(e)}:void 0)}catch(e){this._reject(e)}}};v.prototype={valueOf:function(){return this._value},isResolved:function(){return this._status!==g.PENDING},isFulfilled:function(){return this._status===g.FULFILLED},isRejected:function(){return this._status===g.REJECTED},then:function(e,t,n,i){this._shouldEmitUnhandledRejection=!1;var r=new m;return this._addCallbacks(r,e,t,n,i),r.promise()},catch:function(e,t){return this.then(void 0,e,t)},fail:function(e,t){return this.then(void 0,e,t)},always:function(e,t){var n=this,i=function(){return e.call(this,n)};return this.then(i,i,t)},progress:function(e,t){return this.then(void 0,void 0,e,t)},spread:function(e,t,n){return this.then(function(t){return e.apply(this,t)},t,n)},done:function(e,t,n,i){this.then(e,t,n,i).fail(s)},delay:function(e){var t,n=this.then(function(n){var i=new m;return t=setTimeout(function(){i.resolve(n)},e),i.promise()});return n.always(function(){clearTimeout(t)}),n},timeout:function(e){var t=new m,n=setTimeout(function(){t.reject(new y.TimedOutError("timed out"))},e);return this.then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise().always(function(){clearTimeout(n)}),t.promise()},_vow:!0,_resolve:function(e){if(!(this._status>g.RESOLVED)){if(e===this)return void this._reject(TypeError("Can't resolve promise with itself"));if(this._status=g.RESOLVED,e&&e._vow)return void(e.isFulfilled()?this._fulfill(e.valueOf()):e.isRejected()?(e._shouldEmitUnhandledRejection=!1,this._reject(e.valueOf())):e.then(this._fulfill,this._reject,this._notify,this));if(u(e)||a(e)){var t;try{t=e.then}catch(e){return void this._reject(e)}if(a(t)){var n=this,i=!1;try{t.call(e,function(e){i||(i=!0,n._resolve(e))},function(e){i||(i=!0,n._reject(e))},function(e){n._notify(e)})}catch(e){i||this._reject(e)}return}}this._fulfill(e)}},_fulfill:function(e){this._status>g.RESOLVED||(this._status=g.FULFILLED,this._value=e,this._callCallbacks(this._fulfilledCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=void 0)},_reject:function(e){if(!(this._status>g.RESOLVED)){if(this._status=g.REJECTED,this._value=e,this._callCallbacks(this._rejectedCallbacks,e),!this._rejectedCallbacks.length){var t=this;o(function(){t._shouldEmitUnhandledRejection&&h(e,t)})}this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=void 0}},_notify:function(e){this._callCallbacks(this._progressCallbacks,e)},_addCallbacks:function(e,t,n,i,r){n&&!a(n)?(r=n,n=void 0):i&&!a(i)&&(r=i,i=void 0),n&&(this._shouldEmitUnhandledRejection=!1);var o;this.isRejected()||(o={defer:e,fn:a(t)?t:void 0,ctx:r},this.isFulfilled()?this._callCallbacks([o],this._value):this._fulfilledCallbacks.push(o)),this.isFulfilled()||(o={defer:e,fn:n,ctx:r},this.isRejected()?this._callCallbacks([o],this._value):this._rejectedCallbacks.push(o)),this._status<=g.RESOLVED&&this._progressCallbacks.push({defer:e,fn:i,ctx:r})},_callCallbacks:function(e,t){var n=e.length;if(n){var i=(this.isResolved(),this.isFulfilled()),r=this.isRejected();o(function(){for(var o,s,a,u=0;u<n;)if(o=e[u++],s=o.defer,a=o.fn){var l,c=o.ctx;try{l=c?a.call(c,t):a(t)}catch(e){s.reject(e);continue}i||r?s.resolve(l):s.notify(l)}else i?s.resolve(t):r?s.reject(t):s.notify(t)})}}};var _={cast:function(e){return y.cast(e)},all:function(e){return y.all(e)},race:function(e){return y.anyResolved(e)},resolve:function(e){return y.resolve(e)},reject:function(e){return y.reject(e)}};for(var b in _)_.hasOwnProperty(b)&&(v[b]=_[b]);var y={Deferred:m,Promise:v,defer:function(){return new m},when:function(e,t,n,i,r){return y.cast(e).then(t,n,i,r)},fail:function(e,t,n){return y.when(e,void 0,t,n)},always:function(e,t,n){return y.when(e).always(t,n)},progress:function(e,t,n){return y.when(e).progress(t,n)},spread:function(e,t,n,i){return y.when(e).spread(t,n,i)},done:function(e,t,n,i,r){y.when(e).done(t,n,i,r)},isPromise:function(e){return u(e)&&a(e.then)},cast:function(e){return e&&e._vow?e:y.resolve(e)},valueOf:function(e){return e&&a(e.valueOf)?e.valueOf():e},isFulfilled:function(e){return!e||!a(e.isFulfilled)||e.isFulfilled()},isRejected:function(e){return!(!e||!a(e.isRejected))&&e.isRejected()},isResolved:function(e){return!e||!a(e.isResolved)||e.isResolved()},resolve:function(e){var t=y.defer();return t.resolve(e),t.promise()},fulfill:function(e){var t=y.defer(),n=t.promise();return t.resolve(e),n.isFulfilled()?n:n.then(null,function(e){return e})},reject:function(e){var t=y.defer();return t.reject(e),t.promise()},invoke:function(e,t){var n,i=Math.max(arguments.length-1,0);if(i){n=Array(i);for(var o=0;o<i;)n[o++]=arguments[o]}try{return y.resolve(n?e.apply(r,n):e.call(r))}catch(e){return y.reject(e)}},all:function(e){var t=new m,n=c(e),i=n?d(e):f(e),r=i.length,o=n?[]:{};if(!r)return t.resolve(o),t.promise();var s=r;return y._forEach(e,function(e,n){o[i[n]]=e,--s||t.resolve(o)},t.reject,t.notify,t,i),t.promise()},allResolved:function(e){var t=new m,n=c(e),i=n?d(e):f(e),r=i.length,o=n?[]:{};if(!r)return t.resolve(o),t.promise();var s=function(){--r||t.resolve(e)};return y._forEach(e,s,s,t.notify,t,i),t.promise()},allPatiently:function(e){return y.allResolved(e).then(function(){var t,n,i,r,o=c(e),s=o?d(e):f(e),a=s.length,u=0;if(!a)return o?[]:{};for(;u<a;)i=s[u++],r=e[i],y.isRejected(r)?(t||(t=o?[]:{}),o?t.push(r.valueOf()):t[i]=r.valueOf()):t||((n||(n=o?[]:{}))[i]=y.valueOf(r));if(t)throw t;return n})},any:function(e){var t=new m,n=e.length;if(!n)return t.reject(Error()),t.promise();var i,r=0;return y._forEach(e,t.resolve,function(e){r||(i=e),++r===n&&t.reject(i)},t.notify,t),t.promise()},anyResolved:function(e){var t=new m;return e.length?(y._forEach(e,t.resolve,t.reject,t.notify,t),t.promise()):(t.reject(Error()),t.promise())},delay:function(e,t){return y.resolve(e).delay(t)},timeout:function(e,t){return y.resolve(e).timeout(t)},_forEach:function(e,t,n,i,r,o){for(var s=o?o.length:e.length,a=0;a<s;)y.when(e[o?o[a]:a],p(t,a),n,i,r),++a},TimedOutError:function(e){var t=function(t){this.name=e,this.message=t};return t.prototype=new Error,t}("TimedOut")},w=!0;"object"==typeof e&&"object"==typeof e.exports&&(e.exports=y,w=!1),"object"==typeof modules&&a(modules.define)&&(modules.define("vow",function(e){e(y)}),w=!1),void 0!==(i=function(e,t,n){n.exports=y}.call(t,n,t,e))&&(e.exports=i),w=!1,w&&(r.vow=y)}("undefined"!=typeof window?window:global)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"textarea",elem:"wrap",tag:"span"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"textarea",elem:"control",tag:"textarea",attrs:function(e){return e}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"textarea",elem:"box",tag:"span"})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(231),c=(n(565).default||n(565)).applyDecls(),d=i(c);t.default=(0,l.declMod)(function(e){return e.hasClear&&!(e.controlAttrs&&e.controlAttrs.readOnly)},{block:"textarea",mods:function(e){var t=e.hasClear;return r({},this.__base.apply(this,arguments),{"has-clear":(0,l.bool2string)(t)})},content:function(e){var t=e.text,n=e.theme,i=this.state.disabled;return[].concat(this.__base.apply(this,arguments),s.default.createElement(d.default,{onClick:this._onClearClick.bind(this),key:"clear",disabled:i,visible:t,theme:n}))},_onClearClick:function(e){this._control.focus(),this.setState({focused:!0}),this.props.onClearClick&&this.props.onClearClick(e),e.isDefaultPrevented()||this.props.onChange("",this.props,{source:"clear"})}},{propTypes:{hasClear:u.default.bool}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(231),u=(n(260),(n(244).default||n(244)).applyDecls()),l=i(u),c=(n(256).default||n(256)).applyDecls(),d=i(c);t.default=(0,a.decl)(l.default,{block:"textarea",elem:"clear",mods:function(e){var t=e.theme,n=e.visible;return r({},this.__base.apply(this,arguments),{theme:t,visible:(0,a.bool2string)(n)})},render:function(){var e=this.block,t=this.elem;return s.default.createElement(d.default,{type:"cross",attrs:this.attrs(this.props),mix:{block:e,elem:t,mods:this.mods(this.props)}})}})},function(e,t){},function(e,t,n){e.exports=n(1926)()},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(315),u=i(a),l=n(313),c=i(l),d=n(570),f=i(d),p=n(397),h=i(p),m=(n(353),(n(285).default||n(285)).applyDecls()),g=i(m);n(568),n(354);var v=function(){var e=n(575);return(window.Daria.Config.locale?"ru"===window.Daria.Config.locale:window.Daria.Config.locale&&"ru"===window.Daria.Config.locale)?e().decl(n(1938))("yaplus"):(window.Daria.Config.locale?"en"!==window.Daria.Config.locale:window.Daria.Config.locale&&"en"!==window.Daria.Config.locale)?(window.Daria.Config.locale?"be"===window.Daria.Config.locale:window.Daria.Config.locale&&"be"===window.Daria.Config.locale)?e().decl(n(1940))("yaplus"):(window.Daria.Config.locale?"id"===window.Daria.Config.locale:window.Daria.Config.locale&&"id"===window.Daria.Config.locale)?e().decl(n(1941))("yaplus"):(window.Daria.Config.locale?"kk"===window.Daria.Config.locale:window.Daria.Config.locale&&"kk"===window.Daria.Config.locale)?e().decl(n(1942))("yaplus"):(window.Daria.Config.locale?"tr"===window.Daria.Config.locale:window.Daria.Config.locale&&"tr"===window.Daria.Config.locale)?e().decl(n(1943))("yaplus"):(window.Daria.Config.locale?"tt"===window.Daria.Config.locale:window.Daria.Config.locale&&"tt"===window.Daria.Config.locale)?e().decl(n(1944))("yaplus"):(window.Daria.Config.locale?"uk"===window.Daria.Config.locale:window.Daria.Config.locale&&"uk"===window.Daria.Config.locale)?e().decl(n(1945))("yaplus"):(window.Daria.Config.locale?"az"===window.Daria.Config.locale:window.Daria.Config.locale&&"az"===window.Daria.Config.locale)?e().decl(n(1946))("yaplus"):(window.Daria.Config.locale?"hy"===window.Daria.Config.locale:window.Daria.Config.locale&&"hy"===window.Daria.Config.locale)?e().decl(n(1947))("yaplus"):(window.Daria.Config.locale?"ka"===window.Daria.Config.locale:window.Daria.Config.locale&&"ka"===window.Daria.Config.locale)?e().decl(n(1948))("yaplus"):(window.Daria.Config.locale?"ro"===window.Daria.Config.locale:window.Daria.Config.locale&&"ro"===window.Daria.Config.locale)?e().decl(n(1949))("yaplus"):function(){}:e().decl(n(1939))("yaplus")}(),_=i(v);t.default=(0,a.declMod)({available:!0},{block:"yaplus",willInit:function(){this.state={tooltipVisible:!1},this._leaveMouseTimeout=null,this._onTooltipActionButtonClick=this._onTooltipActionButtonClick.bind(this),this._onTooltipCloseButtonClick=this._onTooltipCloseButtonClick.bind(this),this._closeTooltip=this._closeTooltip.bind(this),this._onLinkMouseEnter=this._onLinkMouseEnter.bind(this),this._onLinkClick=this._onLinkClick.bind(this),this._setReference=this._setReference.bind(this),this._onDocumentClick=this._onDocumentClick.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._callCustomEventsHandler=this._callCustomEventsHandler.bind(this),this._bindToWindow=this._bindToWindow.bind(this),this._unbindFromWindow=this._unbindFromWindow.bind(this)},mods:function(e){var t=e.available;return r({},this.__base.apply(this,arguments),{available:(0,a.bool2string)(t)})},willReceiveProps:function(e){var t=e.visible;this.state.visible!==t&&(this.setState({tooltipVisible:t}),setTimeout(t?this._bindToWindow:this._unbindFromWindow,0))},didMount:function(){var e=this.props.visible;e&&(this.setState({tooltipVisible:e}),this._bindToWindow()),this._callCustomEventsHandler("show","yaplus")},content:function(e){var t=e.tooltip,n=e.headerText,i=e.enableText,r=e.mainDescription,o=e.leftButtonText,a=e.rightButtonText,l=e.plusLinkParams,d=(e.eventsHandler,!1!==t),p="";return l="string"==typeof l?l:"",d&&(p=t||s.default.createElement(f.default,{ref:this._setReference("_tooltip"),onMouseOver:this._onMouseEnter,onMouseLeave:this._onMouseLeave,key:"yaplus-tooltip",theme:"promo",to:"bottom-center",mix:{block:"yaplus",elem:"tooltip"},view:"classic",visible:this.state.tooltipVisible,anchor:this._setReference("_anchor")},s.default.createElement(f.default.Description,null,s.default.createElement(u.default,{block:"yaplus",elem:"text-header"},n||(0,_.default)("tooltip_header")),s.default.createElement(u.default,{block:"yaplus",elem:"text-main"},r||(0,_.default)("tooltip_descr"))),s.default.createElement(f.default.Buttons,null,s.default.createElement(h.default,{onClick:this._onTooltipCloseButtonClick,size:"m",theme:"clear",view:"classic"},o||(0,_.default)("btn_left")),s.default.createElement(h.default,{onClick:this._onTooltipActionButtonClick,size:"m",type:"link",target:"_blank",theme:"action",view:"classic",url:"https://plus.yandex.ru"+l},a||(0,_.default)("btn_right"))))),this.state.tooltipVisible&&this._callCustomEventsHandler("show","yaplus-tooltip"),[s.default.createElement(c.default,{key:"yaplus-link",target:"_blank",url:"https://plus.yandex.ru"+l,onMouseEnter:this._onLinkMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onLinkClick,theme:"normal",mix:{block:"yaplus",elem:"link"}},s.default.createElement(u.default,{tag:"span",block:"link",elem:"inner"},i||(0,_.default)("enable")),s.default.createElement(g.default,null,s.default.createElement(u.default,{block:"yaplus",elem:"badge-main",tag:"span",ref:this._setReference("_anchor")}))),p]},_callCustomEventsHandler:function(e,t){var n=this.props;"function"==typeof n.eventsHandler&&n.eventsHandler(e,t,r({},n))},_onTooltipCloseButtonClick:function(e){this._closeTooltip(e),this._callCustomEventsHandler("click","yaplus-tooltip-close")},_onTooltipActionButtonClick:function(e){this._closeTooltip(e),this._callCustomEventsHandler("click","yaplus-tooltip-action")},_closeTooltip:function(e){this.setState({tooltipVisible:!1}),this._unbindFromWindow()},_onDocumentClick:function(e){var t=((this._tooltip||{})._popupRef||{}).domElementPopup;t&&t.contains(e.target)||this._closeTooltip(e)},_bindToWindow:function(){window.addEventListener("click",this._onDocumentClick)},_unbindFromWindow:function(){window.removeEventListener("click",this._onDocumentClick)},_onMouseLeave:function(e){var t=this;this._leaveMouseTimeout=setTimeout(function(){t._closeTooltip(e),clearTimeout(t._leaveMouseTimeout),t._leaveMouseTimeout=null},300)},_onMouseEnter:function(e){this._leaveMouseTimeout&&(clearTimeout(this._leaveMouseTimeout),this._leaveMouseTimeout=null)},_onLinkMouseEnter:function(e){this._onMouseEnter(e),this.setState({tooltipVisible:!0}),this._bindToWindow()},_onLinkClick:function(e){this._callCustomEventsHandler("click","yaplus")},_setReference:function(e){var t=this;return function(n){if(void 0===n||null===n)return t[e];t[e]=n}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(1929),(n(576).default||n(576)).applyDecls()),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(230),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.decl)({block:"tooltip",elem:"corner",mods:function(e){var t=e.mods;return console.assert((t||{}).side,"tooltip: Модификатор side элемента corner скоро станет обязательным"),t}},{propTypes:{mods:r.default.object}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"tooltip",elem:"description"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"tooltip",elem:"buttons"})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(230),s=i(o),a=n(231),u=function(){var e=n(575);return(window.Daria.Config.locale?"ru"===window.Daria.Config.locale:window.Daria.Config.locale&&"ru"===window.Daria.Config.locale)?e().decl(n(1930))("tooltip__close"):(window.Daria.Config.locale?"en"!==window.Daria.Config.locale:window.Daria.Config.locale&&"en"!==window.Daria.Config.locale)?(window.Daria.Config.locale?"be"===window.Daria.Config.locale:window.Daria.Config.locale&&"be"===window.Daria.Config.locale)?e().decl(n(1932))("tooltip__close"):(window.Daria.Config.locale?"id"===window.Daria.Config.locale:window.Daria.Config.locale&&"id"===window.Daria.Config.locale)?e().decl(n(1933))("tooltip__close"):(window.Daria.Config.locale?"kk"===window.Daria.Config.locale:window.Daria.Config.locale&&"kk"===window.Daria.Config.locale)?e().decl(n(1934))("tooltip__close"):(window.Daria.Config.locale?"tr"===window.Daria.Config.locale:window.Daria.Config.locale&&"tr"===window.Daria.Config.locale)?e().decl(n(1935))("tooltip__close"):(window.Daria.Config.locale?"tt"===window.Daria.Config.locale:window.Daria.Config.locale&&"tt"===window.Daria.Config.locale)?e().decl(n(1936))("tooltip__close"):(window.Daria.Config.locale?"uk"===window.Daria.Config.locale:window.Daria.Config.locale&&"uk"===window.Daria.Config.locale)?e().decl(n(1937))("tooltip__close"):function(){}:e().decl(n(1931))("tooltip__close")}(),l=i(u);t.default=(0,a.decl)({block:"tooltip",elem:"close",willInit:function(){this.__base.apply(this,arguments),this._onClick=this._onClick.bind(this)},attrs:function(){return r({},this.__base.apply(this,arguments),{onClick:this._onClick,title:(0,l.default)("close")})},_onClick:function(e){this.props.onClick&&this.props.onClick(e)}},{propTypes:{onClick:s.default.func}})},function(e,t){e.exports=function(){function e(n,i,r){if(1===arguments.length)return function(t,i){return e(n,t,i)};if(!t)throw Error("i18n need to be filled with data");var o=t[n]&&t[n][i];return void 0===o?n+":"+i:"string"==typeof o?o:o.call(e,r,e)}var t;return e.decl=function(e){if(!t)return t=e,this;for(var n in e){var i=t[n]||(t[n]={}),r=e[n];for(var o in r)i[o]=r[o]}return this},e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.declMod)({view:"default"},{block:"tooltip",mods:function(e){var t=e.tone,n=e.pulsingTail;return i({},this.__base.apply(this,arguments),{tone:t,"pulsing-tail":(0,s.bool2string)(n)})}},{propTypes:{tone:o.default.string,pulsingTail:o.default.bool},defaultProps:{tone:"default",size:"n"}})},function(e,t){function n(e){return i.test(e)}var i=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=n},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return h});var s,a,u,l,c,d=n(234),f=n(96),p=(n.n(f),n(1990)),h=(s=function e(){var t=this;i(this,e),r(this,"status",a,this),r(this,"isVisible",u,this),this._autoCloseTimeoutId=null,this._deferredShowTimeout=150,this._deferredShowTimeoutId=null,this._onPageChange=function(){!1===t.status.hideOnTimeout&&t.hide()},this.sendMetric=function(){for(var e,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];(e=Jane).c.apply(e,["Нотификации","Функциональные нотификации",t.status.name].concat(i))},this.onClick=function(){t.status.hideOnClick&&t.hide(t.status.name)},this.onClose=function(){t.hide(t.status.name,!0),t.sendMetric("Клик","Закрыть")},this.startDeferredShow=function(e){t._deferredShowTimeoutId=setTimeout(function(){t._show(e)},t._deferredShowTimeout)},this.stopDeferredShow=function(){clearTimeout(t._deferredShowTimeoutId)},this.startAutoClose=function(){var e=t.status,n=e.hideOnTimeout,i=e.name,r=e.timeout;n&&(t._autoCloseTimeoutId=setTimeout(function(){t.hide(i)},r))},this.stopAutoClose=function(){clearTimeout(t._autoCloseTimeoutId)},this.show=function(e){e.shouldSkipAnimation?t._show(e):(t.hide(t.status.name),t.stopDeferredShow(),t.startDeferredShow(e))},r(this,"_show",l,this),r(this,"hide",c,this),ns.events.on("ns-page-before-changed",this._onPageChange)},a=o(s.prototype,"status",[d.observable],{enumerable:!0,initializer:function(){return p.a.defaults}}),u=o(s.prototype,"isVisible",[d.observable],{enumerable:!0,initializer:function(){return!1}}),l=o(s.prototype,"_show",[d.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.status=new p.a(t),e.isVisible=!0,e.stopAutoClose(),e.startAutoClose(),e.sendMetric("Показ")}}}),c=o(s.prototype,"hide",[d.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&e.status.name!==t||(e.stopAutoClose(),n&&Object(f.isFunction)(e.status.onClose)&&e.status.onClose(),e.isVisible=!1)}}}),s)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){Daria.initializeMetrika=function(e,t,n,i){if(!e)throw new Error("initializeMetrika: parameter `metrikaBase` is required");if(!t)throw new Error("initializeMetrika: parameter `objectToDecorate` is required");if(!_.isObject(n))throw new Error("initializeMetrika: parameter `metrikaConfig` is required and must be object");t._isMetrikaInitialized||(i=i||function(e,t){Jane.c([].concat(e,t))},_.forEach(n,function(n,r){n=[].concat(n);var o=t[r];if(!_.isFunction(o))throw new ReferenceError("initializeMetrika: no method `"+r+"` found or it's not a function");var s=_.partial(i,e);"@once"===_.first(n)&&(n=_.rest(n),s=_.once(s)),t[r]=_.wrap(o,function(e){return s(n),e.apply(t,_.rest(arguments))})}),t._isMetrikaInitialized=!0)}},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){for(var e=Math.floor(5*Math.random())+5,t="";e--;)t+=String.fromCharCode(97+Math.floor(26*Math.random()));return t}var o={};e.exports=Daria.getDirectBlockLayoutInfo=function(e){if(!o[e]){var t=r();ns.View.define(t,{models:{"app-state":{"ns-model-changed":!1,"ns-model-changed.directModuleLoaded":"forceUpdate"}},yateModule:"mail"});var n=r()+"@",s=i({},t,i({},n,function(){return ns.Model.get("app-state").get(".directModuleLoaded")?Daria.getDirectViewLayout(e):"messages-direct"===e?{"messages-direct-line-placeholder":{}}:{}}));if("messages-direct"===e){var a=r(),u=a+"@";o[e]={id:a,name:u,layout:i({},u,function(){return Daria.is3pane()?{}:s})}}else o[e]={name:t,layout:s}}return o[e]}},function(e,t){Daria.Abook={},Daria.Abook.formatContactInfo=function(e,t,n){if(n=n||{},!e)return{};var i=e.cid,r=e.name,o=$.map(e.email,function(e){return e.value});if(t.joinName&&(r=r.full||""),t.onlyFirstEmail){var s=n.email?$.inArray(n.email,o):0;o=o[s>-1?s:0]}1===o.length&&(o=o[0]);var a={cid:i,name:r,email:o};return t.shared&&(a.ya_directory=e.ya_directory),a}},function(e,t){Daria.formatContacts=function(e,t){var n;t&&(n=ns.Model.get("account-information").getEmails());var i=[];$.isArray(e)||(e=[e]);for(var r=0,o=e.length;r<o;r++){var s=e[r],a=s.email,u=s.name;!a||t&&$.inArray(a,n)>-1||"no_address"!==u&&"(адрес не указан)"!==u&&i.push(Jane.FormValidation.obj2contact(s))}return i.join(", ")},Daria.showDoubleSizedContacts=function(){return Daria.Config.pddDomain||Daria.Config.workspace},Daria.getAccountAgeInDays=function(){var e=ns.Model.get("account-information");return(Daria.now()-e.getData().reg_date)/864e5},Daria.isNewAccount=function(){return Daria.getAccountAgeInDays()<=3},Daria.uidEnds=function(e){if($.isArray(e)&&e.length){var t=String(e[0]).length,n=parseInt(Daria.uid.slice(-t),10);return $.inArray(n,e)>-1}return!1},Daria.loadPromoModule=function(e){Jane.Services.runModules(["promo.css","promo.js","promo.yate"],e)},Daria.allowZenInMessages=function(){if(Daria.hasExperiment("82627"))return!1;var e=["ru"].indexOf(Daria.Config.locale)>-1,t=Daria.urlParams.theme||ns.Model.get("settings").get(".color_scheme"),n="colorful"===t,i=Daria.isNewTheme(),r=!Daria.IS_CORP&&!Daria.Config.workspace&&!Daria.Config["pdd-domain"];return Daria.is2pane()&&r&&e&&(n||i)},Daria.isNewTheme=function(e){var t=ns.Model.get("settings");e=e||Daria.urlParams.theme||t.get(".color_scheme");var n=Daria.hasFeature("new-themes");return(t.get(".new-themes-force")||n)&&Daria.Config["new-themes"].indexOf(e)>-1},Daria.canShowYandexPlusButton=function(){var e=ns.Model.get("settings").isCompactHeaderMode(),t=ns.Model.get("settings").getSetting("disable_promo");return!e&&!t&&Daria.hasFeature("yandex-plus")},Daria.isComposeButtonMoved=function(){return Daria.hasFeature("moved-compose-button")&&Daria.isNewTheme()},Daria.isLoadingBarEnabled=function(){return Daria.hasFeature("loading-bar")&&Daria.isComposeButtonMoved()}},function(e,t,n){var i={"message.ogg":n(1073),"message.mp3":n(1074),"message.wav":n(1075)};Daria.Sound={preload:function(e){this._getPlayer(e)},play:function(e){this._getPlayer(e)()},_cache:{},_getPlayer:function(e){if(!this._cache[e])if("src"in document.createElement("audio")){var t=this._createAudioEl(e);this._cache[e]=function(){t.play()}}else if("src"in document.createElement("bgsound")){var n=document.createElement("bgsound");document.getElementsByTagName("head")[0].appendChild(n),this._cache[e]=function(){n.src=i[e+".mp3"]}}else this._cache[e]=function(){};return this._cache[e]},_createAudioEl:function(e){var t=document.createElement("div");t.innerHTML='<audio preload="auto"><source src="'+i[e+".ogg"]+'" type="audio/ogg"></source><source src="'+i[e+".mp3"]+'" type="audio/mpeg"></source><source src="'+i[e+".wav"]+'" type="audio/wav"></source></audio>';var n=t.firstChild;return document.body.appendChild(n),n}}},function(e,t,n){e.exports=n.p+"_/dc22b778f507cf99af5f1fbaa09283ad-message.ogg"},function(e,t,n){e.exports=n.p+"_/c8904f7129944be785562682585d90dd-message.mp3"},function(e,t,n){e.exports=n.p+"_/a58459d090abe810c59cc0c21af602b9-message.wav"},function(e,t){!function(e){e.emailAutocompleterOpts={tpl:'<div class="b-mail-suggest b-mail-suggest_contacts"><div class="b-grid js-sections"></div></div>',activeClass:"b-grid-item_selected",width:"20em",multiple:!0,minChars:0,minClickCount:0,excludeSelected:!0,filterItem:function(e){var t,n=this.currentValue||this.prevVal;return e.data.title?(t=[].concat(e.data.contacts),t=$.grep(t,function(e){return-1===n.indexOf(e.email)}),t.length):e.data.email?-1===n.indexOf(e.data.email):void 0},scroll:!0,scrollElem:".b-grid",item:".b-grid-item",sections:[{url:Daria.api.models+"?_model.0=abook-suggest",fakeRequestParams:!0,dataType:"json",param:"q",withCkey:!0,extraParams:{glimit:5,climit:35,useAbook:"on"},contextExtraParams:function(){var e,t=Daria.vCompose,n={};return t&&"compose"===ns.page.current.page?(e=$.map(["To","Cc","Bcc"],function(e){var n=t["get"+e]();if(n)return n.replace(/\s*/g,"").split(",")}),e=e.join(","),e=$.map(Jane.FormValidation.splitContacts(e),function(e){return e.email}),e=e.join(","),e&&(n.to=e),n):n},beforeRequest:function(e){return e.length>=1},parse:function(e,t){function n(e,n,i,o){for(var s=0,a=e.length;s<a&&s!==o;s+=1){var u=e[s];u&&(i[i.length]={data:u,$item:$(n.call(r,u,t))})}}e=jpath(e,".models[0].data")[0]||{};var i=[],r=this;return e.contacts&&e.contacts.length&&n(e.contacts,r.formatContact,i,r.extraParams.climit),e.groups&&e.groups.length&&n(e.groups,r.formatGroup,i,r.extraParams.glimit),i},groupTpl:'<div class="b-grid-item"><span class="b-grid-item__content"><span class="b-grid-item__content__i"><span class="b-grid-item__content__group">'+i18n("%Search_Suggest_group")+'</span>&#160;{title}</span></span><span class="b-grid-item__content"><span class="b-grid-item__content__i"><span class="b-grid-item__misc">{emails}</span></span></span></div>',formatContact:function(e,t){var n='<div class="b-grid-item"><span class="b-grid-item__content"><span class="b-grid-item__content__i">'+_.escape(e.name||e.email)+'</span></span><span class="b-grid-item__content"><span class="b-grid-item__content__i"><span class="b-grid-item__misc">'+(e.name&&e.email?_.escape(e.email):" ")+'</span></span></span><span class="b-grid-item__right"><span class="b-userpic b-userpic_small'+(e.cid?" cid-"+e.cid:"")+'">'+(e.ref&&e.email&&e.id>-1&&!e.popdom?Daria.Recipients.add({name:e.name,email:e.email,href:!1,size:28}):"")+"</span></span>";return n+="</div>",Daria.Autocompleter.utils.highlight(n,t)},formatGroup:function(e,t){for(var n=[],i=0,r=e.contacts.length;i<r;i++)n.push(e.contacts[i].email);return Daria.Autocompleter.utils.highlight(Daria.supplant(this.groupTpl,{title:e.title,emails:n.join(", ")}),t)},formatResult:function(e){function t(e){return e.name?'"'+e.name+'" <'+e.email+">":e.email}var n;if(e.contacts){for(var i=[],r=0,o=e.contacts.length;r<o;r++)i.push(t(e.contacts[r]));n=i.join(", ")}else n=t(e);return n}}]};var t=e.emailAutocompleterOpts.sections[0];e.emailAutocompleterOpts.sections.push($.extend({},t,{url:Daria.api.models+"?_model.0=abook-suggest",fakeRequestParams:!0,extraParams:{popular:!0,climit:10,useAbook:"on"},parse:function(e,n){var i=jpath(e,".models[0].data")[0]||{};return i.contact&&!i.contacts&&(i.contacts=i.contact),t.parse.call(this,e,n)},formatContact:function(e,n){return e.name=e.name&&e.name.full,t.formatContact.call(this,e,n)},beforeRequest:function(e,t){if(e)return!1;if("compose"!==ns.page.current.page)return!1;if(t&&t.keyPressed)return!1;var n=ns.page.current.params,i=ns.Model.get("folders").getFolderBySymbol("template"),r=i&&i.fid;return!(Daria.composeParams&&"template"===Daria.composeParams.save_symbol||"template"===n.save_symbol||n.ids&&ns.Model.get("message",{ids:n.ids}).inFolder(r))},onshow:function(){Jane.c(["popular_suggest","Показы саджеста популярных контактов"])},onresult:function(e){Daria.composeParams=Daria.composeParams||{},Daria.composeParams["popular-suggest-general"]||(Daria.composeParams["popular-suggest-general"]=[]),Daria.composeParams["popular-suggest-general"].push(e.email),Jane.c(["popular_suggest","Клики в саджест популярных контактов"]);var t=Jane.watcher.get("autocompleter.popularContacts")||[],n=this,i=function e(){ns.events.off("ns-page-before-load",e),n.binded=!1,Jane.watcher.set("autocompleter.popularContacts",[])};t.push(e.email),Jane.watcher.set("autocompleter.popularContacts",t,{silent:!0}),this.binded||(this.binded=!0,ns.events.on("ns-page-before-load",i))}})),e.getEmailAutocompleter=function(){var t=new e(e.emailAutocompleterOpts),n=t.onChange;return t.onChange=function(){var e=this.$input.val();return this.keyPressed&&!e?void this.hide():n.apply(this,arguments)},t},e.getContact=function(){return e.__contactInstance||(e.__contactInstance=e.getEmailAutocompleter()),e.__contactInstance},e.getContactEmail=function(){return e.__contactEmailInstance||(e.__contactEmailInstance=function(){var t=$.extend(!0,{},e.emailAutocompleterOpts,{multiple:!1,filterItem:null});t.sections=$.each(t.sections,function(e,t){$.extend(t,{formatResult:function(e){return e.email||""},parse:function(e,t){e=jpath(e,".models[0].data")[0]||{};var n=[],i=this;return e.contacts&&e.contacts.length&&function(e,n,r,o){for(var s=0,a=e.length;s<a&&s!==o;s+=1){var u=e[s];u&&(r[r.length]={data:u,$item:$(n.call(i,u,t))})}}(e.contacts,i.formatContact,n,i.extraParams.climit),n}})});var n=new e(t),i=n.onChange;return n.onChange=function(){var e=this.$input.val();return this.keyPressed&&!e?void this.hide():i.apply(this,arguments)},n}()),e.__contactEmailInstance}}(Daria.Autocompleter)},function(e,t,n){var i=n(1078),r=n(1079),o=n(1080),s=null;Daria.Autocompleter.logSuggestInfo=function(e){e.uid=Daria.uid,e.searchid=Daria.React.getSearchId(),Jane.ErrorLog.send(e)},Daria.Autocompleter.enumerate=function(e,t,n){return e.map(function(e,i){return e[n]=i+t,e})},Daria.Autocompleter.getSearch=function(){if(!s){var e=$(Jane.tt("mail:search-autocomplete"));if(!Daria.IS_CORP){var t=new Daria.SearchFilters({onSelect:function(e){Daria.Autocompleter.logSuggestInfo({event:"suggest_type_selection",source:"suggest",filter_type:e||0}),ns.events.trigger("search.start-search",{force:!0,metrika:"suggest"})}});e.find(".js-filters").removeClass("g-hidden").find(".js-filters-placeholder").replaceWith(t.getNode())}s=new Daria.Autocompleter({tpl:e,activeClass:"b-grid-item_selected",item:".b-grid-item",blockSubmit:!1,selectFirst:!1,minChars:0,saveSelectionOnBlur:!1,position:{right:10},lastWord:!0,onrender:function(){},sections:[i(),r(),o()]})}return s}},function(e,t){e.exports=function(){return{url:Daria.api.models+"?_model.0=history-suggest",dataType:"json",param:"text",getParamFromTerm:function(e){return e},withCkey:!0,max:5,dontShow:ns.Model.get("settings").isSet("dont_save_history"),tpl:yr.run("mail",null,"search-autocomplete-suggest"),onshow:function(){Jane.c({"Поиск":'Показы "прошлые запросы"'})},onselect:function(e,t){Daria.Autocompleter.logSuggestInfo({event:"suggest_used",suggest_group:"history",user_input:this.prevVal,user_select_idx:t+1,idx:e.idx||1,suggest_text:e.text})},onfetch:function(e,t){Daria.Autocompleter.logSuggestInfo({event:"suggest_all",suggest_group:"history",user_input:this.prevVal,empty_suggest:t})},parse:function(e,t,n){e=jpath(e,".models[0].data")[0],e=Daria.Autocompleter.enumerate(e,1,"idx");var i=this.max;""===t&&(this.max=10);var r=n.parse(e,this,t);return this.max=i,r},formatItem:function(e){return yr.run("mail",e,"search-autocomplete-suggest-item")},formatResult:function(e){return e.text}}}},function(e,t){e.exports=function(){var e={},t="";return Daria.IS_CORP||(Daria.Config.pddDomain||(e.mix_groups=Daria.uidEnds([4]),e.emails=ns.Model.get("account-information").getAllUserEmails().join(",")),t="&"+$.param(e)),{url:Daria.api.models+"?_model.0=abook-suggest"+t,dataType:"json",param:"q",withCkey:!0,max:10,tpl:yr.run("mail",null,"search-autocomplete-contacts"),parse:function(e,t){e=jpath(e,".models[0].data.contacts")[0];var n=[];if(e&&e.length){e=Daria.Autocompleter.enumerate(e,1,"idx");for(var i=0,r=e.length;i<r&&i<this.max;i++){var o=e[i];o&&n.push({data:o,$item:$(this.formatItem(o,t))})}}return n},formatItem:function(e){return yr.run("mail",e,"search-autocomplete-contacts-item")},formatResult:function(e){return e.email},onshow:function(){Jane.c("Поиск",'Показы "переписка с адресами"')},onselect:function(t,n){Daria.Autocompleter.logSuggestInfo({event:"suggest_used",suggest_group:"address",user_input:this.prevVal,user_select_idx:n+1,idx:t.idx||1,suggest_text:t.email,mix_groups:e.mix_groups||!0})},onfetch:function(t,n){Daria.Autocompleter.logSuggestInfo({event:"suggest_all",suggest_group:"address",user_input:this.prevVal,empty_suggest:n,mix_groups:e.mix_groups||!0})}}}},function(e,t){var n="//clck.yandex.ru/redir/dtype=stred/pid=2/cid=71675/*"+Daria.Config["www-url"]+"/yandsearch?text=";e.exports=function(){return{isStatic:!0,tpl:yr.run("mail",null,"search-autocomplete-internet"),onfetch:function(e,t){Daria.Autocompleter.logSuggestInfo({event:"suggest_all",suggest_group:"internet",user_input:this.prevVal,empty_suggest:t})},formatItem:function(e){var t=Daria.Autocompleter.getSearch().$input.val();return t?(e.term=t,e.url=n+encodeURIComponent(t),yr.run("mail",e,"search-autocomplete-internet-item")):null},onresult:function(e){return Daria.Autocompleter.logSuggestInfo({event:"suggest_used",suggest_group:"internet",user_input:this.prevVal,idx:0,user_select_idx:1,suggest_text:e.term}),window.open(e.url,"_blank"),Jane.c("Поиск","Клик по найти в интернете"),!0}}}},function(e,t){!function(){function e(e){var i=e.data.obj;return Daria.MessagesPager.active=i,i.isDragging=!0,i.slider.addClass("b-mail-paginator_scrolling"),$(document).on("mousemove",{obj:i},n),$(document).on("mouseup",{obj:i},t),e.preventDefault(),!1}function t(e){var i=e.data.obj;delete Daria.MessagesPager.active,i.isDragging=!1,i.slider.removeClass("b-mail-paginator_scrolling"),$(document).off("mousemove",{obj:i},n),$(document).off("mouseup",t)}function n(e){var t=e.data.obj;if(t.isDragging){t.dragged||(t.dragged=!0);var n=Math.floor(e.pageX-t.sliderWidth/2-t.$container.offset().left);return t._setSliderPosition(n),e.preventDefault(),!1}}function i(e){var t=e.data.obj;t.scrolling||t._setSliderPositionByScroll(t.$container.scrollLeft(),!1)}function r(e){var t=$(e.currentTarget),n=ns.action.getParams(t[0]);return e.data.obj.updateScroll(n,!0),!0}ns.events.on("pageVisible.change",function(){Daria.MessagesPager.active&&t({data:{obj:Daria.MessagesPager.active}})}),Daria.MessagesPager=function(e,t,n){this._params=n||{},this.$node=$(e),this.isFloat=t,this.setPagerToDate=_.debounce(this.setPagerToDate,0),this.init()},Daria.MessagesPager.incDate=function(e,t){var n=Jane.Common.n;return e=Number(e),t=Number(t),12===t?(e++,t=1):t++,[String(e),String(n(t))]},Daria.MessagesPager.decDate=function(e,t){var n=Jane.Common.n;return e=Number(e),t=Number(t),1===t?(e--,t=12):t--,[String(e),String(n(t))]},Daria.MessagesPager.prototype={init:function(){return this.slider=this.$node.find(".js-messages-pager-slider"),this.$scrollLeft=this.$node.find(".b-link_scroll-left"),this.$scrollRight=this.$node.find(".b-link_scroll-right"),0===this.slider.size()?(this.$scrollRight.add(this.$scrollLeft).addClass("b-link_disabled"),void this._showPager()):(this.$container=this.$node.find(".js-messages-pager-container"),this.scrollContainer=this.$node.find(".js-messages-pager-scroll"),this.tooltip=this.$node.find(".js-tooltip"),this.dragged=!1,this.$containerWidth=this.$container.width(),this.scrollWidth=this.scrollContainer.width(),this.sliderWidth=this.$containerWidth/this.scrollWidth*this.$containerWidth,this.dragged=!1,this.years=this.$node.find(".js-year").get().map(function(e){return{left:e.offsetLeft,year:ns.action.getParams(e).year}}),this.$containerWidth>=this.scrollWidth?(this.slider.remove(),this.$scrollLeft.remove(),this.$scrollRight.remove(),void this._showPager()):(this.minSliderX=0,this.maxSliderX=Math.floor(this.$containerWidth-this.sliderWidth),this.minScroll=0,this.maxScroll=this.scrollWidth-this.$containerWidth,this.slider.css("width",Math.ceil(this.sliderWidth)),this.isDragging=!1,this.bindEvents(),void(this.isFloat||this.updateScroll())))},_showPager:function(){this._visible||(this.$node.css("visibility","visible"),this._visible=!0)},_getItems:function(){if(!this._months){var e=this.$container.scrollLeft(),t=this._months=[];this.$node.find(".b-mail-paginator__item").each(function(){t.push($(this).position().left+e)})}return this._months},updateScroll:function(e,t){e||(e=this._params.dontUsePageParams?{}:ns.page.current.params);var n;e.datePager&&(n=e.datePager,n=n.replace(/\./g,"")),n&&this.setCurrentItem(n),this.$container&&(n?this.setPagerToDate(n,t):this._setSliderPosition(this.maxSliderX))},updateTooltip:function(e,t){if(this.years.length){for(var n=0;n<this.years.length&&this.years[n].left-t<e;)n++;n--,n<0&&(n=0),this.tooltipYear!==this.years[n].year&&(this.tooltipYear=this.years[n].year,this.tooltip.html(this.tooltipYear))}},resetCurrentItem:function(e){this.$node.find(".b-mail-paginator__item_current, .b-mail-paginator__link_current").removeClass("b-mail-paginator__item_current b-mail-paginator__link_current");var t=this.scrollWidth-this.$containerWidth;this._setSliderPositionByScroll(t,e)},setCurrentItem:function(e){var t=this.$node.find(".item-"+e);0!==t.size()&&(t.closest(".js-messages-pager-container").find(".b-mail-paginator__item_current").removeClass("b-mail-paginator__item_current").find(".b-mail-paginator__link_current").removeClass("b-mail-paginator__link_current"),t.closest(".b-mail-paginator__item").addClass("b-mail-paginator__item_current").find(".b-mail-paginator__link").addClass("b-mail-paginator__link_current"))},setPagerToDate:function(e,t){var n=this.$node.find(".item-"+e);if(0!==n.size()){var i=n.position().left+this.$container.scrollLeft(),r=i-this.$containerWidth/2+25;this._setSliderPositionByScroll(r,t)}},_setSliderPosition:function(e,t,n){var i=this;e=Math.floor(e),e>this.maxSliderX&&(e=this.maxSliderX),e<this.minSliderX&&(e=this.minSliderX),t=t||Math.floor(e/this.maxSliderX*(this.scrollWidth-this.$containerWidth));var r=e+this.sliderWidth/2;n&&document.documentMode&&document.documentMode<9&&(n=!1);var o=e>this.minSliderX,s=e<this.maxSliderX,a=s&&r+54<this.$containerWidth,u=o&&r-54>0;n?this.slider.stop().animate({left:e},"fast"):this.slider.stop().css({left:e}),a!==this.showRightArrow&&(this.showRightArrow=a,this.slider.toggleClass("b-mail-paginator__slider_arrow_right",a)),u!==this.showLeftArrow&&(this.showLeftArrow=u,this.slider.toggleClass("b-mail-paginator__slider_arrow_left",u)),n?(this.scrolling=!0,this.$container.stop().animate({scrollLeft:t},"fast",function(){i.scrolling=!1})):this.$container.stop().scrollLeft(t),s!==this.allowRightArrow&&(this.$scrollRight.toggleClass("b-link_disabled",!s),this.allowRightArrow=s),o!==this.allowLeftArrow&&(this.$scrollLeft.toggleClass("b-link_disabled",!o),this.allowLeftArrow=o),this.updateTooltip(e+this.sliderWidth/2,t),this._showPager()},_setSliderPositionByScroll:function(e,t){e<this.minScroll?e=this.minScroll:e>this.maxScroll&&(e=this.maxScroll);var n=e/(this.scrollWidth-this.$containerWidth)*(this.$containerWidth-this.sliderWidth);this._setSliderPosition(n,e,t)},_adjustSliderPosition:function(e){var t=this.$container.scrollLeft();e>0&&(t+=this.$containerWidth);for(var n,i=this._getItems(),r=0,o=i.length;r<o;r++)if(i[r]>=t){n=e>0?i[r-1]:i[r]-this.$containerWidth;break}n||(n=this.maxScroll),this._setSliderPositionByScroll(n,!0)},_moveScroll:function(e){var t=e.currentTarget.className;return!(t.indexOf("b-link_disabled")>-1)&&(this._adjustSliderPosition(t.indexOf("left")>-1?-1:1),!1)},bindEvents:function(){this.slider.on("mousedown",{obj:this},e),this.$container.on("scroll",{obj:this},i),this.isFloat&&this.$container.find(".b-mail-paginator__link").on("click",{obj:this},r),this.$scrollLeft.add(this.$scrollRight).on("click",this._moveScroll.bind(this))},unbindEvents:function(){this.slider.off("mousedown",e),this.isFloat&&this.$container&&this.$container.find(".b-mail-paginator__link").off("click",r),this.$container&&this.$container.off("scroll"),this.$scrollLeft&&this.$scrollLeft.add(this.$scrollRight).off("click")}}}()},function(e,t){!function(e,t){function n(e,t,n){if(t){var i=ns.Model.get("labels").getLabelByName(n).lid;ns.Model.get("message",{ids:t}).hasLabel(i)&&(e=i18n("%Drag_Снять_метку",n))}return e}var i=t.DragNDrop,r=function(){};r.prototype=new i.EmptyDrag,r.prototype.init=function(t,n){return this.is_active=!1,this.is_draggable=!0,this.area=i.getDragMessageArea(),this.draggable=n,this.label=this.getLabelText(n),this.evt=t,this.message_row=this.getMessageRow(t.target),this._messagesNode=e(".js-messages-list").get(0),this},r.prototype.onDragStart=function(t){this.is_active=!0,this.area.show(),this.area.alignByEvent(t);var n=e(this.evt.target),i="is-draggable-labels";return n.parents(".js-labels").length&&(i+=" is-draggable-labels-from-labels"),this.standardMessage(),e("html").addClass(i),this},r.prototype.standardMessage=function(){this.area.setText(i18n("%Drag_Укажите_письмо_для_пометки",this.label))},r.prototype.onDrag=function(e){this.area.alignByEvent(e)},r.prototype.getTargetData=function(t){var n=e(t),i=this,r=[{name:"message_many",test:function(){return"messages"===ns.page.current.page&&(!!e.contains(i._messagesNode,t)&&e(i.getMessageRow(t)))}},{name:"message_one",test:function(){return!!n.is(".js-message-subject-drop")&&n}},{name:"unlabel",test:function(){return!(!(n.is(".js-toolbar-item-delete")||n.is(".js-labels")||n.is(".js-labels *"))||0!==e(i.evt.target).parents(".js-labels").length)&&n}}];return this.testTarget(r,n)},r.prototype.onDragEnter=function(t,i){var r;if("unlabel"===i.name)r=i18n("%Drag_Снять_метку",this.label);else{var o=e(i.target).closest(".js-message").data("id");r=n(i18n("%Drag_Пометить_письмо",this.label),o,this.label)}this.area.setText(r),this.hilite(i.target),this.area.evaluateDimensions()},r.prototype.onDragLeave=function(e,t){this.standardMessage(),this.nohilite(t.target)},r.prototype.onDragEnd=function(){this.area.alignByEvent(this.evt,{animate:!0}),e("html").removeClass("is-draggable-labels is-draggable-labels-from-labels")},r.prototype.getMessageRow=function(t){return e(t).parents(".js-message:eq(0)").addBack().filter(".js-message:eq(0)")[0]},r.prototype.onDrop=function(t,n){this.area.hide();var i="label";"unlabel"===n.name&&(i="unlabel");var r;switch(i){case"label":r=n.target;break;case"unlabel":r=e(this.message_row?this.message_row:this.draggable)}if(r&&n.target[0]!==this.message_row){var o=r.closest(".js-message").data("id"),s={};if(o){var a=ns.Model.get("message",{ids:o}),u=ns.Model.get("messages-checked",{mid:o});u.check(a,!0),s={mMessagesChecked:u}}var l={operation:i,params:_.extend(s,ns.action.getParams(this.draggable))};r.trigger("dragndrop.drop",l)}this.nohilite(n.target),e("html").removeClass("is-draggable-labels is-draggable-labels-from-labels")},Daria.DragLabel=r;var o=function(){};o.prototype=new i.EmptyDrag,o.prototype.init=function(t,n){this.is_active=!1,this.is_draggable=!0,this.area=i.getDragMessageArea(),this.draggable=n;var r=n.find(".b-messages__message__checkbox__input");return this.checked=r.prop("checked"),this.evt=t,n.is(".js-message-subject-drop")&&(this.type="subject"),this.TARGET_BLOCK_LABELS=e(".ns-view-labels")[0],this},o.prototype.getTargetData=function(t){var n=e(t),i=this,r=function(e,t){if(t&&this.mMessagesChecked.isFolderSelected())return!1;var i=n.closest(e);return!!i.length&&i},o=function(e,t){return r.bind(i,e,t)},s=[{name:"mark",test:o(".js-toolbar-item-mark-as-read")},{name:"mark",test:o(".js-drop-area-read")},{name:"unmark",test:o(".js-toolbar-item-mark-as-unread")},{name:"unmark",test:o(".js-drop-area-unread")},{name:"remove",test:o(".js-toolbar-item-delete")},{name:"remove",test:o(".js-drop-area-delete")},{name:"reply-all",test:o(".js-toolbar-item-reply-all",!0)},{name:"reply",test:o(".js-toolbar-item-reply",!0)},{name:"reply",test:o(".js-reply",!0)},{name:"forward",test:o(".js-toolbar-item-forward")},{name:"tospam",test:o(".js-toolbar-item-spam")},{name:"tospam",test:o(".js-drop-area-spam")},{name:"notspam",test:o(".js-toolbar-item-not-spam")},{name:"messages.deselect",test:o(".js-deselect")},{name:"move",test:function(){var e=n.parents(".js-valid-drag-target:eq(0)");if(e.length)return e}},{name:"label",test:function(){if(ns.Model.get("folders").isFolder(ns.page.current.params.current_folder,["trash","spam"]))return!1;if(!n.hasClass("js-label-no-dnd")&&r(".js-labels-item")&&e.contains(i.TARGET_BLOCK_LABELS,t)){if(!n.attr("data-title")){var o=n.closest("[data-title]");n=!!o.length&&o}return n}return!1}}],a=this.testTarget(s,n);return a.original_target=n,a},o.prototype.hiliteAll=function(){var t="mail-Page_draggingMessage";ns.Model.get("folders").isFolder(ns.page.current.params.current_folder,["trash","spam"])&&(t=t.concat(" mail-Page_draggingSpamMessage")),this.mMessagesChecked.isFolderSelected()&&(t+=" mail-Page_draggingMessageAll"),e("html").addClass(t)},o.prototype.nohiliteAll=function(){e("html").removeClass("mail-Page_draggingMessage mail-Page_draggingSpamMessage mail-Page_DraggingMessageAll")},o.prototype.check=function(t,n){if("messages"===ns.page.current.page){var i=e(n.target).closest(".js-cbt-item");if(i.length||t){if(i.length){var r=i.attr("data-id"),o=ns.Model.get("message",{ids:r});this.mMessagesChecked.check(o,t)}}else this.mMessagesChecked.resetChecked()}},o.prototype.showHiddenFolders=function(){var e=ns.Model.get("settings");e.isSet("hide_empty_folders")&&!this._showingHiddenFolders&&(this._showingHiddenFolders=!0,e.setIfChanged(".hide_empty_folders",!1))},o.prototype.hideHiddenFolders=function(){if(this._showingHiddenFolders){var e=ns.Model.get("settings");this._showingHiddenFolders=!1,e.setIfChanged(".hide_empty_folders",!0)}},o.prototype.onDragStart=function(e){if(1===e.which&&2!==e.buttons){this.showHiddenFolders(),this.mMessagesChecked=ns.Model.get("messages-checked",ns.page.current.params),this.check(!0,this.evt);var t=1;this.mMessagesChecked.touch({silent:!0}),"messages"===ns.page.current.page&&0===(t=this.mMessagesChecked.getCount())&&(t=1),this.count=t,this.is_active=!0,this.area.show(),this.area.alignByEvent(e),this.hiliteAll(),t<5?this.area.$control.addClass("b-drag-helper_few"):1!==t&&this.area.$control.addClass("b-drag-helper_many"),this.standardMessage(),ns.events.trigger("daria:dragndrop:message:start",this.mMessagesChecked)}},o.prototype.standardMessage=function(){this.area.setText(i18n("%Drag_Куда_перенести_письма",this.count)),this.area.evaluateDimensions()},o.prototype.onDrag=function(e){ns.events.trigger("daria:dragndrop:message:update",e),this.area.alignByEvent(e)},o.prototype.onDragEnd=function(e){this.hideHiddenFolders(),this.area.alignByEvent(this.evt,{animate:!0}),this.mMessagesChecked.isOnlyMessageChecked()&&this.check(this.checked,e),this.nohiliteAll(),ns.events.trigger("daria:dragndrop:message:dragend")},o.prototype.onDragEnter=function(t,i){var r=this.count,o={remove:i18n("%Drag_Удалить",r),mark:i18n("%Drag_Пометить_прочитанным",r),unmark:i18n("%Drag_Пометить_непрочитанным",r),tospam:i18n("%Drag_Пометить_как_спам",r),notspam:i18n("%Drag_Пометить_как_неспам",r),"reply-all":i18n("%Drag_Ответить",r),reply:i18n("%Drag_Ответить",r),forward:i18n("%Drag_Переслать",r),"messages.deselect":i18n("%Drag_Снять_выделение",r)},s="",a="";switch(this.hilite(i.target),i.name){case"move":var u=i.original_target;a=u.data("foldername")||u.text(),s=i18n("%Drag_Перенести_в_папку",r,a),this.lazyAction(function(){var t=e(u).closest(".js-valid-drag-target").attr("data-params");t=ns.parseQuery(t),ns.Model.get("folder",{fid:t.fid}).switchFolded(!1)},300);break;case"label":a=this.getLabelText(i.target[0]);var l=this.draggable,c=l.data("id");s=n(i18n("%Drag_Пометить_меткой",r,a),c,a);break;default:i.name in o&&(s=o[i.name])}this.area.setText(s),this.area.evaluateDimensions()},o.prototype.lazyAction=function(e,t){this.lazyActionTimeout&&(clearTimeout(this.lazyActionTimeout),this.lazyActionTimeout=null),e&&(this.lazyActionTimeout=setTimeout(e,t))},o.prototype.onDragLeave=function(e,t){this.lazyAction(!1),this.standardMessage(),this.nohilite(t.target)},o.prototype.onDrop=function(e,t){this.lazyAction(!1),this.hideHiddenFolders();var n={operation:t.name,params:ns.action.getParams(t.target[0])},i=this.draggable;Daria.is3pane()&&"subject"===this.type&&t.target.closest(".js-inplace-message-toolbar").length&&(i=t.target),i.trigger("dragndrop.drop",n),this.area.hide(),this.nohilite(t.target),this.nohiliteAll(),ns.events.trigger("daria:dragndrop:message:dragend")},i.add([{test:function(t,n){var i=ns.page.current;if(ns.Model.get("folders").isFolder(i.params.current_folder,["trash","spam"]))return!1;var r=n.closest(".js-labels-item");if(!r.length||r.hasClass("js-label-no-dnd"))return!1;var o=r[0];if("messages"===i.page)return o;if("message"===i.page){var s=ns.Model.get("message",i.params);if(!s.inFolderBySymbol("spam")&&!s.inFolderBySymbol("trash")&&e(".ns-view-labels").find(o).length)return o}return!1},result:function(e,t){return(new r).init(e,t)}},{test:function(e,t){if(t.is(".js-invalid-drag-target"))return!1;var n=t.closest(".js-message-subject-drop");if(n.length)return n;var i=t.closest(".js-message");return 0!==i.length&&0===t.closest(".js-cbt-item-target").length&&i},result:function(e,t){return(new o).init(e,t)}}]),Daria.DragMessage=o}(jQuery,Jane)},function(e,t){!function(){var e=function(e){this.$el=$(".b-drag-helper_folder"),this.$source=$(e);var n=t.getFidByElement(e),i=ns.Model.get("folders").getFolderById(n);return this.folderName=i&&i.name||"",this.$el&&0!==this.$el.length||(this.$el=$('<div class="b-drag-helper_folder"><div class="b-drag-helper_folder__content"></div></div>').appendTo($("body"))),this.$el.css({opacity:1}),this};e.prototype.ret=function(){var e=this.$source.offset();this.$el.animate({left:e.left,top:e.top,opacity:0},$.proxy(function(){this.hide()},this))},e.prototype.move=function(e){var t=document.documentElement,n=document.body,i=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t.clientLeft||0),r=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t.clientTop||0);return this.$el.offset({top:r+5,left:i+5}),this},e.prototype.show=function(){return this.$el.show(),this},e.prototype.hide=function(){return this.$el.hide(),this},e.prototype.setDefaultText=function(){return this.$el.find(".b-drag-helper_folder__content").text(i18n("%Drag_Перенести_папку",this.folderName)),this},e.prototype.setText=function(e){return this.$el.find(".b-drag-helper_folder__content").text(e),this};var t=function(){};t.getFidByElement=function(e){var t=$(e);if(!t.length)return!1;var n=Daria.parseQuery(t.data("params"));switch(ns.page.current.page){case"setup":return n.id;default:return n.fid}},t.getOffsetY=function(e){var t=document.documentElement,n=document.body;return e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t.clientTop||0)},t.isOffsetTop=function(e,n){var i=t.getOffsetY(e),r=i-n.offset().top;return r>=-1&&r<=5},t.isOffsetBottom=function(e,n){var i=t.getOffsetY(e),r=n.height()+n.offset().top-i;return r>=0&&r<=5},t.isOffsetIn=function(e,n){var i=t.getOffsetY(e),r=n.offset().top,o=i-r,s=n.height()+r-i;return o>5&&s>5},t.prototype=new Jane.DragNDrop.EmptyDrag,t.prototype.CLASS_MOVEIN="mail-FolderList-Item_movein",t.prototype.CLASS_MOVEBT="mail-FolderList-Item_movebt",t.prototype.CLASS_MOVETOP="mail-FolderList-Item_movetop",t.prototype.CLASS_DROPHOVER="mail-FolderList-Item_drophover",t.prototype.init=function(e,t){this.is_active=!1,this.is_draggable=!0,this.evt=e,this.draggable=t;var n,i=ns.Model.get("folders").getMoveFoldersFid(this.getDragFid());switch(ns.page.current.page){case"setup":n=".js-setup-folders-list";break;default:n=".js-folders"}return n&&(this.$targets=$(".js-folders-item",n).filter(".fid-"+i.join(",.fid-"))),this._onPageAfterLoad=function(){this.$targets=$(".js-folders-item",n).filter(".fid-"+i.join(",.fid-"))}.bind(this),ns.events.on("ns-page-after-load",this._onPageAfterLoad),this},t.prototype.lazyAction=function(e,t){this.lazyActionTimeout&&(clearTimeout(this.lazyActionTimeout),this.lazyActionTimeout=null),e&&(this.lazyActionTimeout=setTimeout(e,t))},t.prototype.getTargetData=function(e){var t=this,n=$(e),i=[{name:"folder",test:function(e){var n=e.closest(".js-folders-item");return!(!n.length||!t.$targets.filter(n[0]).length)&&n}}];return this.testTarget(i,n)},t.prototype.onDragStart=function(t){return this.is_active=!0,ns.events.trigger("dragndrop.dragstart"),this.hiliteAll(),this.area=new e(this.draggable).setDefaultText().show().move(t),Jane.c("Драгндроп папок","Перенос папки"),this},t.prototype.onDrag=function(e,n){this.area.move(e);var i=n&&n.target;if(i){var r=t.getFidByElement(i),o=ns.Model.get("folders").getFolderById(r),s=o&&o.name;t.isOffsetTop(e,i)?"inbox"!==o.symbol&&(this.area.setText(i18n("%Drag_Move_Folder_Before",s)),i.removeClass(this.CLASS_MOVEIN+" "+this.CLASS_MOVEBT).addClass(this.CLASS_MOVETOP)):t.isOffsetBottom(e,i)?(this.area.setText(i18n("%Drag_Move_Folder_Prev",s)),i.removeClass(this.CLASS_MOVEIN+" "+this.CLASS_MOVETOP).addClass(this.CLASS_MOVEBT)):t.isOffsetIn(e,i)?(this.area.setText(i18n("%Drag_Перенести_папку_в_папку",s)),i.removeClass(this.CLASS_MOVEBT+" "+this.CLASS_MOVETOP).addClass(this.CLASS_MOVEIN)):(this.area.setDefaultText(),i.removeClass(this.CLASS_MOVEBT+" "+this.CLASS_MOVETOP+" "+this.CLASS_MOVEIN))}},t.prototype.onDragEnd=function(e){this.nohiliteAll(),this.area.ret(e),ns.events.off("ns-page-after-load",this._onPageAfterLoad)},t.prototype.onDragEnter=function(e,n){var i=n.target,r=ns.Model.get("folders"),o=t.getFidByElement(i),s=r.getFolderById(o);this.area.setText(i18n("%Drag_Перенести_папку_в_папку",s&&s.name)),ns.events.trigger("dragndrop.dragenter",_.extend(e,{currentTarget:i[0],fid:o}))},t.prototype.onDragLeave=function(e,t){var n=t.target;this.area.setDefaultText(),this.lazyAction(!1),this.nohilite(n),n.removeClass(this.CLASS_MOVEIN+" "+this.CLASS_MOVETOP+" "+this.CLASS_MOVEBT)},t.prototype.onDrop=function(e,n){ns.events.off("ns-page-after-load",this._onPageAfterLoad),ns.events.trigger("dragndrop.drop"),this.lazyAction(!1),this.area.hide(),this.nohilite(n.target),this.nohiliteAll();var i,r=this.getDragFid(),o=n.target,s=t.getFidByElement(o),a=ns.Model.get("folders").getFolderById(s);t.isOffsetTop(e,o)?i="inbox"===a.symbol?"putin":"putbefore":t.isOffsetBottom(e,o)?i="putnext":t.isOffsetIn(e,o)&&(i="putin"),o.removeClass(this.CLASS_MOVEBT+" "+this.CLASS_MOVETOP+" "+this.CLASS_MOVEIN),i&&ns.events.trigger("daria:folders.move",{fid:r,overFid:s,action:i})},t.prototype.hiliteAll=function(){this.$targets.addClass(this.CLASS_DROPHOVER)},t.prototype.nohiliteAll=function(){this.$targets.removeClass(this.CLASS_DROPHOVER)},t.prototype.getDragFid=function(){return t.getFidByElement(this.draggable)},Jane.DragNDrop.add({test:function(e,n){var i=n.closest(".js-folders-item");if(!i.length)return!1;var r=t.getFidByElement(i);return!!r&&(!!ns.Model.get("folders").isDraggable(r)&&i[0])},result:function(e,n){return(new t).init(e,n)}})}()},function(e,t){ns.events.on("daria:folders.move",function(e,t){function n(e){switch(e){case"nameduplicate":return void Daria.Statusline.show({name:"folders_move_error",speed:"fast",body:i18n("%Folder_Move_Error_Nameduplicate")});case"actionerror":return void Jane.ErrorLog.send({event:"folders.move.action",status:e,action:s})}ns.events.trigger("daria:folders.move:done")}var i=ns.Model.get("folders"),r=t.fid,o=t.overFid,s=t.action,a=$.Deferred();switch(s){case"putin":i.moveIn(r,o).always(a.resolve);break;case"putnext":i.moveAfter(r,o).always(a.resolve);break;case"putbefore":i.moveBefore(r,o).always(a.resolve)}a.always(n)})},function(e,t){!function(e){var t=null,n=!1,i=[4,18,5,14,35],r=$(),o=function e(t){this._$node=$(Jane.tt("mail:search-filters-types",{"filter-id":i},["messages-types"])),this._onSelect=t.onSelect,this._$node.on("mousedown.searchfilter",".js-search-apply-filter",this._onMouseDown.bind(this)),r=r.add(this._$node),e._updateFilterTypeState()};o.prototype.getNode=function(){return this._$node},o.prototype.destroy=function(){r=r.not(this._$node),this._$node.off(".searchfilter"),this._$node.remove()},o.prototype._onMouseDown=function(e){e.preventDefault(),e.stopPropagation();var i=$(e.currentTarget),r=String(i.data("filter-id"));t=o.getFilterId()===r?null:r,n=!0,o._updateFilterTypeState(),this._onSelect(t)},o._updateFilterTypeState=function(){var e=r.find(".js-search-apply-filter");e.removeClass("g-active");var t=o.getFilterId();t&&e.filter('[data-filter-id="'+t+'"]').addClass("g-active")},o.getFilterId=function(){return t||(n||-1===i.indexOf(Number(ns.page.current.params.type))?void 0:ns.page.current.params.type)},o.setCurrentFilterIdAsUser=function(){t=o.getFilterId(),n=!0},o.resetUserSelect=function(){t=null,n=!1,o._updateFilterTypeState()},e.SearchFilters=o}(Daria)},function(e,t){Daria.composeGo=function(e,t){t=t||{},e=e||{};var n=Vow.promise(),i=ns.router.generateUrl("compose2",e);if(ns.page.block.clearByCondition(function(e){return Boolean(e.compose)}),!t.force&&Daria.vCompose&&"compose"===ns.page.current.page){var r=Daria.vCompose.checkChanges.bind(Daria.vCompose,n);r.compose=!0,ns.page.block.add(r)}return ns.page.go(i).then(n.fulfill,function(e){"block"!==e&&n.reject(e)},n),n}},function(e,t){!function(e,t){t.Geolocation={getData:function(){var e=$.Deferred();return navigator.geolocation.getCurrentPosition(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise()},checkUserRelevance:function(){return!!Modernizr.geolocation&&(!!Modernizr.mozilla&&t.uidEnds([39,94,92,44,55]))},monitoring:function(){this.checkUserRelevance()&&this.getData().done(function(t){var n=$.extend({event:"geolocation",result:"success"},t.coords);e.ErrorLog.send(n)}).fail(function(t){var n=$.extend({event:"geolocation",result:"failure"},t);e.ErrorLog.send(n)})}}}(Jane,Daria)},function(e,t){Daria.AttachDiskPopupMixin={_openDiskOnClick:function(e){e&&e.inQuickReply?Jane.c("Quick Reply","Кнопка Прикрепить",this._getMetrikaPart()):Jane.c("Кнопка Прикрепить",this._getMetrikaPart()),this._popup=ns.View.create("browse-disk",this.params),this._popup.on("close",this._openDiskOnClosePopup.bind(this)),this._popup.open(this._getPath()).then(this._openDiskOnRenderPopup,this)},_openDiskOnRenderPopup:function(){$("body").append(this._popup.node)},_openDiskOnClosePopup:function(){this._popup&&(this._popup.destroy(),this._popup=null)},_getMetrikaPart:function(){return this.METRIKA_PARTS[this.MODE]},_getPath:function(){return this.PATHS[this.MODE]},METRIKA_PARTS:{mail:"Клик по Прикрепить из почты",disk:"Клик по Прикрепить с диска"},PATHS:{mail:"/mail/",disk:"/disk/"}}},function(e,t){!function(e,t){var n=function(e,n){var i=ns.Model.get("messages",n);if(e.filter.type="search",e.filter.param={},$.each(["request","fid","scope","from","to","unread","lid"],function(t,i){n[i]&&(e.filter.param[i]=n[i])}),e.filter.param.reqid=t.React.getSearchSessionId(),e.message&&e.message.mid){i.isSearchTopResult(e.message.mid)&&(e.filter.param.tophits="yes");var r=i.getMessageByMid(e.message.mid),o=(i.models||[]).indexOf(r);o>-1&&(e.message.index=o+1)}e.filter.param=$.param(e.filter.param)},i=function(t,n,i,r){if(1===n.ids.length^1===n.tids.length){var o=n.ids.shift(),s=n.tids.shift(),a=o||s,u=ns.Model.get("message",{ids:a}),l=u.getData()||i.messageInfo;if(l&&l.date){if(t.message={thread:s?l.count:0,timestamp:l.date.timestamp,type:l.type,from:jpath(l,'.field[.type=="from"].email')[0],index:l.idx,subject:l.subject},u.isNew()&&(t.message.isnew=1),_.forEach(["widget","widget-type","widget-controls"],function(e){i[e]&&(t.message[e]=i[e])}),l.fid){var c=ns.Model.get("folders").getFolderById(l.fid);c&&(t.message.folder={fid:c.fid},c.symbol&&(t.message.folder.symbol=c.symbol))}o?t.message.mid=o:s&&(t.message.tid=s),"show"===r&&e.watcher.get("message.may-unsubscribe")&&(t.message.actions=["unsubscribe"])}else t.message=null}else t.messages={count:n.ids.length,threads:n.tids.length}};t.actionLog=function(e,r){var o=$.extend({},ns.page.current.params),s=r.originalAction||r.action,a=ns.page.current.page,u=r.mMessagesChecked?r.mMessagesChecked.getIds():{},l=$.extend(!0,{},{ids:[],tids:[]},r.ids||{},u),c=t.getPrevPageSearchContext();if(!1!==r.islog){l.tids.length||l.ids.length||!o.ids||l.ids.push(o.ids);var d=new Date,f={timestamp:d.getTime()+60*d.getTimezoneOffset()*1e3,action:s,platform:navigator.platform,filter:{page:a,type:null,param:null}};i(f,l,r,s),"search"===o.search?n(f,o):"message"===a&&c?n(f,c.page.params):o.thread_id?(f.filter.type="thread",f.filter.param=o.thread_id):o.current_label?(f.filter.type="label",f.filter.param=o.current_label):o.current_folder?(f.filter.type="folder",f.filter.param=o.current_folder):o.extra_cond&&(f.filter.type=o.extra_cond),r.btn&&(f.btn=r.btn);var p={data:JSON.stringify(f)};"search"===f.filter.type&&(p.isSearch=!0),ns.request.addRequestParams(p);p.model="do-action-log",$.post(t.api.journal+"?_m=do-action-log",p)}};var r;ns.events.on("user.action.log",t.actionLog),ns.events.on("message.action.complete",t.actionLog),ns.events.on("ns-page-after-load",function(){var e=ns.page.current,n=ns.page.current;if(r&&"message"===r.page&&"messages"===n){var i=e.current_folder;if(i){var o=ns.Model.get("folders").getFolderBySymbol("inbox");o&&o.fid===i&&t.actionLog("pageload",{action:"gotoinbox",eventObject:{params:$.extend({islog:!0},e)}})}}r=$.extend(!0,{},ns.page.current)})}(Jane,Daria)},function(e,t){!function(){var e=/^([^@]+)@(ya(?:ndex\-team|money)\.(?:ru|com(\.(tr|ua))?))$/;Daria.email={},Daria.email.isCA=function(e,t){var n=e.match(/^(\+?\d+)@ya(?:ndex)?\./);return!!n&&(t&&(t.phone=n[1]),!0)},Daria.email.isCorp=function(t){return Daria.IS_CORP&&e.test(t)},Daria.email.isSupport=function(e){return new RegExp("^(?:[^@]+)@(?:support\\.yandex\\.(?:"+Daria.Config.domainZonesForReg+"|com\\.ua))$").test(e)},Daria.email.getDomain=function(e){return Daria.email.split(e).pop()},Daria.email.getLogin=function(e){var t=Daria.email.split(e);return t.pop(),t.join("@")},Daria.email.split=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("@")},Daria.email.normalize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Daria.email.getLogin(e).replace(/-/g,".")+"@"+Daria.email.getDomain(e)}}()},function(e,t){!function(e){var t={doc:"doc",docx:"doc",htm:"doc/text",html:"doc/text",mht:"doc",odt:"doc",rtf:"doc",txt:"doc/txt",pdf:"pdf",odp:"ppt",ppt:"ppt",pptx:"ppt",csv:"xls/xls",ods:"xls",ots:"xls",xls:"xls",xlsx:"xls",eml:"mail/eml",vcf:"mail/eml",exe:"application/exe",aac:"audio/audio",mka:"audio",mp3:"audio/mp3",ogg:"audio/audio",wav:"audio",wma:"audio/wma",ai:"image/ai",bmp:"image/bmp",cdr:"image/cdr",djvu:"image",eps:"image",gif:"image/gif",ico:"image",jpe:"image",jpeg:"image/jpg",jpg:"image/jpg",pcx:"image/pcx",pjpeg:"image",png:"image/png",ps:"image",psd:"image/psd",tga:"image",tif:"image/tiff",tiff:"image/tiff","3gp":"video",avi:"video/avi",flv:"video/video",m2v:"video",mkv:"video",mov:"video/mov",mp4:"video/mp4",mpe:"video",mpeg:"video",mpg:"video",qt:"video",vob:"video",wmv:"video/wmv","7z":"zip/zip",arj:"zip/zip",bz2:"zip",lzh:"zip/zip",uc2:"zip/zip",zip:"zip",rar:"rar"},n=["bmp","gif","jpg","jpeg","pjpeg","pcx","png","tif","tiff"],i=["apk","cab","dmg","docb","docm","gz","js","msi","phps","pptb","pptm","sea","sit","tar","torrent","xlsb","xlsm","xpi"];$.each(i,function(e,n){t[n]="general/general"}),e.getExtensionInfo=function(i){var r=e.getExtension(i),o=(t[r]||"").split("/"),s={class:o[0]||"general",preview:$.inArray(r,n)>-1};return o.length>1&&(s.icon=o[1]),s},e.getExtension=function(t){return e.splitName(t)[1].toLowerCase()},e.splitName=function(e){e=e||"";var t=e.split(".");if(1===t.length)return[e,""];var n=t.pop();return[t.join("."),n]}}(Daria)},function(e,t){Daria.MessageTime={getFormattedTime:function(e){var t={attach:void 0,title:void 0,message:void 0,list:void 0,full:void 0,isRelative:!1},n=this._getUserTZ(),i=new Date(Daria.now()-n),r=new Date(e-n);return i.getUTCDate()===r.getUTCDate()&&i.getUTCMonth()===r.getUTCMonth()&&i.getUTCFullYear()===r.getUTCFullYear()?(t.message=Jane.Date.format("%Date_today_at_HM",r,!0),t.list=Jane.Date.format("%Date_HM__colon",r,!0),t.attach=t.list,t.full=Jane.Date.format("%Date_dB_in_HM",r,!0),t.isRelative=!0):i.getUTCFullYear()!==r.getUTCFullYear()?(t.message=Jane.Date.format("%Date_dmy_at_HM",r,!0),t.list=Jane.Date.format("%Date_dmy__dot",r,!0),t.attach=Jane.Date.format("%Date_db",r,!0),t.title=Jane.Date.format("%Date_dBY_year_in_HM",r,!0),t.full=t.title):(t.message=Jane.Date.format("%Date_db_in_HM",r,!0),t.list=Jane.Date.format("%Date_db",r,!0),t.attach=t.list,t.title=t.message,t.full=Jane.Date.format("%Date_dB_in_HM",r,!0)),t},_getUserTZ:function(){return ns.Model.get("account-information").get(".tz_offset")*Jane.Date.MINUTE}}},function(e,t){Daria.getPageTitle=function(e,t){var n,i,r="",o=t.ids;switch(e){case"message":n=ns.Model.get("message",{ids:o}),i=n.getSubject();var s=n.getFromName();i&&s&&(r+=i18n("%Title_message",i)+" — "+s);break;case"messages":var a=t.current_folder;if(a){var u=ns.Model.get("folders").getFolderById(a);if(u){var l=u.name,c=u.new;r+=c>0?c+" · "+l:l}}break;case"compose":if(n=ns.Model.get("message",{ids:o}),!(o&&/^\d+$/.test(o)&&n.isValid())){r+=i18n("%Title_compose");break}i=n.getSubject();switch(t.oper){case"reply":case"reply-all":r+=i18n("%Title_reply",i);break;case"forward":r+=i18n("%Title_forward",i);break;default:r+=i18n("%Title_draft",i)}}return r&&(r+=" — "),r+=i18n("%Title_mail")},Daria.updateTitle=function(){var e=ns.page.current.params,t=ns.page.current.page,n=Daria.getPageTitle(t,e),i=Jane.watcher.get("pageVisible"),r=i?0:Math.min(Daria.gotNewMail,10);"compose"===t&&(r=t),jQuery("#favicon, #png16favicon, #png32favicon").remove();var o=Daria.IS_CORP?"ya-team-favicon":"main-favicon",s="/u2709/favicon/png/"+o+"/16/"+r+".png",a="/u2709/favicon/png/"+o+"/32/"+r+".png";Modernizr.mozilla>=58&&(s+="?nocacheIcon="+Math.floor(1e13*Math.random()),a+="?nocacheIcon="+Math.floor(1e13*Math.random()));var u='<link id="png16favicon" rel="icon" type="image/png" href="'+s+'" sizes="16x16" /><link id="png32favicon" rel="icon" type="image/png" href="'+a+'" sizes="32x32" />';jQuery("head").append(u),Daria.gotNewMail&&!i&&(n="* "+n),document.title=n},ns.events.on("pageVisible.change",function(){Daria.gotNewMail=0,Daria.updateTitle()}),ns.events.on("ns-page-after-load",function(){Daria.updateTitle()})},function(e,t){!function(){function e(e){return!(!s(e.text)&&!i(e.text))}function t(e){e.convert=i(e.text),e.convert=e.convert.replace("--\n","-- \n"),e.preview=e.convert.trim();var t=e.preview.split("\n");return t.length>3&&(e.spreview=t.slice(0,3).join("\n")),e}function n(e){e.convert=r(e.text),e.convert=Daria.Html2Text.flatDOMHtml(e.convert),e.convert=e.convert.replace("-- ","--&nbsp;").replace(">--<",">--&nbsp;<"),e.preview=Daria.Html2Text.html2text(e.convert).trim(),!e.preview&&s(e.text)&&(e.preview="< "+i18n("%Signature_picture")+" >");var t=e.preview.split("\n");return t.length>3&&(e.spreview=t.slice(0,3).join("\n")),e}function i(e){return e=Daria.Html2Text.text2html(e),e=_.unescape(e),Daria.Html2Text.html2text(e)}function r(e){return e=Daria.Html2Text.text2html(e),"<div>"+(e=_.unescape(e))+"</div>"}function o(e){return/<[^>]+>/.test(e)}function s(e){return/<img[^>]*>/i.test(e)}Daria.signs={mSettings:function(){return this._mSettings||(this._mSettings=ns.Model.get("settings")),this._mSettings},getFilteredSigns:function(e,t){return _.filter(e,function(e){var n=_.map(e.emails,function(e){return e.toLowerCase()});return 0===e.emails.length||-1!==n.indexOf(t.toLowerCase())})},sort:function(e,t){return function(n,i){var r=_.map(arguments,function(n){var i=0;return n.isDefault&&(i+=1),t&&n.lang===t&&(i+=2),e&&-1!==n.emails.indexOf(e)&&(i+=4),i});return r[0]<r[1]?1:r[0]>r[1]?-1:n._idx<i._idx?1:n._idx>i._idx?-1:0}},getHtml:function(){var t=$.makeArray(this.mSettings().getSetting("signs"));return $.map($.grep(t,e),n)},getPlain:function(){var n=$.makeArray(this.mSettings().getSetting("signs"));return $.map($.grep(n,e),t)},addSignature:function(t,n){var i=$.makeArray(this.mSettings().getSetting("signs"));i=$.grep(i,e),i.push(t),this.mSettings().setSettings({signs:i},function(e,t){n(e,t)})},appendSeparator:function(e){function t(e){return e.replace(/[\u0020\u00a0]+/g,"").replace(/&nbsp;/g,"")}var n=!1;if(o(e)){var i=$(r(e));i.find("table").parent().css("overflow","auto");var s=i.find("*").filter(function(){if(n)return!1;var e=$(this);if("TABLE"===this.tagName)return n=!0,!0;if(e.children().length)return!1;var i=t(e.text());return"--"===i?(n=!0,!1):!(!i&&"IMG"!==this.tagName)&&(n=!0,!0)});return s.length&&$("<div>--&nbsp;</div>").insertBefore(s),Daria.Html2Text.flatDOMHtml(i.html())}return e.replace(/.*/gm,function(e){if(n)return e;var i=t(e);return"--"===i?(n=!0,e):i?(n=!0,"-- \n"+e):e})},getSignatureMatch:function(e){var t;return e&&(e=i(e),(t=e.replace(/^\s*$/gm,"").replace(/^[\n\r]+/g,"").match(/^.+$/m))&&(this.__firstLineMatch=Daria.regexpEscape(t[0]).replace(/\s/g,"\\s"))),this.__firstLineMatch||""},appendToBody:function(e,t,n,i,r){var o,s,a=[],u="html"===t&&!Modernizr.ios;if(u?(a=this.getHtml(),o="<div><br/></div><div><br/></div>",s="<div><br/></div>"):(a=this.getPlain(),o="\n\n",s="\n"),!a.length)return e;i=i||this.mSettings().getSetting("default_email"),r=r||Daria.Config.locale;var l=this.getFilteredSigns(a,i);l.sort(this.sort(i,r));var c=_.first(l);return c?(u&&(c.convert=Daria.Html2Text.flatDOMHtml(c.convert)),this.getSignatureMatch(c.convert)):c=this.setEmptySign(u),!n&&this.mSettings().isSet("signature_top")?o+c.convert+s+e:e+o+c.convert+s},setEmptySign:function(e){return{text:"<div>-- </div>",convert:function(){return e?"<div>--&nbsp;</div>":"-- "}()}},isEmpty:function(e){return!s(e)&&!i(e)},isExistSignature:function(e){for(var t=this.getHtml(),n=t.length;n--;)if(this.compare(t[n].convert,e))return!0;return!1},count:function(){var t=$.makeArray(this.mSettings().getSetting("signs"));return $.grep(t,e).length},sample:function(){var e=this.mSettings().getSetting("from_name");if(!e)return!1;var t=(ns.Model.get("userphones").getActivePhone()||{}).number;if(!t)for(var n=this.mSettings().getSetting("emails"),i={},r=0;r<n.length;r++){var o=n[r];if(o.native&&o.validated&&Daria.email.isCA(o.address,i)){t=i.phone;break}}if(!t)return!1;var s=this.mSettings().getSetting("default_email"),a={name:e,phone:t,email:s};return a.content=Daria.supplant("<div>--&nbsp;</div><div>{prefix}</div>{phone}",{prefix:i18n("%Signature_sample",_.escape(e)),phone:t?"<div>"+_.escape(t)+"</div>":""},!0),!$.grep(this.getHtml(),function(e){return this.compare(e.convert,a.content)}.bind(this)).length&&a},compare:function(e,t){return e=e.replace(/<\/?[^>]+>/gi,"").replace(/[\s\n]/g,"").replace(/&nbsp;/g,""),t=t.replace(/<\/?[^>]+>/gi,"").replace(/[\s\n]/g,"").replace(/&nbsp;/g,""),e===t},reset:function(){delete this._mSettings}}}()},function(e,t){!function(e){"use strict";e.UISettings={},e.UISettings.shouldShowCheckboxInsideUserpic=function(){var t=ns.Model.get("settings"),n=t.getSetting("show_checkbox_inside_userpic"),i=t.getSetting("messages_avatars");return e.is3pane()||n&&i}}(Daria)},function(e,t){Daria.url={_checkAttachmentHasHid:function(e){if(!this._notEmptyString(e.hid))throw new Error("Attachment should have a hid")},_checkMid:function(e){if(!this._notEmptyString(e))throw new Error("Invalid message id passed")},_getAttachmentName:function(e){return e["name-uri-encoded"]||e.name||""},_notEmptyString:function(e){return e&&"string"==typeof e},docviewer:function(e,t){return this._checkMid(t),this._checkAttachmentHasHid(e),"t"===t[0]&&(t=t.slice(1)),Daria.Config["docviewer-frontend-host"]+"/?url="+encodeURIComponent("ya-mail://"+t+"/"+e.hid)+"&name="+this._getAttachmentName(e)+"&uid="+Daria.uid},isEMLSuffixMissing:function(e,t,n){if(!n)return!1;var i=decodeURIComponent(n),r=i.split("."),o="message/rfc822"===[e,t].join("/");return _.all([r.length>1&&"eml"!==_.last(r)||1===r.length,o])},attachment:function(e,t,n){var i;if(e.url)return i=$.url(e.url),i.replaceParams({uid:Daria.uid}),i.toString();if("string"==typeof t){this._checkMid(t),this._checkAttachmentHasHid(e);var r=this._getAttachmentName(e);this.isEMLSuffixMissing(e.type,e.subtype,r)&&(r=encodeURIComponent(decodeURIComponent(r)+".eml")),i="../message_part/"+r+"?_uid="+Daria.uid+"&name="+r+"&hid="+e.hid+"&ids="+t;var o=["no_disposition","exif_rotate","thumb","preview"],s=["thumb_size","fallback_url"];n=n||{};for(var a in n)n.hasOwnProperty(a)&&(o.indexOf(a)>-1&&Boolean(n[a])?i+="&"+a+"=y":s.indexOf(a)>-1&&(i+="&"+a+"="+n[a]));return i}},archive:function(e,t){var n=_.flatten(jpath(e,".attachment")),i=_.filter(n,function(e){return!e.inline&&(e.name||e.message)&&!e.narod}).map(function(e){return e.hid});if(0===i.length)return!1;var r=1===i.length;i=i.join(",");var o=jpath(e,'.info.field[.type == "from"].email')[0],s=new Date(Number(e.info.date.timestamp)),a=Jane.Common.n,u=s.getFullYear()+"-"+a(s.getMonth()+1)+"-"+a(s.getDate())+"_"+a(s.getHours())+"-"+a(s.getMinutes())+"-"+a(s.getSeconds()),l=r?jpath(e,".attachment.name")[0]:"Attachments_"+o+"_"+u+".zip",c=encodeURIComponent(l),d={_uid:Daria.uid,hid:i,ids:t,name:l};return r||(d.archive="zip"),"../message_part/"+c+"?"+ns.params2query(d)},getAttachmentsArchiveLink:function(e){var t={ids:e},n=$.Deferred();return ns.request("message-body",t).then(function(e){var t=e[0].getData();n.resolve(this.archive(t))}),n.promise()},upload:function(e,t){var n=$.url("signature"===t?Daria.api["upload-signature-images"]:Daria.api["upload-attachment"]),i=Daria.parseQuery(n.query());return _.isPlainObject(e)&&_.assign(i,e),ns.request.addRequestParams(i),n.query(i),n.toString()}}},function(e,t){!function(){Daria.COPS={},Daria.COPS["abook.select-all"]=function(e){e.selectAll()},Daria.COPS["abook.deselect-all"]=function(e){e.unselectAll()},Daria.COPS["mail-common.person-popup"]=function(){return ns.events.trigger("daria:vAbookContacts.showPersonPopup",{}),Vow.fulfill()},Daria.COPS["abook.open-backups-dialog"]=function(){return ns.View.create("abook-restore-dialog").show()},Daria.COPS["abook.remove-contacts"]=function(e){var t=e.getCids();return ns.Model.get("abook-contacts").removeContacts(t).then(function(){ns.Model.invalidateAll(["abook-contacts","abook-selected"]),ns.page.go()})},Daria.COPS["abook.toolbar-more-actions"]=function(e,t){var n=Daria.COPS["abook.toolbar-more-actions"];return n._openView?(n._openView.destroy(),delete n._openView):n._openView=ns.View.create("abook-extra-actions").open({where:t.buttonView.node}),Vow.fulfill()},Daria.COPS["abook.groups-dropdown"]=function(e,t){var n=Daria.COPS["abook.groups-dropdown"];return n._openView?(n._openView.destroy(),delete n._openView):n._openView=ns.View.create("abook-groups-dropdown",e.params).open({where:t.buttonView.node}),Vow.fulfill()},Daria.COPS["abook.remove-contacts-from-group"]=function(e){var t=Number(ns.page.current.params.tid||0);if(t<=0)return Vow.fulfill();Daria.Dialog.close();var n=e.getCids();return ns.Model.get("abook-groups").removeFromGroup({tids:[t],mcids:n}).then(function(){e.clear(),ns.page.go()})},Daria.COPS["abook.compose-go"]=function(e){ns.Model.get("compose-predefined-data").set(".to",e.emailsToString()),ns.page.go(ns.router.generateUrl("compose2"))},Daria.COPS["abook.assign-contacts-from-group"]=function(e,t){var n=Number(t.tid),i=$(t.target),r=no.jpath(".current.params.tid",ns.page),o=e.getCids(),s=e.getContactsMcids(r),a=!0,u=[];if(_.each(s,function(e){e.length>1&&(a=!1),u.push(e)}),0===o.length)return Vow.reject();if(a)return new vow.Promise(function(e,t){ns.Model.get("abook-groups").addToGroup({tid:n,mcids:u}).then(e,t)});if(i.length&&1===o.length){var l=o[0];ns.events.trigger("daria:vAbook:showChooseEmailPopup",{cid:l,tid:n,target:t.target})}else ns.events.trigger("daria:vAbook.showGroupPopup",{type:"add-to-group",targetTid:n});return Vow.reject()},Daria.COPS["abook.assign-contacts-from-phone-group"]=function(e){var t=e.getCids();return new vow.Promise(function(e,n){ns.Model.get("abook-groups").addToGroup({tid:-10,mcids:t}).then(e,n)})}}()},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1099);!function(){function e(e){ns.events.trigger("daria:MOPS:action-complete",{action:e}),ns.events.trigger("daria:MOPS:"+e,{})}function t(e,t,n,i){Daria.messages.clearCacheByLID(n),Jane.watcher.set("actions-message-label",e,{force:!0}),ns.events.trigger("message.action.complete",{action:e,eventObject:{ids:t,params:i},skipFocus:!0})}function n(e){return!(!e||"object"!==(void 0===e?"undefined":r(e)))&&(e.ids.length>0||e.tids.length>0)}function s(e){var t=e.ids.concat(e.tids),n=t.filter(function(e){return!ns.Model.get("state-message-thread-item",{ids:e}).isOpen()});if(Daria.Page.isParamsForMessage(ns.page.current.params)){var i=Daria.Page.getMessageId(ns.page.current.params);n=_.without(n,i)}if(n.length){var r={type:"mark_read_from_list",mids:n};Jane.ErrorLog.send(r)}}function a(e,t,r,o){var s=Object.assign({},r),a=void 0;if(r=m(e,r),a=r.current_folder,e=Daria.MOPS.fixMoveAction(e,a),!o&&Daria.MOPS.shouldShowConfirmation(e,t.getCount()))return void ns.Model.get("mops-confirmation").setMops({action:e,count:t.getCount(),callback:function(){return Daria.MOPS["delete"===e?"remove":e](t,s,!0)}});var l=[],c=r["message-id"],d=t.isFolderSelected(),f=d?t.getSelectedFolder():null,h=ns.page.current.params,g=t.getCount(),v=t.getIds(e,r);Daria.MOPS._logMops("move",e,"start",v,r),c&&(v.ids=$.grep(v.ids,function(e){return e===c}));var b=_.extend({},r,{ids:v,count:g,action:e});if(b.whereToGo=Daria.messages.whereToGoAfterMove(e,t,b),ns.events.trigger("daria:MOPS:action-start",b),!n(v))return Vow.reject();var y=ns.Model.get("folders").isCurrentFolder("sent"),w={id:"do-messages",params:{movefile:a,action:e,with_sent:-1!==["move","tospam","delete"].indexOf(e)&&y?1:0}};if(f?w.params.fid=f:w.params=_.extend({},w.params,v),!Daria.MOPS._checkDoMessagesParams(w.params))return Vow.reject();l.push(w,{id:"folders"},{id:"labels"});var S=Daria.is3pane(),k=!1;if(S)if(h.thread_id&&h.current_folder){var C=ns.Model.get("messages",{thread_id:h.thread_id}),M=C.getCountThreadMessageInFolder();!1===M?(Daria.lom.deleteFid(h.current_folder),k=!0):(v.ids.forEach(function(e){ns.Model.get("message",{ids:e}).getFolderId()===h.current_folder&&M--}),M<1&&(Daria.lom.deleteFid(h.current_folder),k=!0))}else Daria.lom.deleteFid(h.current_folder);if(k){var D=ns.router(b.whereToGo.where);"messages"===D.page&&D.params.thread_id&&(delete D.params.thread_id,b.whereToGo.where=ns.router.generateUrl(D.page,D.params),b.whereToGo.updateRequired=!0)}Daria.MOPS.invalidateModelsOnMove(e,r,h);var O=t.getOnlyCheckedMidOrTid(v),x=ns.Model.get("message",{ids:O}),T=x.isSpam(),P=Boolean(ns.page.current.params.ids||ns.page.current.params.thread_id),E=Boolean("messages"===ns.page.current.page&&P),I=Boolean(E&&Daria.is2pane()&&(ns.page.current.params.ids||ns.page.current.params.thread_id&&_.lte(x.getThreadMessage().getThreadCount()||0,1)||x.isThreadModel())&&"delete"===e),A=!1;if(E&&Daria.is3pane())if(ns.page.current.params.thread_id&&-1!==["move","tospam","delete"].indexOf(e))A=-1!==v.tids.indexOf(ns.page.current.params.thread_id)||v.ids.some(function(e){var t=ns.Model.get("message",{ids:e}),n=t&&t.getThreadMessage();return n&&n.get(".mid")===ns.page.current.params.thread_id&&(n.getThreadCount()||0)<=1});else if(ns.page.current.params.ids&&"delete"===e)if(-1!==v.ids.indexOf(ns.page.current.params.ids))A=!0;else{var j=ns.Model.get("message",{ids:ns.page.current.params.ids}),R=j&&j.getThreadMessage();A=R&&-1!==v.tids.indexOf(R.get(".mid"))}if("delete"===e||e.indexOf("spam")>=0||"move"===e&&T){var L=Daria.array2obj(v.ids);1===v.ids.length^1===v.tids.length&&(b.messageInfo=_.cloneDeep(ns.Model.get("message",{ids:O})),r.messageInfo=b.messageInfo);var N=Daria.array2obj(v.tids);ns.Model.traverse("message-body",function(e){(L[e.params.ids]||N["t"+e.params.ids])&&(e.invalidate(),e.trigger("daria:mMessageBody:moved"))}),[].concat(i(v.ids),i(v.tids)).forEach(function(e){ns.Model.get("message-widget-state",{ids:e}).resetViewUserClose("message-widget-spam",{silent:!0})})}Array.isArray(r.requestModels)&&(l=l.concat(r.requestModels.map(function(e){return{id:e,params:r.requestParams}}))),Daria.MOPS.doActionInModelsByIds(v,"move",a),Daria.MOPS.invalidateMessagesCheckedModels(v,e),r.ignoreUnsavedDraft&&ns.page.block.clear(),A&&(ns.page.go(Daria.Page.generateUrl.closeMessage()),ns.Model.get("focus").setPreventOpenOnFocus()),Daria.MOPS._logMops("move",e,"startRequest",v,r);var F=ns.forcedRequest(l);return p(e,t),F.then(function(){g>(parseInt(ns.Model.get("settings").getSetting("messages_per_page"),10)||30)&&u(e,v,g,r),I&&ns.page.go(Daria.Page.generateUrl.closeMessage()),ns.events.trigger("daria:MOPS:action-complete",b),ns.events.trigger("daria:MOPS:"+e,b),ns.events.trigger("message.action.complete",b)},function(t){var n=b.ids,i=b.count,r=b.fid;return Daria.MOPS.registerOperationFail(e,{ids:n,count:i,fid:r},t,"do-messages"),Vow.reject(t)})}function u(e,t,n,i){var r=i18n("%Message_Delete_Msg",n);if("tospam"===e)r=i18n("%Message_To_Spam_Msg",n);else if("notspam"===e)r=i18n("%Message_Not_Spam_Msg",n);else if("move"===e){var o=_.escape(ns.Model.get("message",{ids:t.ids.length?t.ids[0]:t.tids[0]}).getSubject());r="archive"===i.originalAction?1===n?i18n("%Message_MoveArchive_Msg_One",o):i18n("%Message_MoveArchive_Msg",n):1===n?i18n("%Message_Move_Msg_One",o):i18n("%Message_Move_Msg",n)}Daria.Statusline.show({name:"move"===e?"message_moved":"message_removed",speed:"fast",body:r})}function l(t,i,r){r=r||{};var o,a,u,l,c=i.isFolderSelected(),d=i.getSelectedFolder();if(c){if(!d)return Daria.DEBUG&&console.error("Promise rejected because of no fid"),Vow.reject("no-selection");o=Daria.MOPS.markByFid(t,d),o.hasAdjust()&&(a=o.getIds())}else{var f=i.getIds();if(u=i.getCount(),o=Daria.MOPS.doActionInModelsByIds(f,t,{fid:d}),a=o.getIds(),!n(a)&&n(f))return Vow.reject("no-item-to-operation")}var h=o.hasAdjust(),m=[],g={id:"do-messages",params:{action:t}};if(d?g.params.fid=d:(g.params=_.extend({},g.params,a),"mark"===t&&s(a)),!Daria.MOPS._checkDoMessagesParams(g.params))return setTimeout(function(){return Daria.MOPS._undoFailedAction(t,o)},1),Vow.reject();m.push(g),!Daria.IS_CORP&&h||m.push({id:"folders"});var v=function(e){var n=g.params.fid;Daria.MOPS.registerOperationFail(t,{ids:a,count:u,fid:n},e,"do-messages"),Daria.MOPS._hasModelRequestFailed(e,"do-messages")&&Daria.MOPS._undoFailedAction(t,o)};if(h)e(t),ns.forcedRequest(m).fail(v),l=Vow.resolve();else{var b=ns.forcedRequest(m);b.then(function(){return e(t)},v),l=b}return r.noResetChecked||p(t,i),l}function c(e,i,o){var s,a=i.isFolderSelected();if("object"===(void 0===o?"undefined":r(o))?(o.actionParams&&(o=o.actionParams),s=o.lid||o.label||o.current_label):s=o,!s)return Vow.reject(new Error("No lid passed"));var u=o["message-id"];o={lid:s};var l;l=u?{ids:[u],tids:[]}:i.getIds(),_.any([].concat(l.ids,l.tids),function(e){return!ns.Model.get("message",{ids:e}).hasLabel(s)})||(e="unlabel");var c=Daria.MOPS.doActionInModelsByIds(l,e,o);if(l=c.getIds(),!n(l))return Daria.DEBUG&&console.error("Promise rejected because of no selection"),Vow.reject("no-selection");ns.events.trigger("label.update-message-labels");var d=[],f={id:"do-"+e,params:{lid:s}};a?f.params.fid=i.getSelectedFolder():f.params=_.extend({},f.params,l),d.push(f);var p=void 0;return c.hasAdjust()?(ns.Model.get("labels").adjustCounters(c.getAdjust()),p=ns.forcedRequest(d),p.then(function(){t(e,l,s,o),ns.page.go()})):(d.push({id:"labels"}),p=ns.forcedRequest(d),p.then(function(n){n[0].getAffectedTids().forEach(function(t){ns.Model.get("message",{ids:t})[e](o)}),t(e,l,s,o)})),p}function d(e,t){var n=ns.Model.get("labels"),i=t.tids;Array.isArray(i)||(i=[i]);var r,o,s,a,u=n.getMuteThreadLabel(),l=[];_.contains(["ignore","disableIgnore"],e)?(o="label","ignore"===e?(s="Игнорировать",r=u&&u.lid):(s="Не предлагать",a=n.getLIDByName(v),r=a&&a.lid)):(o="unlabel",r=u&&u.lid,s="Отменить");var c=Vow.promise();return r?c.fulfill(r):(l=[{id:"do-labels-add-by-symbol",params:{symbol:"mute_label"}},{id:"labels"}],"disableIgnore"===e&&(l=[{id:"do-labels-add",params:{label_name:v,label_type:"threadWide"}},{id:"labels"}]),c=ns.forcedRequest(l).then(function(t){if(t[0].get(".body.updated")){var n;return n=_.contains(["ignore","unignore"],e)?t[1].getMuteThreadLabel():t[1].getLabelByName(v),Vow.fulfill(n&&n.lid)}return Vow.reject()})),Jane.c(g,s),c.then(function(e){return _.each(i,function(t){ns.Model.get("message",{ids:t})[o]({lid:e})}),l=[{id:"do-"+o,params:{lid:e,tids:i}}],ns.forcedRequest(l)})}function f(e,t){Daria.MOPS._logMops("archive","archive","start",e.getIds("archive",t),t);var n=ns.Model.get("folders");return n.createArchiveFolder().then(function(){var i=n.getFidBySymbol("archive");return i?(t=_.extend({originalAction:"archive",fid:i,noResetChecked:!0},t),l("mark",e,t).fail(function(e){if("no-item-to-operation"!==e)throw e}).then(function(){return a("move",e,t)})):Vow.reject("No folder with archive symbol found!")})}function p(e,t){"message"!==ns.page.current.page&&(t.isFolderSelected()||_.contains(["mark","unmark","move","notspam","tospam","pin","unpin","delete"],e))&&t.resetChecked()}var h=function(e,t){var n={delete:"trash",tospam:"spam",notspam:"inbox"};return _.has(n,e)&&(t=ns.Model.get("folders").getFidBySymbol(n[e])),t},m=function(e,t){return t=t||{},t.folder&&(t.fid=t.folder,delete t.folder),t.current_folder=h(e,t.fid||ns.page.current.params.current_folder),t},g="Статуслайн игнорирования треда",v="ignore_thisthread:disable",b=function(e){if(e=e.split("mailto:")[1]){e=e.split("?")||[e];var t=e[0],n=e[1];if(n=n?Daria.parseQuery(n):{},!t&&n.to)t=n.to;else if(!t)return;var i={params:{to:t,ttype:"plain",nosave:"yes",list_unsubscribe:"yes",feed_address_db:"no"}};n.body&&(i.params.send=n.body),n.subject&&(i.params.subj=n.subject),Daria.SendMail.send(i)}};Daria.MOPS={OperationFailNotificationManager:o,_failNotificationManager:new o,MOVE_ACTIONS:["archive","move","notspam","remove","tospam","infolder"],mark:function(e,t){return l("mark",e,t)},unmark:function(e){return l("unmark",e)},remove:function(e,t,n){return a("delete",e,t,n)},"remove.draft":function(e,t){return a("delete",e,_.extend({},t,{originalAction:"remove.draft"}))},move:function(e,t){return ns.Model.get("folders").isArchive(t.fid)?f(e,t):a("move",e,t)},infolder:function(e,t){return a("move",e,_.extend({originalAction:"infolder"},t))},archive:function(e,t){return f(e,t)},tospam:function(e,t,n){return a("tospam",e,t,n)},notspam:function(e,t){return a("notspam",e,t)},label:function(e,t){return c("label",e,t)},unlabel:function(e,t){return c("unlabel",e,t)},ignore:function(e){return d("ignore",e)},disableIgnore:function(e){return d("disableIgnore",e)},unignore:function(e){return d("unignore",e)},unsubscribe:function(e){var t=e.getOnlyMessageCheckedMid();if(!t)return Vow.reject();for(var n,i,r=ns.Model.get("message-body",{ids:t}),o=r.getUnsubscribeOptions(),s=["mailto-header","https-header","http-header","https-body","http-body"],a=0;a<s.length;a++)if(n=o[s[a]]){i=s[a];break}if(n){var u=["Отписаться от рассылки"];if(i.indexOf("mailto")>-1)b(n),u.push("mailto","заголовок письма");else{window.open(n,"_blank");var l=i.split("-");switch(u.push(l[0]),l[1]){case"header":u.push("заголовок письма");break;case"body":u.push("тело письма")}}Jane.c(u)}return ns.forcedRequest(["do-unsubscribe"],{ids:t}).then(function(){var n=Daria.is3pane()?{"message-id":t}:{};return n.action="delete",n.originalAction="unsubscribe",Daria.MOPS.remove(e,n)}).then(function(){Daria.Statusline.show({name:"unsubscribed",body:i18n("%Toolbar_Unsubscribe_Done")})})},pin:function(e,t,n){return Daria.MOPS._pinHelper(e,!0,n)},unpin:function(e){return Daria.MOPS._pinHelper(e,!1)},"compose-edit":function(){ns.page.go(ns.router.generateUrl("compose2",{ids:ns.page.current.params.ids}))}},Daria.MOPS.markByFid=function(e,t){var n=ns.Model.get("folders"),i=n.getUnreadCount(t);ns.Model.traverse("message",function(n){n.getFolderId()===t&&n[e]()});var r={};return r[t]=-i,n.adjustUnreadCounters(r),new Daria.MOPS.Opinfo},Daria.MOPS.doActionInModelsByIds=function(e,t,n){var i=[].concat(e.ids,e.tids);return Daria.MOPS.doActionInMessages(i,t,n)},Daria.MOPS.doActionInMessages=function(e,t,n){var i=new Daria.MOPS.Opinfo;return e.forEach(function(e){var r=ns.Model.get("message",{ids:e});if(r.getData()){var o=r[t](n);i.merge(o)}}),i.hasAdjust()&&"object"===(void 0===n?"undefined":r(n))&&"fid"in n&&ns.Model.get("folders").adjustUnreadCounters(i.getAdjust()),i},Daria.MOPS.fixMoveAction=function(e,t){var n=ns.Model.get("folders");return"move"===e&&(n.isFolder(t,["trash"])?e="delete":n.isFolder(t,["spam"])&&(e="tospam")),e},Daria.MOPS.invalidateModelsOnMove=function(e,t,n){if(ns.Model.destroyAll(["message-nearest"]),["delete","tospam","notspam"].indexOf(e)>-1&&ns.Model.destroyAll(["message-thread-nearest"]),ns.Model.isDefined("messages-pager")){ns.Model.get("messages-pager",n).destroy();var i=t.current_folder;i&&ns.Model.get("messages-pager",{current_folder:i}).destroy()}},Daria.MOPS.invalidateMessagesCheckedModels=function(e,t){"delete"===t&&(e=[].concat(e.ids,e.tids),ns.Model.traverse("messages-checked",function(t){var n=t.getIds(),i=_(n).chain().values().flattenDeep().compact().map(function(e){return"t"===e.charAt(0)?e.substr(1):e}).value();i.length&&i.some(function(t){return _.include(e,t)})&&t.resetChecked()}))},Daria.MOPS.updateHelper=function(e,t,n,i){var r=function(){ns.events.trigger("daria:vToolbarButton:loader:end")},o=Daria.MOPS[e](t,n);if(o){if(o.then(r,r),i){var s=function(){return o};return i.update(ns.page.current.params).then(s,s)}return o}},Daria.MOPS.getFakeMessagesChecked=function(e){var t=ns.Model.get("message",{ids:e}),n=ns.Model.get("messages-checked",{mid:"mops-fake-checked"});return n.check(t,!0),n},Daria.MOPS.doActionWithMessage=function(e,t,n){var i=Daria.MOPS.getFakeMessagesChecked(e);Daria.MOPS[t](i,n).always(function(){i.destroy()})},Daria.MOPS._pinHelper=function(e,t,n){var i=t?"pin":"unpin",r=ns.Model.get("labels").getPinnedLabel().lid,o="pin"===i?"label":"unlabel";return t&&!n&&Daria.MOPS.shouldShowConfirmation(i,e.getCount())?void ns.Model.get("mops-confirmation").setMops({action:i,count:e.getCount(),callback:function(){return Daria.MOPS.pin(e,t,!0)}}):(t?Daria.Statusline.show({name:"message_pinned",body:i18n("%Pinned_Письмо_будет_запинено",e.getCount())}):Daria.Statusline.show({name:"message_unpinned",body:i18n("%Pinned_Письмо_будет_распинено",e.getCount())}),c(o,e,{lid:r}),Daria.MOPS._updateModelsAfterPin(e,t))},Daria.MOPS._getReplacementTreeAfterPin=function(e,t){var n=ns.Model.get("settings"),i=n.isThreaded(),r=e.getData(),o={};return r.forEach(function(e){var n=ns.Model.get("message",{ids:e});if(n.isIntoThread()&&!n.isThread()&&i){var r=ns.Model.get("message",{ids:n.getThreadId()}),s=ns.Model.get("messages",{thread_id:n.getThreadId()}),a=s.getPinned();t||0===a.length?(o[r.get(".mid")]=r,delete o[n.get(".mid")]):!t&&a>0&&delete o[n.get(".mid")]}else o[n.get(".mid")]=n}),o},Daria.MOPS._undoFailedAction=function(e,t){_.includes(["mark","unmark"],e)&&(t.getSavedMids().map(function(e){return ns.Model.get("message",{ids:e})}).forEach(function(t){"mark"===e&&t.unmark(),"unmark"===e&&t.mark()}),t.getSavedTids().forEach(function(e){ns.Model.get("message",{ids:e}).set(".new",t.getSavedUnreadCounter(e))}))},Daria.MOPS._hasModelRequestFailed=function(e,t){return Boolean(_.find(e.invalid,function(e){return e.id===t}))},Daria.MOPS._updateModelsAfterPin=function(e,t){var n=Daria.MOPS._getReplacementTreeAfterPin(e,t),i=Object.keys(n).map(function(e){return ns.Model.get("message",{ids:e})});return ns.Model.traverse("messages",function(e){"yes"===e.params.with_pins&&e.recalculateIndexesAfterPin(i,t)}),p(t?"pin":"unpin",e),Vow.fulfill()},Daria.MOPS.shouldShowConfirmation=function(e,t){var n=ns.page.current.params;return!(["trash","spam"].indexOf(n.current_folder?ns.Model.get("folder",{fid:n.current_folder}).get(".symbol"):"")>=0)&&("pin"===e&&t>=Daria.Constants.MAX_MESSAGES_TO_PIN||["tospam","delete"].indexOf(e)>=0&&t>=Daria.Constants.MAX_MESSAGES_TO_REMOVE_OR_SPAM)},Daria.MOPS._logMops=function(e,t,n,i,r){var o=Object.assign({event:"MopsLog",helper:e,action:t,actionStage:n,ids:i.ids.join(","),tids:i.tids.join(","),time:Date.now()},_.pick(r,"originalAction","fid","folder","current_folder","toolbar","noResetChecked"));Jane.ErrorLog.send(o),Daria.DEBUG&&console.log("[MOPS]",o)},Daria.MOPS.registerOperationFail=function(e,t,n,i){!!_.find(n.invalid,function(e){return e.id===i})&&Daria.IS_CORP&&Daria.hasExperiment("76078")&&Daria.MOPS._failNotificationManager.registerOperationFail(e,t)},Daria.MOPS._checkDoMessagesParams=function(e){return!(_.isEmpty(e.ids)&&_.isEmpty(e.tids)&&!Boolean(e.fid)&&(Jane.ErrorLog.send({errorType:"do_messages_not_enough_params_for_request",requestParams:JSON.stringify(e)}),1))}}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1100),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fails,r=t.messages,s=t.notifications,a=t.time;i(this,e),this._threshold={fails:n||5,messages:r||5,notifications:s||1,time:a||6e4},this._failOperationsQueue=new o(this._threshold.fails,this._threshold.time),this._resetNotificationShow()}return r(e,[{key:"_resetNotificationShow",value:function(){this._notificationShowCount=0,clearTimeout(this._resetNotificationTimer),this._resetNotificationTimer=null}},{key:"_registerOperationFail",value:function(){this._failOperationsQueue.registerEvent()}},{key:"_shouldShowNotification",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.count,n=void 0===t?0:t,i=e.fid,r=this._failOperationsQueue.hasMaxEventsForTimeInterval(),o=this._notificationShowCount,s=this._threshold,a=s.notifications,u=s.messages,l=!n&&void 0!==i;return(r||n>=u||l)&&o<a}},{key:"_setNotificationShow",value:function(){var e=this;this._notificationShowCount+=1,this._resetNotificationTimer||(this._resetNotificationTimer=setTimeout(function(){return e._resetNotificationShow()},this._threshold.time))}},{key:"_logNotificationShow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.count,i=void 0===n?"unknown":n,r=t.fid,o={type:"mops_fail_notification_show",action:e};void 0===r?o.msgsCount=i:o.fid=r,Jane.ErrorLog.send(o)}},{key:"registerOperationFail",value:function(e,t){this._registerOperationFail(),this._shouldShowNotification(t)&&this.showNotification(e,t)}},{key:"showNotification",value:function(e,t){Daria.Statusline.show({name:"mops_failed",body:i18n("%mops_fail_notification"),speed:"fast",hideOnTimeout:!0,timeout:2e4}),this._setNotificationShow(),this._logNotificationShow(e,t)}}]),e}();s.EventsTimeQueue=o,e.exports=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n){i(this,e),this._events=[],this._time=n,this._capacity=t}return r(e,[{key:"hasMaxEventsForTimeInterval",value:function(){if(this._events.length<this._capacity)return!1;var e=Date.now(),t=this._events.length-this._capacity;return Math.abs(e-this._events[t])<=this._time}},{key:"registerEvent",value:function(){this._events.push(Date.now());var e=this._events.length;e>2*this._capacity&&(this._events=this._events.slice(e-this._capacity))}}]),e}();e.exports=o},function(e,t){Daria.MOPS.Opinfo=function(){this._adjust={},this._mid=[],this._tid=[],this._modelsCount=0,this._savedMids=[],this._savedNewCounters={}},Daria.MOPS.Opinfo.prototype.addAdjust=function(e,t){this.hasAdjust()&&(this._adjust[e]=t)},Daria.MOPS.Opinfo.prototype.addMid=function(e){this._mid.push(e)},Daria.MOPS.Opinfo.prototype.saveMid=function(e){this._savedMids.push(e)},Daria.MOPS.Opinfo.prototype.getSavedMids=function(){return this._savedMids},Daria.MOPS.Opinfo.prototype.addTid=function(e){this._tid.push(e)},Daria.MOPS.Opinfo.prototype.checkFidAdjust=function(e,t){return!!this.hasAdjust()&&(this._adjust[t]===e||(this.resetAdjust(),!1))},Daria.MOPS.Opinfo.prototype.saveUnreadCounter=function(e,t){this._savedNewCounters[e]=t},Daria.MOPS.Opinfo.prototype.saveAffectedMids=function(){this._savedMids.concat(this._mid)},Daria.MOPS.Opinfo.prototype.getSavedUnreadCounter=function(e){return this._savedNewCounters[e]},Daria.MOPS.Opinfo.prototype.getSavedTids=function(){return Object.keys(this._savedNewCounters)},Daria.MOPS.Opinfo.prototype.checkTidAdjust=function(e,t){if(!this.hasAdjust())return this._tid.push(t),!1;var n=0;for(var i in this._adjust)n+=this._adjust[i];return n===e||(this.resetAdjust(),this._tid.push(t),this._mid=[],!1)},Daria.MOPS.Opinfo.prototype.getAdjust=function(){return this._adjust},Daria.MOPS.Opinfo.prototype.getIds=function(){return{ids:this._mid,tids:this._tid}},Daria.MOPS.Opinfo.prototype.getModelsCount=function(){return this._modelsCount},Daria.MOPS.Opinfo.prototype.hasAdjust=function(){return Boolean(this._adjust)},Daria.MOPS.Opinfo.prototype.merge=function(e){if(this.hasAdjust())if(e.hasAdjust()){var t=e.getAdjust(),n=this.getAdjust();for(var i in t)i in n?n[i]+=t[i]:n[i]=t[i]}else this.resetAdjust();this._mid=this._mid.concat(e._mid),this._tid=this._tid.concat(e._tid),this._savedMids=this._savedMids.concat(e._savedMids),this._savedNewCounters=_.assign(this._savedNewCounters,e._savedNewCounters)},Daria.MOPS.Opinfo.prototype.resetAdjust=function(){this._adjust=null},Daria.MOPS.Opinfo.prototype.setModelsCount=function(e){this._modelsCount=e}},function(e,t){Daria.MOPS.onMove=function(e,t){var n=t.current_folder,i=ns.Model.get("folders"),r=ns.Model.get("filters");1!==t.count||i.isFolder(n,"trash")||0!==r.getForFolder(n).length||_.contains(["archive","infolder"],t.originalAction)||ns.action.run("message.filter-move.show",{mid:t.ids.ids[0]||t.ids.tids[0],fid:n})},ns.events.on("daria:MOPS:move",Daria.MOPS.onMove)},function(e,t){Daria.hkMOPS={},Daria.hkMOPS.doAction=function(e,t,n){return Daria.MOPS.updateHelper(e,t,n)},Daria.hkMOPS.doUserDefinedAction=function(e,t){var n=ns.Model.get("messages-checked");if(n.getCount()>0)return void Daria.hkMOPS.doAction(e,n,t);var i,r=ns.Model.get("focus");if(r.isCurrentFocusOnMessage()){i=r.getFocus().params.ids}else"message"===ns.page.current.page&&(i=ns.page.current.params.ids);i&&Daria.MOPS.doActionWithMessage(i,e,t)},Daria.hkMOPS.runReplyAction=function(e,t){t=_.extend({toolbar:!0},t);var n=ns.Model.get("messages-checked");if(n.getCount()>0)return t.mMessagesChecked=n,void ns.action.run(e,t);var i;if("message"===ns.page.current.page&&(i=ns.page.current.params.ids))return t["message-id"]=i,void ns.action.run(e,t);var r=ns.Model.get("focus");if(r.isCurrentFocusOnMessage())if(i=r.getFocus().params.ids,"t"===i[0]){var o=Daria.MOPS.getFakeMessagesChecked(i);t.mMessagesChecked=o,ns.action.run(e,t),o.destroy()}else t["message-id"]=i,ns.action.run(e,t)},Daria.hkMOPS.toggleImportance=function(){var e=ns.Model.get("messages-checked"),t=ns.Model.get("labels").getImportantLID();e.getCount()>0?Daria.MOPS.updateHelper("label",e,{lid:t}):ns.page.go(ns.router.generateUrl("messages",{current_label:t}))},Daria.hkMOPS.mark=function(){var e=ns.Model.get("messages-checked");if(e.getCount()>0)return void Daria.hkMOPS.doAction("mark",e);var t=ns.Model.get("focus");if(t.isCurrentFocusOnMessage()){var n=t.getFocus();Daria.MOPS.doActionWithMessage(n.params.ids,"mark")}},Daria.hkMOPS.unmark=function(){var e=ns.Model.get("messages-checked");e.getCount()>0?Daria.hkMOPS.doAction("unmark",e):"only_new"===ns.page.current.params.extra_cond?ns.events.trigger("daria:vMessages:recalculate"):ns.page.go("#unread")},Daria.hkMOPS.remove=function(){var e=ns.Model.get("messages-checked");if(e.getCount()>0)return void Daria.hkMOPS.doAction("remove",e);var t=ns.Model.get("focus");t.isCurrentFocusOnMessage()&&Daria.MOPS.doActionWithMessage(t.getFocus().params.ids,"remove")},Daria.hkMOPS.triggerToolbarEvent=function(e,t){var n=0,i=ns.Model.get("messages-checked");if(0===i.getCount()&&t){n=200;var r=ns.Model.get("focus");if(r.isCurrentFocusOnMessage()){var o=r.getFocus().getModel("message");i.check(o,!0)}}setTimeout(function(){ns.events.trigger(e)},n)}},function(e,t){Daria.Printer={PRINT_URL:Daria.api.print},Daria.Printer.printMessage=function(e){var t=Daria.uid,n=""+window.location.origin+Daria.Printer.PRINT_URL+"?mid="+e+"&_uid="+t;window.open(n,"_blank")},Daria.Printer.printThread=function(e){var t=Daria.uid,n=""+window.location.origin+Daria.Printer.PRINT_URL+"?tid="+e+"&_uid="+t;window.open(n,"_blank")}},function(e,t){Daria.bubblingQuote=function(e){e=e.replace(/^<meta[^>]*>/,"");var t=e.match(/<!--StartFragment-->(.*?)<!--EndFragment-->/);t&&(e=t[1]);var n=document.createElement("div");n.innerHTML=e;for(var i,r=n;r;){if(1!==r.childNodes.length||!Jane.DOM.isBlockquote(r.firstChild)){if(r===n)break;if(r.getElementsByTagName("blockquote").length)break;for(i=n.firstChild.cloneNode(!1),i.removeAttribute("style");r.firstChild;)i.appendChild(r.firstChild);break}r=r.firstChild}return n=null,!!i&&i.outerHTML}},function(e,t){!function(){function e(e){return"yes"===e.params.search}Daria.messages={},Daria.messages.toCreateThread=function(e){return!e.isThread()&&(!e.isDraftLike()&&!Daria.Widgets.getWidgetName(e))},Daria.messages.clearCacheByFID=function(e){ns.Model.invalidate("messages",function(t){return t.params.current_folder===e})},Daria.messages.clearCacheBodyByThread=function(e){$.makeArray(e).forEach(function(e){var t=ns.Model.get("messages",{thread_id:e});t&&t.models.length&&t.models.forEach(function(e){ns.Model.get("message-body",{ids:e.get(".mid")}).invalidate()})})},Daria.messages.clearCacheByLID=function(e){ns.Model.invalidate("messages",function(t){return t.params.current_label===e})},Daria.messages.clearSearchCache=function(){ns.Model.invalidate("messages",e)},Daria.messages.preload=function(e){return},Daria.messages.everHadMessages=function(){var e=ns.Model.get("settings");if(e.getSetting("has_inbox_message"))return!0;var t=ns.Model.get("messages",ns.page.current.params);return!!t.isValid()&&(t.select('/.message[.type != "12" && .dlid != "yadisk"]').length?(e.setSettingOn("has_inbox_message"),!0):(Jane.c("Не показываем рекламу так как в инбоксе нет писем кроме приветственных"),!1))},Daria.messages.whereToGoAfterMove=function(e,t,n){n=n||{};var i,r,o=n.ids&&n.ids.length?n.ids:t.getIds(),s=o.ids.length?o.ids[0]:o.tids[0],a=ns.Model.get("message",{ids:s}),u=ns.Model.get("settings"),l=ns.Model.get("folders");switch(e){case"move":case"infolder":i=n.fid||n.folder;break;case"archive":r="archive";break;case"delete":case"remove":r="trash";break;case"tospam":r="spam";break;case"notspam":r="inbox"}var c="move";_.includes(["remove","delete","tospam","notspam"],e)&&(c="delete"),!i&&r&&(i=l.getFidBySymbol(r));var d,f=[],p={},h=u.getSetting("page_after_"+c),m="";"compose"===ns.page.current.page&&"next_message"===h&&(h="source_folder"),Daria.is2pane()&&Daria.isMessagePage()&&(_.contains(["unmark"],e)?(h="dest_folder",i=a.getFolderId()||l.getFidBySymbol("inbox")):_.contains(["move"],e)&&n.fid&&"trash"===l.getFolderById(n.fid).symbol&&(c="delete")),Daria.is3pane()&&(h="current_list");var g;switch(h){case"current_list":if(Daria.is3pane()){var v=$.extend({},ns.page.current.params);n.ids&&(_.contains(n.ids.tids,v.thread_id)&&delete v.thread_id,_.contains(n.ids.ids,v.ids)&&delete v.ids),"delete"===c&&delete v.ids,v.search||v.current_folder||(v.current_folder=l.getFidBySymbol("inbox")),m=ns.router.generateUrl("messages",v)}else if("move"===c)m=ns.page.currentUrl,f.push("message"),p.ids=s;else{var b=ns.page.history.getPrevious(),y=b&&ns.router(b);if(y&&"messages"===y.page){m=b;var w=ns.Model.info("messages").pNames,S=_.pick(y.params,function(e,t){return w.indexOf(t)>-1});_.extend(p,S),f.push("messages")}else g=a.getFolderId(),g||(g=l.getFidBySymbol("inbox")),m=ns.router.generateUrl("messages",{current_folder:g})}break;case"next_message":var k=ns.Model.get("message-nearest",{ids:s}).getNearestMessages(),C=k.prev&&k.prev.mid?k.prev:k.next;C&&C.mid&&(m=ns.Model.get("message",{ids:C.mid}).getUrl()),m||(g=a.getFolderId(),g||(g=l.getFidBySymbol("inbox")),m=ns.router.generateUrl("messages",{current_folder:g}));break;case"inbox":d=l.getFidBySymbol("inbox");break;case"deleted_list":d="tospam"===e||"notspam"===e?l.getFidBySymbol("spam"):l.getFidBySymbol("trash");break;case"source_folder":d=a.getFolderId(),d||(d=l.getFidBySymbol("inbox"));break;case"dest_folder":d=i}return!m&&d&&(p.current_folder=d,f.push("messages"),m=ns.router.generateUrl("messages",{current_folder:d})),{where:m,requestParams:p,requestModels:f}},Daria.messages.doActionInThreads=function(e,t,n){for(var i=0,r=t.length;i<r;i++)for(var o=t[i],s=ns.Model.get("messages",{thread_id:o}),a=0,u=s.models.length;a<u;a++)s.models[a][e](n)},Daria.messages._pinsBadFolders=["trash","draft","spam","template","unsubscribe"],Daria.messages.checkUsePinsByParams=function(e){if(e.category)return!1;if("search"===e.search)return!1;if(e.current_label)return!1;if(e.extra_cond)return!1;if("rpopinfo"===e.scope)return!1;if(e.thread_id&&!e.current_folder)return!1;if(e.current_folder){if(ns.Model.get("folders").isFolder(e.current_folder,Daria.messages._pinsBadFolders))return!1}return!0},Daria.messages.canShowPinControlsByParams=function(e){if(e=e||ns.page.current.params,e.current_folder){if(ns.Model.get("folders").isFolder(e.current_folder,Daria.messages._pinsBadFolders))return!1}return!0},Daria.messages.createMessagesItemLayout=function(e){e=e||{};var t="layout-messages-item";return e.threadFull?t+="-thread-full":e.threadInner&&(t+="-thread-inner"),e.widget&&(t+="-"+e.widget),t}}()},function(e,t){Daria.nsTreeWalker={},Daria.nsTreeWalker.findView=function(e,t){var n=e.info.isBox,i=null;i=n?e.active:e.views;var r=t[0];for(var o in i)if(_.isString(r)&&o===r||_.isRegExp(r)&&r.test(o)){var s;if(n){var a=i[o];s=e.views[a]}else s=i[o];var u=t.slice(1);return u.length?Daria.nsTreeWalker.findView(s,u):s}return null},Daria.nsTreeWalker.getViewsChildren=function(e){var t=[];return e.forEachValidItem(function(e){t.push(e)}),t},Daria.nsTreeWalker.getTreeForFocus=function(){return[Daria.nsTreeWalker._buildColumnTree([["left-box","folders"],["left-box","folders-setup"],["left-box","messages-filters","messages-filters-box","messages-filters-wait"],["left-box","messages-filters","messages-filters-box","messages-filters-important"],["left-box","messages-filters","messages-filters-box","messages-filters-unread"],["left-box","messages-filters","messages-filters-box","messages-filters-attachments"],["left-box","labels"],["left-box","labels-setup"],["left-box","collectors"],["left-box","collectors-setup"]]),Daria.nsTreeWalker._buildColumnTree([["right-box","messages-list","messages-list-box","messages-wrap","messages"],["right-box","message"]]),Daria.nsTreeWalker._buildColumnTree([["right-box","messages-box","message-thread","message-thread-pager"],["right-box","messages-box","message-thread","message-thread-list"],["right-box","messages-box","message"]])]},Daria.nsTreeWalker._buildColumnTree=function(e){var t=e.map(Daria.nsTreeWalker._findViewByPath).map(Daria.nsTreeWalker._getViewFocusableChildren);return _.flatten(t)},Daria.nsTreeWalker._findViewByPath=function(e){return Daria.nsTreeWalker.findView(ns.MAIN_VIEW,e)},Daria.nsTreeWalker._getViewFocusableChildren=function(e){return e?(ns.assert(e.getFocusableChildren,"View: "+e.id,"Не реализован метод #getFocusableChildren()"),e.getFocusableChildren()):[]}},function(e,t){!function(){var e=/^[a-z]{2}$/,t={};Daria.Translate={MAX_BLOCK_LEN:1e3,getCache:function(e){return t[e]},setCache:function(e,n){t[e]=n},clearCache:function(e){delete t[e]},langs:{ru:{s:["en","uk","tr","pl","de","fr","es","it"],name:i18n("%русский")},uk:{s:["ru"],name:i18n("%украинский")},en:{s:"RUS"===Daria.Config.product?["ru","tr"]:["tr","ru"],name:i18n("%английский")},tr:{s:"RUS"===Daria.Config.product?["ru","en"]:["en","ru"],name:i18n("%турецкий")},pl:{s:["ru"],name:i18n("%польский")},de:{s:["ru"],name:i18n("%немецкий")},fr:{s:["ru"],name:i18n("%французский")},es:{s:["ru"],name:i18n("%испанский")},it:{s:["ru"],name:i18n("%итальянский")},all:{s:["ru","uk","en","tr","pl","de","fr","es","it"],name:""}},id2lang:{1:"ru",2:"en",3:"pl",5:"uk",6:"de",7:"fr",12:"es",13:"it",39:"fi",40:"et",44:"tr"},getDefaultLangTo:function(e){return Daria.Config.locale&&e!==Daria.Config.locale?Daria.Config.locale:_.get(this.langs,e+".s.0",Daria.Config.locale)},getLangByMid:function(t){var n=ns.Model.get("message-body",{ids:t}),i=_.get(n.getData(),"body.0.lang");if(i)return this.id2lang[i]?this.id2lang[i]:e.test(i)?i:void 0},defineLanguage:function(e){var t={uk:/[ґїі]/gi,ru:/[а-яё]/gi,pl:/[ąęł]/gi,tr:/[çğş]/gi,de:/[äüß]/gi,es:/[ňñ]/gi,fr:/[âàéêîôùûÿ]/gi};if(/^(\d|\s)*$/.test(e))return Daria.Config.locale;for(var n in t)if(t[n].test(e))return n;return"en"},translateElement:function(e,t,n){var i=n.cloneNode(!0);return new vow.Promise(function(n,r){Daria.Libs("PageTranslator",function(){var o=Object.assign(Daria.Config["page-translator"],{element:i}),s=new window.yt.PageTranslator(o);s.translate(e,t),s.on("error",function(){s.halt(),r()}),s.on("complete",function(){s.halt(),n(i)})})})},translateText:function(e,t,n){var i=document.createElement("div");return i.innerText=n,this.translateElement(e,t,i).then(function(e){return e.innerText})},translateHtml:function(e,t,n){var i=document.createElement("div");return i.innerHTML=n,this.translateElement(e,t,i).then(function(e){return e.innerHTML})},translate:function(e,t,n){return n=Array.isArray(n)?n:[n],vow.all(n.map(function(n){switch(n.format){case"text":return this.translateText(e,t,n.value);case"element":return this.translateElement(e,t,n.value);case"html":return this.translateHtml(e,t,n.value);default:return vow.reject()}}.bind(this)))}}}()},function(e,t,n){Daria.Shortcuts=function(e,t){"use strict";var i={eventsBound:!1,altOS:0===navigator.platform.toLowerCase().indexOf("mac"),pageType:"",hotkeysEnabled:!1};return i.shortcuts=n(1110)(i),i.help=n(1111)(i),n(1112),ns.events.on("toggleShortcuts",function(e,t){i.toggleHotkeys(t)}),ns.events.on("pageinit",function(){i.toggleHotkeys(ns.Model.get("settings").getSetting("enable_hotkeys")),ns.events.trigger("daria:hotkeys:inited")}),ns.events.on("ns-page-after-load",function(){if(i.pageType!==ns.page.current.page){if(i.pageType=ns.page.current.page,!i.eventsBound)return!1;i.hotkeysEnabled&&(t.Shortcuts.switchList(i.pageType),t.Shortcuts.refresh(i.pageType))}}),i.toggleHotkeys=function(n){e.Shortcuts.hotkeysEnabled=i.hotkeysEnabled={on:!0,off:!1,true:!0,false:!1}[n],i.hotkeysEnabled?(i.eventsBound||i.bindLists(i.pageType),t.Shortcuts.start()):t.Shortcuts.stop()},i.bindLists=function(e){for(var n=i.shortcuts.length-1;n>=0;n--)t.Shortcuts.loadList(i.shortcuts[n],i.altOS);t.Shortcuts.enableList(e),i.eventsBound=!0},i._getShortcutMask=function(e,t){for(var n=i.shortcuts.length-1;n>=0;n--)if(i.shortcuts[n].name===t){var r=i.shortcuts[n];if(r.shortcuts.hasOwnProperty(e))return i.altOS&&r.shortcuts[e].altMask?r.shortcuts[e].altMask:r.shortcuts[e].mask}return""},i.showShortcutsHelp=function(){for(var n=i.help.length-1;n>=0;n--)for(var r=i.help[n],o=r.hotkeys.length-1;o>=0;o--)if(void 0!==r.hotkeys[o].id){var s=i._getShortcutMask(r.hotkeys[o].id,r.id);s&&(r.hotkeys[o].key=s.replace(/Meta/g,"Cmd").replace(/\+/g," + "))}e.Dialog.open({title:i18n("%Shortcuts_help_screen_title"),additionalClass:"b-shortcuts-list__popup",width:900,body:Jane.tt("mail:shortcuts-list",{columns:i.help}),onopen:function(){t(document).on("keydown.shortcutsPopup",function(e){if(9===e.which){void 0===i.popupActiveTab&&(i.popupActiveTab=0);var n=t(".b-shortcuts-list__item"),r=i.popupActiveTab+1;return r>=n.length&&(r=0),t(".b-shortcuts__list-id-"+i.popupActiveTab).addClass("g-hidden"),t(".b-shortcuts__list-id-"+r).removeClass("g-hidden"),t(n[i.popupActiveTab]).removeClass("b-shortcuts-list__item_current"),t(n[r]).addClass("b-shortcuts-list__item_current"),i.popupActiveTab=r,!1}})},onclose:function(){t(document).off("keydown.shortcutsPopup"),i.popupActiveTab=0}})},i.switchTab=function(e){void 0===i.popupActiveTab&&(i.popupActiveTab=0),t(".b-shortcuts__list-id-"+i.popupActiveTab).addClass("g-hidden"),t(".b-shortcuts__list-id-"+e.params.tab).removeClass("g-hidden"),t(".b-shortcuts-list__item").removeClass("b-shortcuts-list__item_current"),t(e.event.currentTarget).addClass("b-shortcuts-list__item_current"),i.popupActiveTab=parseInt(e.params.tab,10)},i.getShortcutLabelFor=function(e,t,n){var r=i._getShortcutMask(e,t).replace(/Meta/g,"Cmd").replace(/\+/g," + ");return n?" ("+r+")":r},i.verticalAlignOpenMessage=function(t){var n=ns.page.current.params.thread_id||ns.page.current.params.ids,i="message"===ns.page.current.page;if(!n||i)return!1;var r,o=e.is2pane();r=o?ns.Model.get("scroller-messages"):ns.Model.get("scroller-message");var s={alignToTop:t.alignToTop,relative:r.isRelativeOffset()};return t.alignToTop?s.viewTopOffset=o?-r.FIXED_TOOLBAR_HEIGHT:-r.getScrollOffset():s.viewBottomOffset=o?-ns.Model.get("timeline-state").get(".height"):0,ns.events.trigger("hotkeys.alignOpenMessage",{scroller:r,alignOptions:s}),!0},{showShortcutsHelp:i.showShortcutsHelp,switchTab:i.switchTab,hotkeysEnabled:i.hotkeysEnabled,getShortcutLabelFor:i.getShortcutLabelFor,verticalAlignOpenMessage:i.verticalAlignOpenMessage}}(Daria,jQuery)},function(e,t){e.exports=function(e){for(var t,n=[{global:!0,name:"global",shortcuts:{Check_new_mail:{mask:"F9",altMask:"Shift+o",enableInInput:!e.altOS,action:"mailbox.check"},New_mail:{mask:"w, c",disableAt:["compose2"],handler:function(){ns.page.go(ns.router.generateUrl("compose2"))}},Goto_inbox:{mask:"Ctrl+i",altMask:"Meta+i",type:"hold",enableInInput:!0,handler:function(){ns.Model.get("focus").goInbox()}},Find:{mask:"/,?",type:"hold",handler:function(){Daria.React.activateSearch()}},Hotkeys_help:{mask:"Shift+?,Shift+comma,Shift+7,7",type:"hold",handler:function(){e.showShortcutsHelp()}},Column_left:{mask:"Left",type:"hold",disableAt:["compose2"],handler:function(){ns.Model.get("focus").changeColumn(!1)}},Column_right:{mask:"Right",type:"hold",disableAt:["compose2"],handler:function(){ns.Model.get("focus").changeColumn(!0)}},Goto_previous:{mask:"Up",type:"hold",handler:function(){Daria.Focus.moveItem(!1)},enableInInput:!0,namedInput:"js-allow-shortcuts"},Goto_next:{mask:"Down",type:"hold",handler:function(){Daria.Focus.moveItem(!0)},enableInInput:!0,namedInput:"js-allow-shortcuts"},Print:{mask:"Shift+p",type:"hold",handler:function(){"message"===ns.page.current.page?ns.events.trigger("hotkeys.print"):ns.Model.get("focus").pubEvent("print")}},Set_mark:{mask:"Space",type:"down",handler:function(){ns.Model.get("focus").pubEvent("space")}},Collapse_folder:{type:"up",mask:"Enter",handler:function(){ns.Model.get("focus").pubEvent("enter")},enableInInput:!0,namedInput:"js-allow-shortcuts"},AlignBottom_Open_Message:{mask:"Ctrl+down",altMask:"Meta+down",type:"hold",handler:function(){return!Daria.Shortcuts.verticalAlignOpenMessage({alignToTop:!1})}},AlignTop_Open_Message:{mask:"Ctrl+up",altMask:"Meta+up",type:"hold",handler:function(){return!Daria.Shortcuts.verticalAlignOpenMessage({alignToTop:!0})}}}},{name:"messages",shortcuts:{Labels_dialog:{mask:"l",handler:function(){Daria.hkMOPS.triggerToolbarEvent("daria:vLabelsActions:open",!0)}},Folders_dialog:{mask:"m",handler:function(){Daria.hkMOPS.triggerToolbarEvent("daria:vFoldersActions:open",!0)}},Label_important:{mask:"i",handler:function(){Daria.hkMOPS.toggleImportance()}},Label_read:{mask:"q",handler:function(){Daria.hkMOPS.mark()}},Label_unread:{mask:"u",handler:function(){Daria.hkMOPS.unmark()}},Reply_all:{mask:"Shift+r",type:"hold",handler:function(){ns.page.current.params.thread_id?ns.events.trigger("daria:vMessageThreadReplyAll:replyAll"):ns.events.trigger("daria:vMessageToolbar:reply",{replyAll:!0,compose:"qr"})}},Select_all:{mask:"Ctrl+a",altMask:"Meta+a",type:"hold",handler:function(){ns.Model.get("messages-checked",ns.page.current.params).toggleSelectAll()}},Select_modifier:{mask:"Shift",handler:function(){ns.Model.get("focus").startKeyboardSelect()}},Select_previous:{mask:"Shift+Up",type:"hold",handler:function(){ns.Model.get("focus").changeItem(!1,!0)}},Select_next:{mask:"Shift+Down",type:"hold",handler:function(){ns.Model.get("focus").changeItem(!0,!0)}},Goto_first:{mask:"Home",handler:function(){ns.Model.get("focus").focusToFirstMessage()}},Select_till_first:{mask:"Shift+Home",handler:function(){ns.Model.get("focus").focusToFirstMessage(!0)}},Goto_end:{mask:"End",handler:function(){ns.Model.get("focus").focusToLastMessage()}},Select_till_last:{mask:"Shift+End",handler:function(){ns.Model.get("focus").focusToLastMessage(!0)}},Forward:{mask:"f",handler:function(){ns.Model.get("messages-checked").getCount()<=Daria.Constants.MAX_MESSAGES_TO_FORWARD&&Daria.hkMOPS.runReplyAction("forward")}},Delete_selected:{mask:"Delete",altMask:"Meta+Backspace",type:"hold",handler:function(){Daria.hkMOPS.remove()}},Deselect:{mask:"Esc",enableInInput:!0,handler:function(e){var t="true"===e.target.getAttribute("contenteditable"),n="TEXTAREA"===e.target.nodeName,i=e.target===document.activeElement;if((t||n)&&i)return void document.activeElement.blur();ns.Model.get("messages-checked").getCount()>0?ns.events.trigger("daria:vMessages:deselect"):Daria.is2pane()&&ns.events.trigger("daria:vMessages:closeWithShortcut")}}}},{name:"message",shortcuts:{Goto_next:{mask:"n,k",handler:function(){ns.events.trigger("daria:vMessagePrevNextInMessage:changeMessage",{direction:"next"})}},Goto_previous:{mask:"p,j",handler:function(){ns.events.trigger("daria:vMessagePrevNextInMessage:changeMessage",{direction:"prev"})}},Delete:{mask:"Delete",altMask:"Meta+Backspace",handler:function(){var e=ns.page.current.params.ids;e&&Daria.MOPS.doActionWithMessage(e,"remove")}},Deselect:{mask:"Esc",enableInInput:!0,handler:function(e){var t="true"===e.target.getAttribute("contenteditable"),n="TEXTAREA"===e.target.nodeName,i=e.target===document.activeElement;if((t||n)&&i)return void document.activeElement.blur()}},Reply_all_quick:{mask:"r",handler:function(){ns.events.trigger("daria:vMessageToolbar:reply",{compose:"qr",replyAll:!0})}},Reply_all:{mask:"Shift+r",type:"hold",handler:function(){ns.events.trigger("daria:vMessageToolbar:reply",{compose:"full",replyAll:!0}),ns.events.trigger("daria:shortcuts:replyall")}},Reply_quick:{mask:"e",handler:function(){ns.events.trigger("daria:vMessageToolbar:reply",{compose:"qr"})}},Reply:{mask:"Shift+e",handler:function(){ns.events.trigger("daria:vMessageToolbar:reply",{compose:"full"})}},Forward:{mask:"Shift+f",handler:function(){Daria.hkMOPS.runReplyAction("forward")}},Labels_dialog:{mask:"Shift+l",handler:function(){Daria.hkMOPS.triggerToolbarEvent("daria:vLabelsActions:open")}},Folders_dialog:{mask:"Shift+m",handler:function(){Daria.hkMOPS.triggerToolbarEvent("daria:vFoldersActions:open")}},Label_unread:{mask:"Shift+u",handler:function(){var e=ns.page.current.params.ids;e&&Daria.MOPS.doActionWithMessage(e,"unmark")}},Label_spam:{mask:"Shift+s",handler:function(){var e=ns.page.current.params.ids;if(e){var t=ns.Model.get("message",{ids:e}),n=t.isSpam()?"notspam":"tospam";Daria.MOPS.doActionWithMessage(e,n)}}},Label_important:{mask:"Shift+i",handler:function(){var e=ns.page.current.params.ids;if(e){var t=ns.Model.get("labels").getImportantLID();Daria.MOPS.doActionWithMessage(e,"label",{lid:t})}}},Attachments_save:{mask:"Ctrl+s",altMask:"Meta+s",type:"hold",handler:function(){ns.events.trigger("daria:vAttachmentsWidgetBody:downloadAttachments")}}}},{name:"compose2",shortcuts:{Save_draft:{mask:"Ctrl+s",altMask:"Meta+s",type:"hold",enableInInput:!0,handler:function(){ns.events.trigger("daria:vCompose2:save")}},Send:{mask:"Ctrl+Enter",altMask:"Meta+Enter",type:"hold",enableInInput:!0,handler:function(){ns.events.trigger("daria:vCompose2:send")}}}},{name:"context-menu",shortcuts:{Context_menu_cancel:{mask:"Esc",enableInInput:!0,handler:function(){Daria.ContextMenu.close()}}}},{name:"dialog",shortcuts:{Dialog_cancel:{mask:"Esc",enableInInput:!0,handler:function(){Daria.Dialog.cancel()}}}},{name:"finder",shortcuts:{Finder_close:{mask:"Esc",handler:function(){ns.events.trigger("daria:vBrowseDisk:close")}}}},{name:"video-player",shortcuts:{Videoplayer_cancel:{mask:"Esc",handler:function(){Daria.VideoPlayer.close()}}}},{name:"image-viewer",shortcuts:{Image_viewer_close:{mask:"Esc",enableInInput:!0,handler:function(){Daria.Layer.close()}},Image_viewer_next:{mask:"Right",handler:function(){var e=Daria.ImageViewer;e.isGalleryOpen()?e.scrollGallery(1):e.next()}},Image_viewer_prev:{mask:"Left",handler:function(){var e=Daria.ImageViewer;e.isGalleryOpen()?e.scrollGallery(-1):e.prev()}}}},{name:"themes-selector",shortcuts:{Themes_selector_close:{mask:"Esc",enableInInput:!0,handler:function(e){"INPUT"===e.target.nodeName.toUpperCase()||ns.events.trigger("Daria:vThemesSelector:close")}}}},{name:"abook",shortcuts:{Abook_select_all:{mask:"Ctrl+a",altMask:"Meta+a",type:"hold",handler:function(){ns.events.trigger("daria:vAbookHead.selectAll")}},Abook_deselect_all:{mask:"Esc",enableInInput:!0,handler:function(){ns.events.trigger("daria:vAbookHead.deselectAll")}}}}],i={Archive:{mask:"a",handler:function(){Daria.userToolbar.isButtonActivated(Daria.Constants.TOOLBAR_BUTTONS.ARCHIVE)&&Daria.hkMOPS.doUserDefinedAction("archive")}},Sendon:{mask:"Alt+f",handler:function(){var e=Daria.Constants.TOOLBAR_BUTTONS.SENDON;if(Daria.userToolbar.isButtonActivated(e)){var t=Daria.userToolbar.get(e).settings;Daria.hkMOPS.runReplyAction("sendon",t)}}},Infolder:{mask:"Alt+m",handler:function(){var e=Daria.Constants.TOOLBAR_BUTTONS.INFOLDER;if(Daria.userToolbar.isButtonActivated(e)){var t=Daria.userToolbar.get(e).settings;Daria.hkMOPS.doUserDefinedAction("infolder",t)}}},Defined_label:{mask:"Alt+l",handler:function(){var e=Daria.Constants.TOOLBAR_BUTTONS.LABEL;if(Daria.userToolbar.isButtonActivated(e)){var t=Daria.userToolbar.get(e).settings;Daria.hkMOPS.doUserDefinedAction("label",t)}}},Defined_reply:{mask:"Alt+r",handler:function(){var e=ns.Model.get("folders").isIncoming(ns.page.current.params.current_folder),t=Daria.Constants.TOOLBAR_BUTTONS.TEMPLATE;if(e&&Daria.userToolbar.isButtonActivated(t)){var n=Daria.userToolbar.get(t).settings;Daria.hkMOPS.runReplyAction("reply-tmpl",n)}}}},r=n.length-1;r>=0;r--)t=n[r],"messages"!==t.name&&"message"!==t.name||$.extend(t.shortcuts,i);return n}},function(e,t){e.exports=function(){return[{title:i18n("%Shortcuts_groups_global"),id:"global",hotkeys:[{title:i18n("%Shortcuts_key_Check_new_mail"),id:"Check_new_mail"},{title:i18n("%Shortcuts_key_New_mail"),id:"New_mail"},{title:i18n("%Shortcuts_key_Goto_inbox"),id:"Goto_inbox"},{title:i18n("%Shortcuts_key_Print"),id:"Print"},{title:i18n("%Shortcuts_key_Find"),key:"/"},{title:i18n("%Shortcuts_key_Hotkeys_help"),key:"?"},{title:i18n("%Shortcuts_key_Columns_change"),key:"←|→"},{title:i18n("%Shortcuts_key_Next_prev"),key:"↑|↓"},{title:i18n("%Shortcuts_key_Collapse_folder"),key:"Space"}]},{title:i18n("%Shortcuts_groups_messages"),id:"messages",hotkeys:[{title:i18n("%Shortcuts_key_Next_prev_mail"),key:"↑|↓"},{title:i18n("%Shortcuts_key_open_close_message"),key:"Enter"},{title:i18n("%Shortcuts_key_message_selection"),key:"Space"},{title:i18n("%Shortcuts_key_List_selection"),key:"Shift + ↑|↓"},{title:i18n("%Shortcuts_key_Select_all"),id:"Select_all"},{title:i18n("%Shortcuts_key_Labels_dialog"),id:"Labels_dialog"},{title:i18n("%Shortcuts_key_Folders_dialog"),id:"Folders_dialog"},{title:i18n("%Shortcuts_key_Label_read"),id:"Label_read"},{title:i18n("%Shortcuts_key_Set_unmark"),id:"Label_unread"},{title:i18n("%Shortcuts_key_Forward"),id:"Forward"},{title:i18n("%Shortcuts_key_Label_important"),id:"Label_important"},{title:i18n("%Shortcuts_key_Delete_selected"),id:"Delete_selected"},{title:i18n("%Shortcuts_key_Open_important"),id:"Label_important"},{title:i18n("%Shortcuts_key_Open_unread"),id:"Label_unread"}]},{title:i18n("%Shortcuts_groups_message"),id:"message",hotkeys:[{title:i18n("%Shortcuts_help_label_unread"),id:"Label_unread"},{title:i18n("%Shortcuts_help_toggle_spam"),id:"Label_spam"},{title:i18n("%Shortcuts_help_trigger_important"),id:"Label_important"},{title:i18n("%Shortcuts_help_set_label"),id:"Labels_dialog"},{title:i18n("%Shortcuts_help_move_to_folder"),id:"Folders_dialog"},{title:i18n("%Shortcuts_help_forward"),id:"Forward"},{title:i18n("%Shortcuts_key_Reply"),id:"Reply"},{title:i18n("%Shortcuts_key_Reply_all"),id:"Reply_all"},{title:i18n("%Shortcuts_key_Delete"),id:"Delete"},{title:i18n("%Shortcuts_key_Attachments_save"),id:"Attachments_save"},{title:i18n("%Shortcuts_key_Next_prev_mail"),key:"p/n | j/k"}]},{title:i18n("%Shortcuts_groups_compose"),id:"compose2",hotkeys:[{title:i18n("%Shortcuts_key_Send"),id:"Send"},{title:i18n("%Shortcuts_key_Save_draft"),id:"Save_draft"}]},{title:i18n("%Shortcuts_groups_personal"),id:"personal",hotkeys:[{title:i18n("%Shortcuts_key_Archive"),key:"a"},{title:i18n("%Shortcuts_key_Sendon"),key:"Alt + f"},{title:i18n("%Shortcuts_key_Infolder"),key:"Alt + m"},{title:i18n("%Shortcuts_key_User_Label"),key:"Alt + l"},{title:i18n("%Shortcuts_key_Reply_Template"),key:"Alt + r"}]}]}},function(e,t){Daria.Focus={},Daria.Focus.VALUE_LAZY_SCROLL=100,Daria.Focus.getScroller=function(e){var t;switch(e="number"==typeof e?e:ns.Model.get("focus").getIndexCurrentColumn()){case 0:t=ns.Model.get("scroller-left");break;case 1:t=ns.Model.get("scroller-messages");break;case 2:t=ns.Model.get("scroller-message")}return t},Daria.Focus.scrollIntoView=function(e,t){if(!ns.Model.get("skin-saver-state").isPreviewMode()){var n=Daria.Focus.getScroller(t),i=n.getScrollOffset()+2,r=n.getScrollTop(),o=n.getNodeTop(e[0]),s=o-i,a=r-s;if(a>0)return Daria.DEBUG&&console.log("[Focus.scrollIntoView]","nodeTop behind scrollnodeTop"),void n.setScrollTop(r-a);var u=n.getHeight(),l=r+u,c=o+e.height(),d=c+i,f=d-l;f>0&&(Daria.DEBUG&&console.log("[Focus.scrollIntoView]","nodeBottom behind scrollBottom"),r+f>=o?(Daria.DEBUG&&console.log("[Focus.scrollIntoView]","collision, nodeTop behind scrollTop, scroll to nodeTop"),n.setScrollTop(o-i)):n.setScrollTop(r+f))}},Daria.Focus.needLazyScroll=function(e,t){switch(e.id){case"message-thread-item-wrap":if(!e.getModel("state-message-thread-item").isOpen())return!1;break;case"message-thread":if(e.getModel("messages").getCount()>1)return!1;break;case"message":break;default:return!1}var n=Daria.Focus.getScroller(),i=n.getNodeTop(e.node),r=i+e.$node.height(),o=n.getScrollTop(),s=o+n.getHeight();return t?r>s:i<o},Daria.Focus.lazyScroll=function(e){var t=Daria.Focus.getScroller(),n=t.getScrollTop();e?n+=Daria.Focus.VALUE_LAZY_SCROLL:n-=Daria.Focus.VALUE_LAZY_SCROLL,t.setScrollTop(n)},Daria.Focus.moveItem=function(e){var t=ns.Model.get("focus"),n=t.getIndexCurrentColumn();"message"===ns.page.current.page&&n!==t.indexColumns.LEFT?Daria.Focus.lazyScroll(e):t.changeItem(e)}},function(e,t){Daria.upicUploader={remove:function(e){this.$upicForm?this.$upicForm.empty():this.$upicForm=$('<form class="g-hidden" method="post" enctype="multipart/form-data" action="/"></form>').appendTo(document.body);var t=this.$upicForm,n={service:"mail",token:Daria.Config["avatar-token"]};ns.request.addRequestParams(n),t.attr("action",Daria.api["yapic-delete"]),t.frameSubmit({data:n}).always(function(t){if("ok"!==t.status)return void Daria.Statusline.show({name:"yapic_error",body:i18n("%Произошла_ошибка")});ns.forcedRequest("social-profiles-reset",{emails:ns.Model.get("settings").getSetting("default_email")}),e()})}}},function(e,t){Daria.Widgets={},Daria.Widgets.getWidgetName=function(e){return Daria.Widgets._commonChecks(e)?Daria.Widgets.shouldShowTaksaWidgets(e)?"widget":Daria.Widgets.shouldShowEvents(e)?"events":"":""},Daria.Widgets._commonChecks=function(e){return!ns.Model.get("folders").spamOrTrash(e.getFolderId())},Daria.Widgets.shouldShowTaksaWidgets=function(e){if(!e.get(".widget"))return!1;var t=!Daria.is3pane(),n=Boolean(ns.Model.get("settings").getSign("show_widgets_decor")),i=Boolean(ns.Model.get("settings").getSign("show_widgets_buttons")),r=n||i;if(!(t=t&&r))return!1;switch(e.get(".widget.info.type")){case"onelink":return t&&!ns.Model.get("settings").isCompactMode();case"tracker":return t;default:return t&&!ns.Model.get("settings").isCompactMode()&&"ru"===Daria.Config.locale}},Daria.Widgets.shouldShowEvents=function(e){var t=ns.Model.get("settings");return Daria.IS_CORP&&!Daria.is3pane()&&!t.isCompactMode()&&!ns.Model.get("settings").isSet("disable_events")&&e.hasType(42)},Daria.Widgets.shouldShowAttachments=function(e,t){if(t=t||{},Daria.is2pane()&&e.hasAttachment()){var n="only_atta"===t.extra_cond||t.search&&"yes"===t.attaches,i=ns.Model.get("settings");if(i.isCompactMode()&&!n)return!1;if(!i.isSet("disable_inboxattachs")||n){var r;if(r=n||e.isIntoThread()?["spam","template","trash"]:["draft","sent","spam","template","trash"],e.inFolderBySymbol(r))return!1;if(n)return!0;if("yacal"===e.getSocialLabel())return!1;if(Daria.IS_CORP)return!0;var o=e.getSOLabels();return!_.contains(o,13)}}return!1}},function(e,t){Daria.queueCommon={},Daria.queueCommon.CONNECTIONS_MAX=2,Daria.queueCommon.MODELS_MAX=5,Daria.queueCommon.TIMEOUT_BETWEEN_REQUESTS=0,Daria.queueCommon._queue=null,Daria.queueCommon._poolCnt=0,Daria.queueCommon.reset=function(){this._poolCnt=0,this._queue=[]},Daria.queueCommon.add=function(e){this._queue=this._queue.concat(e),this.run()},Daria.queueCommon.run=function(){if(!(this._poolCnt>=this.CONNECTIONS_MAX)){var e=this._queue.splice(0,this.MODELS_MAX);e.length&&(this.request(e).always(function(){this._poolCnt--,setTimeout(this.run.bind(this),this.TIMEOUT_BETWEEN_REQUESTS)}.bind(this)),this._poolCnt++,this.run())}},Daria.queueCommon.request=function(e){return ns.request(e)}},function(e,t){Daria.preloadQueue={},no.extend(Daria.preloadQueue,Daria.queueCommon),Daria.preloadQueue.CONNECTIONS_MAX=1,Daria.preloadQueue.MODELS_MAX=5,Daria.preloadQueue.TIMEOUT_BETWEEN_REQUESTS=500,Daria.preloadQueue.reset()},function(e,t){Daria.MessagesSearch={},Daria.MessagesSearch.searchParamsStore=[],Daria.MessagesSearch.invalidateMessagesModel=function(e){for(var t=-1,n=0;n<Daria.MessagesSearch.searchParamsStore.length;n++)if(_.isEqual(Daria.MessagesSearch.searchParamsStore[n],e)){t=n;break}if(-1!==t)return ns.Model.invalidate("messages",function(t){for(var n=!0,i=Object.keys(e),r=0;r<i.length;r++)if(e[i[r]]!==t.params[i[r]]){n=!1;break}return t.isValid()&&n});Daria.MessagesSearch.searchParamsStore.unshift(e)},Daria.MessagesSearch.search=function(e,t){Daria.React.generateSearchId();var n,i=ns.Model.get("settings");t=t||{},e=_.clone(e),Daria.MessagesSearch._resetSimplifiedParams(),ns.events.off("ns-page-before-load",Daria.MessagesSearch._resetSimplifiedParams),""===e.request&&delete e.request,_.isEmpty(e)?(n=ns.page.HOME_HASH,Jane.watcher.set("search.is-empty-search",!0)):(e.search="search",n=ns.router.generateUrl("messages",e)),Daria.MessagesSearch.invalidateMessagesModel(e);var r,o=e&&e.request&&("from"in e||"to"in e||"fid"in e||"lid"in e||"scope"in e||"unread"in e||"attaches"in e||"type"in e);if(o){var s=ns.Model.get("messages",e);r=ns.request([s]).then(function(){return 0===s.get(".message").length&&(n=ns.router.generateUrl("messages",{search:"search",request:e.request}),Daria.React.setSimplifiedParams(e)),ns.page.go(n).then(function(){Daria.React.wasSearchRequestSimplified()&&ns.events.once("ns-page-before-load",Daria.MessagesSearch._resetSimplifiedParams)})})}else r=ns.page.go(n);r.then(this._onSuccess.bind(this,t,e),this._onError.bind(this,t)).always(function(){i.isSet("dont_save_history")||Daria.Autocompleter.getSearch().flushCache(),Jane.watcher.set("search.is-empty-search",!1)})},Daria.MessagesSearch._resetSimplifiedParams=function(){Daria.React.setSimplifiedParams(null)},Daria.MessagesSearch._onSuccess=function(e,t){if(e.onCorrecting){var n=ns.Model.get("messages",ns.page.current.params).getData(),i=jpath(n,".details.search-options.request")[0];i&&i.trim()!==(t.request||"").trim()&&e.onCorrecting(i)}e.onSuccess&&e.onSuccess()},Daria.MessagesSearch._onError=function(e){e.onError&&e.onError()},Daria.MessagesSearch.isUnsubscribeEmailRequest=function(){return ns.Model.get("messages",ns.page.current.params).isUnsubscribeEmailRequest()}},function(e,t){Daria.Xiva={};var n=Daria.Xiva.MAX_MESSAGES_IN_MODEL=100;Daria.Xiva.createThreadFromMessage=function(e,t,n,i){var r=_.cloneDeep(e.getData());r.count=n,r.mid=e.getThreadId(),r.last_mid=e.get(".mid"),r.new=i;var o=ns.Model.get("messages",{thread_id:r.mid});return o.isValid()&&(r.lid=_(o.models).map(function(e){return e.get(".lid")}).concat(r.lid).flatten().uniq().value()),t.setData(r)},Daria.Xiva.messageLabel=function(e){var t="mark mails"===e.operation?"label":"unlabel",n=ns.Model.get("labels"),i=!1,r=[];e.tids&&(r=_.uniq(JSON.parse(e.tids)).map(function(e){return"t"+e}));var o=[];if(e.mids&&(o=JSON.parse(e.mids)),"all_labels"in e){var s=JSON.parse(e.all_labels),a=new Daria.MOPS.Opinfo;return o.forEach(function(e,t){var n=ns.Model.get("message",{ids:e});if(n.isValid()){var i=s[t],r=n.get(".lid"),o=[];r.forEach(function(e){var t=i.indexOf(e);-1===t?o.push(e):i.splice(t,1)});i.forEach(function(e){var t=n.label({lid:e});a.merge(t)}),o.forEach(function(e){var t=n.unlabel({lid:e});a.merge(t)})}}),a.hasAdjust()?(ns.Model.get("labels").adjustCounters(a.getAdjust()),vow.resolve()):ns.forcedRequest(["labels"])}var u,l;e.t_lids&&(u=JSON.parse(e.t_lids)[0])&&!n.getLabelById(u)&&(i=!0),e.m_lids&&(l=JSON.parse(e.m_lids)[0])&&!n.getLabelById(l)&&(i=!0);var c;return c=i?ns.forcedRequest(["labels"]):vow.resolve(),c.then(function(){if(u&&r.length&&Daria.MOPS.doActionInMessages(r,t,{lid:u,onlyAdd:!0}),l&&o.length){var e=Daria.MOPS.doActionInMessages(o,t,{lid:l});if(!i){if(!e.hasAdjust())return ns.forcedRequest(["labels"]);ns.Model.get("labels").adjustCounters(e.getAdjust())}}return vow.resolve()})},Daria.Xiva.messageMove=function(e){var t=e.fid,i=JSON.parse(e.mids);if("-1"===t)return i.forEach(function(e){ns.Model.get("message",{ids:e}).remove()}),ns.forcedRequest(["folders","labels"]);for(var r=i.filter(function(e){return!ns.Model.get("message",{ids:e}).isValid()}),o=[ns.Model.get("folders"),ns.Model.get("labels")];r.length>0;)o.unshift(ns.Model.get("messages",{filter_ids:r.splice(-n)}));return ns.forcedRequest(o).then(function(){Daria.MOPS.doActionInMessages(i,"doMove",t)})},Daria.Xiva.messageStatusChange=function(e){var t=e.status,i="";switch(t){case"New":i="unmark";break;case"PL":i="markForwarded";break;case"OQ":i="markAnswered";break;case"RO":i="mark";break;default:return""===t&&"0"===e.is_mixed_add&&"32"===e.is_mixed_del?vow.resolve():vow.reject()}var r=JSON.parse(e.mids);if("markForwarded"===i||"markAnswered"===i)return Daria.MOPS.doActionInMessages(r,i),vow.resolve();var o=r.filter(function(e){return!ns.Model.get("message",{ids:e}).isValid()});Daria.MOPS.doActionInMessages(r,i);for(var s=[];o.length>0;)s.unshift(ns.Model.get("messages",{filter_ids:o.splice(-n)}));return ns.request(s).then(function(){var e="mark"===i?-1:1,t={};r.map(function(e){return ns.Model.get("message",{ids:e})}).forEach(function(n){var i=n.getFolderId();i in t?t[i]+=e:t[i]=e}),ns.Model.get("folders").adjustUnreadCounters(t)})},Daria.Xiva.processUnsupported=function(e){switch(e.operation){case"delayed_message":case"reset fresh":return vow.resolve();case"mark mails":case"unmark mails":return Daria.Xiva.messageLabel(e);case"move mails":return Daria.Xiva.messageMove(e);case"status change":return Daria.Xiva.messageStatusChange(e);case"transfer":return Daria.Xiva.handlers.transfer()}return vow.reject()},Daria.Xiva._getFoldersCounters=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.counters,n=void 0===t?[]:t,i=e.countersNew,r=void 0===i?[]:i,o={},s={},a=0;a<n.length;a+=2)o[n[a]]=n[a+1];for(var u=0;u<r.length;u+=2)s[r[u]]=r[u+1];return{countersHash:o,countersNewHash:s}},Daria.Xiva.updateFolderCounters=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Daria.Xiva._getFoldersCounters(t),i=n.countersHash,r=n.countersNewHash,o=ns.page.current.params.current_folder,s=e.getFolderId(),a=ns.Model.get("folder",{fid:s}),u=a.updateCounts({count:i[s]||0,new:r[s]||0});u&&u.new>0&&s!==o&&a.setRecent()},Daria.Xiva.updateLabelsCounters=function(e){var t=ns.Model.get("labels"),n={},i=e.get(".lid");Array.isArray(i)&&i.forEach(function(e){n[e]=1}),t.adjustCounters(n)}},function(e,t){Daria.Xiva.handlers={},Daria.Xiva.handlers.commonChecker=function(e){var t=parseInt(e.lcn,10);return!!Daria.Xiva.handlers.processNewLcn(t)&&("insert"===e.operation||Daria.Config.connection_id!==e.session_key)},Daria.Xiva.wentOfflineTime=null,window.addEventListener("offline",function(){return Daria.Xiva.wentOfflineTime=Date.now()}),Daria.Xiva.handlers.processNewLcn=function(e){var t,n=Daria.lcn,i=Boolean(Daria.Xiva.wentOfflineTime);return Daria.Xiva.wentOfflineTime=null,i&&e!==n?t="xiva.lcn_changed_after_offline":n&&e-n>10&&(t="xiva.invalid_lcn"),t?(Jane.ErrorLog.send({event:t,diff:e-n,newLcn:e,oldLcn:n}),Daria.lcn=e,Daria.invalidateMailHandlers(!1,t),!1):((!n||e>n)&&(Daria.lcn=e),!0)},Daria.Xiva.handlers.insert=function(e){return Daria.Xiva.handlers.commonChecker(e)?(ns.events.trigger("xiva.mail.insert",e),Daria.Xiva.NewMsgQueue.process(e)):vow.reject()},Daria.Xiva.handlers.transfer=function(){return Daria.goHomePage(),vow.resolve()},Daria.Xiva.handlers.unsupported=function(e){if(!Daria.Xiva.handlers.commonChecker(e))return vow.reject();Daria.gotNewMail=0,Daria.updateTitle();var t;t=e.raw_data&&"transfer"===e.raw_data.operation?e.raw_data:e.message;var n=Daria.Xiva.processUnsupported(t);return n.then(null,function(){Jane.ErrorLog.send({event:"xiva.mail.unsupported.unhandled",data:JSON.stringify(e)})}),n}},function(e,t){!function(e,t){t.Xiva.NewMsgQueue={},t.Xiva.NewMsgQueue.process=function(e){return t.Xiva.NewMsgQueue.processData(e).then(t.Xiva.NewMsgQueue.insertMessage)},t.Xiva.NewMsgQueue.processData=function(t){return new vow.Promise(function(n,i){var r=t.message,o=t.raw_data,s=r.mid,a="t"+r.thread_id,u=ns.Model.get("message",{ids:s});if(u.isValid())return void i("KNOWN_MESSAGE");var l=u;if(ns.Model.get("settings").isThreaded()){ns.Model.get("message",{ids:a}).hasRealData()||(l=ns.Model.get("messages",{thread_id:a}))}ns.forcedRequest([l]).then(function(){u.getData()?n({mMessage:u,rawData:o}):(e.ErrorLog.send({mid:s,tid:a},"empty_msg_data_after_request_thread"),i("REQUEST_DATA_ERROR"))},function(){i("REQUEST_ERROR")})})},t.Xiva.NewMsgQueue.insertMessage=function(e){var n=e.mMessage,i=e.rawData;t.Xiva.updateFolderCounters(n,i),t.Xiva.updateLabelsCounters(n);var r=t.Xiva.NewMsgQueue.updateLists(n);return t.Xiva.NewMsgQueue.notify(n,r),t.Xiva.NewMsgQueue.clearMessagesCache(),t.updateTitle(),vow.resolve()},t.Xiva.NewMsgQueue.clearMessagesCache=function(){t.messages.clearSearchCache(),ns.Model.invalidateAll(["message-nearest","message-thread-nearest"])},t.Xiva.NewMsgQueue.updateLists=function(e){var n=[],i=e.getFolderId();if(e.inFolderBySymbol(["archive","draft","spam","template","trash"]))return n.push(t.Xiva.NewMsgQueue._updateList({current_folder:i},e)),n;var r=t.Xiva.NewMsgQueue.updateThreadModels(e);return n.push(t.Xiva.NewMsgQueue._updateList({current_folder:i,threaded:"yes"},r.insert,r.replace)),n.push(t.Xiva.NewMsgQueue._updateList({current_folder:i},e)),e.get(".lid").forEach(function(i){n.push(t.Xiva.NewMsgQueue._updateList({current_label:i},e))}),e.hasAttachment()&&n.push(t.Xiva.NewMsgQueue._updateList({goto:"all",extra_cond:"only_atta"},e)),e.isNew()&&n.push(t.Xiva.NewMsgQueue._updateList({current_folder:i,extra_cond:"only_new"},e),t.Xiva.NewMsgQueue._updateList({goto:"all",extra_cond:"only_new",unread:"unread"},e)),n},t.Xiva.NewMsgQueue.updateThreadModels=function(n){var i=n.getThreadId(),r=ns.Model.get("message",{ids:i}),o=ns.Model.get("messages",{thread_id:i});if(r.hasRealData())return r.updateThreadInfo(n),o.insertMessage(n),{insert:r,replace:r};if(ns.Model.get("settings").isThreaded()){o.insertMessage(n);if(t.messages.toCreateThread(n)){var s=o.getCount(),a=o.models.indexOf(n),u=o.models[a+1]||n,l=o.models[a+1];u.getData()||!l||l.getData()||e.ErrorLog.send({tid:i,mid:n.get(".mid")},"empty_msg_data_in_messages_thread_model");var c=o.getUnreadCount();return n.isNew()&&(c-=1),t.Xiva.createThreadFromMessage(u,r,s-1,c),r.updateThreadInfo(n),{insert:r,replace:r}}}return{insert:n,replace:n}},t.Xiva.NewMsgQueue._updateList=function(e,t,n){var i=ns.Model.get("messages",e);return i.insertMessage(t,n),i},t.Xiva.NewMsgQueue.notify=function(e,n){t.Xiva.NewMsgQueue.shouldPreventAnyNotifications(e)||(t.Xiva.NewMsgQueue.updateFaviconCounter(e.getFolderId()),t.Xiva.NewMsgQueue.shouldPreventPopupNotifications()||(t.Xiva.NewMsgQueue.playSound(),t.Xiva.NewMsgQueue.preloadMessage(e.get(".mid")),t.Xiva.NewMsgQueue.toShowNotification(n)&&t.Xiva.NewMsgQueue.showNotification(e)))},t.Xiva.NewMsgQueue.shouldPreventPopupNotifications=function(){return t.isComposePage()||ns.Model.get("quick-reply-state").existOpenQR()},t.Xiva.NewMsgQueue.shouldPreventAnyNotifications=function(e){var t=["draft","outbox","sent","spam","template","trash","unsubscribe"],n=e.inFolderBySymbol(t),i=!e.isNew();return n||i},t.Xiva.NewMsgQueue.updateFaviconCounter=function(e){var n=ns.page.current.params,i=ns.page.current.page,r=ns.Model.get("folders");if(t.IS_CORP&&"messages"===i){var o=e===n.current_folder,s=r.isFolder(e,"inbox");t.gotNewMail+=o||s?1:0}else if(t.IS_CORP&&"message"===i){var a=ns.Model.get("message",{ids:n.ids}).getData().fid,u=e===a,l=r.isFolder(e,"inbox");t.gotNewMail+=u||l?1:0}else t.gotNewMail+=1;t.gotNewMail+=ns.Model.get("user-dropdown-data").getFreshForDefault()},t.Xiva.NewMsgQueue.playSound=function(){ns.Model.get("settings").getSetting("sound_message")&&"1"!==t.getCookie("sound_message_playing")&&(t.setCookie("sound_message_playing","1"),ns.action.run("sound.message"),setTimeout(function(){t.delCookie("sound_message_playing")},1e3))},t.Xiva.NewMsgQueue.preloadMessage=function(e){t.messages.preload([{mid:e}])},t.Xiva.NewMsgQueue.toShowNotification=function(e){if(!ns.Model.get("settings").getSign("notify_message"))return!1;if("messages"!==ns.page.current.page)return!0;var n=t.Xiva.NewMsgQueue._getCurrentMessages();return!_.includes(e,n)},t.Xiva.NewMsgQueue._getCurrentMessages=function(){var e,t=ns.page.current.params;return t.current_folder&&t.thread_id&&(e=_.clone(t),delete t.thread_id),ns.Model.get("messages",e||t)},t.Xiva.NewMsgQueue.showNotification=function(e){t.Xiva.NewMsgQueue.showNotificationMessage(e)},t.Xiva.NewMsgQueue.showNotificationCalendarEvent=function(e){var n=e.get(".mid");return ns.request("message-widget-events",{ids:n}).then(function(e){var t=e[0],n=t.get(".eventInfo"),i={type:"calendar",name:n.name,location:n.location,start:n.start,end:n.end};"event_update"===n.calendarMailType?i.label="updated":n.isCancelled&&(i.label="canceled"),ns.Model.get("notifications").addNotification(i)},function(){t.Xiva.NewMsgQueue.showNotificationMessage(e)})},t.Xiva.NewMsgQueue.showNotificationMessage=function(e){var t=e.get(".mid"),n=e.getFolderId(),i=e.getFromEmail(),r=ns.router.generateUrl("message",{current_folder:n,ids:t,fromNotification:1});ns.Model.get("notifications").addNotification({type:"message",subject:e.getSubject(),email:i,firstline:e.getFirstline(),name:e.getFromName(),ref:e.getEmailRef(i),url:r})}}(Jane,Daria)},function(e,t){!function(e,t){function n(e,n){if(_.has(e,"message.fresh_count")){var i=Number(e.message.fresh_count||0);n?i&&ns.Model.get("head-user-state").setNewLettersInMA(!0):i&&ns.Model.get("head-user-state").setNewLettersInMA(!1);var r=ns.Model.get("user-dropdown-data");r.setNewCountById(e.uid,i),t.gotNewMail+=r.getFreshForDefault(),t.updateTitle()}}ns.events.on("xiva.mail.multi.insert",function(e,t){n(t,!0)}),ns.events.on("xiva.mail.multi.update",function(e,t){n(t)}),t.IS_CORP&&ns.events.on("xiva.calendar.meeting-reminder",function(e,t){ns.Model.get("settings").isSet("i_can_care_of_myself")||ns.Model.get("notifications").addNotification({type:"calendar",label:"reminder",name:t.message.subject,location:t.message.location,vip:!0})})}(Jane,Daria)},function(e,t,n){n(1123),n(1124),n(1125),n(1126),n(1127),n(1128),n(1129),n(1130),n(1131),n(1132),n(1133),n(1134),n(1135),n(1136),n(1137)},function(e,t){ns.action.define("attachments.image-preview",function(e,t,n,i){i.preventDefault(),i.stopPropagation(),Jane.c("Просмотрщик картинок","Открытие"),ns.request(["module-message"]).then(function(){Daria.ImageViewer.open(t.mode,t.mid,t.hid,t["message-hid"])})}),ns.action.define("attachments.count-click",function(){var e=-1!==$.inArray("59",Daria.SIDS)&&!Daria.IS_CORP;return Jane.c("Кнопка Прикрепить",e?"Клик по Прикрепить с Диском":"Клик по Прикрепить без Диска"),!0})},function(e,t){!function(){var e="Статуслайн для фильтров",t="statusline-create-filter-on-message-move";ns.action.define("message.filter-move.show",function(n,i){var r=i.mid,o=i.fid,s=ns.Model.get("folders"),a=ns.Model.get("settings"),u=ns.Model.get("message",{ids:r});if(!a.isSet("disable_move_filter")){var l=s.getFolderById(o).name,c=u.getFromEmail(),d={mid:r,fid:o,from:c,folder:l};Daria.Statusline.hide(),Daria.Statusline.show({name:"create_filter",body:Jane.tt("mail:"+t,d),size:"m",onClose:function(){Jane.c(e,"Шаг 1","Крестик")},params:{mid:r,fid:o,message:i18n("%Statusline_create_filter_on_message_move",c,l),moveButtonText:i18n("%Statusline_create_filter_on_message_move_button"),cancelButtonText:i18n("%Statusline_create_filter_on_message_move_cancel")}}),Jane.c(e,"Шаг 1","Показ")}}),ns.action.define("message.filter-move.create",function(n,i){Jane.Services.runModules(["setup.js"],function(){var n=ns.Model.get("message",{ids:i.mid}),r=n.getFromEmail();Daria.FilterSimpleCreate({validate:no.True,params:{letter:"all",name:i18n("%Setup_Filters_default_rule_name"),logic:1,field1:"from",field2:1,field3:r,clicker:"move",move_folder:i.fid},success:function(n){var o={mid:i.mid,from:r,filid:n,newsearch:!0};Daria.Statusline.show({name:"apply_filter",body:Jane.tt("mail:"+t+"-done",o),size:"m",params:{filid:n,message:i18n("%Statusline_create_filter_on_message_move_done",r),editButtonText:i18n("%Statusline_create_filter_on_message_move_done_change"),moveButtonText:i18n("%Statusline_create_filter_on_message_move_done_button")},onClose:function(){Jane.c(e,"Шаг 2","Крестик")}}),Jane.c(e,"Шаг 2","Показ")}}).create(),Jane.c(e,"Шаг 1","Перекладывать")}),Jane.c("Нотификации","Функциональные нотификации","create_filter","Клик",'Клик в "Перекладывать"')}),ns.action.define("message.filter-move.apply",function(t,n){Jane.Services.runModules(["setup.js"],function(){ns.forcedRequest(["filters-apply"],{id:n.filid}).then(function(t){t[0].error||(Daria.Statusline.show({name:"filter_applied",body:i18n("%Statusline_create_filter_on_message_move_done_applied"),onClose:function(){Jane.c(e,"Шаг 3","Крестик")}}),Jane.c(e,"Шаг 3","Показ"))}),Jane.c(e,"Шаг 2","Переложить")}),Jane.c("Нотификации","Функциональные нотификации","apply_filter","Клик",'Клик в "Переложить"')}),ns.action.define("message.filter-move.edit",function(t,n){ns.page.go("#setup/filters-create?id="+n.filid),Jane.c(e,"Шаг 2","Изменить правило"),Jane.c("Нотификации","Функциональные нотификации","apply_filter","Клик",'Клик в "Изменить правило"')}),ns.action.define("message.filter-move.disable",function(){ns.Model.get("settings").setSettingOn("disable_move_filter"),Daria.Statusline.hide("create_filter"),Jane.c(e,"Шаг 1","Не предлагать"),Jane.c("Нотификации","Функциональные нотификации","create_filter","Клик",'Клик в "Больше не предлагать"')})}()},function(e,t){ns.action.define("folder.remove",function(e,t){Jane.Services.run("#setup",function(){Daria.Folder.remove(t.id)})})},function(e,t){ns.action.define("folder.edit",function(e,t){Jane.Services.run("#setup",function(){var e=Daria.FolderEditPopup({id:t.id});$.extend(e,{success:function(){t["only-edit"]&&ns.page.go()}}),e.init()})})},function(e,t){ns.action.define("folder.clear",function(e,t,n,i){var r=t.fid;t.onTarget&&i.currentTarget&&(t.targetOffset=$(i.currentTarget).offset().top+$(i.currentTarget).height()/2-$(window).scrollTop()),"extended"!==t.type||ns.Model.get("folders").isFolder(r,["trash"])?t.template="<p>"+i18n("%Folders_Clear_Text")+"</p>":t.template=$(Jane.tt("setup:js-setup-folders-dialog-folder-exclear")),Jane.Services.runModules(["setup.js"],function(){var e=Daria.FolderClearPopup(t);_.extend(e,{onsuccess:function(){var e=ns.page.refresh();Daria.is3pane()&&t.fid===ns.page.current.params.current_folder&&(e=e.then(function(){var e=0===ns.Model.get("messages",ns.page.current.params).getCount();ns.events.trigger("mail:splitter:toggleOnePaneMode",e)})),e.then(function(){ns.events.trigger("folder.cleared",t.fid)})}}),e.init()})})},function(e,t){ns.action.define("folders.add",function(e,t,n,i){Jane.Services.run("#setup",function(){var e=Daria.FolderCreatePopup(t);$.extend(e,{success:function(e){if(t["only-create"])return void ns.page.go();t.mMessagesChecked?(t.fid=e,t.mMessagesChecked.runAction("move",t)):ns.action.run("move",{fid:e,toolbar:t.toolbar},null,i)}}),e.init()})})},function(e,t){ns.action.define("generate-oauth-token",function(e,t){var n={"google-oauth2":"https://mail.google.com/","mailru-o2-mail":"mail.imap",microsoft:"wl.imap wl.offline_access"}[t.application],i=$.param({application:t.application,consumer:"mail",display:"popup",force_prompt:1,place:"query",retpath:location.origin+Daria.api["oauth-token"]+"?"+$.param(t),return_brief_profile:1,scope:n}),r=["directories=0","height=420","left=100","location=0","menubar=0","resizable=1","scrollbars=yes","status=0","toolbar=0","top=100","width=440"].join(", ");window.open(Daria.Config["social-host"]+"/broker2/start?"+i,"",r)})},function(e,t){ns.action.define("label.remove",function(e,t){Jane.Services.run("#setup",function(){Daria.Label.remove(t.id)})})},function(e,t){ns.action.define("label.edit",function(e,t){Jane.Services.run("#setup",function(){var e=Daria.LabelEditPopup({id:t.id});$.extend(e,{success:function(){t["only-edit"]&&ns.page.go()}}),e.init()})})},function(e,t){function n(e,t){Jane.Services.run("#setup",function(){var e=Daria.LabelCreatePopup(t);$.extend(e,{success:function(e){var n=ns.page.current.page;"setup"!==n&&"done"!==n&&("only-create"in t?ns.events.trigger("daria:vLabels:update"):_.isFunction(t.onLabelCreated)?t.onLabelCreated(e):ns.action.run("label",{current_label:e,"message-id":t["message-id"],contextMenu:t.contextMenu,isNeedDeselect:t.isNeedDeselect}))}}),"promo"in t&&ns.Model.get("settings").setSettingOn("no-labels-promo"),e.init()})}ns.action.define("labels.add",n)},function(e,t){ns.action.define("label",function(e,t,n){t.current_label=t.current_label||t.lid,t._viewKey=$(n).closest(".ns-view-message").attr("data-key"),ns.events.trigger("daria:vToolbarButton:"+e,t)}),ns.action.copy("label","unlabel")},function(e,t){ns.action.define("move",function(e,t){t.refreshImmediately=!0,ns.events.trigger("daria:vToolbarButton:move",t)})},function(e,t){!function(){function e(){return parseInt(ns.Model.get("settings").getSetting("reply-promo-cnt"),10)||0}function t(){["messages","message-nearest","message-thread-nearest","abook-contacts","abook-contact","folders"].forEach(function(e){ns.Model.invalidate(e)});var e=ns.page.current.params,t=ns.Model.get("folders");ns.Model.isDefined("messages-pager")&&(ns.Model.get("messages-pager",e).invalidate(),ns.Model.get("messages-pager",{current_folder:t.getFidBySymbol("sent")}).invalidate())}function n(e){if(e.error)return void this.reject(e.error);switch(e.status){case"ok":t(),this.resolve();break;case"attachment_too_big":this.reject(31);break;default:this.reject()}}function i(e,t){var i=$.Deferred(),r=[{id:"folders"},{id:"message",params:{ids:e}},{id:"message",params:{ids:t}},{id:"message-body",params:{ids:e}},{id:"message-body",params:{ids:t}}];return ns.request(r).then(function(r){var o=r[0],s=r[1],a=r[2],u=r[3],l=r[4];if(!s.getData()||!u.getData())return void i.reject(-1);if(!a||!l)return void i.reject();var c=o.getFidBySymbol("template"),d=s.getFolderId();if(!c||!d||d!==c)return void i.reject(-1);var f=a.getFolderId(),p=f?o.getFolderById(f):null;if(!f||!p||!o.isFolder(f,"inbox")&&!p.user)return void i.reject();var h=ns.Model.get("settings"),m=u.getComposeHTML(),g=l.getSubtype(),v=l.getReplyBody(g),b=l.getRecipients(!0),y=l.getMessageId(),w=l.getInReplyTo(),S=l.getReferences();"plain"===g&&(m=Daria.Html2Text.html2text(m)),v=m+v;var k={mark_ids:t,overwrite:t,ign_overwrite:"yes",mark_as:"replied",references:$.trim((S||w)+" "+y),inreplyto:y,ttype:g,from_mailbox:a.getToEmail()||h.getSetting("default_email"),from_name:h.getSetting("from_name"),to:b.to,cc:b.cc,bcc:"",subj:"Re: "+a.getSubject(!0),send:v},C=u.getAttachments();if(C&&C.length>0){var M=[],D=[];_.filter(C).forEach(function(t){t.narod?D.push(Daria.utils.getNarodHTML({narodUrl:t.unsafeUrl,previewSrc:t["preview-src"],name:t.name,size:t.size,folder:t.folder})):M.push({mid:e,hid:t.hid})}),k.parts_json=M.length?JSON.stringify(M):"",k.narod_att=D.length?D.join(""):""}Daria.SendMail.send({params:k,success:function(e){n.call(i,e),i.then(function(){ns.page.go()})},error:function(){i.reject()}})}).fail(function(){var t=ns.Model.get("message",{ids:e}),n=ns.Model.get("message-body",{ids:e});if(!t.getData()||!n.getData())return void i.reject(-1);i.reject()}),i.promise()}function r(e,t){var i=$.Deferred();return ns.request(["message","message-body"],{ids:t}).then(function(r){if(2!==r.length)return void i.reject();var o=r[0],s=r[1],a=ns.Model.get("settings"),u=s.getComposeHTML(),l=s.getSubtype();"plain"===l&&(u=Daria.Html2Text.html2text(u));var c=$.map(s.getAttachments(t),function(e){return"message"===e.type?e.hid:null}),d={ids:t,ttype:l,overwrite:t,ign_overwrite:"yes",from_mailbox:o.getToEmail(t)||a.getSetting("default_email"),from_name:a.getSetting("from_name"),to:e,cc:"",bcc:"",subj:"Fwd: "+o.getSubject(!0),send:u,inreplyto:s.getMessageId(t),references:"",mark_as:"forwarded",mark_ids:t,parts:c};Daria.SendMail.send({params:d,success:function(e){n.call(i,e),i.then(function(){ns.page.go().then(function(){ns.events.trigger("daria:Message:check",t)})})},error:function(){i.reject()}})}),i.promise()}function o(){var e=function(){Daria.Statusline.show({name:"sending_message",hideOnTimeout:!1,shouldSkipAnimation:!0,body:i18n("%Compose_Письмо_отправляется")})};return Daria.hasExperiment("84636")?Daria.SendMail.showSendingMessageProgress({onResolve:e}):(e(),vow.resolve())}var s=function(e){Jane.c(["Ответить всем","Паранжа"].concat(e))};ns.action.define("reply",function(t,n,s,a){n.action=t;var u,l=ns.Model.get("settings");if(n["message-id"])u={ids:[n["message-id"]],tids:[]};else{var c=n.mMessagesChecked;ns.assert(c,"params.mMessagesChecked","%s not passed to ns.action reply");if(!c.getCount())return;u=c.getIds()}if(0===u.ids.length&&1===u.tids.length){var d=u.tids[0],f=ns.Model.get("message",{ids:d});if(f.isMessageThread())u.tids=[],u.ids=[f.getMessageThreadMid()];else if("forward"!==t){var p=f.getThreadMessages().getLastReplyMessage();p&&(u.tids=[],u.ids=[p.get(".mid")])}}var h=1===u.ids.length&&0===u.tids.length?u.ids[0]:null;if(h){var m=ns.Model.get("message-body",{ids:h});if(m.isCollectorMessage())return;if("reply"===t&&n.toolbar&&m.allowedReplyAll()&&!$("html").hasClass("b-page_reply-promo")&&Daria.is2pane()&&!l.getSetting("force-reply"))return void ns.action.run("reply.confirm",n,s,a)}var g=e();"reply"===t&&!n.toolbar&&g<2&&(g+=1,l.setSettings({"reply-promo-cnt":g})),"reply-all"===t&&!n.toolbar&&g<2&&l.setSettings({"reply-promo-cnt":0});var v;if("sendon"===t&&n.toolbar){if(!(v=n.email))return void Daria.Statusline.show({name:"message_sendon",speed:"fast",body:i18n("%Message_Sendon_Msg_Error")});if(h)return void o().then(function(){r(v,h).done(function(){Daria.Statusline.show({name:"message_sent",body:i18n("%Compose_Письмо_отправлено"),shouldSkipAnimation:!0,timeout:Daria.hasFeature("react-statusline")?3e3:5e3})}).fail(function(e){var t={name:"message_sending_failed",body:i18n("%Feedback_Error_Msg")};switch(e){case 31:t={name:"too_big_attachment",body:i18n("%_Compose_attachment_too_big_custom",Daria.Constants.MAX_MESSAGES_TO_FORWARD,Daria.Constants.MAX_TOTAL_SIZE_OF_ATTACHMENTS),params:{maxCount:Daria.Constants.MAX_MESSAGES_TO_FORWARD,maxSize:Daria.Constants.MAX_TOTAL_SIZE_OF_ATTACHMENTS}}}Daria.Statusline.show(t)}).always(function(){Daria.Statusline.hide("sending_message"),ns.events.trigger("daria:MOPS:action-complete",n),ns.events.trigger("daria:MOPS:"+t,n),ns.events.trigger("message.action.complete",n),ns.events.trigger("daria:vToolbarButton:loader:end")})},_.noop);t="forward"}if("reply-tmpl"===t&&n.toolbar){var b=n.tmpl;return b?h?void o().then(function(){i(b,h).done(function(){Daria.Statusline.show({name:"message_sent",body:i18n("%Compose_Письмо_отправлено"),shouldSkipAnimation:!0,timeout:Daria.hasFeature("react-statusline")?3e3:5e3})}).fail(function(e){var t={name:"message_sending_failed",body:i18n("%Feedback_Error_Msg")};switch(e){case-1:t={name:"template_not_found",body:i18n("%Message_Template_NotFound",b),params:{template:b}};break;case 31:t={name:"too_big_attachment",body:i18n("%_Compose_attachment_too_big_custom",Daria.Constants.MAX_MESSAGES_TO_FORWARD,Daria.Constants.MAX_TOTAL_SIZE_OF_ATTACHMENTS),params:{maxCount:Daria.Constants.MAX_MESSAGES_TO_FORWARD,maxSize:Daria.Constants.MAX_TOTAL_SIZE_OF_ATTACHMENTS}}}Daria.Statusline.show(t)}).always(function(){Daria.Statusline.hide("sending_message"),ns.events.trigger("daria:MOPS:action-complete",n),ns.events.trigger("daria:MOPS:"+t,n),ns.events.trigger("message.action.complete",n),ns.events.trigger("daria:vToolbarButton:loader:end")})},_.noop):void Daria.Statusline.show({name:"only_reply_to_one_email",speed:"fast",body:i18n("%Message_ReplyTmpl_Msg_Error2")}):void Daria.Statusline.show({name:"missing_template",speed:"fast",body:i18n("%Message_ReplyTmpl_Msg_Error")})}var y={oper:t};u.ids.length&&(y.ids=u.ids),u.tids.length&&(y.tids=u.tids),n.translate&&(y.translate=n.translate),v&&ns.Model.get("compose-predefined-data").set(".to",v),Daria.composeGo(y).then(function(){v&&ns.Model.get("compose-state",ns.View.info("compose2").params()).setFocusField("subj")}),ns.events.trigger("daria:MOPS:action-complete",n),ns.events.trigger("daria:MOPS:"+t,n),ns.events.trigger("message.action.complete",n),ns.events.trigger("daria:vToolbarButton:loader:end")}),ns.action.copy("reply","forward"),ns.action.copy("reply","reply-all"),ns.action.copy("reply","sendon"),ns.action.copy("reply","reply-tmpl"),ns.action.define("reply.confirm",function(t,n){var i=ns.Model.get("settings"),r=e(),o=n.mMessagesChecked.getIds(),a=n.mMessagesChecked.isOnlyMessageChecked()?o.ids[0]:null;if(a){var u,l,c=function(){this.close()},d={body:Jane.tt("message:reply-confirm-dialog",{mid:a,participants:ns.Model.get("message-body",{ids:a}).participantsCount()+1,prevent:r>=2}),additionalClass:"b-toolbar__popup",onopen:function(e){c=c.bind(e),ns.events.on("ns-page-before-changed",c)},oncancel:function(){i.setSettings({"reply-promo-cnt":r+1})},onclose:function(){ns.events.off("ns-page-before-changed",c),f.$paranja.addClass("g-hidden").removeClass("b-paranja_fadeout"),l&&$("HTML").removeClass("b-page_reply-promo")},width:400,hideOnScroll:!0};n.buttonView&&(l=n.buttonView.$node,u=l.offset(),u.top+=l.height()-$(window).scrollTop(),u.left+=l.outerWidth()+1,$.extend(d,{onTarget:{x:u.left,y:u.top,side:"top",pos:"bottom"}}));var f=Daria.Dialog.open(d);i.setSettings({"hk-reply-promo":"on"}),s("Показы"),l&&$("HTML").addClass("b-page_reply-promo"),f.$paranja.removeClass("g-hidden b-paranja_transparent").addClass("b-paranja_fadeout")}}),ns.action.define("reply.not-ask",function(e,t,n,i){var r={event:i,params:t},o=nb.block(r.event.currentTarget);return window.setTimeout(function(){ns.Model.get("settings").setSettings({"force-reply":o.isChecked()}),s("Проставлено галочек")},1),!0})}()},function(e,t){!function(e){function t(e){var t=new Vow.Promise;return Daria.loadPromoModule(function(){var n=ns.View.create("user-feedback");n.updateWithParams(e).then(function(){t.fulfill(n)})}),t}ns.action.define("user-feedback.show",function(n,i,r,o){var s={event:o,params:i};s.event&&s.event.preventDefault();var a=$.extend({canAttachEml:Boolean(ns.page.current.params.ids),canTakeScreenshot:Modernizr.blobconsructor},s.params);a.onlyReport&&(a.report=!0),a.report?e.c("ФОС","Шаг 4","Показ шага"):e.c("ФОС",'Клик по ссылке "Обратная связь"'),t(a).then(function(t){Daria.Dialog.open({body:t.node,title:i18n("%Feedback_form_title"),additionalClass:"feedback-form"+(a.report?" feedback-form_report":""),width:570,onopen:function(t){a.report||e.c("ФОС","Шаг 1","Показ блока"),a.report?t.$dialog.data("step",4):t.$dialog.data("step",1)},oncancel:function(t){e.c("ФОС","Шаг "+t.$dialog.data("step"),"Клик на крестик ")},onclose:function(){Daria.Dialog.$dialog.removeClass("feedback-no-header"),t.destroy()}})})}),ns.action.copy("user-feedback.show","translate.feedback")}(Jane)},function(e,t){ns.action.define("fix-empty-image",function(e,t,n){Daria.Page.fixEmptyImage(n,t.type)})},function(e,t,n){var i=n(318),r=n(242);i.scope("file-icon-svg",n(1139)),i.scope("file-icon-png",Object.assign({},n(1238),n(1249),n(1299))),i.scope("collector-icon",n(1349)),i.scope("lang-icon",n(1363)),i.scope("social-icon",n(1375)),i.scope("promo-mobile",n(1380)),i.scope("theme-thumb",n(1405)),i.scope("welcome-wizard",n(1467)),i.default(function(e,t){return Jane.ErrorLog.send({errorType:"missed-image-link",scope:e,link:t}),r})},function(e,t,n){e.exports={ai:n(1140),ai_small:n(1141),application:n(1142),application_small:n(1143),archive:n(1144),archive_small:n(1145),audio:n(1146),audio_small:n(1147),avi:n(1148),avi_small:n(1149),bmp:n(1150),bmp_small:n(1151),book:n(1152),book_small:n(1153),cdr:n(1154),cdr_small:n(1155),csv:n(1156),csv_small:n(1157),development:n(1158),development_small:n(1159),djvu:n(1160),djvu_small:n(1161),doc:n(1162),doc_small:n(1163),eml:n(1164),eml_small:n(1165),exe:n(1166),exe_small:n(1167),executable:n(1168),executable_small:n(1169),flash:n(1170),flash_small:n(1171),font:n(1172),font_small:n(1173),general:n(1174),general_small:n(1175),gif:n(1176),gif_small:n(1177),image:n(1178),image_small:n(1179),jpg:n(1180),jpg_small:n(1181),mail:n(1182),mail_small:n(1183),mov:n(1184),mov_small:n(1185),mp3:n(1186),mp3_small:n(1187),mp4:n(1188),mp4_small:n(1189),none:n(1190),none_small:n(1191),odp:n(1192),odp_small:n(1193),ods:n(1194),ods_small:n(1195),odt:n(1196),odt_small:n(1197),pcx:n(1198),pcx_small:n(1199),pdf:n(1200),pdf_small:n(1201),pls:n(1202),pls_small:n(1203),png:n(1204),png_small:n(1205),ppt:n(1206),ppt_small:n(1207),psd:n(1208),psd_small:n(1209),rar:n(1210),rar_small:n(1211),rtf:n(1212),rtf_small:n(1213),script:n(1214),script_small:n(1215),srt:n(1216),srt_small:n(1217),text:n(1218),text_small:n(1219),tiff:n(1220),tiff_small:n(1221),txt:n(1222),txt_small:n(1223),video:n(1224),video_small:n(1225),virus:n(1226),virus_small:n(1227),wav:n(1228),wav_small:n(1229),wma:n(1230),wma_small:n(1231),wmv:n(1232),wmv_small:n(1233),xls:n(1234),xls_small:n(1235),zip:n(1236),zip_small:n(1237)}},function(e,t,n){e.exports=n.p+"_/fd4c49b3061a59c52d4b418ed3d4ca8d-icon_file_ai.svg"},function(e,t,n){e.exports=n.p+"_/f48c196b35090778fcd477e08e7ee7e0-icon_file_ai_small.svg"},function(e,t,n){e.exports=n.p+"_/5691a76b925a9f4f24fdcefa0f40bc5a-icon_file_application.svg"},function(e,t,n){e.exports=n.p+"_/9dd6814e9b50df81cb5158e17ab3069a-icon_file_application_small.svg"},function(e,t,n){e.exports=n.p+"_/e1b9a3f82960aa508919fe237a05e938-icon_file_archive.svg"},function(e,t,n){e.exports=n.p+"_/e001ba25ace471c5669771848343c445-icon_file_archive_small.svg"},function(e,t,n){e.exports=n.p+"_/6042f4553f8d189c0d546f9ed73b1a4d-icon_file_audio.svg"},function(e,t,n){e.exports=n.p+"_/7346301b6c0640b47dfc5f35b2bca74c-icon_file_audio_small.svg"},function(e,t,n){e.exports=n.p+"_/8e514b0d28a91fd04eff9577404451a0-icon_file_avi.svg"},function(e,t,n){e.exports=n.p+"_/ba574cf82ae4b22942f26ccd41982aef-icon_file_avi_small.svg"},function(e,t,n){e.exports=n.p+"_/456a8e721cd77154a6699e7ab5655af5-icon_file_bmp.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_bmp_small.svg"},function(e,t,n){e.exports=n.p+"_/5d935a130b81cdfcabe3dbadfa48170a-icon_file_book.svg"},function(e,t,n){e.exports=n.p+"_/cb326122365bf8cd78a88e25e48caefb-icon_file_book_small.svg"},function(e,t,n){e.exports=n.p+"_/0291b4bf4b4bed1b3d56ecca41398618-icon_file_cdr.svg"},function(e,t,n){e.exports=n.p+"_/2c6f6f95cdccd161f2723b29acb732f4-icon_file_cdr_small.svg"},function(e,t,n){e.exports=n.p+"_/0d159a3403cd2f0efe68f73cc07289bf-icon_file_csv.svg"},function(e,t,n){e.exports=n.p+"_/457edf14c8a4f290b46eaf2b8ea632a1-icon_file_csv_small.svg"},function(e,t,n){e.exports=n.p+"_/3cc84b7817c7a861f187149ea20fe77a-icon_file_development.svg"},function(e,t,n){e.exports=n.p+"_/597c75ee183bf580072881f520bb45ff-icon_file_development_small.svg"},function(e,t,n){e.exports=n.p+"_/09363f31f78d4c871df33d35bb5b0c85-icon_file_djvu.svg"},function(e,t,n){e.exports=n.p+"_/ea531aff61a9f1a23c543b839bac6f6d-icon_file_djvu_small.svg"},function(e,t,n){e.exports=n.p+"_/84cda9a1db63ba0c0fb6e86fb244497b-icon_file_doc.svg"},function(e,t,n){e.exports=n.p+"_/8cbf23c524fd0c5f45d57c960c3b6070-icon_file_doc_small.svg"},function(e,t,n){e.exports=n.p+"_/26f49241e89761a2c82315832e31b9cb-icon_file_eml.svg"},function(e,t,n){e.exports=n.p+"_/5e420784f4ff111174c71fbee9f78d22-icon_file_eml_small.svg"},function(e,t,n){e.exports=n.p+"_/68fed1bb809c6626534a2a878afea58e-icon_file_exe.svg"},function(e,t,n){e.exports=n.p+"_/9dd6814e9b50df81cb5158e17ab3069a-icon_file_exe_small.svg"},function(e,t,n){e.exports=n.p+"_/5691a76b925a9f4f24fdcefa0f40bc5a-icon_file_executable.svg"},function(e,t,n){e.exports=n.p+"_/9dd6814e9b50df81cb5158e17ab3069a-icon_file_executable_small.svg"},function(e,t,n){e.exports=n.p+"_/e84256a31ce119f5270cc29d00ce112f-icon_file_flash.svg"},function(e,t,n){e.exports=n.p+"_/f718f32f7d223a305da6b06c4443f16a-icon_file_flash_small.svg"},function(e,t,n){e.exports=n.p+"_/71c442515253e2426d87d2b36987e58f-icon_file_font.svg"},function(e,t,n){e.exports=n.p+"_/acc2b80fc69c92a265e289e70c180b03-icon_file_font_small.svg"},function(e,t,n){e.exports=n.p+"_/6fa94aa8ec8a4b95e4c704142d48ea06-icon_file_general.svg"},function(e,t,n){e.exports=n.p+"_/1a28827c5c9284f36ffe64786a98958d-icon_file_general_small.svg"},function(e,t,n){e.exports=n.p+"_/4c62fa51e072aa2b518fe2a6d9bb7db8-icon_file_gif.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_gif_small.svg"},function(e,t,n){e.exports=n.p+"_/ae33662f545add06634646f8bfb3e589-icon_file_image.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_image_small.svg"},function(e,t,n){e.exports=n.p+"_/32ce8c6772ddda003a3a0852e3c94740-icon_file_jpg.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_jpg_small.svg"},function(e,t,n){e.exports=n.p+"_/8ebffe08a8974608d246d95b593c524a-icon_file_mail.svg"},function(e,t,n){e.exports=n.p+"_/5e420784f4ff111174c71fbee9f78d22-icon_file_mail_small.svg"},function(e,t,n){e.exports=n.p+"_/44dce83a726aaad585036067220e3914-icon_file_mov.svg"},function(e,t,n){e.exports=n.p+"_/617f846a624c99a7a16ef0569887e5d1-icon_file_mov_small.svg"},function(e,t,n){e.exports=n.p+"_/cb5e6bca945895b3afb0c80f434ff287-icon_file_mp3.svg"},function(e,t,n){e.exports=n.p+"_/7346301b6c0640b47dfc5f35b2bca74c-icon_file_mp3_small.svg"},function(e,t,n){e.exports=n.p+"_/651a574e29a9bd70e69a08aa35d465a4-icon_file_mp4.svg"},function(e,t,n){e.exports=n.p+"_/ba574cf82ae4b22942f26ccd41982aef-icon_file_mp4_small.svg"},function(e,t,n){e.exports=n.p+"_/73b9c0cf2d6199220f4bc2f6cf6e0310-icon_file_none.svg"},function(e,t,n){e.exports=n.p+"_/7a3ef1ba2a6c113d7179d418ddf6c734-icon_file_none_small.svg"},function(e,t,n){e.exports=n.p+"_/492af986844dd66c7c9c08faeaa261be-icon_file_odp.svg"},function(e,t,n){e.exports=n.p+"_/18e71b34cd05b4e251112c73bf72feee-icon_file_odp_small.svg"},function(e,t,n){e.exports=n.p+"_/a01de41907a6b40d2d5e833cff78bb95-icon_file_ods.svg"},function(e,t,n){e.exports=n.p+"_/6b6cb9ca67b2292a46b4887dc271df03-icon_file_ods_small.svg"},function(e,t,n){e.exports=n.p+"_/fe5ea288f8a12b89077a166baa72be67-icon_file_odt.svg"},function(e,t,n){e.exports=n.p+"_/7ce2f9213a303b0377153cff401c0866-icon_file_odt_small.svg"},function(e,t,n){e.exports=n.p+"_/3a56b52fcac35e27a41edc34c5bdf140-icon_file_pcx.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_pcx_small.svg"},function(e,t,n){e.exports=n.p+"_/63407042e1ac46ce84554920cb97a928-icon_file_pdf.svg"},function(e,t,n){e.exports=n.p+"_/6ace91f4a13ebbf531a5e5069350d460-icon_file_pdf_small.svg"},function(e,t,n){e.exports=n.p+"_/6042f4553f8d189c0d546f9ed73b1a4d-icon_file_pls.svg"},function(e,t,n){e.exports=n.p+"_/7346301b6c0640b47dfc5f35b2bca74c-icon_file_pls_small.svg"},function(e,t,n){e.exports=n.p+"_/dbe8f2ed099d49557498dc3aeb694704-icon_file_png.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_png_small.svg"},function(e,t,n){e.exports=n.p+"_/9d3097d2a75defd68f2224b4a76fd06e-icon_file_ppt.svg"},function(e,t,n){e.exports=n.p+"_/11df7044fad68811099fab9c78f8bc2b-icon_file_ppt_small.svg"},function(e,t,n){e.exports=n.p+"_/1f8f597c9f16a782c31b466838ed961a-icon_file_psd.svg"},function(e,t,n){e.exports=n.p+"_/a5b48c4594d78e5b8bd5120fb65205e6-icon_file_psd_small.svg"},function(e,t,n){e.exports=n.p+"_/545a441216bf5ee80228510904eb116e-icon_file_rar.svg"},function(e,t,n){e.exports=n.p+"_/e001ba25ace471c5669771848343c445-icon_file_rar_small.svg"},function(e,t,n){e.exports=n.p+"_/e63b78a5db4059aaee2b0a26c1e3391d-icon_file_rtf.svg"},function(e,t,n){e.exports=n.p+"_/7ce2f9213a303b0377153cff401c0866-icon_file_rtf_small.svg"},function(e,t,n){e.exports=n.p+"_/3cc84b7817c7a861f187149ea20fe77a-icon_file_script.svg"},function(e,t,n){e.exports=n.p+"_/597c75ee183bf580072881f520bb45ff-icon_file_script_small.svg"},function(e,t,n){e.exports=n.p+"_/18c4518b36edd61c4117de5697e34d9a-icon_file_srt.svg"},function(e,t,n){e.exports=n.p+"_/ba574cf82ae4b22942f26ccd41982aef-icon_file_srt_small.svg"},function(e,t,n){e.exports=n.p+"_/87f98559ca8423415305508060e154df-icon_file_text.svg"},function(e,t,n){e.exports=n.p+"_/7ce2f9213a303b0377153cff401c0866-icon_file_text_small.svg"},function(e,t,n){e.exports=n.p+"_/76f469d93774a8ee072e54a77d1316fb-icon_file_tiff.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_tiff_small.svg"},function(e,t,n){e.exports=n.p+"_/770496b1f8ba497f7932345b0fa99c51-icon_file_txt.svg"},function(e,t,n){e.exports=n.p+"_/7ce2f9213a303b0377153cff401c0866-icon_file_txt_small.svg"},function(e,t,n){e.exports=n.p+"_/625b0925dfad9ad67792f8713df2c64d-icon_file_video.svg"},function(e,t,n){e.exports=n.p+"_/ba574cf82ae4b22942f26ccd41982aef-icon_file_video_small.svg"},function(e,t,n){e.exports=n.p+"_/6ef89e854963e20536e4f8aa660df196-icon_file_virus.svg"},function(e,t,n){e.exports=n.p+"_/fd66b38f0fc39f598ef72d85a581214e-icon_file_virus_small.svg"},function(e,t,n){e.exports=n.p+"_/41c6f9b710d3e517f46aa0c35fee6730-icon_file_wav.svg"},function(e,t,n){e.exports=n.p+"_/7346301b6c0640b47dfc5f35b2bca74c-icon_file_wav_small.svg"},function(e,t,n){e.exports=n.p+"_/fd0cb8565e854638747298d38e12d7b4-icon_file_wma.svg"},function(e,t,n){e.exports=n.p+"_/7346301b6c0640b47dfc5f35b2bca74c-icon_file_wma_small.svg"},function(e,t,n){e.exports=n.p+"_/7ff1c6877301e0d2ee8cbb522fbfabad-icon_file_wmv.svg"},function(e,t,n){e.exports=n.p+"_/ba574cf82ae4b22942f26ccd41982aef-icon_file_wmv_small.svg"},function(e,t,n){e.exports=n.p+"_/16d7f1b1ec42dd5f43236136c52d40f4-icon_file_xls.svg"},function(e,t,n){e.exports=n.p+"_/beeb326ca3093a4cdf78631cf84d9777-icon_file_xls_small.svg"},function(e,t,n){e.exports=n.p+"_/7f653b60b459526c425e4e0a9d8ab1f4-icon_file_zip.svg"},function(e,t,n){e.exports=n.p+"_/e001ba25ace471c5669771848343c445-icon_file_zip_small.svg"},function(e,t,n){e.exports={"bigmail-48":n(1239),"blue-48":n(1240),"blue-al-48":n(1241),"blue-ar-48":n(1242),"camera-48":n(1243),"grey-48":n(1244),"narod-48":n(1245),"shared-foreign-48":n(1246),"shared-own-48":n(1247),"trash-48":n(1248)}},function(e,t,n){e.exports=n.p+"_/f091745b85a1b5a234262d98639f7977-b-mail-icon_bigmail-48.png"},function(e,t,n){e.exports=n.p+"_/fc6dedd3b3a5a8293ed040b648e45336-b-mail-icon_blue-48.png"},function(e,t,n){e.exports=n.p+"_/6d7e2b20aade0b9c2125ffdaba2f3879-b-mail-icon_blue-al-48.png"},function(e,t,n){e.exports=n.p+"_/85778cc2db9a7ac21ec2088b0e7576b3-b-mail-icon_blue-ar-48.png"},function(e,t,n){e.exports=n.p+"_/e3f41f309ccedf920fcf875c6859dc3f-b-mail-icon_camera-48.png"},function(e,t,n){e.exports=n.p+"_/9187087411a527777d76816620717fd3-b-mail-icon_grey-48.png"},function(e,t,n){e.exports=n.p+"_/0d93c6d7721c7992e63eb3d752498f8d-b-mail-icon_narod-48.png"},function(e,t,n){e.exports=n.p+"_/fa673c965dd4d8ea80f45948995212e5-b-mail-icon_shared-foreign-48.png"},function(e,t,n){e.exports=n.p+"_/dcdad2da9e9da84ebd34d544dd9713e8-b-mail-icon_shared-own-48.png"},function(e,t,n){e.exports=n.p+"_/f14d7be3bf0618dc524c5130570edfba-b-mail-icon_trash-48.png"},function(e,t,n){e.exports={"ai-48":n(1250),"application-48":n(1251),"archive-48":n(1252),"audio-48":n(1253),"avi-48":n(1254),"bmp-48":n(1255),"book-48":n(1256),"cdr-48":n(1257),"csv-48":n(1258),"development-48":n(1259),"djvu-48":n(1260),"doc-48":n(1261),"eml-48":n(1262),"exe-48":n(1263),"executable-48":n(1264),"flash-48":n(1265),"font-48":n(1266),"general-48":n(1267),"gif-48":n(1268),"image-48":n(1269),"jpg-48":n(1270),"mail-48":n(1271),"mov-48":n(1272),"mp3-48":n(1273),"mp4-48":n(1274),"none-48":n(1275),"odp-48":n(1276),"ods-48":n(1277),"odt-48":n(1278),"pcx-48":n(1279),"pdf-48":n(1280),"pls-48":n(1281),"png-48":n(1282),"ppt-48":n(1283),"psd-48":n(1284),"rar-48":n(1285),"rtf-48":n(1286),"script-48":n(1287),"srt-48":n(1288),"text-48":n(1289),"tiff-48":n(1290),"txt-48":n(1291),"video-48":n(1292),"virus-48":n(1293),"wav-48":n(1294),"wma-48":n(1295),"wmv-48":n(1296),"xls-48":n(1297),"zip-48":n(1298)}},function(e,t,n){e.exports=n.p+"_/4e385ef712d228d9bd5fbe4e830f697a-b-mail-icon_ai-48.png"},function(e,t,n){e.exports=n.p+"_/6bb25ffd9b943edee508ad9fbf206dde-b-mail-icon_application-48.png"},function(e,t,n){e.exports=n.p+"_/44c2a8cbb02c8be528236ad80e1c3749-b-mail-icon_archive-48.png"},function(e,t,n){e.exports=n.p+"_/5546dd99a85e195918ed35d203f00bd1-b-mail-icon_audio-48.png"},function(e,t,n){e.exports=n.p+"_/531db7f7386660dc96ed2480eea5e98d-b-mail-icon_avi-48.png"},function(e,t,n){e.exports=n.p+"_/e7828e1b92baaa31c9905542822c79d6-b-mail-icon_bmp-48.png"},function(e,t,n){e.exports=n.p+"_/8ed95b3dece205227bb9354a232d4e4e-b-mail-icon_book-48.png"},function(e,t,n){e.exports=n.p+"_/a125276886063d2dd348dbfa5d4ef608-b-mail-icon_cdr-48.png"},function(e,t,n){e.exports=n.p+"_/8a101e1a660d145ef0542dfeac76da22-b-mail-icon_csv-48.png"},function(e,t,n){e.exports=n.p+"_/5893a07f075b0984d0c5a8287265054e-b-mail-icon_development-48.png"},function(e,t,n){e.exports=n.p+"_/f1610434d25a0845ef89e10af2ca09e9-b-mail-icon_djvu-48.png"},function(e,t,n){e.exports=n.p+"_/50b19213ee10e722bd0f0dfe6b45abfb-b-mail-icon_doc-48.png"},function(e,t,n){e.exports=n.p+"_/f3093a6d0374ed1eb1aac797961641b0-b-mail-icon_eml-48.png"},function(e,t,n){e.exports=n.p+"_/deda913cb7b171cd185ee662287e3a99-b-mail-icon_exe-48.png"},function(e,t,n){e.exports=n.p+"_/6bb25ffd9b943edee508ad9fbf206dde-b-mail-icon_executable-48.png"},function(e,t,n){e.exports=n.p+"_/f56d2249fc66d6e045d9e47209b0d74c-b-mail-icon_flash-48.png"},function(e,t,n){e.exports=n.p+"_/75702f8ffcf90cb4a8c265f912bb2fb3-b-mail-icon_font-48.png"},function(e,t,n){e.exports=n.p+"_/83abfae7075037224e16a9856f1515d4-b-mail-icon_general-48.png"},function(e,t,n){e.exports=n.p+"_/7d3a81c7159dc88073d2c8b68869454c-b-mail-icon_gif-48.png"},function(e,t,n){e.exports=n.p+"_/b30d721e5ec76d5df6e9f5a15f2a8b84-b-mail-icon_image-48.png"},function(e,t,n){e.exports=n.p+"_/70c29e00d2a9726e144663682092d3f2-b-mail-icon_jpg-48.png"},function(e,t,n){e.exports=n.p+"_/f3093a6d0374ed1eb1aac797961641b0-b-mail-icon_mail-48.png"},function(e,t,n){e.exports=n.p+"_/fa85671858f6608a793c6b096013063d-b-mail-icon_mov-48.png"},function(e,t,n){e.exports=n.p+"_/eea5f29ba3d27dcc00790eea34ccbc4a-b-mail-icon_mp3-48.png"},function(e,t,n){e.exports=n.p+"_/7863254ebbc5c8c78d6684036dd56e54-b-mail-icon_mp4-48.png"},function(e,t,n){e.exports=n.p+"_/865da2b10d5c239280d12a6a2d1cfc56-b-mail-icon_none-48.png"},function(e,t,n){e.exports=n.p+"_/bb78c17d4956f3c27fb093d4cc9f2165-b-mail-icon_odp-48.png"},function(e,t,n){e.exports=n.p+"_/d2be1f2f1b208b727ab25d975a6aa242-b-mail-icon_ods-48.png"},function(e,t,n){e.exports=n.p+"_/3a6fa3be2bc661254803e1cec44d6a74-b-mail-icon_odt-48.png"},function(e,t,n){e.exports=n.p+"_/6f15de29744870eea9bbc45b4d169b8e-b-mail-icon_pcx-48.png"},function(e,t,n){e.exports=n.p+"_/fdec035fb674765bb14a832dfa0b7d71-b-mail-icon_pdf-48.png"},function(e,t,n){e.exports=n.p+"_/71e12247108f4576db7fe671dc7d6fa8-b-mail-icon_pls-48.png"},function(e,t,n){e.exports=n.p+"_/7bb7cd24c9c082144c869461098b942d-b-mail-icon_png-48.png"},function(e,t,n){e.exports=n.p+"_/90b3b830b932584838d1ac60e17410dc-b-mail-icon_ppt-48.png"},function(e,t,n){e.exports=n.p+"_/4f46be9bd8f9a9514aa95e1067d45bc3-b-mail-icon_psd-48.png"},function(e,t,n){e.exports=n.p+"_/f3fb7200d501406775330789bd1c5572-b-mail-icon_rar-48.png"},function(e,t,n){e.exports=n.p+"_/d1d14ac25b7f79969dcb8a6d144746bc-b-mail-icon_rtf-48.png"},function(e,t,n){e.exports=n.p+"_/5893a07f075b0984d0c5a8287265054e-b-mail-icon_script-48.png"},function(e,t,n){e.exports=n.p+"_/9df67b0fb763e21eeb5c41fd90030d9a-b-mail-icon_srt-48.png"},function(e,t,n){e.exports=n.p+"_/66b914b832fe6c8fa067a5b0089b757d-b-mail-icon_text-48.png"},function(e,t,n){e.exports=n.p+"_/d89d636f51a2933563e5da67186214e3-b-mail-icon_tiff-48.png"},function(e,t,n){e.exports=n.p+"_/7220ce68b5ee138e632cafa81f524cf3-b-mail-icon_txt-48.png"},function(e,t,n){e.exports=n.p+"_/a613c67aa33b5fd98cbd92b34e68cd49-b-mail-icon_video-48.png"},function(e,t,n){e.exports=n.p+"_/64196e074946510cd6a0a972ca941cc9-b-mail-icon_virus-48.png"},function(e,t,n){e.exports=n.p+"_/2384c49baee44858d49e5ba8d3ae7deb-b-mail-icon_wav-48.png"},function(e,t,n){e.exports=n.p+"_/aadc497975dd4d130a89b5a2d7ec65db-b-mail-icon_wma-48.png"},function(e,t,n){e.exports=n.p+"_/82f77cdc49c93261ae20418b44bb07cd-b-mail-icon_wmv-48.png"},function(e,t,n){e.exports=n.p+"_/675e5e02afcbe8d1b60862d4bffbb326-b-mail-icon_xls-48.png"},function(e,t,n){e.exports=n.p+"_/ee0403d4a88e96ecc0c3d604bcbfa2c6-b-mail-icon_zip-48.png"},function(e,t,n){e.exports={"ai-96":n(1300),"application-96":n(1301),"archive-96":n(1302),"audio-96":n(1303),"avi-96":n(1304),"bmp-96":n(1305),"book-96":n(1306),"cdr-96":n(1307),"csv-96":n(1308),"development-96":n(1309),"djvu-96":n(1310),"doc-96":n(1311),"eml-96":n(1312),"exe-96":n(1313),"executable-96":n(1314),"flash-96":n(1315),"font-96":n(1316),"general-96":n(1317),"gif-96":n(1318),"image-96":n(1319),"jpg-96":n(1320),"mail-96":n(1321),"mov-96":n(1322),"mp3-96":n(1323),"mp4-96":n(1324),"none-96":n(1325),"odp-96":n(1326),"ods-96":n(1327),"odt-96":n(1328),"pcx-96":n(1329),"pdf-96":n(1330),"pls-96":n(1331),"png-96":n(1332),"ppt-96":n(1333),"psd-96":n(1334),"rar-96":n(1335),"rtf-96":n(1336),"script-96":n(1337),"srt-96":n(1338),"text-96":n(1339),"tiff-96":n(1340),"txt-96":n(1341),"video-96":n(1342),"virus-96":n(1343),"wav-96":n(1344),"wma-96":n(1345),"wmv-96":n(1346),"xls-96":n(1347),"zip-96":n(1348)}},function(e,t,n){e.exports=n.p+"_/48bfa0dee7eef7cf87c66a11b7d73eff-b-mail-icon_ai-96.png"},function(e,t,n){e.exports=n.p+"_/25ebb597705718a91f075aa39b566355-b-mail-icon_application-96.png"},function(e,t,n){e.exports=n.p+"_/ca4a0528e4aa9ebae001edc512a3a670-b-mail-icon_archive-96.png"},function(e,t,n){e.exports=n.p+"_/bcac10759c4be79410c3d4de3d100268-b-mail-icon_audio-96.png"},function(e,t,n){e.exports=n.p+"_/2cd7518aee9e4446bc106dac12f65a99-b-mail-icon_avi-96.png"},function(e,t,n){e.exports=n.p+"_/cf2a0fd2dc42a46e0fef99c417039e59-b-mail-icon_bmp-96.png"},function(e,t,n){e.exports=n.p+"_/c399ce3cb6e0b3c01605692ba4440f8c-b-mail-icon_book-96.png"},function(e,t,n){e.exports=n.p+"_/a82045b44b9e51d865a8fa19ee80dab3-b-mail-icon_cdr-96.png"},function(e,t,n){e.exports=n.p+"_/ef1baf8e2912e51ae577820c5d29a6b8-b-mail-icon_csv-96.png"},function(e,t,n){e.exports=n.p+"_/8a7a31c57dc9e61f6904f7302ffea897-b-mail-icon_development-96.png"},function(e,t,n){e.exports=n.p+"_/7680f293494ce5833276c8dbd507ac57-b-mail-icon_djvu-96.png"},function(e,t,n){e.exports=n.p+"_/1426d27c6297d6b9ce5e84118c105a49-b-mail-icon_doc-96.png"},function(e,t,n){e.exports=n.p+"_/f70acfbda902eaf4c559becc47d13e2b-b-mail-icon_eml-96.png"},function(e,t,n){e.exports=n.p+"_/1cbd4434134e53cb0f16e46d31584d9f-b-mail-icon_exe-96.png"},function(e,t,n){e.exports=n.p+"_/25ebb597705718a91f075aa39b566355-b-mail-icon_executable-96.png"},function(e,t,n){e.exports=n.p+"_/33acc5a1a4f3812a0bc917ece06d94a0-b-mail-icon_flash-96.png"},function(e,t,n){e.exports=n.p+"_/659737cfafab5eff1b0a025a5343daa9-b-mail-icon_font-96.png"},function(e,t,n){e.exports=n.p+"_/ef432d2df3fd2d4818d65b3bd9de5047-b-mail-icon_general-96.png"},function(e,t,n){e.exports=n.p+"_/c0784b06bc7bc8a0f8d8eeb4e8f17329-b-mail-icon_gif-96.png"},function(e,t,n){e.exports=n.p+"_/51504742ad5fb671fc3083e3cac264ab-b-mail-icon_image-96.png"},function(e,t,n){e.exports=n.p+"_/8c3fb57b09910dcc21bf0f4a014e5676-b-mail-icon_jpg-96.png"},function(e,t,n){e.exports=n.p+"_/f70acfbda902eaf4c559becc47d13e2b-b-mail-icon_mail-96.png"},function(e,t,n){e.exports=n.p+"_/4c831411ff9fa41d5e9ba39931488ba8-b-mail-icon_mov-96.png"},function(e,t,n){e.exports=n.p+"_/62a2a35587d6b61dcc18d0733083ef1f-b-mail-icon_mp3-96.png"},function(e,t,n){e.exports=n.p+"_/7a9838ac557c84c1e0c8097c3f286315-b-mail-icon_mp4-96.png"},function(e,t,n){e.exports=n.p+"_/f88a6bf72ea39effa43046d3aec327e4-b-mail-icon_none-96.png"},function(e,t,n){e.exports=n.p+"_/2b450534ed8d41646bf981ca1615e5af-b-mail-icon_odp-96.png"},function(e,t,n){e.exports=n.p+"_/f36f9954b74e58239dbc52ab944e533f-b-mail-icon_ods-96.png"},function(e,t,n){e.exports=n.p+"_/f513a1349b439dc39c88fcdf5e6aaa1c-b-mail-icon_odt-96.png"},function(e,t,n){e.exports=n.p+"_/320170650145c57245743df641921ede-b-mail-icon_pcx-96.png"},function(e,t,n){e.exports=n.p+"_/aad3d55899b7c5f38bfce9cfea1b3f5e-b-mail-icon_pdf-96.png"},function(e,t,n){e.exports=n.p+"_/0ee560e23f001c260f3414d8a190290e-b-mail-icon_pls-96.png"},function(e,t,n){e.exports=n.p+"_/83fe16725c9809514f618229a825f4f5-b-mail-icon_png-96.png"},function(e,t,n){e.exports=n.p+"_/9f0d56fad062a48591970a2f8e73f714-b-mail-icon_ppt-96.png"},function(e,t,n){e.exports=n.p+"_/9868804d06ad80df80953fb72c1e8f47-b-mail-icon_psd-96.png"},function(e,t,n){e.exports=n.p+"_/d0acba6652cc3e79c621ad290db87cde-b-mail-icon_rar-96.png"},function(e,t,n){e.exports=n.p+"_/e9084c3b7a3c76fcf1604bb6b0bd9d17-b-mail-icon_rtf-96.png"},function(e,t,n){e.exports=n.p+"_/8a7a31c57dc9e61f6904f7302ffea897-b-mail-icon_script-96.png"},function(e,t,n){e.exports=n.p+"_/76d3d42609d0e658bf4978f389fca70d-b-mail-icon_srt-96.png"},function(e,t,n){e.exports=n.p+"_/9c91697c9290a77141a8d69bac54912e-b-mail-icon_text-96.png"},function(e,t,n){e.exports=n.p+"_/7c389b93c4b813e2cfc931d5864c4215-b-mail-icon_tiff-96.png"},function(e,t,n){e.exports=n.p+"_/260dbdda0f9ca156edd19432b504d472-b-mail-icon_txt-96.png"},function(e,t,n){e.exports=n.p+"_/6c0386fa3508c7814aa5bcb902c753f0-b-mail-icon_video-96.png"},function(e,t,n){e.exports=n.p+"_/cb70ba9f5428704c6cf851b642c01b3e-b-mail-icon_virus-96.png"},function(e,t,n){e.exports=n.p+"_/31d309bd02cb7decb1149e63c5214d31-b-mail-icon_wav-96.png"},function(e,t,n){e.exports=n.p+"_/b142e97afd9db49149a06b14eac16267-b-mail-icon_wma-96.png"},function(e,t,n){e.exports=n.p+"_/0e622d34993b49b3222195f53cf1741a-b-mail-icon_wmv-96.png"},function(e,t,n){e.exports=n.p+"_/5049f31b6ad918d5977d03879f664ad7-b-mail-icon_xls-96.png"},function(e,t,n){e.exports=n.p+"_/1057b6af9481d314a64e8756ee872f46-b-mail-icon_zip-96.png"},function(e,t,n){e.exports={aol:n(1350),gmail:n(1351),hotmail:n(1352),mail:n(1353),mynet:n(1354),"narod-disk":n(1355),outlook:n(1356),qip:n(1357),rambler:n(1358),tutby:n(1359),yahoo:n(1360),yandex:n(1361),yandex_en:n(1362)}},function(e,t,n){e.exports=n.p+"_/a05626800a96abe8faaac1392a2ad337-aol.png"},function(e,t,n){e.exports=n.p+"_/9b1f923e766689d2be2243dbb486e189-gmail.png"},function(e,t,n){e.exports=n.p+"_/cbaa76e2094ee925756334cac36448cf-hotmail.png"},function(e,t,n){e.exports=n.p+"_/75c6df658cb90713f21ba17d08dddda9-mail.png"},function(e,t,n){e.exports=n.p+"_/3df72c8dfea553b3ce4fca279fd40c26-mynet.png"},function(e,t,n){e.exports=n.p+"_/bea3e69fc0e43f47278237c797c347d0-narod-disk.png"},function(e,t,n){e.exports=n.p+"_/e32fdbcbfcd12488359854854b05bd2a-outlook.png"},function(e,t,n){e.exports=n.p+"_/3ae9fc94cfc81852fbc0632d62db118e-qip.png"},function(e,t,n){e.exports=n.p+"_/1e98a3ac9550b9a9be26d946474907f4-rambler.png"},function(e,t,n){e.exports=n.p+"_/d9acaaef2a8b6ebe2de55e0958e26cd7-tutby.png"},function(e,t,n){e.exports=n.p+"_/16798af393b000d6660dcf9d40471f14-yahoo.png"},function(e,t,n){e.exports=n.p+"_/a59909a455d3f5fc2b7248f2a5efc17f-yandex.png"},function(e,t,n){e.exports=n.p+"_/4c43487a92bc3ccee98543a4c819701c-yandex_en.png"},function(e,t,n){e.exports={az:n(1364),be:n(1365),en:n(1366),hy:n(1367),ka:n(1368),kk:n(1369),ro:n(1370),ru:n(1371),tr:n(1372),tt:n(1373),uk:n(1374)}},function(e,t,n){e.exports=n.p+"_/6dd6e15c8551deb21373d19aea1d067c-b-mail-icon_lang-az.gif"},function(e,t,n){e.exports=n.p+"_/8677dfed64c931dd3b426727b005ce4e-b-mail-icon_lang-be.gif"},function(e,t,n){e.exports=n.p+"_/9287de8c1f93ef82114c0d52a5ecdd2c-b-mail-icon_lang-en.gif"},function(e,t,n){e.exports=n.p+"_/763ede66e8fd2ad17951261cfc18a737-b-mail-icon_lang-hy.gif"},function(e,t,n){e.exports=n.p+"_/541d340c43dffd331ea19453c505c151-b-mail-icon_lang-ka.gif"},function(e,t,n){e.exports=n.p+"_/48848f048d84b60111b5fe6e5f3ad29f-b-mail-icon_lang-kk.gif"},function(e,t,n){e.exports=n.p+"_/ffba23df3618cdb57029a2fdf372c043-b-mail-icon_lang-ro.gif"},function(e,t,n){e.exports=n.p+"_/1624dbd739e623729b99da358ec8d9de-b-mail-icon_lang-ru.gif"},function(e,t,n){e.exports=n.p+"_/9d864c518442b77e5f7460f1124fc91a-b-mail-icon_lang-tr.gif"},function(e,t,n){e.exports=n.p+"_/13ea19e44b02151cd968a9329361e33d-b-mail-icon_lang-tt.gif"},function(e,t,n){e.exports=n.p+"_/d022e48f407b2410e7fe528f79a8f2ff-b-mail-icon_lang-uk.gif"},function(e,t,n){e.exports={"facebook.com":n(1376),"moikrug.ru":n(1377),"my.mail.ru":n(1378),"odnoklassniki.ru":n(1379)}},function(e,t,n){e.exports=n.p+"_/967824736368482c7687caab03715e9d-b-site-icon_facebook.com-14.png"},function(e,t,n){e.exports=n.p+"_/82bf97fe3902f37dae35866fb89b4b84-b-site-icon_moikrug.ru-14.png"},function(e,t,n){e.exports=n.p+"_/482f2cfb194e122f2ea9ba9cbd892630-b-site-icon_my.mail.ru-14.png"},function(e,t,n){e.exports=n.p+"_/ba34f63cb7305df1f6c9969065eeb7f2-b-site-icon_odnoklassniki.ru-14.png"},function(e,t,n){e.exports={"MailAppLink-ru.png":n(1381),"MailAppLink-ru@2x.png":n(1382),"MailAppLink-en.png":n(1383),"MailAppLink-en@2x.png":n(1384),"MailAppLink-uk.png":n(1385),"MailAppLink-uk@2x.png":n(1386),"MailAppLink-tr.png":n(1387),"MailAppLink-tr@2x.png":n(1388),"MailAppLink2-ru.png":n(1389),"MailAppLink2-ru@2x.png":n(1390),"MailAppLink2-en.png":n(1391),"MailAppLink2-en@2x.png":n(1392),"MailAppLink2-uk.png":n(1393),"MailAppLink2-uk@2x.png":n(1394),"MailAppLink2-tr.png":n(1395),"MailAppLink2-tr@2x.png":n(1396),"MailAppLink3-ru.png":n(1397),"MailAppLink3-ru@2x.png":n(1398),"MailAppLink3-en.png":n(1399),"MailAppLink3-en@2x.png":n(1400),"MailAppLink3-uk.png":n(1401),"MailAppLink3-uk@2x.png":n(1402),"MailAppLink3-tr.png":n(1403),"MailAppLink3-tr@2x.png":n(1404)}},function(e,t,n){e.exports=n.p+"_/80e0e2a71f3c5a3e71578ec4b68d1de9-Devices_ru.png"},function(e,t,n){e.exports=n.p+"_/efb907fc047ee920cd91223b1c6fef0e-Devices_ru@2x.png"},function(e,t,n){e.exports=n.p+"_/580cf7493354657f2d5517397977b9fd-Devices_en.png"},function(e,t,n){e.exports=n.p+"_/becf8b3cc644139ac1ec219d95f68288-Devices_en@2x.png"},function(e,t,n){e.exports=n.p+"_/5d097f13a1a63c488cddb98cda8d71db-Devices_uk.png"},function(e,t,n){e.exports=n.p+"_/faeed2756a72fc30cb2296205fe190cd-Devices_uk@2x.png"},function(e,t,n){e.exports=n.p+"_/13cb0f59af2b71261987ca4db82c334d-Devices_tr.png"},function(e,t,n){e.exports=n.p+"_/d6e8f0b205c356e49fc9e592c98f5138-Devices_tr@2x.png"},function(e,t,n){e.exports=n.p+"_/8d25ff7a47c72371aa448c1f644831e0-Devices2_ru.png"},function(e,t,n){e.exports=n.p+"_/8e0959c71d69f85e356b138d9576a5db-Devices2_ru@2x.png"},function(e,t,n){e.exports=n.p+"_/8d25ff7a47c72371aa448c1f644831e0-Devices2_en.png"},function(e,t,n){e.exports=n.p+"_/8e0959c71d69f85e356b138d9576a5db-Devices2_en@2x.png"},function(e,t,n){e.exports=n.p+"_/8d25ff7a47c72371aa448c1f644831e0-Devices2_uk.png"},function(e,t,n){e.exports=n.p+"_/8e0959c71d69f85e356b138d9576a5db-Devices2_uk@2x.png"},function(e,t,n){e.exports=n.p+"_/8d25ff7a47c72371aa448c1f644831e0-Devices2_tr.png"},function(e,t,n){e.exports=n.p+"_/8e0959c71d69f85e356b138d9576a5db-Devices2_tr@2x.png"},function(e,t,n){e.exports=n.p+"_/cfe9edc363b9c3bae5b459e8fc86d561-Devices3_ru.png"},function(e,t,n){e.exports=n.p+"_/59280953766869356019e8a69c5218c5-Devices3_ru@2x.png"},function(e,t,n){e.exports=n.p+"_/cfe9edc363b9c3bae5b459e8fc86d561-Devices3_en.png"},function(e,t,n){e.exports=n.p+"_/59280953766869356019e8a69c5218c5-Devices3_en@2x.png"},function(e,t,n){e.exports=n.p+"_/cfe9edc363b9c3bae5b459e8fc86d561-Devices3_uk.png"},function(e,t,n){e.exports=n.p+"_/59280953766869356019e8a69c5218c5-Devices3_uk@2x.png"},function(e,t,n){e.exports=n.p+"_/cfe9edc363b9c3bae5b459e8fc86d561-Devices3_tr.png"},function(e,t,n){e.exports=n.p+"_/59280953766869356019e8a69c5218c5-Devices3_tr@2x.png"},function(e,t,n){e.exports={anime:n(1406),art:n(1407),bears:n(1408),belarus:n(1409),besiktas:n(1410),capitals:n(1411),cat:n(1412),colorful:n(1413),cosmos:n(1414),dandelions:n(1415),dreams:n(1416),fenerbahce:n(1417),foxes:n(1418),galatasaray:n(1419),"galatasaray-net":n(1420),grass:n(1421),"ice-cream":n(1422),khl:n(1423),kindergarten:n(1424),kitekat:n(1425),lamp:n(1426),love_is:n(1427),mac:n(1428),nemo:n(1429),newspaper:n(1430),newyear2010:n(1431),olympics:n(1432),orangetree:n(1433),origami:n(1434),owls:n(1435),pinkbear:n(1436),plasticine:n(1437),pushkin:n(1438),"red-list":n(1439),region_bashkir:n(1440),region_chelly:n(1441),region_ekb:n(1442),region_krasnoyarsk:n(1443),region_nn:n(1444),region_novosibirsk:n(1445),region_perm:n(1446),region_primorie:n(1447),region_samara:n(1448),region_tatarstan:n(1449),region_tomsk:n(1450),region_volgograd:n(1451),relax:n(1452),sea:n(1453),"seasons-winter":n(1454),"seasons-spring":n(1455),"seasons-summer":n(1456),"seasons-autumn":n(1457),"seasons-newyear":n(1458),soccer:n(1459),starwars:n(1460),stitch:n(1461),tanks:n(1462),traktor:n(1463),u2709:n(1464),weather:n(1465),zverushki:n(1466)}},function(e,t,n){e.exports=n.p+"_/55da8889a15febd30a753532c2e6379b-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/f9376a74279ed08bba6a536975cbc94a-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/61bf6f493a21aee5da4c3ae71bd31fef-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/51227400bf5dd62b7c9ad06b62c9fc2a-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/27bbeb47efaf3031226d77cf8d67a992-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/419027568c2dbff622bd482002fea508-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/e859b6b7ce82b3c5d678606a3f679cdb-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/57d91005815b78bd3fd179d0697903de-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/51a7beff8146357e882df76bd5fcdb16-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/f5ee01b1ab666927884b364d15ac52cb-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/aa181a245bf4825a15ad53e088467408-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/bde70ccec3de606d58f22640aa072121-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/9e79ba44fb438a9ffd223b6ce4fb2fa6-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/62a68e4b42467360ab580b2749d23bf6-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/430c6b999668f49ff175bdd9b7134a8b-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/95ad928394ab3e4dbc420ee9200c2b1d-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/32619a3af21c100232fd8bd1dc30fe6e-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/52b2595723cfbacb98b3220e1abe3c49-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/6d4b51fce3062f3bdc09fae7b80396e9-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/1edbb112f621afadbad40a024dcb893e-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/16e9ca4e45d61db23d2296826f3885f0-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/c23fc538042988613f090c9c81938cb7-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/bc2c6aacb704070371a3ff502ddd0487-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/f6842a51c1eafc4170eee1bd82259530-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/b04e018da78ddd01081ca9a969b08142-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/ebec4ae3d93cf04c222cbc201158b82c-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/fed4407e38e04a586a80fdfe41540b2f-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/645387b75319c830faa9a1b5b123cb51-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/6f443bba6520b10a883be4e5f7febbce-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/ce7364300db361f6edfadc6fa7ba2905-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/196f977919a5a1d610c4b53c1f113ca0-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/53f011ac9d9501b01316854e42b7f34b-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/5d6478fdfaac97b1934ce70b20ec336e-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/0c48bf0a16f540d6e43e8a0275c2b9e2-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/203e0fcf5f9e1637191dd57b55585242-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/1025db8c9e77616f91269292ceb4e32d-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/847af709a6dd8f76387fd6d950c1dd7f-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/f8f4aaa6c003129d64c62f05d90bdd71-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/35c3434da167982e659c6dd4ba04d151-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/4588e9b32979ddc31921a11714c12c7e-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/85c0fdb440aead2e4abb9b41d1d83787-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/455fbbbf220fd3244e35dd41099c90cf-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/80867b4b2aa770116ebfb4c8b45152f5-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/a7c42098c0787a112dd1c1cc0b583326-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/32f6bfc98e666585ba3165e17b59ac15-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/1d803e2a5c54adaf35b36ed733a10d74-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/92b653fcf9b62d5581763c895bdd3642-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/f17737796d9be327fe3d9e83fb8b1b03-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/c1f2cacb6b7e6f02324c34ecab4b0d13-thumbnail_winter.large.jpg"},function(e,t,n){e.exports=n.p+"_/4965edaad1152724889af29ab96bf98d-thumbnail_spring.large.jpg"},function(e,t,n){e.exports=n.p+"_/dc7b88d84499635175879dea10fdc710-thumbnail_summer.large.jpg"},function(e,t,n){e.exports=n.p+"_/cb838ea3c8e6356796a1c4208f33b18d-thumbnail_autumn.large.jpg"},function(e,t,n){e.exports=n.p+"_/970e7063436cad0f1ef1a99760429add-thumbnail_newyear.large.jpg"},function(e,t,n){e.exports=n.p+"_/721fdcfa92f8fec18bd162ac5c917967-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/521a414a8854e12d8702950300671c65-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/b8d6f7447d8e9fdcf8b751a85b2e3408-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/37bc62b6c25970acff316fc0db0ddbe4-thumbnail.large.png"},function(e,t,n){e.exports=n.p+"_/02b8702cf0410c9a3e4fe68d6f3b2b47-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/c6c92056e952c162d6ee1287c9a5cc90-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/5d42c26bbb230f699626f40da25d4580-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/8864a4aa9d2ac194d2b8e2f80cad617a-thumbnail.large.jpg"},function(e,t,n){e.exports={collectors:n(1468),"collectors@2x":n(1469)}},function(e,t,n){e.exports=n.p+"_/afaabb317906c1962f4ed26dd56db114-Collectors.png"},function(e,t,n){e.exports=n.p+"_/825d07bf6c1aba8c94597655126083b2-Collectors@2x.png"},function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){var e,t=function(e){return"404"===(e=e||ns.page.current.page)||"not-found"===e||"no-message"===e},n=function(){return{"search-react":{}}},r={"technical-problems-alert&":{},logo:{},"bug-report-box@":function(){return Daria.IS_CORP||Daria.hasSid("669")?{"bug-report":{}}:{}},"account-security-box@":function(){ns.Model.get("account-security-state");return{}},notifications:{},"left-box@":{},"right-box@":{},"infoline-box@":{infoline:{}},"fake-head-background-box@":{},"typefilter-tabs-box@":function(){return Daria.areTabsVisible()&&!t()?{"typefilter-tabs":{}}:{}},"toolbar-box@":{},"service-box@":{},"more-services-box@":function(){return ns.Model.get("settings").isCompactHeaderMode()&&Daria.isSettingsPage()?{"more-services":{}}:{}},"search-box@":n(),"yandex-plus-renderer":{"yandex-plus-box@":function(){var e={};return Daria.canShowYandexPlusButton()&&(e["yandex-plus"]={}),e}},"loader-box@":function(){return Daria.isLoadingBarEnabled()?{}:{loader:{}}},"loading-bar-box@":function(){return Daria.isLoadingBarEnabled()?{"loading-bar":{}}:{}},"head-tabs":{},"header-buttons-box@":function(){return Daria.isComposeButtonMoved()?{}:{"main-action-buttons":{}}},"head-settings-controls":{},"head-user":{},"timeline-wrap&":{},"themes-skin-rotater-box@":function(){var e={};return e["skin-rotater-"+Daria.themeId]={},e},"themes-header-box@":function(){var e=Daria.themes.headers;return t()?e._default:e[Daria.themeId]||e._default},"themes-footer-wrapper@":function(){var e=ns.Model.get("settings");return!(e.isCompactMode()||e.isCompactHeaderMode()||Daria.is3pane())&&{"themes-footer-box@":function(){var e=Daria.themes.footers;return t()?e._default:e[Daria.themeId]||e._default}}},"themes-selector-box@":function(){if(ns.Model.get("themes-selector").isOpened()){var e={};return ns.Model.get("themes").get(".themes.*.settings").forEach(function(t){e[t]={}}),{"themes-selector":e}}return{}},"unsubscribe-popup-react-box@":function(){var e={};return Daria.allowUnsubscribeFiltersPopup()&&(e["unsubscribe-popup-react"]={}),e},"browser-notifications":{},"messages-time-updater":{}};ns.layout.define("common",{app:_.extend({},r,Daria.getDirectBlockLayoutInfo("messages-direct").layout)}),ns.layout.define("common-d",{app:r});var o={"compose-buttons-box@":function(){return Daria.isComposeButtonMoved()?{"main-action-buttons":{}}:{}},folders:{},"folders-setup":{},"messages-filters":{"messages-filters-box@":function(){var e={"messages-filters-wait":{},"messages-filters-important":{},"messages-filters-unread":{},"messages-filters-attachments":{}},t=ns.Model.get("labels"),n=t.getWaitingForReplyLabel();return n&&0!==n.count||delete e["messages-filters-wait"],e}},labels:{},"labels-setup":{},"unsubscribe-popup-promo-folder-react-box@":function(){return Daria.allowUnsubscribeFiltersPopup()?{"unsubscribe-popup-promo-folder-react":{}}:{}}};Daria.IS_CORP||(o["collectors&"]={},o["collectors-setup&"]={}),Daria.Config.mayHaveAdv&&Object.assign(o,Daria.getDirectBlockLayoutInfo("banner").layout),o["skin-saver-box@"]=function(){var e=ns.Model.get("themes").getCurrentTheme().hasSkinSaver(),t={};return e&&(t["skin-saver"]={}),t},o["copyright-box@"]=function(){var e={},t=ns.Model.get("theme-"+Daria.getThemeId()).get(".copyright");return t&&(e["copyright-"+t]={}),e},Daria.is3pane()&&(o.footer={"footer-journal-link&":{},"footer-help-link":{}}),ns.layout.define("common+left+toolbar-compose",{"app toolbar-box@":{toolbar:{"search-box@":n(),"toolbar-buttons-box@":"toolbar-buttons-compose"}}},"common+left+toolbar"),_.each(["common","common-d"],function(e){var t=e+"+left+toolbar";ns.layout.define(t,{"app left-box@":o,"app toolbar-box@":{"mops-confirmation-box@":"mops-confirmation",toolbar:function(){var e={"toolbar-buttons-box@":"toolbar-buttons"};return"message"!==ns.page.current.page&&(e["toolbar-aside-box@"]=function(){var e=ns.Model.get("settings"),t=ns.page.current.page,n={};if("abook"!==t){!Daria.areTabsVisible()&&(n["inbox-filter&"]={}),Daria.Config.NO_SETTINGS||(n["layout-switch"]={})}return e.isCompactHeaderMode()&&(n["more-services"]={}),n}),e}}},e)}),ns.layout.define("common+left",{"app left-box@":o},"common"),ns.layout.define("not-found",(e={},i(e,"app "+Daria.getDirectBlockLayoutInfo("messages-direct").name,{}),i(e,"app service-box@",{404:{}}),e),"common"),ns.layout.define("user-dropdown",{"user-dropdown":{"user-dropdown-help-link":{}}}),ns.layout.define("layout-timeline",{"timeline-box@":{"timeline-ng":{"timeline-date":{},"timeline-back":{},"timeline-forward":{},"timeline-newevent":{},"timeline-toggle":{},"timeline-list&":{}}}}),ns.layout.define("layout-timeline-collapsed",{"timeline-box@":{"timeline-collapsed":{"timeline-newevent":{},"timeline-toggle":{}}}}),ns.layout.define("layout-timeline-promo",{"timeline-box@":{"timeline-promo":{"timeline-toggle":{}}}}),ns.layout.define("layout-timeline-empty",{"timeline-box@":{}}),ns.layout.define("layout-timeline-item",{"timeline-list-item":{"timeline-events&":{}}})}()},function(e,t,n){n(1472),n(1473),n(1474),n(1475),n(1476),n(1477),n(1478),n(1479),n(1480),n(1481),n(1482),n(1483),n(1484),n(1485),n(1486),n(1487),n(1488),n(1489),n(1490),n(1491),n(1492),n(1493),n(1494),n(1495),n(1496),n(1497),n(1498),n(1499),n(1500),n(1501),n(1502),n(1503),n(1504),n(1505),n(1507),n(1508),n(1509),n(1510),n(1511),n(1512),n(1513),n(1514),n(1515),n(1516),n(1517),n(1518),n(1519),n(1520),n(1521),n(1522),n(1523),n(1524),n(1525),n(1526),n(1527),n(1528),n(1529),n(1530),n(1531),n(1532),n(1533),n(1534),n(1535),n(1536),n(1537),n(1538),n(1539),n(1540),n(1541),n(1542),n(1543),n(1544),n(1545),n(1546),n(1547),n(1548),n(1549),n(1550),n(1551),n(1552),n(1553),n(1554),n(1555),n(1556),n(1557),n(1558),n(1559),n(1560),n(1561),n(1562),n(1563),n(1564),n(1565),n(1566),n(1567),n(1568),n(1569),n(1570),n(1571),n(1572),n(1573),n(1574),n(1575),n(1576),n(1577)},function(e,t){ns.Model.define("captcha",{params:{type:null},methods:{preprocessData:function(e){return e.url&&(e.url=e.url.replace(/^https?:/,"")),e}}})},function(e,t){ns.Model.define("captcha-check",{params:{type:null,captcha_key:null,captcha_entered:null}})},function(e,t){ns.Model.define("app-state",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({asideSizeKind:"",mailLayoutClientRect:{top:0,left:0,width:window.screen.width,right:window.screen.width,bottom:window.screen.height},directModuleLoaded:!1,shouldAnimate:!0})}}},ns.ModelStatic)},function(e,t){!function(){function e(e){var t=[{id:"calendar",content:i18n("%Tab_calendar"),href:Daria.Config["calendar-url"]},{id:"invite",content:i18n("%Tab_invite"),href:Daria.Config["calendar-url"]+"/invite/"}];return"abook"===e?t.push({id:"mail",content:i18n("%Tab_mail"),href:"#inbox"}):t.push({id:"contacts",content:i18n("%Tab_contacts"),href:"#contacts"}),t}var t={inbox:"Письма",mail:"Почта",search:"Поиск",contacts:"Контакты",disk:"Диск",money:"Деньги",portal:"Коннект",yamb:"Ямб",calendar:"Календарь",wiki:"Вики",staff:"Стафф",invite:"Переговорки"};ns.Model.define("user-dropdown-data",{methods:{getData:function(){var n=this.data||{};if(n.services=[],!ns.Model.get("settings").isCompactHeaderMode())return n;var i=Daria.IS_CORP?e(ns.page.current.page):ns.Model.get("index-data").get(".tabs.head");return n.services=i.map(function(e){return{url:e.href,title:e.content,metrikaTitle:t[e.id]}}),n},getFreshCountByUid:function(e){var t=this.get(".accounts"),n=0;return t&&t.some(function(t){return Number(t.uid)===Number(e)&&(n=Number(t["fresh-count"]||0),!0)}),n},setNewCountById:function(e,t){var n=this.getData();n&&Array.isArray(n.accounts)&&n.accounts.length&&(n.accounts.forEach(function(i,r){Number(i.uid)===Number(e)&&(n.accounts[r]["fresh-count"]=t)}),this.data=n)},getSumOfFresh:function(){var e=this.getData(),t=0;return e&&Array.isArray(e.accounts)&&e.accounts.length&&e.accounts.forEach(function(e){t+=Number(e["fresh-count"]||0)}),t},getFreshForDefault:function(){return this.getFreshCountByUid(Daria.uid)}}})}()},function(e,t){ns.Model.define("do-abook-person-add",{params:{first_name:null,middle_name:null,last_name:null,b_day:null,b_month1:null,b_year:null,tel_list:null,descr:null,mail_addr:null,tags:null}})},function(e,t){ns.Model.define("abook-groups",{events:{"ns-model-changed":function(){var e=this.getData(),t=jpath(e,'.tag[.tid == "-10"]')[0];t&&(t.title=i18n("%AK_Phone_Contacts")),this.data=e}},methods:{RETRY_LIMIT:1,getGroupByTitle:function(e){return jpath(this.data,'.tag[.title == "'+e+'"]')[0]},getGroupByTid:function(e){return jpath(this.data,'.tag[.tid == "'+e+'"]')[0]},getContactsCount:function(e){var t=e.mcids.map(this._getCid);return _.uniq(t).length},addToGroup:function(e){var t=this,n={tids:[e.tid],mcids:e.mcids,action:"add"};return-10===n.tid&&(n.mcids=_.uniq(n.mcids.map(this._getCid))),this._doGroupAction(n).then(function(){var i=t.getGroupByTid(e.tid).title;i=Daria.hasFeature("react-statusline")?i:_.escape(i),Daria.Statusline.show({name:"abook_contacts_added_to_group",body:i18n("%AK_contacts_added_to_group",t.getContactsCount(n),i)})})},removeFromGroup:function(e){return this._doGroupAction({tids:e.tids,mcids:e.mcids,action:"rm"})},_getCid:function(e){return String(e).split(".")[0]},_doGroupAction:function(e){var t=$.Deferred(),n=e.tids,i=e.mcids;if(n.length&&i.length){var r={tid:n,mcid:i,action:e.action};return ns.forcedRequest("do-abook-group-edit-contacts",r).then(function(){Daria.Autocompleter.getContact().flushCache(),Daria.Dropdown.closeAll(),["abook-groups","abook-contact","abook-contacts"].forEach(function(e){ns.Model.invalidate(e)}),t.resolve()}),t.promise()}}}})},function(e,t){ns.Model.define("do-abook-group-add",{params:{title:null,mcid:null}})},function(e,t){ns.Model.define("abook-contact",{params:{email:null,cid:null},paramsRewrite:function(e){return null!=e.cid?{cid:e.cid}:e},methods:{RETRY_LIMIT:1,getContactInfo:function(e,t){e=e||{};var n=this.getData();return n?Daria.Abook.formatContactInfo(n,e,t):{}},getPhone:function(){return this.select(".phone.value")[0]||null},getMcids:function(e){var t=this.getData(),n=[];return this.eachEmailsByTid(e,function(e){n.push(t.cid+"."+e.id)}),n.length||(n=[String(t.cid)]),n},eachEmailsByTid:function(e,t){var n=this.get(".email");_.isFunction(e)&&(t=e),e=Number(e),_.isFunction(t)&&_.each(n,function(n){var i=-10===e;if(!e||i||_(n.tags).contains(e))return t(n)})},filterEmailsByTid:function(e){var t=this.get(".email");return e=Number(e),e&&-10!==e?_(t).filter(function(t){if(_(t.tags).contains(e))return t}).value():t},yateFilterEmailsByTid:function(e){return e=yr.nodeset2scalar(e),this.filterEmailsByTid(e)},yateGetMcidContacts:function(e){var t=this.yateFilterEmailsByTid(e),n=this.getData();return _.map(t,function(e){var t=_.clone(n);return t.email=[e],t})},getRefByEmail:function(e){var t=_.find(this.get(".email"),{value:e});return t?t.ref:void 0},getEmailByMcid:function(e){e=String(e);var t=Number(e.split(".")[1]),n=_.find(this.getData().email,{id:t});return n?n.value:null},getHeadEmail:function(){return this.select(".email.value")[0]||null},getName:function(){return this.get(".name.full")||(this.getHeadEmail()||"").split("@")[0]},isShared:function(){return this.get(".isShared")},isSharedLocal:function(){return this.get(".isSharedLocal")},isLocal:function(){return this.get(".isLocal")},findContactByPhone:function(e){var t=null;return ns.Model.traverse(this.id,function(n){t||n.getPhone()!==e||(t=n)}),t}}})},function(e,t){ns.Model.define("abook-contacts",{params:{q:null,extended:null,tid:null,emails:null,skip:null,pagesize:30,shared:null,type:null,mode:null},paramsRewrite:function(e){var t=_.extend({},e);return"shared"in t&&(t.shared=Daria.toIntFlag(e.shared)),t},split:{items:".contact",params:{cid:".cid"},model_id:"abook-contact"},methods:{RETRY_LIMIT:1,_findContactData:function(e){var t=null;return ns.Model.traverse(this.id,function(n){t||n.models.some(function(n){return t=e(n)&&n.getData()})}),t},getContactDataByEmail:function(e){return this._findContactData(function(t){return _.some(t.get(".email"),{value:e})})},getContactDataByPhone:function(e){return this._findContactData(function(t){return _.some(t.get(".phone"),{value:e})})},getContactsInfoByEmails:function(e,t){var n=[],i=this;return t=t||{},_.each(e,function(e){var r=_.find(i.models,function(t){return _.find(t.get(".email"),{value:e})});r&&n.push(r.getContactInfo(t,{email:e}))}),n},getContactsEmails:function(e,t){function n(e){var n=e.get(".cid"),o=!1,s=e.get(".email");s instanceof Array?s.forEach(function(e){if(!t||!o){var s=e.value;s&&(r&&-10!==r&&-1===e.tags.indexOf(r)||(i[n]=i[n]||{},i[n][s]=e.ref,o=!0))}}):i[n]={email:s}}var i={},r=Number(e.tid)||0;return _.each(this.models,n),i},removeContacts:function(e){var t=Vow.promise();return e.forEach(function(e){var t=ns.Model.get("abook-contact",{cid:e});t.get(".email").forEach(function(e){ns.Model.get("abook-contact",{email:e.value}).invalidate()}),t.invalidate()}),ns.forcedRequest(["do-abook-person-delete","abook-groups"],{cid:e}).then(function(e){var n=e[0],i=n.getError(),r=n.get(".deleted-items").length;i?(Daria.Statusline.show({name:"abook_failed",body:i18n("%АК_фэйл")}),t.reject(i)):(Daria.Statusline.show({name:"abook_contact_removed",body:i18n("%АК_Контактов_Удалено",r)}),t.fulfill(e))}),t},loadMore:function(e){var t=this.models.length,n=_.extend({},this.params,{skip:t});if(e){var i=this.get(".pager.items-count");n.pagesize=i-t}return ns.request("abook-contacts",n).then(this._addModels,this)},_addModels:function(e){var t=e[0];this.data&&this.isValid()||(this.data={},this.status=this.STATUS.OK);var n=t.get(".pager"),i=this.get(".pager");this.set(".pager",_.extend({},i,n),{silent:!0});var r=t.models;return this.insert(r),ns.Model.destroy(t),r},getCount:function(){return this.models.length},isEmptyList:function(){return this.isValid()&&0===this.getCount()}}})},function(e,t){ns.Model.define("abook-suggest",{params:{popup:null,domain:null,all:null,q:null,mcid:null,climit:null,glimit:null,phone:null,popular:null},type:"js",ckey:!0,methods:{RETRY_LIMIT:1,getRequestParams:function(){var e=this.super_.getRequestParams.apply(this,arguments);return e.reqid=Daria.React.getSearchSessionId(),e}}})},function(e,t){ns.Model.define("abook-suggest-report",{params:{uid:null,q:null,section:null,title:null,id:null},methods:{RETRY_LIMIT:1}})},function(e,t){ns.Model.define("abook-selected",{isCollection:!0,params:function(e){if("normal"!==e.type)return{};var t=ns.Model.getKeyAndParams("abook-contacts",e).params;return delete t.pagesize,t},events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({})},isFolderSelected:no.False,runOps:function(e,t){return Daria.COPS[e](this,t)},getCids:function(){return _.map(this.models,function(e){return Number(e.get(".cid"))})},containsEmail:function(){return _.some(this.models,function(e){var t=e.get(".email");return Array.isArray(t)&&t.length})},containsShared:function(){return _.some(this.models,function(e){return e.isShared()})},getContactsMcids:function(e){var t={};return _.each(this.models,function(n){t[n.get(".cid")]=n.getMcids(e)}),t},emailsToString:function(e){return e=Number(e||0),_(this.models).filter(function(e){return Array.isArray(e.get(".email"))}).map(function(t){var n={},i=function(e){return n=e,!1};return e?t.eachEmailsByTid(e,i):t.eachEmailsByTid(i),Jane.FormValidation.obj2contact({email:n.value,name:t.get(".name.full")})}).join(", ")},abookContactsToAbookMcidContacts:function(e,t,n,i){return _(e).map(function(e){var r=e.getMcids(t);return"number"==typeof n&&(r=[r[n]]),i?[this.abookContactToAbookMcidContact(e,r[0])]:_.map(r,function(t){return this.abookContactToAbookMcidContact(e,t)},this)},this).flatten().value()},abookContactToAbookMcidContact:function(e,t){var n=ns.Model.get("abook-mcid-contact",{mcid:t});return n.getData()||n.setData({cid:e.get(".cid"),mcid:t,name:e.getName(),email:e.getEmailByMcid(t)}),n},isEmptyContactsList:function(){return ns.Model.get("abook-contacts",ns.page.current.params).isEmptyList()},isMcidSelected:function(e){return _.some(this.models,function(t){return t.get(".cid")===e})},isSelected:function(e){return _.some(this.models,function(t){return t===e})},selectAll:function(){this.clear();var e=ns.Model.get("abook-contacts",this.params);this.insert(e.models)},unselectAll:function(){this.clear()},getSelectedMcids:function(){return _.map(this.models,function(e){return e.get(".mcid")})}}},ns.ModelCollectionStatic)},function(e,t){ns.Model.define("history-suggest",{params:{text:null},ckey:!0})},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){ns.Model.define("account-information",{methods:{MAXAGE:72e5,preprocessData:function(e){return delete this._emails,Daria.ckey=e.ckey,this.refreshData(.8*this.MAXAGE),e},setError:function(){this.refreshData(30*Jane.Date.SECOND)},refreshData:function(e){window.clearTimeout(this._timer),this._timer=setTimeout(function(){ns.forcedRequest(["account-information"])},e)},getDataKey:function(e){return this.get("."+e)},getSids:function(){return this.get(".sids")},addSid:function(e){this.getSids().push(String(e))},hasSid:function(e){return $.inArray(String(e),this.getSids())>-1},getFromEmails:function(){var e=this.getAllUserEmails();return $.grep(e,function(e){return"narod.ru"!==e.split("@")[1]})},getFromDefaultEmail:function(){var e=this.getFromEmails(),t=this.get(".yandex_account")+"@"+Daria.Config["yandex-domain"];return t&&_.contains(e,t)||(t=e[0]||""),t},getAllUserEmails:function(){var e;try{e=this.getEmails().concat(ns.Model.get("settings").getValidatedEmails())}catch(e){Jane.ErrorLog.sendException("User doesn't have email",e,{modelData:n(this.data),modelEmail:this.getDataKey("email"),modelKey:this.key,modelStatus:this.status})}return e=this.sortEmails(_.uniq(e))},sortEmails:function(e){var t=/@/,n=new RegExp("(yandex|ya)\\.("+Daria.Config.domainZonesForReg+"|com\\.ua|рф|xn--p1ai)"),i={RUS:{1:/^ya\.ru$/,2:/^yandex\.ru$/},INT:{1:/^yandex\.com$/},TUR:{1:/^yandex\.com\.tr$/}},r=function(e){var t=i[Daria.Config.product];for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return Number(r);return n.test(e)?10:5},o=ns.Model.get("settings").getSetting("default_email"),s=function(e,n){if(e===o)return-1;if(n===o)return 1;var i=e.split(t).pop(),s=n.split(t).pop(),a=r(i),u=r(s);return a!==u?a-u:e<n?-1:1};return e.sort(s),e},getEmails:function(){if(!this._emails){for(var e=this.getDataKey("email"),t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=r.login,s=null;t.push(o+"@"+r.domain),Daria.Config.pddDomain||(o.indexOf(".")>-1&&-1===o.indexOf("-")?s=o.replace(/\./g,"-"):o.indexOf("-")>-1&&-1===o.indexOf(".")?s=o.replace(/-/g,"."):o.indexOf("-")>-1&&o.indexOf(".")>-1&&(o=o.replace(/\./g,"-"),s=o.replace(/-/g,"."),t.push(o+"@"+r.domain))),s&&t.push(s+"@"+r.domain)}this._emails=t}return this._emails},isMyEmail:function(e){return this.getAllUserEmails().indexOf(e.toLowerCase())>-1},getDigitalAlias:function(){return this.getDataKey("digital_login")},getTimezoneInHours:function(){return-this.getDataKey("tz_offset")*Jane.Date.MINUTE/Jane.Date.HOUR},getMA:function(){return this.get(".users")||[]},hasMA:function(){return this.getMA().length>0},isPG:function(){return"pg"===this.get(".db")}}})}()},function(e,t){ns.Model.define("do-admsubscribe-calendar")},function(e,t){ns.Model.define("base-calendar-event",{methods:{getError:function(e){e.error&&(e.data={error:e.error},delete e.error)},preprocessData:function(e){var t=no.jpath(".eventInfo.attendees",e);if(t&&t.length){var n=[],i=[],r=jpath(e,".eventInfo.organizer.email")[0];return _.forEach(t,function(e){"yandexUser"===e.type||"externalUser"===e.type?e.email!==r&&n.push(e):"resource"===e.type&&i.push(e)}),e.eventInfo.organizer&&(e.eventInfo.organizer.isOrganizer=!0,n.unshift(e.eventInfo.organizer)),e.rooms=i,e.eventInfo.attendees=n,e.isNotPast=!e.eventInfo.isPast,e.toCollapsedMessage="declined"!==e.eventInfo.decision&&!e.refusal,e.isNotOperate="undecided"===e.eventInfo.decision&&!e.eventInfo.isNoRsvp,e.showWidgetInMessageHead=!e.refusal&&Daria.IS_CORP&&!e.eventInfo.isPast,e.showRightPartOfWidget=!e.eventInfo.isCancelled||e.eventInfo.isCancelled&&e.eventInfo.repetitionDescription&&e.eventInfo.isPast,e.eventInfo.eventTime=e.eventInfo.repetitionDescription?this.getTimeForRepeatEvents(e.eventInfo):this.convertEventDates(e.eventInfo.start,e.eventInfo.end),e}},convertEventDates:function(e,t){if((t-e)/36e5<=24){var n=i18n("%Week_Full_Day",new Date(e).getDay()),i=Jane.Date.format("%Date_HM__colon",e),r=Jane.Date.format("%Date_HM__colon",t),o=i18n("%Message_Item_Event_Dates",i,r);return Jane.Date.format("%Date_dB",e)+", "+n+", "+o}var s=Jane.Date.format("%Date_dBY_year",e),a=Jane.Date.format("%Date_dBY_year",t),u=Jane.Date.format("%Date_HM__colon",e),l=Jane.Date.format("%Date_HM__colon",t);return i18n("%Message_Item_Event_Dates",s+" "+u,a+" "+l)},getTimeForRepeatEvents:function(e){var t=Jane.Date.format("%Date_HM__colon",e.start),n=Jane.Date.format("%Date_HM__colon",e.end);return i18n("%Message_Item_Event_Dates",t,n)+" "+e.repetitionDescription},getEventInfo:function(){return this.get(".eventInfo")}}})},function(e,t){ns.Model.define("dimensions",{events:{"ns-model-init":"_onInit"},methods:{DOC_HEIGHT_KEY:".document-height",DOC_WIDTH_KEY:".document-width",WIN_HEIGHT_KEY:".window-height",WIN_WIDTH_KEY:".window-width",_$document:null,_$window:null,_onInit:function(){this._$document=$(document),this._$window=$(window),this._$window.on("resize",_.throttle(this._onResize.bind(this),20)),this.clean()},getWindowScrollTop:function(){return this._$window.prop("pageYOffset")},getDocumentHeight:function(){var e=this.get(this.DOC_HEIGHT_KEY);return e||(e=this._$document.height(),this._setDimension(this.DOC_HEIGHT_KEY,e)),e},getDocumentWidth:function(){var e=this.get(this.DOC_WIDTH_KEY);return e||(e=this._$document.width(),this._setDimension(this.DOC_WIDTH_KEY,e)),e},getWindowHeight:function(){var e=this.get(this.WIN_HEIGHT_KEY);return e||(e=this._$window.height(),this._setDimension(this.WIN_HEIGHT_KEY,e)),e},getWindowWidth:function(){var e=this.get(this.WIN_WIDTH_KEY);return e||(e=this._$window.width(),this._setDimension(this.WIN_WIDTH_KEY,e)),e},clean:function(){this.setData({},{silent:!0})},_onResize:function(e){e.originalEvent&&e.originalEvent.data&&e.originalEvent.data.custom||(this.clean(),this.trigger("resize",e))},_setDimension:function(e,t){this.set(e,t,{silent:!0})}}})},function(e,t,n){ns.Model.define("do-client-log",{params:{messages:null},methods:n(359)})},function(e,t,n){ns.Model.define("do-journal-log",{params:{messages:null},methods:n(359)})},function(e,t){ns.Model.define("do-service-worker-log",{params:{params:null}})},function(e,t){ns.Model.define("do-mail-reset-recent-counter")},function(e,t){ns.Model.define("do-messages",{params:{ids:null,tids:null,movefile:null,action:null,with_sent:null,fid:null},methods:{preprocessData:function(e){if("notspam"===this.params.action&&Array.isArray(this.params.ids)){var t=this.params.ids.map(function(e){return ns.Model.get("message",{ids:e})});ns.forcedRequest(t)}return e}}})},function(e,t){ns.Model.define("do-sanitize",{params:{content:null}})},function(e,t){ns.Model.define("do-settings",{params:{params:null}})},function(e,t){ns.Model.define("do-staff-settings",{params:{lang_ui:null,tz:null}})},function(e,t){ns.Model.define("index-data",{events:{"ns-model-init":"_onInit","ns-model-destroyed":"_onDestroy"},methods:{_onInit:function(){this._state="inbox",this._fixTabs=this._fixTabs.bind(this),ns.events.on("ns-page-before-load",this._fixTabs)},_onDestroy:function(){ns.events.off("ns-page-before-load",this._fixTabs)},preprocessData:function(e){return Daria.IS_CORP||this._fixTabs(e),Daria.Recipients.cacheRecipient(e.recipient),delete e.recipient,e},_getTabsIds:function(e){return Array.isArray(e)?e.map(function(e){return e.id}).filter(function(e){return e}):[]},getAllTabsIds:function(){return{head:this._getTabsIds(this.get(".tabs.head")),more:this._getTabsIds(this.get(".tabs.more"))}},_fixTabs:function(e,t){if(this.isValid()){var n=t[1];if("abook"===n.page&&"inbox"===this._state){this._state="abook";var i=this.get(".tabs.head"),r=_.findIndex(i,{href:"#contacts"});i.splice(r,1,{href:"#inbox",content:i18n("%Tab_mail"),id:"inbox"}),this.set(".tabs.head",i)}else if("abook"!==n.page&&"abook"===this._state){this._state="inbox";var o=this.get(".tabs.head"),s=_.findIndex(o,{href:"#inbox"});o.splice(s,1,{href:"#contacts",content:i18n("%Tab_contacts"),id:"contacts"}),this.set(".tabs.head",o)}}}}})},function(e,t){ns.Model.define("filters",{params:{master:null},methods:{getMasterRequest:function(){var e=this,t=ns.Model.get(this.id,_.assign({},this.params,{master:1}));return t.destroy(),t.once("ns-model-changed",function(){e.setData(this.getData())}),t},getFilters:function(){return this.get(".action")||[]},getById:function(e){return jpath(this.getFilters(),'.[.filid == "'+e+'"]')[0]},getForLabel:function(e){return jpath(this.getFilters(),'.[.actions.type == "movel" && .actions.parameter == "'+e+'"]')},getForFolder:function(e){return jpath(this.getFilters(),'.[.actions.type == "move" && .actions.parameter == "'+e+'"]')},getForCollector:function(e){return jpath(this.getFilters(),'.[.condition.div == "X-yandex-rpop-id" && .condition.pattern == "'+e+'"]')},getCountEnableFilters:function(){return jpath(this.getFilters(),'.action[.enable == "yes"]').length}}})},function(e,t){!function(){ns.Model.define("focus",{events:{"ns-model-init":"_onInit"},methods:{DEFAULT_COLUMN:1,DEFAULT_ITEM:0,indexColumns:{LEFT:0,MESSAGES:1,MESSAGE:2},preventOpenOnFocus:!1,_onInit:function(){this._rebuild=this._rebuild.bind(this),this.setData({tree:[[],[],[]],itemIndex:null,columnIndex:null,currentFocus:null,lastFocus:[],lastActionFocus:{},pageParams:JSON.stringify(ns.Model.getKeyAndParams("messages",ns.page.current.params).params)}),this._buildTree(),this._setDefaultCoordinates(),ns.events.on("ns-page-after-load",this._rebuild),ns.events.on("daria:mFocus:buildTree",this._rebuild)},_rebuild:function(){this._buildTree(),this._updateFocus()},_updateFocus:function(){var e=JSON.stringify(ns.Model.getKeyAndParams("messages",ns.page.current.params).params),t=this.get(".pageParams"),n=this.get(".columnIndex");this.set(".pageParams",e),n!==this.indexColumns.LEFT&&e!==t?this.resetFocus():this._recalculateFocus()},_buildTree:function(){Daria.DEBUG&&console.time("mFocus buildTree");var e=Daria.nsTreeWalker.getTreeForFocus();this.set(".tree",e);var t=this.get(".lastFocus").map(function(t,n){return t&&{focusView:t.focusView,itemIndex:e[n].indexOf(t.focusView)}});this.set(".lastFocus",t),Daria.DEBUG&&(console.timeEnd("mFocus buildTree"),console.log("mFocus tree",e))},_recalculateFocus:function(){if(this.hasFocus()){var e=this.get(".columnIndex"),t=this.get(".itemIndex"),n=this.get(".tree")[e],i=this.getFocus();if(-1===n.indexOf(i)){var r,o,s;if(Daria.is3pane()&&e===this.indexColumns.MESSAGE&&0===n.length&&this.get(".tree")[this.indexColumns.MESSAGES].length>0)n=this.get(".tree")[this.indexColumns.MESSAGES],r=this._getLastFocusedItemIndex(this.indexColumns.MESSAGES,!0),o=this.indexColumns.MESSAGES;else if(r=t,o=e,s=_.method("getParentReferenceParams")(i)){var a=_.findIndex(n,s);-1!==a&&(r=a)}r=Math.min(n.length-1,r),r=Math.max(r,0),this.set(".itemIndex",r),this.set(".columnIndex",o),this._setCurrentFocus(o,r)}}},_setDefaultCoordinates:function(){this.set(".itemIndex",this.DEFAULT_ITEM);var e=this.get(".tree"),t=this.DEFAULT_COLUMN;0===e[t].length&&(t=this.indexColumns.LEFT),this.set(".columnIndex",t)},setLastActionFocus:function(){var e=_.clone(this.get(".lastActionFocus"));_.isEmpty(e)||e.focusView&&e.focusView.isVisible()&&(this.pubEvent("blur"),this.set(".columnIndex",e.columnIndex),this.set(".itemIndex",e.itemIndex),this.set(".currentFocus",e.focusView),this._updateFocus(),this.pubEvent("focus"))},setPreventOpenOnFocus:function(e){void 0===e&&(e=!0),this.set(".preventOpenOnFocus",e)},getPreventOpenOnFocus:function(){return this.get(".preventOpenOnFocus")},resetFocus:function(e){this.pubEvent("blur"),this.set(".currentFocus",null),this.set(".itemIndex",this.DEFAULT_ITEM),e&&this.set(".columnIndex",this.DEFAULT_COLUMN);var t=_.clone(this.get(".lastFocus"));t[this.indexColumns.MESSAGES]=null,t[this.indexColumns.MESSAGE]=null,this.set(".lastFocus",t),this.set(".lastActionFocus",{}),this.set(".preventOpenOnFocus",!1)},clearFocus:function(){this.hasFocus()&&(this.pubEvent("blur"),this.set(".currentFocus",null)),this.set(".preventOpenOnFocus",!1)},changeItem:function(e,t){var n=this.get(".columnIndex"),i=this.get(".itemIndex"),r=this.get(".tree")[n];if(!this.hasFocus()){if(n===this.indexColumns.MESSAGES&&!r[i]){var o=this._getFirstIndexForViews(r);o>=0&&(i=o)}return void this._changeFocus(n,i,{select:t})}var s=this.get(".currentFocus");if(Daria.Focus.needLazyScroll(s,e))return void Daria.Focus.lazyScroll(e);var a=r.length,u=r.indexOf(s);if(e?u++:u--,n===this.indexColumns.MESSAGES&&u===a)return void this._loadMoreMessages();u>=0&&u<a&&this._changeFocus(n,u,{select:t})},_loadMoreMessages:function(){ns.events.trigger("daria:vMessagesPager:messages-load")},changeColumn:function(e){var t;t=e?this._getNextColumnIndex():this._getPrevColumnIndex(),this.setColumn(t)},setColumn:function(e){var t=this.get(".columnIndex"),n=this.get(".tree").length;if((t!==e||!this.hasFocus())&&e>=0&&e<n){var i=this._getLastFocusedItemIndex(e);this._changeFocus(e,i)}},_getNextColumnIndex:function(){for(var e=this.get(".columnIndex"),t=this.get(".tree"),n=t.length,i=e,r=e+1;r<n;r++){if(t[r].length>0){i=r;break}}return i},_getPrevColumnIndex:function(){for(var e=this.get(".columnIndex"),t=this.get(".tree"),n=e,i=e-1;i>=0;i--){if(t[i].length>0){n=i;break}}return n},_getLastFocusedItemIndex:function(e,t){var n=this.get(".tree")[e],i=this.get(".lastFocus")[e],r=null;if(i&&(r=n.indexOf(i.focusView),-1!==r||t?t&&(r=i.itemIndex):r=null),null===r&&e===this.indexColumns.MESSAGE){var o=n[0];if(o&&"message-thread-item-wrap"===o.id)return this._getFirstVisibleMessageInThread(n)}if(null===r&&e===this.indexColumns.MESSAGES){var s=this._getFirstIndexForViews(n);if(s>=0)return s}return r||0},_getFirstIndexForViews:function(e){var t=this._getOpenMessageIndex(e);if(t>=0)return t;var n=this._getFirstUnpinnedMessage(e);return n>=0?n:-1},_getFirstVisibleMessageInThread:function(e){for(var t=ns.Model.get("scroller-message").getVDimensions(),n=e.length,i={},r=0;r<n;r++){var o=e[r];if(o.isOpen()){var s=o.isVisibleInScroller(t,!1);if(s)return r;i[o.key]=s}}for(var a=0;a<n;a++){var u=e[a],l=i[u.key];if(_.isBoolean(l)){if(l)return a}else if(l=u.isVisibleInScroller(t,!1))return a}return 0},_getOpenMessageIndex:function(e){if(Daria.is3pane())return-1;for(var t=ns.page.current.params,n=t.ids||t.thread_id,i=0,r=e.length;i<r;i++){var o=e[i],s=o.getModel("message");if(s&&s.params.ids===n)return i}return-1},_getFirstUnpinnedMessage:function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t],r=i.getModel("message");if(r&&!r.isPinned())return t}return-1},saveViewAsLastFocused:function(e,t){var n=this.get(".tree")[t].indexOf(e);this._saveLastFocusView(e,t,n)},_saveFocus:function(e,t){var n=this.get(".currentFocus");n&&this._saveLastFocusView(n,e,t)},_saveLastFocusView:function(e,t,n){var i=_.clone(this.get(".lastFocus"));i[t]={focusView:e,itemIndex:n},this.set(".lastFocus",i)},isFocusedInColumn:function(e,t){if(this.get(".columnIndex")===e)return this.getFocus()===t;var n=this.get(".lastFocus");return!!n&&(n[e]||{}).focusView===t},_saveLastActionFocus:function(e,t){var n=_.clone(this.get(".lastActionFocus")),i=this.get(".currentFocus");i&&(n={columnIndex:e,focusView:i,itemIndex:t},this.set(".lastActionFocus",n))},_changeFocus:function(e,t,n){var i={scroll:!0,select:!1,show:!0},r=_.extend(i,n),o=this.get(".columnIndex"),s=this.get(".itemIndex");if(o!==e&&this._saveFocus(o,s),this._saveLastActionFocus(o,s),this.set(".itemIndex",t),this.set(".columnIndex",e),this.set(".preventOpenOnFocus",!1),!r.show)return void this.clearFocus();var a=this._setCurrentFocus(e,t);a&&(r.scroll&&(Daria.Focus.needLazyScroll(a,!1)?Daria.Focus.lazyScroll(!1):Daria.Focus.scrollIntoView(a.$node,e)),r.select&&this.keyboardSelection(a.params.ids))},_setCurrentFocus:function(e,t){var n=_.get(this.get(".currentFocus"),".key"),i=this.get(".tree")[e][t];if(n!==_.get(i,".key"))return this.pubEvent("blur"),this.set(".currentFocus",i),this.pubEvent("focus"),i},pubEvent:function(e,t){var n=this.getFocus();n&&(ns.assert(n.onFocusEvent,"View: "+n.id,"Не реализован метод #onFocusEvent()"),Daria.DEBUG&&console.log("mFocus","pubEvent",e,n),n.isValid()?(t=Object.assign({},t,{type:e}),"focus"===e&&this.get(".preventOpenOnFocus")&&(t.preventOpenOnFocus=!0),n.onFocusEvent(t)):Daria.DEBUG&&console.warn("mFocus",n.id+" невалиден","Событие "+e+" проигнорировано",n))},hasFocus:function(){return Boolean(this.get(".currentFocus"))},getFocus:function(){return this.get(".currentFocus")},getFocusOrDefault:function(){var e=this.getFocus();if(e)return e;var t=this.get(".itemIndex"),n=this.get(".columnIndex");return this.get(".tree")[n][t]},goInbox:function(){var e=this;ns.page.go("#inbox").then(function(){e._changeFocus(e.indexColumns.LEFT,e.DEFAULT_ITEM)})},_focusToMessage:function(e,t){this.get(".tree")[this.indexColumns.MESSAGES].length>0&&this._changeFocus(this.indexColumns.MESSAGES,e,{select:t})},focusToFirstMessage:function(e){this._focusToMessage(0,e)},focusToLastMessage:function(e){var t=this.get(".tree")[this.indexColumns.MESSAGES].length;this._focusToMessage(t-1,e)},setFocusByMid:function(e,t){var n=this.get(".tree")[this.indexColumns.MESSAGES],i=_.findIndex(n,"params.ids",e);if(i>-1){var r={scroll:t,show:Daria.is3pane()};this._changeFocus(this.indexColumns.MESSAGES,i,r)}},keyboardSelection:function(e){this.get(".keyboardSelection").select(e)},startKeyboardSelect:function(){var e=this.getFocusOrDefault();if(e){var t=e.getModel("message");if(t){var n=new Daria.CBS;n.start(t.params.ids),this.set(".keyboardSelection",n)}}},getRange:function(e,t){for(var n=ns.Model.get("message",{ids:e}),i=ns.Model.get("message",{ids:t}),r=this.get(".tree")[this.indexColumns.MESSAGES],o=-1,s=-1,a=0,u=r.length;a<u;a++){var l=r[a],c=l.getModel("message");if(!c)throw new Error("Something goes wrong");if(-1===o&&c===n&&(o=a),-1===s&&c===i&&(s=a),-1!==s&&-1!==o)break}return o<=s?r.slice(o,s+1):r.slice(s,o+1).reverse()},getIndexCurrentColumn:function(){return this.get(".columnIndex")},isCurrentFocusOnMessage:function(){if(!this.hasFocus())return!1;var e=this.getFocus();return Boolean(e.getModel("message")&&e.getModel("messages-checked"))},findIndex:function(e){var t=-1;return _.forEach(this.get(".tree"),function(n){if((t=n.indexOf(e))>-1)return!1}),t},setFocusAfterPageLoaded:function(){this.__setFocusAfterPageLoaded=!0},cancelSetFocusAfterPageLoaded:function(){this.__setFocusAfterPageLoaded=!1},shouldSetFocusAfterPageLoaded:function(){return Boolean(this.__setFocusAfterPageLoaded)}}},ns.ModelStatic),ns.events.on("pageinit",function(){_.defer(function(){var e=ns.Model.get("focus");"message"===ns.page.current.page&&e.setColumn(e.DEFAULT_COLUMN);var t=ns.page.current.params,n=t.ids||t.thread_id;n&&ns.Model.get("focus").setFocusByMid(n,!0)})})}()},function(e,t){ns.Model.define("footer-data",{events:{"ns-model-init":function(){var e=Daria.Config;this.setData({"full-year":new Date(Daria.now()).getFullYear(),"link-advert":this._linkAdvert(),"link-lite":"/u2709/go2lite","link-mobile-apps":this._linkMobileApps(),"link-yandex":Daria.IS_CORP?e["company-url"]:e["www-url"]})}},methods:{_linkAdvert:function(){return Daria.Config["adv-url"]},_linkMobileApps:function(){var e=Daria.Config,t=!1;return"RUS"===e.product&&(t=e["mobile-mail-url"],"uk"===e.locale&&(t=t.replace("yandex.ru","yandex.ua"))),t}}},ns.ModelStatic)},function(e,t){!function(){ns.Model.define("get_user_activity",{events:{"ns-model-changed":"_onModelChanged"},methods:{_onModelChanged:function(){this._lastLcnCheck=!0;var e=this.get(".lcn");e&&(this._lastLcnCheck=Daria.Xiva.handlers.processNewLcn(e))},syncLcn:function(){return ns.forcedRequest([this]).then(function(){return vow.resolve(this._lastLcnCheck)},this)}}},ns.ModelArmour)}()},function(e,t){ns.Model.define("get-group-user-events",{ctor:function(){this._lazyRequestDebounce=_.debounce(this._lazyRequest.bind(this),50),this._models={},this._promise=null},methods:{request:function(){return this.isValid()||(this._promise=Vow.promise()),this._lazyRequestDebounce(),this._promise},addModel:function(e){this._models[e.key]=e},isValid:function(){return _.isEmpty(this._models)},canRequest:function(){return!_.isEmpty(this._models)},_lazyRequest:function(){if(!this.canRequest())return void this._promise.fulfill();var e,t,n,i,r=_.assign({},this._models);_.forEach(r,function(r){(!e||e.getTime()>r.dateFrom.getTime())&&(e=r.dateFrom,n=r.params.from),(!t||t.getTime()<r.dateTo.getTime())&&(t=r.dateTo,i=r.params.to)});var o=ns.Model.get("get-user-events",{from:n,to:i,group:!0});o.destroy();var s=this;ns.request.models([o]).then(function(){_.forEach(r,function(e){e.setDataFromEvents(o)})}).always(function(){_.forEach(r,function(e){delete s._models[e.key]}),s._promise.fulfill(),o.destroy()})}}})},function(e,t){ns.Model.define("get-user-events",{events:{"ns-model-init":"_onInit","ns-model-touched":"_setUpdateTimer"},params:{from:"",to:"",group:!1},maxAge:24*Jane.Date.HOUR,maxStaleAge:Number(Jane.Date.MINUTE),ctor:function(){this._updateTimer=null,this._minimalViewTime=15,this._minimalViewInterval=Daria.timify({minutes:15},"hours"),this._mapEventsIterator=this._mapEventsIterator.bind(this),this._sortEvents=this._sortEvents.bind(this),this._reduceGroupsIterator=this._reduceGroupsIterator.bind(this)},methods:{_onInit:function(){this.params.from&&(this.dateFrom=Jane.Date.LocalDate.parseDate(this.params.from)),this.params.to&&(this.dateTo=Jane.Date.LocalDate.parseDate(this.params.to),this.dateTo.setHours(23,59,59))},getRequest:function(){if(this.isValid())return this;if(this.params.group)return this;if(!this.dateFrom||!this.dateTo)return this;var e=ns.Model.get("get-group-user-events");return e.addModel(this),e},extractData:function(e){var t=this._extractData(e);return!t&&this.data&&(t=this.data,t._lastData=!0),t||{events:[]}},hasDataChanged:function(e){return(!e||!e._lastData)&&Boolean(e)},preprocessData:function(e){return e._lastData?e:this.params.group?(e.events=_.map(e.events,this._mapEventsCommonIterator),e):(Array.isArray(e.events)?e.ranges=this.createGroupsOfEvents(e.events):Jane.ErrorLog.send({errorType:"HandlerError",name:"get-user-events",reason:"calendar_get-user-events_failed"}),e)},_setUpdateTimer:function(){var e=this;this.params.group||(this._updateTimer&&(clearTimeout(this._updateTimer),this._updateTimer=null),this._updateTimer=setTimeout(function(){e._updateTimer=null,e.isValid()&&(e.invalidate(),e.atrigger("daria:mGetUserEvents:update"))},this.info[this.isLastData()?"maxStaleAge":"maxAge"]))},getEventsFromRange:function(e,t){var n=e.getTime(),i=t.getTime();return _.filter(this.get(".events"),function(e){var t=e.startDate.getTime(),r=e.endDate.getTime();return!(n>r||i<t)})},setDataFromEvents:function(e){var t=e.getEventsFromRange(this.dateFrom,this.dateTo);return this.setData({events:t})},isLastData:function(){return Boolean(this.get("._lastData"))},createGroupsOfEvents:function(e){return _(e).chain().map(this._mapEventsCommonIterator).map(this._mapEventsIterator).sortBy(this._sortEvents).reduce(this._reduceGroupsIterator,[]).value()},_getSizeOfRange:function(e,t){var n=(t.getTime()-e.getTime())/Jane.Date.HOUR;return Number(n.toFixed(2))},_sortEvents:function(e){return e.startDate.getTime()},_findGroupIndex:function(e,t){var n=e.startDate.getTime(),i=e.viewEndDate.getTime(),r=t.startDate.getTime(),o=t.viewEndDate.getTime();return!(i<=r||n>=o)},_reduceGroupsIterator:function(e,t){var n=_.findIndex(e,this._findGroupIndex.bind(this,t)),i=e[n];return i||(i={events:[]},e.push(i)),i.events.push(t),i.startDate=i.startDate?i.startDate.getTime()>t.startDate.getTime()?t.startDate:i.startDate:t.startDate,i.endDate=i.endDate&&i.endDate.getTime()>t.endDate.getTime()?i.endDate:t.endDate,_.assign(i,this._createIntervalOptions(i.startDate,i.endDate)),e},_mapEventsCommonIterator:function(e){var t=Jane.Date.LocalDate.parseISOTime(e.startTs),n=Jane.Date.LocalDate.parseISOTime(e.endTs);return _.assign({},e,{startDate:t,endDate:n})},_mapEventsIterator:function(e){return _.assign({},e,this._createIntervalOptions(e.startDate,e.endDate))},_createIntervalOptions:function(e,t){var n,i,r=this._getSizeOfRange(e,t);r<this._minimalViewInterval?(i=this._minimalViewInterval,n=Jane.Date.clone(e),n.setMinutes(e.getMinutes()+this._minimalViewTime)):(i=r,n=Jane.Date.clone(t));var o=Jane.Date.getHours(e),s=o,a=Jane.Date.clone(e),u=Jane.Date.clone(n),l=!0,c=!0;return this.dateTo&&this.dateTo.getTime()<n.getTime()&&(u=Jane.Date.clone(this.dateTo),l=!1),this.dateFrom&&this.dateFrom.getTime()>e.getTime()&&(a=Jane.Date.clone(this.dateFrom),c=!1,s=0),{intervalInHours:r,viewEndDate:n,viewIntervalInHours:i,startInHours:o,startInRange:s,viewIntervalInRange:this._getSizeOfRange(a,u),isFinishedInRange:l,isStartedInRange:c,stringDate:Jane.Date.getDaysInterval(e,t),startStringHour:Jane.Date.format("%Date_HM__colon",e),endStringHour:Jane.Date.format("%Date_HM__colon",t),startDay:Jane.Date.format("%F",e)}}}},ns.ModelArmour)},function(e,t){ns.Model.define("head-user-state",{events:{"ns-model-init":"_onInit"},methods:{LS_ITEM_NAME:"newLettersInMA",_onInit:function(){this.setData({newLettersInMA:Boolean(Daria.LS.getItem("newLettersInMA"))}),window.addEventListener("storage",function(e){if(e&&"newLettersInMA"===e.key){var t=Daria.LS.getItem(this.LS_ITEM_NAME);this.setNewLettersInMA(t)}}.bind(this),!1)},hasNewLettersInMA:function(){return this.get(".newLettersInMA")},setNewLettersInMA:function(e){this.setIfChanged(".newLettersInMA",e),e?Daria.LS.setItem(this.LS_ITEM_NAME,"true"):Daria.LS.removeItem(this.LS_ITEM_NAME)}}},ns.ModelStatic)},function(e,t,n){function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){function e(e){var t=e.prefix,n=e.defaultPostfix,r=e.getPostfix,o=e.args;return t+(r.apply(void 0,i(o))||n||"")}function t(t){return e({prefix:"boot--Yandex_",defaultPostfix:"ru",getPostfix:function(e){return-1===["ru","uk","kk","be"].indexOf(e)&&"en"},args:[t]})}function r(t,n){return e({prefix:"boot--Mail"+(n?"-logoaas":"")+"_",defaultPostfix:"ru",getPostfix:function(e){return-1!==["uk","kk","be"].indexOf(e)?"be":"ru"!==e?"en":void 0},args:[t]})}var o=n(1506);ns.Model.define("header-logo-data",{params:{},methods:{request:function(){return Daria.hasFeature("workspace-header")?this._setWSHeaderData():Daria.IS_CORP?this._setCorpHeaderData():this._setProdHeaderData()},_getLogoData:function(e){e=e||{};var n=Daria.Config,i=n.locale,o=n["www-url"];return n.pddDomain&&n["pdd-logo"]&&!Daria.is3pane()&&(o="http://"+n.pddDomain),Object.assign({href:o,mailIcon:r(i,e.src),yandexIcon:t(i),mailboxCheckHref:"#inbox"},e)},_setWSHeaderData:function(){var e=ns.request._getNodeRequestDetails("ws-header-data");return ns.http(e.url,e.params).then(function(e){var t=e.models[0],n=this.extractError(t);if(n)throw n;ns.request.extractModel(this,t);var i=this.get(".logo")||{};this.set(".logo",this._getLogoData(i))},this).fail(this._setProdHeaderData,this)},_setCorpHeaderData:function(){var e=this,t=this._getCorpDropdownServices(),n=this._getLogoData();return vow.Promise.resolve().then(function(){e.setData({dropdownServices:t,logo:n})})},_setProdHeaderData:function(){var e=this,t=this._getProdDropdownServices(),n=this._getLogoData();return vow.Promise.resolve().then(function(){e.setData({dropdownServices:t,logo:n})})},_getCorpDropdownServices:function(){return{services:o(Daria.IS_CORP,Daria.Config.locale)}},_getProdDropdownServices:function(){var e=o(Daria.IS_CORP,Daria.Config.locale),t=ns.Model.get("index-data").get(".tabs");t=t.head.concat(t.more);for(var n=e.slice(0,2),i=0;i<e.length;i++){var r=e[i];if(!(["mail","search"].indexOf(r.id)>-1))for(var s=0;s<t.length;s++){var a=t[s];a.separator||(a.id&&"all_services"===a.id?this.servicesAll=a:a.id&&a.id===r.id&&(r.href=a.href,n.push(r)))}}return{services:n,servicesAll:this.servicesAll||{}}}}},ns.Model)}()},function(e,t,n){"use strict";function i(e,t){return"mail--Service_stub_"+e+"_"+t}e.exports=function(e,t){return e?[{id:"mail-corp",href:Daria.Config["mail-url"],content:i18n("%ServiceTabs_mail"),icon:"mail--Service_mail-corp"},{href:Daria.Config["calendar-url"],content:i18n("%Tab_calendar"),icon:"mail--Service_calendar"},{href:Daria.Config["yamb-url"],content:i18n("%ServiceTabs_yamb"),icon:"mail--Service_yamb"},{href:Daria.Config["calendar-url"]+"/invite",content:i18n("%Tab_invite"),icon:i("invite",t)},{href:Daria.Config["wiki-url"],content:i18n("%ServiceTabs_wiki"),icon:"mail--Service_wiki"},{href:Daria.Config["staff-host"],content:i18n("%ServiceTabs_staff"),icon:"mail--Service_people"},{href:Daria.Config["startrek-url"],content:i18n("%ServiceTabs_startrek"),icon:"mail--Service_startrek"},{href:Daria.Config["diary-url"],content:i18n("%ServiceTabs_diary"),icon:i("diary",t)},{href:Daria.Config["idm-url"],content:i18n("%ServiceTabs_agranat"),icon:i("idm",t)},{href:Daria.Config["jhist-url"],content:i18n("%ServiceTabs_jabber"),icon:i("jabber",t)},{href:Daria.Config["golem-url"],content:i18n("%ServiceTabs_admins"),icon:i("golem",t)},{href:Daria.Config["planner-url"],content:i18n("%ServiceTabs_planner"),icon:i("planner",t)},{href:Daria.Config["libra-url"],content:i18n("%ServiceTabs_libra"),icon:i("lib",t)},{href:Daria.Config["doc-url"],content:i18n("%ServiceTabs_doc"),icon:i("doc",t)},{href:Daria.Config["lego-url"],content:i18n("%ServiceTabs_lego"),icon:i("lego",t)},{href:Daria.Config["magazine-url"],content:i18n("%ServiceTabs_magazine"),icon:i("magazine",t)},{href:Daria.Config["maillist-url"],content:i18n("%ServiceTabs_maillists"),icon:i("ml",t)},{href:Daria.Config["otrs-url"],content:i18n("%ServiceTabs_otrs"),icon:i("otrs",t)},{href:Daria.Config["stat-url"],content:i18n("%ServiceTabs_statface"),icon:i("stat",t)}]:[{id:"mail",href:Daria.Config["mail-url"],content:i18n("%ServiceTabs_mail"),icon:"mail--Service_mail-prod"},{id:"search",href:Daria.Config["www-url"],content:i18n("%ServiceTabs_www"),icon:"mail--Service_search_"+(-1!==["ru","uk","kk","by"].indexOf(t)?"ru":"en")},{id:"calendar",href:Daria.Config["calendar-url"],content:i18n("%Tab_calendar"),icon:"mail--Service_calendar"},{id:"disk",href:Daria.Config["disk-url"],content:i18n("%ServiceTabs_disk"),icon:"mail--Service_yadisk"},{id:"money",href:Daria.Config["money-url"],content:i18n("%ServiceTabs_money"),icon:"mail--Service_money"},{id:"images",href:Daria.Config["images-url"],content:i18n("%ServiceTabs_images"),icon:"mail--Service_images"},{id:"news",href:Daria.Config["news-url"],content:i18n("%ServiceTabs_news"),icon:"mail--Service_news"},{id:"maps",href:Daria.Config["maps-url"],content:i18n("%ServiceTabs_maps"),icon:"mail--Service_maps"},{id:"market",href:Daria.Config["market-url"],content:i18n("%ServiceTabs_market"),icon:"mail--Service_market"},{id:"pogoda",href:Daria.Config["weather-url"],content:i18n("%ServiceTabs_weather"),icon:"mail--Service_pogoda"},{id:"tv",href:Daria.Config["tv-url"],content:i18n("%ServiceTabs_tv"),icon:"mail--Service_tv"},{id:"music",href:Daria.Config["music-url"],content:i18n("%ServiceTabs_music"),icon:"mail--Service_music"},{id:"afisha",href:Daria.Config["afisha-url"],content:i18n("%ServiceTabs_afisha"),icon:"mail--Service_afisha"},{id:"browser",href:Daria.Config["browser-url"],content:i18n("%ServiceTabs_browser"),icon:"mail--Service_browser"},{id:"metrika",href:Daria.Config["metrika-url"],content:i18n("%ServiceTabs_metrika"),icon:"mail--Service_metrika"},{id:"direct",href:Daria.Config["direct-url"],content:i18n("%ServiceTabs_direct"),icon:"mail--Service_direct"},{id:"fotki",href:Daria.Config["fotki-url"],content:i18n("%ServiceTabs_fotki"),icon:"mail--Service_fotki"}]}},function(e,t){ns.Model.define("is-yandex-user",{params:{email:null}})},function(e,t){!function(e){for(var t={ru:{abbr:"ru",short:"Ru",name:"Русский","date-format":"%d %h. %Y в %H:%M",locale:"ru_RU.UTF-8",locale_short:"ru_RU"},uk:{abbr:"uk",short:"Ua",name:"Українська","date-format":"%d %h. %Y о %H:%M",locale:"uk_UA.UTF-8",locale_short:"uk_UA"},az:{abbr:"az",short:"Az",name:"Azərbaycan","date-format":"%d %h. %Y в %H:%M",locale:"az_AZ.UTF-8",locale_short:"az_AZ"},tt:{abbr:"tt",short:"Tat",name:"Татарча","date-format":"%d %h. %Y %H:%M",locale:"tt_RU.UTF-8",locale_short:"tt_RU"},en:{abbr:"en",short:"En",name:"English","date-format":"%h %d, %Y at %H:%M",locale:"en_US.UTF-8",locale_short:"en_US"},tr:{abbr:"tr",short:"Tr",name:"Türkçe","date-format":"%d %h. %Y о %H:%M",locale:"tr_TR.UTF-8",locale_short:"tr_TR"},be:{abbr:"be",short:"By",name:"Беларуская","date-format":"%d %h. %Y о %H:%M",locale:"be_BE.UTF-8",locale_short:"be_BE"},kk:{abbr:"kk",short:"Kz",name:"Қазақ","date-format":"%d %h. %Y о %H:%M",locale:"kk_KK.UTF-8",locale_short:"kk_KK"},ka:{abbr:"ka",short:"Geo",name:"ქართული","date-format":"%d %h. %Y о %H:%M",locale:"ka_KA.UTF-8",locale_short:"ka_KA"},ro:{abbr:"ro",short:"Ro",name:"Română","date-format":"%d %h. %Y о %H:%M",locale:"ro_RO.UTF-8",locale_short:"ro_RO"},hy:{abbr:"hy",short:"Arm",name:"Հայերեն","date-format":"%d %h. %Y о %H:%M",locale:"hy_HY.UTF-8",locale_short:"hy_HY"}},n=[],i=0,r=0;i<e.length;i++){var o=t[e[i]];o&&(n[r++]=o)}ns.Model.define("languages",{events:{"ns-model-init":function(){this.setData({languages:{lang:n}})}}},ns.ModelStatic)}(Daria.locales)},function(e,t){ns.Model.define("message-failed",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({})},hasMid:function(e){return this.data.hasOwnProperty(e)},setMid:function(e){e&&(this.data[e]=!0)},removeMid:function(e){delete this.data[e]}}},ns.ModelStatic)},function(e,t){!function(){ns.Model.define("message-body",{params:{ids:null,is_spam:!1,hid:null,raw:!1,draft:!1},calculateParamsForMessageBody:function(e){var t=Array.isArray(e.ids)&&e.ids.length>1&&"forward"===e.oper;return!e.ids||t?null:_.extend({},e,{draft:Boolean(!e.oper&&e.ids)})},methods:{_bodyNodesCache:{},_bodyNodesCacheLifetime:3e5,_destroyNodesCacheTimer:null,exists:function(){if(this.status===this.STATUS.ERROR){var e=this.getError();return!(e&&String(e.code)===Daria.WMI.ERROR_CODES.NO_SUCH_MESSAGE)}return!0},extractError:function(e){if(e){var t=no.jpath(".error.code",e);return String(t)===Daria.WMI.ERROR_CODES.NO_SUCH_MESSAGE&&(this.canRequest=no.False),e.error}},canRequest:function(){return!ns.Model.get("message-failed").hasMid(this.params.ids)},preprocessData:function(e){var t=this.params;this._cancelDestroyNodesCacheTimer(),this._destroyNodesCache(),this.setIconInfo(e);var n=ns.Model.get("message",{ids:t.ids});e["is-spam"]=n.isSpam(),e["is-support"]=n.isYaSupport(),e["is-noreply-notification"]=n.isNoreplyNotification(),(e["is-spam"]||e.phishing)&&(e["hide-imgs"]=!0);var i,r,o=jpath(e,".info.livemail")[0];if(o)try{e.livemail=$.parseJSON(o)}catch(e){}var s=e.attachment;if(s)for(i=0,r=s.length;i<r;i++){var a=s[i];if(a.narod){var u=a.name,l=Daria.splitName(u);a.filename=l[0],a.fileext=l[1]?"."+l[1]:"",a["name-uri-encoded"]=encodeURIComponent(u),a["preview-src"]=a.preview}else".wdp"===a.fileext&&delete a["preview-supported"]}return e.info&&e.info.date&&(e.info.date.view=Daria.MessageTime.getFormattedTime(e.info.date.timestamp)),e},hasRelativeTime:function(){return this.get(".info.date.view.isRelative")},updateTime:function(){var e=Daria.MessageTime.getFormattedTime(this.get(".info.date.timestamp"));this.set(".info.date.view",e)},setIconInfo:function(e){(jpath(e,".attachment")[0]||[]).forEach(function(e){var t=Daria.getExtensionInfo(e.name);t.icon&&(e.icon=t.icon)})},getEmailInfoParams:function(){var e=this.select('.info.field[.type=="from"]')[0],t=e&&e.email&&e.email.toLowerCase();return t&&Jane.FormValidation.checkEmail(t)?{ref:e.ref,email:t}:null},getEmailRef:function(e){return this.select('.info.field[.email=="'+e+'"].ref')[0]},parseDate:function(e){var t=String(e).match(/^(\d+)-(\d+)-(\d+) (\d+):(\d+):(\d+)$/);return t?new Date(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10)).getTime():null},getSubtype:function(){var e=this.get(".body.subtype");return e&&e[0]},getAddressField:function(e,t){return Daria.formatContacts(this.select('.info.field[.type == "'+e+'"]'),t)},filterRecipients:function(e){var t=ns.Model.get("account-information").getAllUserEmails().map(function(e){return e.replace(/-/g,".").toLowerCase()}),n=function(e){var n=Daria.Recipients.getRecipientFromCache(e.name,e.email);return(!n||!n.isSelf)&&_.indexOf(t,e.email.replace(/-/g,".").toLowerCase())<0};return _.filter(this.getFieldsByType(e),n)},getRecipients:function(e,t){var n=void 0;n=t?function(e){return e}:function(e){return Daria.formatContacts(e,!1)};var i=this.filterRecipients("reply-to");i.length||(i=this.filterRecipients("from")),i.length&&!e||(i=i.concat(this.filterRecipients("to"))),i.length||(i=this.getFieldsByType("from")),i=_.uniq(i,"email");var r=e?this.filterRecipients("cc"):[];return{to:n(i),cc:n(r)}},allowedReplyAll:function(){var e=this.getRecipients(!0,!0),t=_(e).chain().values().flatten().filter("email").uniq("email").value(),n=this.getFieldsByType("to").pop();return n&&Daria.email.isCA(n.email)&&_.remove(t,function(e){return e.email===n.email}),t.length>1},participantsCount:function(){return this.filterRecipients("to").length+this.filterRecipients("cc").length},getFieldsByType:function(e){return this.select('.info.field[.type == "'+e+'"]')},recipientsCount:function(){return this.getFieldsByType("to").length+this.getFieldsByType("cc").length+this.getFieldsByType("bcc").length},hasTooManyRecipients:function(){return this.recipientsCount()>=10},getInfo:function(e){return this.select(".info."+e)},getMessageId:function(){return this.get(".info.message-id")||null},getInReplyTo:function(){return this.get(".info.in-reply-to")||null},getReferences:function(){return this.get(".info.references")||null},getAttachments:function(){return this.get(".attachment")||[]},hasInlineAttachments:function(){var e=this.getData();return!!e&&jpath(e,".attachment[!.narod]")>0},_COLLECTOR_MSG_STIDS:["102.66466005.241046198820547232969001058","102.66466005.157526963565013225811429732","102.66466005.134090406637961488505874094","102.66466005.776572722362711757375188712","102.66466005.856799731918248093078980991"],getComposeHTML:function(){var e=this.get(".body"),t=[];if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t.push(e[n].content);return t},getHTML:function(e){e=e||{},e.ids=this.params.ids;var t=this.getData();if(!t||t.error)return Jane.ErrorLog.send({errorType:"message-body.error",params:JSON.stringify(e),msgBodyError:t&&t.error}),Jane.tt("message:message-body-error");if(this.isCollectorMessage())return Jane.tt("message:message-body-collector-msg",{lang:this.getDefaultLangId()});this._resetDestroyNodesCacheTimer();var n=Daria.getParamsHash(e);if(this._bodyNodesCache[n])return this._bodyNodesCache[n].cloneNode(!0);var i=document.createElement("div"),r=["mail-Message-Body-Content"],o=t.body||[],s=o[0];s&&"plain"===s.subtype&&(r.push("mail-Message-Body-Content_plain"),ns.Model.get("settings").isSet("use_monospace_in_text")&&r.push("mail-Message-Body-Content_monospace")),i.className=r.join(" ");for(var a,u,l,c=0,d=o.length;c<d;c++)for(a=this._processBody(o[c],e),u=0,l=a.length;u<l;u++)i.appendChild(a[u]);return this._bodyNodesCache[n]=i,this._bodyNodesCache[n].cloneNode(!0)},_destroyNodesCache:function(){this._bodyNodesCache={}},_cancelDestroyNodesCacheTimer:function(){clearTimeout(this._destroyNodesCacheTimer)},_resetDestroyNodesCacheTimer:function(){this._cancelDestroyNodesCacheTimer(),this._destroyNodesCacheTimer=setTimeout(this._destroyNodesCache.bind(this),this._bodyNodesCacheLifetime)},getDefaultLangId:function(){switch(Daria.Config.locale){case"ru":case"be":return 1;case"en":return 2;case"uk":return 5;case"tr":return 44;default:return 0}},_processBody:function(e,t){var n=Daria.MessageProcess.processBody(e.content,t),i=$(n).contents().get(),r="";return"message"===e.type&&"delivery-status"===e.subtype&&(r="<p>"+i18n("%Message_Delivery_Status")+"</p>"),$(r).get().concat(i)},isCollectorMessage:function(){var e=this.getSTID();return!!e&&this._COLLECTOR_MSG_STIDS.indexOf(e)>-1},getSTID:function(){return this.get(".info.stid")},getRawFirstBody:function(){return this.get(".body[0].content")||""},getReplyBody:function(e,t,n){var i=ns.Model.get("settings"),r="";if(i.isSet("enable_quoting")&&(r=this.getQuoteContent(e)),!n){var o=Daria.Translate.getLangByMid(this.params.ids);o||(o=Daria.Translate.defineLanguage(this.getComposeHTML())),r=Daria.signs.appendToBody(r,e,null,t,o)}return r},getQuoteContent:function(e){var t=ns.Model.get("message",{ids:this.params.ids}),n=t.getDateTime(),i=t.getAddressField("from").replace(/\\"/g,'"'),r=this.getComposeHTML();return"html"===e?(r=Daria.Html2Text.quoteHtml(r),"<div><br/></div><div><br/></div><div>"+n+", "+_.escape(i)+":</div>"+r):(r=Daria.Html2Text.html2text(r),r=Daria.Html2Text.quoteText(r),"\n\n"+n+", "+i+":\n"+r)},getForwardBody:function(e,t){var n=ns.Model.get("message",{ids:this.params.ids}),i="",r=n.getDateTime(),o=n.getAddressField("from").replace(/\\"/g,'"'),s=this.getComposeHTML(),a=Daria.Translate.getLangByMid(this.params.ids)||Daria.Translate.defineLanguage(s);return s='<div class="normalize">'+s+"</div>","html"===e?(i+="<div><br/></div><div><br/></div><div>-------- "+i18n("%Compose_Forward_Start")+"--------</div>",i+="<div>"+r+", "+_.escape(o)+":</div><div><br/></div>",i+=s,i+="<div><br/></div><div>-------- "+i18n("%Compose_Forward_End")+" --------</div>"):(i+="\n\n-------- "+i18n("%Compose_Forward_Start")+"  --------",i+="\n"+r+", "+o+":\n\n",i+=Daria.Html2Text.html2text(s),i+="\n-------- "+i18n("%Compose_Forward_End")+" --------"),Daria.signs.appendToBody(i,e,!0,t,a)},getDraftBody:function(e){var t;if(e&&(t=$.makeArray(this.get('.body[.subtype == "'+e+'" && .name == ""]')||[])[0]),t||(t=this.getFirstBody()),!t)return"";var n=t.content,i=t.subtype;return"plain"===e&&"html"===i?n=Daria.Html2Text.html2text(n):"html"===e&&"plain"===i&&(n=n.replace(/\u0020\u0020/g,"  "),n=_.unescape(n),n=Daria.Html2Text.text2html(n)),"plain"===e&&(n=_.unescape(n)),n},_getLocationsData:function(){var e=this.get(".facts.addr");return _.flatten(e).filter(function(e){return Boolean(e)})},getInvalidLocations:function(){return _.difference(this._getLocationsData(),this.getLocations())},getLocations:function(){return _(this._getLocationsData()).filter(function(e){return"string"==typeof e.geo_addr&&_.isPlainObject(e.addr)}).filter(function(e){return"string"==typeof e.addr.street||_.keys(e.addr).length>1}).valueOf()},hasPGP:function(){if(!this.isValid())return!1;var e=this.getFirstNonEmptyBodyContent()||"";return e.indexOf("wmi-pgp")>-1||e.indexOf("-----BEGIN PGP MESSAGE-----")>-1},getPGP:function(){var e={ids:this.params.ids,raw:!0},t=$.Deferred();return ns.request("message-body",e).then(function(e){var n=e[0],i=n.getFirstNonEmptyBodyContent()||"",r=n.getFieldsByType("from")[0],o=n.getFieldsByType("to")[0];t.resolve({from:{email:r.email,name:r.name},message:i.trim(),to:{email:o.email,name:o.name}})},function(){t.reject()}),t},getCalendarEvent:function(){return this.select(".facts.events.CalendarEvent")[0]},getCalendarICS:function(){return this.select(".calendars.calendar.hid")[0]},fetch:function(e){return e=no.extend(this.params,e||{}),ns.forcedRequest(this.id,e)},isLoaded:function(){return Boolean(this.get(".body"))},hasListUnsubscribe:function(){return Boolean(this.getInfo("list-unsubscribe")[0])},hasFactUnsubscribe:function(){return Boolean(jpath(this.getData(),".body[0].facts.unsubscribe.url")[0])},getUnsubscribeOptions:function(){function e(e,t){if(e){var n=$.url(e);n.Proto.match(/^https?$/gi)&&n.host&&(o[n.Proto+(t?"-"+t:"")]=e)}}var t,n=this.getInfo("list-unsubscribe")[0],i=this.get(".body.facts.unsubscribe"),r="<((mailto|https?):[^>]+)>",o={},s=n.match(new RegExp(r,"gi"));if(s)for(var a=0;a<s.length;a++){t=new RegExp(r,"i").exec(s[a]);var u=t[2]+"-header";o[u]||(o[u]=t[1])}else Jane.FormValidation.reEmail.test(n)?o["mailto-header"]="mailto:"+n:e(n,"header");if(i&&i.length){var l=jpath(i[0],".url");l.length&&e(l[0],"body")}return o},fromComposeMessage:function(e,t){if(this.isValid())return this;var n=ns.Model.get("message",{ids:t}),i=ns.Model.get("message-body",{ids:t}),r=e.get(".sentMessageId"),o=e.get(".from_mailbox"),s=[{email:o,name:e.get(".from_name"),ref:i.getEmailRef(o),type:"from"}];s=s.concat(e.formatContacts("to",i),e.formatContacts("cc",i),e.formatContacts("bcc",i));var a=e.getSendMessage();return e.isHtmlType()||(a=Daria.Html2Text.text2html(a)),this.setData({fake:!0,body:[{type:"text",subtype:e.get(".ttype"),content:a}],info:{date:n.createMessageCurrentDate(),field:s,"message-id":r}})},isRecipient:function(){var e=ns.Model.get("account-information"),t=this.getFieldsByType("to").concat(this.getFieldsByType("cc"),this.getFieldsByType("bcc"));return _.some(t,function(t){return e.isMyEmail(t.email)})},hasPhishingBody:function(){return(this.get(".body")||[]).some(function(e){return Boolean(e.phishing)})},getFirstBody:function(){return(this.get(".body")||[])[0]},getFirstNonEmptyBodyContent:function(){return(this.get(".body.content")||[])[0]}}})}()},function(e,t){ns.Model.define("message",{events:{"ns-model-init":"_onInit"},params:{ids:null,hid:null},methods:{_threadKeyPrefix:"t",_readInfo:{},_countInfo:{},INVALID_FOLDERS_SYMBOLS_FOR_PIN:["spam","trash"],_onInit:function(){this._checkIds(),this.params.ids&&this.params.ids[0]===this._threadKeyPrefix&&this.setData({FAKE_THREAD_DATA:!0})},_checkIds:function(){if(!this.params.ids)throw new Error("Can't create Daria.mMessage without ids")},preprocessData:function(e){if(e.date&&e.date.chunks){var t=e.date.chunks;e.date.ts=new Date(t.year,t.month,t.date,t.hours,t.minutes).getTime(),e.date.view=Daria.MessageTime.getFormattedTime(e.date.timestamp)}var n=e.subject;n&&"No subject"!==n||(e.subject=i18n("%Без_темы"));var i=e.recipients;if(i){for(var r in i)Daria.Recipients.cacheRecipient(i[r]);delete e.recipients}return e},hasRelativeTime:function(){return this.get(".date.view.isRelative")},updateTime:function(){var e=Daria.MessageTime.getFormattedTime(this.get(".date.timestamp"));this.set(".date.view",e)},hasDataChanged:function(e){var t=this.data;if(!t||!this.hasRealData())return!0;if(e.__prevent_update)return!1;var n=[];return t.count!==e.count&&n.push({jpath:".count",value:e.count}),t.fid!==e.fid&&n.push({jpath:".fid",value:e.fid}),t.tid!==e.tid&&n.push({jpath:".tid",value:e.tid}),t.firstline!==e.firstline&&n.push({jpath:".firstline",value:e.firstline}),t.new!==e.new&&n.push({jpath:".new",value:e.new}),_.isEqual(t.flags,e.flags)||n.push({jpath:".flags",value:e.flags}),_.isEqual(t.lid,e.lid)||n.push({jpath:".lid",value:e.lid}),_.isEqual(t.field,e.field)||n.push({jpath:".field",value:e.field}),e.date&&!_.isEqual(t.date,e.date)&&n.push({jpath:".date",value:_.extend({},e.date,{view:Daria.MessageTime.getFormattedTime(e.date.timestamp)})}),n.forEach(function(e){this.set(e.jpath,e.value)},this),this.isThread()&&(n.length||t.thread_scn!==e.thread_scn)&&ns.forcedRequest([{id:"messages",params:{thread_id:t.tid}}]),!1},exists:function(){if(this.status===this.STATUS.ERROR){var e=this.getError();return!(e&&String(e.code)===Daria.WMI.ERROR_CODES.NO_SUCH_MESSAGE)}return!0},extractError:function(e){if(e){var t=no.jpath(".error.code",e);return String(t)===Daria.WMI.ERROR_CODES.NO_SUCH_MESSAGE&&(this.canRequest=no.False),e.error}},canRequest:function(){return!ns.Model.get("message-failed").hasMid(this.params.ids)},isDraftLike:function(){return!this.isThread()&&this.inFolderBySymbol(["outbox","draft","template"])},isExternalLike:function(){return!this.inFolderBySymbol(["draft","outbox","sent","template"])},isOutcomeMessage:function(){return this.inFolderBySymbol(["sent","outbox"])},canReply:function(){return!this.inFolderBySymbol(["spam","trash","draft","sent"])},canReplyQR:function(){return!this.inFolderBySymbol(["spam","trash","draft"])},isTemplate:function(){return!this.isThread()&&this.inFolderBySymbol("template")},isThread:function(){return this.isThreadModel()},isMessageThread:function(){return this.isThreadModel()&&1===this.getThreadCount()},getMessageThreadMid:function(){if(!this.isMessageThread())return this.params.ids;var e=this.getThreadMessages(),t=e.models[0];return t?t.params.ids:this.params.ids.slice(1)},isThreadModel:function(){return this.params.ids&&this.params.ids[0]===this._threadKeyPrefix},getSocialLabel:function(){var e=this.get(".dlid");return e||(e=this.get(".dtype.name")),e},getFolderId:function(){return this.get(".fid")||null},getMessageFieldName:function(){var e="from",t=ns.Model.get("folders"),n=["sent","draft","outbox","template"];return t.isFolder(ns.page.current.params.current_folder,n)&&(e="to"),ns.page.current.params.search&&t.isFolder(ns.page.current.params.fid,["sent"])&&(e="to"),e},isNew:function(){return Boolean(this.get(".new"))},isSpam:function(){var e=this.getFolderId();return ns.Model.get("folders").isFolder(e,"spam")},isNoreplyNotification:function(){var e=ns.Model.get("labels").getLabelByName("SystMetkaWJDT:NOTIFY");return e&&this.hasLabel(e.lid)},hasAttachment:function(){return Boolean(this.get(".flags.attachment"))},hasLabel:function(e){var t=this.getData();return Boolean(t&&Array.isArray(t.lid)&&t.lid.indexOf(e)>-1)},hasLabelWithSymbolicName:function(e){var t=ns.Model.get("labels").getLabelBySymbolicName(e);return Boolean(t&&this.hasLabel(t.lid))},inFolder:function(e){var t=this.get(".fid");return!(!e||!t||t!==e)},inFolderBySymbol:function(e){var t=this.getFolderId();return ns.Model.get("folders").isFolder(t,e)},isIntoThread:function(){return this.getThreadMessage().hasRealData()},getThreadId:function(){return this.get(".tid")},getUrl:function(){var e=this.inFolder(ns.Model.get("folders").getFidBySymbol("draft"));return Daria.isMessagePage()&&Daria.is2pane()&&(e=!1),ns.router.generateUrl(e?"compose2":"message",{ids:this.get(".mid")})},getSOLabels:function(){return this.get(".type")},toMove:function(e){return this.isThread()||this.getFolderId()!==e.current_folder},toDelete:function(e){return this.inFolderBySymbol("trash")||this.toMove(e)},toSpam:function(e){return this.toMove(e)},toNotspam:function(e){return this.toMove(e)},_grep:function(e,t,n,i){var r=[];if($.isArray(e))for(var o=0,s=e.length;o<s;o++)this[i](t+e[o],n)&&r.push(e[o]);return r},grep:function(e,t,n){var i=this._grep(e.mids,"",t,n),r=this._grep(e.tids,this._threadKeyPrefix,t,n);return!(!i[0]&&!r[0])&&{mids:i,tids:r}},label:function(e,t){var n=new Daria.MOPS.Opinfo,i=e.lid,r=_.clone(this.get(".lid"));if(i&&r&&-1===r.indexOf(i))if(r.push(i),this.set(".lid",r),this.isThreadModel()){if(!t&&!e.onlyAdd)return this._correctThreadListLabel("label",e)}else{var o=this.getThreadId();ns.Model.get("message",{ids:o}).label(e,!0),n.addAdjust(i,1),n.addMid(this.get(".mid"))}return n},toTemplate:function(){var e=ns.Model.get("folders"),t=this.getFolderId(),n=e.getFolderById(t);return!(!n||!n.user&&!e.isFolder(t,["inbox"]))},unlabel:function(e,t){var n=new Daria.MOPS.Opinfo,i=e.lid,r=_.clone(this.get(".lid"));if(i&&r){if(Jane.Array.remove(r,i)>-1)if(this.set(".lid",r),this.isThread()){if(!t)return this._correctThreadListLabel("unlabel",e)}else{var o=this.getThreadId(),s=ns.Model.get("message",{ids:o}),a=s.getThreadCount(),u=this.getThreadMessages(o).hasMessageWithLabel(i,a);!1===u&&s.unlabel(e,!0),n.addAdjust(i,-1),n.addMid(this.get(".mid"))}}return n},mark:function(){var e=new Daria.MOPS.Opinfo,t=this.get(".new");if(t>0){if(this.set(".new",0),this.isThread())return this._correctThreadListMark("mark",-t);this._correctThreadMark("mark"),e.addAdjust(this.getFolderId(),-t),e.addMid(this.get(".mid")),e.saveMid(this.get(".mid"))}return e},unmark:function(){var e=new Daria.MOPS.Opinfo,t=this.getThreadCount(),n=t-this.get(".new");if(n>0){if(this.set(".new",t),this.isThread())return this._correctThreadListMark("unmark",n);this._correctThreadMark("unmark"),e.addAdjust(this.getFolderId(),n),e.addMid(this.get(".mid")),e.saveMid(this.get(".mid"))}return e},toggleMark:function(){var e,t=this.isNew()?"mark":"unmark";return e=this.isThread()?this.getThreadMessagesCheckedModel(!0):this.getMessagesCheckedModel(!0),Daria.MOPS[t](e)},toggleMute:function(){var e=this.isMuted()?"unignore":"ignore";return Daria.MOPS[e]({tids:this.getThreadId()})},_correctThreadMark:function(e){var t=this.getThreadId(),n=ns.Model.get("message",{ids:t});if(n.data){var i=n.get(".new")||0,r=n.getThreadCount();"mark"===e?i--:i++,i=Math.max(i,0),i=Math.min(i,r),n.setIfChanged(".new",i)}},getThreadMessages:function(e){return _.isUndefined(e)&&(e=this.getThreadId()),ns.Model.get("messages",{thread_id:e})},getThreadMessage:function(e){if(_.isUndefined(e)&&(e=this.getThreadId()),e)return ns.Model.get("message",{ids:e})},_correctThreadListMark:function(e,t){var n=this.getThreadId(),i=this.getThreadMessages(n)[e]();return i.saveUnreadCounter(n,Math.abs(t)),i.saveAffectedMids(),i.checkTidAdjust(t,n),i},_correctThreadListLabel:function(e,t){var n=this.getThreadId(),i=this.getThreadMessages(n)[e](t);return i.getModelsCount()!==this.getThreadCount()&&i.checkTidAdjust(NaN,n),i},getAddressField:function(e,t){var n=this.getFieldsByType(e);return Daria.formatContacts(n,t)},getToEmail:function(){if(!this.getData())return"";var e="",t=this.getFieldsByType("to"),n=ns.Model.get("account-information").getAllUserEmails();return $.each(t,function(i){var r=t[i].email;if(!r)return!0;for(var o=0;o<n.length;o++)if(n[o].toLowerCase()===r.toLowerCase())return e=n[o],!1}),e},getReplyToEmail:function(){return this.getFieldsByType("reply-to")[0].email||""},getReplyToName:function(){return this.getFieldsByType("reply-to")[0].name||""},getToEmails:function(){var e=this.getFieldsByType("to");return $.map(e,function(e){return e.email||null})},getToNames:function(){var e=this.getFieldsByType("to");return $.map(e,function(e){return e.name||null})},getFromName:function(){var e=this.getFieldsByType("from")[0];return e&&e.name?e.name:""},getFromEmail:function(){var e=this.getFieldsByType("from")[0];return e&&e.email?e.email:""},getSubject:function(e){var t=this.getData();if(!t)return"";var n="";return!e&&t.subject_prefix&&(n=t.subject_prefix+" "),n+t.subject},getDate:function(){var e=this.get(".date.iso");return e?e.replace(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})$/,"$3.$2.$1"):""},getTime:function(){var e=this.get(".date.iso");return e?e.replace(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})$/,"$4:$5"):""},getDateTime:function(){return this.getDate()+", "+this.getTime()},getEmailRef:function(e){return this.select('.field[.email=="'+e+'"].ref')[0]},getSelectedInfo:function(e){var t,n,i,r,o=this._readInfo,s=this._countInfo,a=0,u=0;if(e.mids)for(t=0,n=e.mids.length;t<n;t++)i=e.mids[t],r=s[i],o[i]&&(a+=r),u+=r;if(e.tids)for(t=0,n=e.tids.length;t<n;t++)i=this._threadKeyPrefix+e.tids[t],r=s[i],o[i]&&(a+=r),u+=r;return{read:a,all:u}},isForward:function(){return/^Fwd:/.test(this.getSubject())},hasSocialLabels:function(){return Boolean(this.getSocialLID())},getSocialLID:function(){var e=_.flatten($.makeArray(this.select(".lid"))),t=e.length;if(t)for(var n=ns.Model.get("labels"),i=0;i<t;i++)if(n.isSocial(e[i]))return e[i];return null},COUPON_SERVICE_TYPES:[13,14],isCouponService:function(){var e=this.COUPON_SERVICE_TYPES;return _.intersection(e,this.get(".type")).length===e.length},CALENDAR_SERVICE_TYPE:42,isCalendarService:function(){return this.hasType(this.CALENDAR_SERVICE_TYPE)},isHuman:function(){return this.hasType(4)},hasType:function(e,t){var n=this.get(".type");_.isArray(e)||(e=[e]);var i="all";return t&&(i="any"),n&&_[i](e,function(e){return _.contains(n,e)})},updateThreadsUnreadCount:function(e,t){var n=[];for(var i in t){var r=this._threadKeyPrefix+i,o=this.getCache(r);if(o){var s,a=o.new||0;s="mark"===e?a-t[i].length:a+t[i].length,s=Math.max(0,s),this._readInfo[r]=0===s,s?o.new=s:delete o.new,("mark"===e&&0===s||"unmark"===e&&s>0)&&n.push(i)}}return n},getThreadCount:function(){return this.get(".count")},updateThreadCount:function(e){var t=this.getThreadCount();this.set(".count",t+e)},updateThreadInfo:function(e){if(!this.hasRealData())return!1;if(e.isNew()){var t=this.get(".new");this.set(".new",t+1)}e.isExternalLike()&&this.updateThreadContextInfo(e),this.updateThreadCount(1);var n=e.get(".lid"),i=this.get(".lid");i=_.uniq(i.concat(n)),this.set(".lid",i);var r=_.extend({},this.params,{fid:e.get(".fid")}),o=ns.Model.get("message-presentation",r);return o.fill(e),o.ensureOnDestroyBinded(this),!0},updateThreadContextInfo:function(e){this.set(".date",e.get(".date")),this.set(".fid",e.get(".fid")),this.set(".field",e.get(".field")),this.set(".firstline",e.getFirstline()),this.set(".last_mid",e.get(".mid")),this.set(".subject",e.getSubject(!0)),this.set(".subject_prefix",e.get(".subject_prefix")),this.set(".flags.attachment",e.hasAttachment())},uncheckThreadMessages:function(e){if(e=e||ns.Model.get("messages-checked"),this.isThread()){var t=this.getThreadMessages();_.forEach(t.models,function(t){e.isChecked(t)&&e.check(t,!1)})}},getEmails:function(){var e={},t=this.getData();if(t){var n=t.field;$.each(n,function(t,n){var i=e[n.type]={},r=n.name,o=n.email;o&&(i.ref=n.ref,i.email=o),r&&(i.name=r)})}return e},isYaSupport:function(){var e=ns.Model.get("labels").getLabelByName("yasupport");return!!e&&this.hasLabel(e.lid)},isBodyAutoExpand:function(){var e=this.getData();if(!e)return!1;var t=e.lid;if(!t||!t.length)return!1;for(var n,i=ns.Model.get("labels"),r=0,o=t.length,s=/^(vtnrf0roemru|vtnrf0habrahabr|vtnrf0livejournal)$/;r<o;r++)if((n=i.getLabelById(t[r]))&&s.test(n.name))return!0;return!1},getFieldsByType:function(e){return this.select('.field[.type == "'+e+'"]')},getFirstline:function(){return this.get(".firstline")||""},getMessageLink:function(){return ns.router.generateUrl("message",{ids:this.get(".mid")})},getMessagesCheckedModel:function(){var e=ns.Model.get("messages-checked",{mid:this.get(".mid")});return e.check(this,!0,{silent:!0}),e},getThreadMessagesCheckedModel:function(){if(this.isThread()){var e="all_"+this.get(".mid"),t=ns.Model.get("messages-checked",{mid:e}),n=this.getThreadMessages();return t.check(this,!0),_.each(n.models,function(e){t.check(e,!0)}),t}return ns.Model.get("messages-checked")},isImportant:function(){var e=ns.Model.get("labels").getImportantLID();return this.hasLabel(e)},isPriority:function(){var e=ns.Model.get("labels").getPriorityLID();return Boolean(e&&this.hasLabel(e))},isPinned:function(){var e=ns.Model.get("labels").getPinnedLabel();return!!e&&this.hasLabel(e.lid)},isDelayed:function(){if(!this.inFolderBySymbol("outbox"))return!1;var e=ns.Model.get("labels").getDelayedMessageLabel();return!!e&&(!!this.hasLabel(e.lid)&&!((this.get(".date.ts")||this.get(".date.timestamp"))<Daria.now()))},getDelayedTime:function(){if(this.isDelayed())return Jane.Date.format("%Date_FT",this.get(".date.ts")||this.get(".date.timestamp"))},move:function(e){var t={current_folder:e};this.toMove(t)?this.doMove(e):this.toDelete(t)&&this.remove();var n=new Daria.MOPS.Opinfo;return n.resetAdjust(),n},doMove:function(e){var t,n=this,i=this.getThreadId(),r=this.get(".fid"),o=this.inFolderBySymbol(["trash"]),s=new Daria.MOPS.Opinfo,a=this.get(".lid");r===e?r="":this.set(".fid",e);var u=this.inFolderBySymbol(["trash"]),l=this.inFolderBySymbol(["spam"]),c=this.getThreadMessages(),d=this.isThread();if(d?t=this:(t=ns.Model.get("message",{ids:i}),t.hasRealData()||(t=this)),u&&this.isNew()&&!d&&this.isIntoThread()&&t._correctThreadMark("mark"),c.isValid())if(d)c.models.forEach(function(t){t.inFolderBySymbol("sent")||t.set(".fid",e)});else if(r){var f=_.findIndex(c.models,function(e){return e.getFolderId()===r});if(-1===f){var p=ns.Model.get("messages",{current_folder:r,threaded:"yes"});p.isValid()&&p.remove(t),(l||u)&&t.isPinned()&&ns.Model.traverse("messages",function(e){"yes"===e.params.with_pins&&e.remove(t)})}}var h,m=ns.page.current.params.current_folder,g=ns.page.current.params.category;u&&a&&(h={},a.forEach(function(e){h[e]=!0}));var v={};return ns.Model.traverse("messages",function(s){g&&g===s.params.category&&(l||u)&&s.remove(n),n.isPinned()?(l||u)&&s.remove(n):s.params.current_folder===r||m&&s.params.current_folder===m&&e!==m?s.remove(n):s.params.current_folder===e&&("yes"===s.params.threaded?s.insertMessageBySort(t):s.insertMessageBySort(n));var c=s.params.thread_id;if(u&&!d&&c===i){if(s.remove(n)){var f=ns.Model.get("message",{ids:c});f.hasRealData()&&!v[c]&&(f.updateThreadCount(-1),v[c]=!0)}}u&&(s.isUnreadMessagesCollection()||s.isWithAttachmentMessagesCollection()||s.isImportantMessagesCollection())&&s.remove(n),u&&a&&s.params.current_label&&h[s.params.current_label]&&s.remove(n),!o||u||d||c!==i||("yes"===s.params.threaded?s.insertMessageBySort(t):s.insertMessageBySort(n))}),ns.Model.invalidateAll("messages-from"),s.resetAdjust(),s},remove:function(){var e=this;ns.Model.traverse("messages",function(t){t.remove(e)}),this._cleaningModelsAfterAction(),ns.Model.get("message-body",{ids:this.params.ids}).destroy(),this.destroy()},getEmailInfoParams:function(){var e=this.getEmails().from,t=e&&e.email&&e.email.toLowerCase();return t&&Jane.FormValidation.checkEmail(t)?{ref:e.ref,email:t}:null},createMessageCurrentDate:function(){var e=Daria.now(),t=new Date(e),n=Jane.Date.format("%Date_db",e),i=Jane.Date.format("%Date_db_in_HM",e);return{chunks:{date:t.getDate(),hours:t.getHours(),minutes:t.getMinutes(),month:t.getMonth(),year:t.getFullYear()},timestamp:e,user_timestamp:e,view:{attach:n,list:n,message:i,title:i}}},fromComposeMessage:function(e,t){if(this.isValid())return this;var n=ns.Model.get("message",{ids:t}),i=ns.Model.get("message-body",{ids:t}),r=e.get(".from_mailbox"),o=[{email:r,name:e.get(".from_name"),ref:i.getEmailRef(r),type:"from"}];return o=o.concat(e.formatContacts("to",i),e.formatContacts("cc",i),e.formatContacts("bcc",i)),this.setData({fake:!0,mid:this.params.ids,tid:n.getThreadId()||"t"+this.params.ids,lid:e.get(".lids"),field:o,subject:e.get(".subj"),date:n.createMessageCurrentDate(),types:"4",type:[4],flags:{human:!0},count:1,new:0})},hasRealData:function(){return this.isValid()&&!this.get(".FAKE_THREAD_DATA")},isCheckedInList:function(){return ns.Model.get("messages-checked").isChecked(this)},isInSharedFolder:function(){return ns.Model.get("folders").isShared(this.getFolderId())},isMuted:function(){if(!this.isThread())return!1;var e=jpath(ns.Model.get("labels").getMuteThreadLabel(),".lid")[0];return this.hasLabel(e)},isMutable:function(){return this.isThread()&&!this.isMuted()&&!this.isInSharedFolder()},isValidForPin:function(){var e=ns.Model.get("folders"),t=this.getFolderId();return!e.isFolder(t,this.INVALID_FOLDERS_SYMBOLS_FOR_PIN)},hasUserLabel:function(){var e=this.get(".lid");if(!Array.isArray(e)||!e.length)return!1;for(var t=ns.Model.get("labels"),n=0,i=e.length;n<i;n++){var r=t.getLabelById(e[n]);if(r&&r.user)return!0}return!1},hasLabelInDiff:function(e,t){var n=this.get(".lid");return _().xor(n,t).contains(e)},markAnswered:function(){return this.isValid()&&this.set(".flags.replied",!0),new Daria.MOPS.Opinfo},markForwarded:function(){return this.isValid()&&this.set(".flags.forwarded",!0),new Daria.MOPS.Opinfo},isRecipient:function(){var e=ns.Model.get("account-information"),t=this.getFieldsByType("to").concat(this.getFieldsByType("cc"),this.getFieldsByType("bcc"));return _.some(t,function(t){return e.isMyEmail(t.email)})},_cleaningModelsAfterAction:function(){var e=ns.Model.get("messages-from-item",this.params);e.isValid()&&ns.Model.traverse("messages-from",function(t){t.remove(e)})},getTrustLevel:function(){var e=this.get(".type")||[],t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;if(s>=51&&s<=56)return s-50}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}return null}}})},function(e,t){ns.Model.define("message-presentation",{params:{ids:null,hid:null,fid:null},methods:{fill:function(e){this.setData({field:e.get(".field"),firstline:e.get(".firstline")})},ensureOnDestroyBinded:function(e){if(this._isBindedOnDestroy){if(e.key!==this._bindedOnDestroyMessageKey){var t="ensureOnDestroyBinded called more then once: was binded to "+this._bindedOnDestroyMessageKey+", now binding to "+e.key;Jane.ErrorLog.send({errorType:"message-presentation.error",params:JSON.stringify(this.params),errorMessage:t})}}else this._isBindedOnDestroy=!0,this._bindedOnDestroyMessageKey=e.key,this.destroyWith([e])}}},ns.ModelStatic)},function(e,t){ns.Model.define("message-widget-events",{params:{ids:null},methods:{request:function(){return ns.request("message-body",this.params).then(this._onRequestSuccess,this._onRequestError,this)},_onRequestSuccess:function(){var e=ns.Model.get("message-body",this.params);return this.params.inc_hid=e.getCalendarICS(),this.params.stid=e.getSTID(),ns.request("get-event-ics",this.params).then(this._onRequestSuccessEventData,function(e){return this.setData({error:e}),Vow.reject(e)},this)},_onRequestSuccessEventData:function(e){var t=e&&e[0]&&e[0].data;t=t||{},this.setData(t),this.updateEventsData()},updateEventsData:function(){this.getEventKey()&&(this.hasOutdatedLabelOnMessage()&&this.markOutdated(),ns.Model.traverse("message-widget-events",this._onUpdateEventData.bind(this)))},_onUpdateEventData:function(e){if(e.isValid()){var t=this.getEventKey(),n=ns.Model.get("message-body",this.params),i=n.get(".info.date.timestamp"),r=ns.Model.get("message-body",e.params),o=r.get(".info.date.timestamp");this!==e&&t===e.getEventKey()&&(o<=i||e.hasOutdatedLabelOnMessage()?e.markOutdated():this.markOutdated())}},getEventKey:function(){var e=this.get(".eventInfo.instanceKey");return e&&e[0]},markOutdated:function(){this.getOutdatedLID()&&!this.hasOutdatedLabelOnMessage()&&this.setOutdatedLabel(),this.set(".isOutdated",!0)},hasOutdatedLabelOnMessage:function(){var e=this.getOutdatedLID();return!!e&&ns.Model.get("message",this.params).hasLabel(e)},getOutdatedLID:function(){return ns.Model.get("labels").getLIDByName("not_show_widget_event")},setOutdatedLabel:function(){Daria.MOPS.doActionWithMessage(this.params.ids,"label",{lid:this.getOutdatedLID()})},setEventInfo:function(e){this.set(".eventInfo",e),this.set(".isNotOperate",!1)},_onRequestError:function(e){return this.setData({error:e}),Vow.reject(e)}}})},function(e,t){ns.Model.define("messages-checked",{params:Daria.params.messagesChecked,ctor:function(){this.touch=_.throttle(this.touch,100),this.bTouch=this.touch.bind(this),this.bOnMessagesInserted=this.onMessageInserted.bind(this),this.bOnMessagesRemoved=this.onMessageRemoved.bind(this)},events:{"ns-model-init":"_onInit","ns-model-destroyed":"_onDestroy"},methods:{INFOLINE_MESSAGES_COUNT:2,_mMessages:null,_onDestroy:function(){this._resetChecked(),this._mMessages.off("ns-model-insert",this.bOnMessagesInserted).off("ns-model-remove",this.bOnMessagesRemoved)},_onInit:function(){this._resetChecked(),this._mMessages=ns.Model.get("messages",this.params),this._mMessages.on("ns-model-insert",this.bOnMessagesInserted).on("ns-model-remove",this.bOnMessagesRemoved)},_resetChecked:function(){var e=this;_.forIn(this._checked,function(t){t.off("ns-model-touched",e.bTouch)}),this._checked={},this._folderSelected=!1,this._listSelected=!1,this._lastCheckedMessage=null,this.trigger("ns-model-reset-checked"),this.resetMemoizeAndTouch()},_resetMemoize:function(){this.getCount.cache?this.getCount.cache=new _.memoize.Cache:this.getCount=_.memoize(this.getCount),this.getData.cache?this.getData.cache=new _.memoize.Cache:this.getData=_.memoize(this.getData)},resetMemoizeAndTouch:function(){this._resetMemoize(),this.touch()},isValid:no.True,onMessageInserted:function(e,t){this.isListSelected()&&_.forEach(t,function(e){this.check(e,!0,{silent:!0})}.bind(this)),this.touch()},onMessageRemoved:function(e,t){_.forEach(t,function(e){this.check(e,!1,{silent:!0})}.bind(this)),this.touch()},resetChecked:function(){this._resetChecked()},getData:function(){return Object.keys(this.getCheckedMessagesHash())},isChecked:function(e){return Boolean(this._checked[e.get(".mid")])},isCheckedByMid:function(e){return Boolean(this._checked[e])},isSearchTopResultByMid:function(e){return this._mMessages.isSearchTopResult(e)},isCheckedByMidFromYate:function(e){var t=yr.nodeset2scalar(e);return this.isCheckedByMid(t)},toggleCheck:function(e){this.check(e,!this.isChecked(e)),this.setLastChecked(e)},check:function(e,t,n){var i=e.get(".mid"),r=!1;n=_.extend({silent:!1},n),t?this._checked.hasOwnProperty(i)||(this._checked[i]=e,e.on("ns-model-touched",this.bTouch),r=!0):(this._checked.hasOwnProperty(i)&&(delete this._checked[i],e.off("ns-model-touched",this.bTouch),r=!0),this._listSelected=!1,this._folderSelected=!1),r&&(this._resetMemoize(),n.silent||(this.touch(),this.triggerToggleCheckedOnMessage(e,n)))},triggerToggleCheckedOnMessage:function(e,t){e.trigger("ns-model-checked-toggle",t,this.key)},checkByMidInParams:function(){if(this.params.mid){var e=ns.Model.get("message",{ids:this.params.mid});this.check(e,!0)}return this},isOnlyMessageChecked:function(){var e=this.getIds();return 1===e.ids.length&&0===e.tids.length},isEmptyMessagesList:function(){return this._mMessages.isEmptyList()},isPinnedMessagesList:function(){return this._mMessages.hasOnlyPinnedMessages()},isOnlyMessageOrThreadChecked:function(){var e=this.getIds();return 1===e.ids.length&&0===e.tids.length||0===e.ids.length&&1===e.tids.length},getOnlyMessageCheckedMid:function(){var e=this.getIds();return 1===e.ids.length&&0===e.tids.length?e.ids[0]:null},getOnlyCheckedMidOrTid:function(e){return e=e||this.getIds(),_.isEmpty(e.tids)?_.isEmpty(e.ids)?null:_.first(e.ids):_.first(e.tids)},getOnlyNotPinnedMessages:function(){return this._mMessages.models.filter(function(e){return!e.isPinned()})},getLabels:function(){var e=ns.Model.get("labels").getLabelsHash();return _(this.getCheckedMessages()).forEach(function(t){var n=t.get(".count"),i=t.get(".lid"),r=t.get(".lid_cnt");_(i).forEach(function(t){e[t]+=n>1?r[t]||0:n}).value()}).value(),e},getFolders:function(){var e=this,t=ns.Model.get("folders").getFoldersHash(),n=this.getIds();return n.ids.concat(n.tids).forEach(function(n){var i=e.getCheckedMessagesHash()[n];t[i.getFolderId()]+=i.get(".count")}),t},getCount:function(){var e=this,t=0;if(this.isFolderSelected())t=ns.Model.get("folders").getCount(this.params.current_folder);else{var n=this.getIds();t=n.ids.length,n.tids.forEach(function(n){t+=e.getCheckedMessagesHash()[n].get(".count")})}return t},getPinnedCount:function(){var e=this.getData(),t=0;return e.forEach(function(e){ns.Model.get("message",{ids:e}).isPinned()&&(t+=1)}),t},getCheckedMessages:function(){var e=this.getIds();return _.map(e.tids.concat(e.ids),function(e){return ns.Model.get("message",{ids:e})})},getCheckedMessagesHash:function(){if(_.isEmpty(this._checked)){var e=ns.page.current.params.thread_id||ns.page.current.params.ids;if(Daria.is3pane()&&e){var t=ns.Model.get("message",{ids:e});if(t.hasRealData())return _.set({},e,t)}}return this._checked},isFolderSelected:function(){return this._folderSelected},selectFolder:function(){!this._folderSelected&&Boolean(this.params.current_folder)&&(this._folderSelected=!0,this._checkAllFromCollection(),this.resetMemoizeAndTouch())},getSelectedFolder:function(){return this._folderSelected?this.params.current_folder:null},selectList:function(){this._listSelected=!0,this._checkAllFromCollection(),this.resetMemoizeAndTouch()},isListSelected:function(){return this._listSelected},canShowInfoline:function(){return(this.getCheckedMessages()||[]).length>=this.INFOLINE_MESSAGES_COUNT},shouldSelectAll:function(){return!this.isListSelected()&&!this.isFolderSelected()},toggleSelectAll:function(){this.shouldSelectAll()?this.selectList():this.resetChecked()},_checkAllFromCollection:function(){var e=this._mMessages.isSearch(),t=Boolean(this._mMessages.params.category);this._mMessages.models.forEach(function(n){(!n.isPinned()||e||t)&&this.check(n,!0)},this)},areAllCheckedInFolder:function(){var e=ns.Model.get("folders").getCount(ns.page.current.params.current_folder),t=this.getCount();return this.isFolderSelected()||t>0&&t>=e},_areAllCheckedRead:function(e){if(this.isFolderSelected()){var t=ns.Model.get("folders").getUnreadCount(this.getSelectedFolder());return e?!t:t}var n=this.getCheckedMessagesHash();return!_.isEmpty(n)&&_.every(n,function(t){var n=t.isNew();return e?!n:n})},areAllCheckedRead:function(){return this._areAllCheckedRead(!0)},areAllCheckedPinned:function(){var e=this._mMessages.getPinned();if(0===e.length)return!1;var t=this.getCheckedMessages().filter(function(e){return e.isPinned()});return!_.difference(e,t).length},hasPinnedCheckedMessage:function(){return this.getCheckedMessages().some(function(e){return e.isPinned()})},areAllCheckedNotPinned:function(){var e=this._mMessages.getPinned();if(0===e.length)return!1;var t=this._mMessages.models;if(e.length===t.length)return!1;var n=this.getCheckedMessages(),i=_.difference(t,n);return 0===_.difference(i,e).length},hasMorePages:function(){return this._mMessages.canLoadMore()},getIds:function(e,t){var n={threads:[],messages:[]},i=this.getCheckedMessagesHash();for(var r in i){var o=i[r];if(e){var s="to"+Daria.capitalize(e);if(o[s]&&!o[s](t))continue}n[o.isThreadModel()?"threads":"messages"].push(o)}var a={ids:[],tids:[]};return n.threads.forEach(function(e){var t=e.get(".mid");n.messages=n.messages.filter(function(e){return e.get(".tid")!==t}),a.tids.push(t)}),n.messages.length&&(a.ids=a.ids.concat(n.messages.map(function(e){return e.params.ids}))),a},runAction:function(e,t){var n={action:e,params:t};this.trigger("run-action",n)},runOps:function(e,t){return Daria.MOPS[e](this,t)},runLabelAction:function(e){return this.runAction("label",{lid:e})},getLastChecked:function(){if(Daria.is2pane())return this._lastCheckedMessage||this._mMessages.models[0];var e=ns.page.current.params.thread_id||ns.page.current.params.ids;return this._lastCheckedMessage||this._mMessages.getMessageByMid(e)||this._mMessages.models[0]},setLastChecked:function(e){var t=this.isChecked(e);if(t)return void(this._lastCheckedMessage=e);if(t||this._lastCheckedMessage!==e||(this._lastCheckedMessage=null),!this._lastCheckedMessage){var n=this._mMessages.models,i=n.indexOf(e);if(-1===i)return void(this._lastCheckedMessage=null);var r,o,s=null,a=1;do{if(r=n[i+a],o=n[i-a],r&&this.isChecked(r)){s=r;break}if(o&&this.isChecked(o)){s=o;break}a++}while(r||o);this._lastCheckedMessage=s}}}},ns.ModelStatic)},function(e,t){!function(){function e(e,n,i){i=i||Number.POSITIVE_INFINITY;for(var r=[],o=ns.Model.get("folders"),s=0,a=e.length;s<a;s++){var u=e[s].getData(),l=e[s].isThread();if((l||o.isIncoming(u.fid)&&t(u,n))&&(l?r.push({tid:u.tid}):r.push({mid:u.mid}),r.length>=i))break}return r}function t(e,t){return parseInt(e.size,10)<t}ns.Model.define("messages",{events:{"ns-model-before-destroyed":"_setRefreshCount","ns-model-insert":"_arrangeTopResultsFirst","ns-model-remove":"_onModelRemove"},params:{threaded:null,goto:null,filter_ids:null,current_folder:null,current_label:null,thread_id:null,extra_cond:null,page_number:null,sort_type:"date",request:null,scope:null,unread:null,datePager:null,mrange:null,from:null,to:null,fid:null,lid:null,excluded:null,search:null,force:null,type:null,attaches:null,category:null,first:null,count:null,with_pins:"yes",allow_empty:null,prevent_update:null},split:{items:".message",model_id:function(){return"message"},params:{ids:".mid"}},paramsRewrite:function(e){return e.thread_id&&e.current_folder&&delete e.thread_id,Daria.messages.checkUsePinsByParams(e)?e.with_pins="yes":delete e.with_pins,e},methods:{SEARCH_PARAMS:["request","scope","unread","from","to","excluded","search","type","attaches"],_splitModels:function(e){this.params.prevent_update&&_.each(e,function(e){e.__prevent_update=!0});var t=this.super_._splitModels.apply(this,arguments),n=this.params.current_folder;return n&&t.forEach(function(e){if(e.isValid()){var t=_.extend({},e.params,{fid:n}),i=ns.Model.get("message-presentation",t);i.fill(e),i.ensureOnDestroyBinded(e)}}),t},preprocessData:function(e){return"yes"===this.params.threaded&&(e=this._createThreadsFromMessages(e)),_.defer(this.preloadAllMessages.bind(this)),e},getRequestParams:function(){var e=this.super_.getRequestParams.apply(this,arguments);return this.params.search&&(e.reqid=Daria.React.getSearchSessionId(),this.isSearchNotFilter()&&"count"in e&&(e.count=Math.max(e.count,10))),e.filter_ids&&(e.filter_ids=e.filter_ids.join()),e},_setRefreshCount:function(){this._refreshCount=this.models.length},_unsetRefreshCount:function(){delete this._refreshCount},_hasParamsForRequest:function(){var e=this.params,t="search"===e.search,n=e.category,i=e.deviation,r=e.current_folder,o=e.thread_id,s=e.current_label,a="all"===e.goto;return[t,n,i,r,o,s,a&&"only_new"===e.extra_cond,a&&"only_atta"===e.extra_cond,e.filter_ids].some(function(e){return e})},_fakeRequest:function(){return this.request=void 0,this.setData({details:{"has-more":!1},message:[]}),Vow.resolve()},getRequest:function(){var e=this;if(this.isFakeMessages())return this.params.allow_empty||Jane.ErrorLog.send({errorType:"messages-request-no-params",params:JSON.stringify(this.params),stack:(new Error).stack}),this.request=this._fakeRequest,this;if(this.isValid())return this;var t=this.getCount()||this._refreshCount;if(!t)return this;var n=this._getCountForRequest(t),i=ns.Model.get(this.id,$.extend({},this.params,{first:this.params.first||0,count:n}));return i.destroy(),i.once("ns-model-changed",function(){e.setData(this.getData()),e._unsetRefreshCount()}),i},_arrangeTopResultsFirst:function(){var e=this;this.isSearchNotFilter()&&Daria.arrangeMatchingFirstInline(this.models,function(t){return e.isSearchTopResult(t.get(".mid"))})},_onModelRemove:function(e,t){this._updateTheadMetaOnRemove(t),this._updateDetailsForSearch(t)},_updateTheadMetaOnRemove:function(e){var t=this.params.thread_id;if(t){var n=ns.Model.get("message",{ids:t});if(n.hasRealData()){var i=n.get(".last_mid");-1!==_.findIndex(e,function(e){return e.params.ids===i&&e.get(".date.timestamp")===n.get(".date.timestamp")})&&this.updateThreadMeta(n)}}},_updateDetailsForSearch:function(e){if(void 0!==this.get(".details.total-found")){var t=this.get(".details.total-found")||0,n=e.length;this.set(".details.total-found",Math.max(t-n,0));var i=this.get(".details.top-relevant")||0,r=this.get(".details.topResultsMids"),o=0;r&&(e.forEach(function(e){var t=e.get(".mid"),n=r.indexOf(t);n>-1&&(o++,r.splice(n,1))}),o>0&&(this.set(".details.top-relevant",Math.max(i-o,0)),this.set(".details.topResultsMids",r)))}},_createThreadsFromMessages:function(e){return e.message=e.message.map(this._createThreadFromMessage),e},_createThreadFromMessage:function(e){var t=ns.Model.get("message",{ids:e.mid}).setData(e);if(!Daria.messages.toCreateThread(t))return e;var n=_.cloneDeep(e);n.last_mid=e.mid,n.mid=n.tid;var i=ns.Model.get("messages",{thread_id:n.tid});return i.isValid()||i.setData({details:{"has-more":!1},message:[e]}),n},loadMore:function(e){var t;e&&!this.isValid()?(t=0,this.clear()):t=this.models.length;var n=ns.Model.get("settings").getSetting("messages_per_page"),i=$.extend({},this.params,{first:t,count:n});return ns.request("messages",i).then(function(e){var t=e[0];this.data&&this.isValid()||(this.data={},this.status=this.STATUS.OK);var n,i=t.get(".details")||{},r=this.get(".details")||{};("topResultsMids"in i||"topResultsMids"in r)&&(n=_.union(r.topResultsMids,i.topResultsMids));var o=$.extend(r,i);n&&(o.topResultsMids=n),this.set(".details",o,{silent:!0});var s=t.models;return this.insert(s),ns.Model.destroy(t),s},this)},refresh:function(){var e=_.assign({},this.params,{first:0,count:this._getCountForRequest(this.getCount())}),t=ns.Model.get(this.id,e),n=this;return t.once("ns-model-changed",function(){n.setData(this.getData())}),ns.request.models([t],{forced:!0}).then(function(){ns.Model.destroy(t)})},_getCountForRequest:function(e){var t=ns.Model.get("settings").getSetting("messages_per_page"),n=e||t;return n=Math.ceil(n/t)*t,n=Math.min(n,200)},canLoadMore:function(){return Boolean(this.get(".details.has-more"))},getCount:function(){return this.models.length},getUnreads:function(){return this.models.filter(function(e){return e.isNew()})},getUnreadCount:function(){return this.getUnreads().length},getPinned:function(){return this.models.filter(function(e){return e.isPinned()})},getTotal:function(){for(var e=0,t=0,n=this.models.length;t<n;t++)e+=this.models[t].get(".count");return e},preloadAllMessages:function(){var e=this.params,t=ns.Model.get("folders"),n=e.current_folder;if(!n||!t.spamOrTrash(n)){var i=this.models.map(function(e){var t=e.get(".mid");return e.isThread()?{tid:t}:{mid:t}});Daria.messages.preload(i)}},preloadMessages:function(){var t,n=this.params,i=ns.Model.get("folders"),r=n.current_folder;if(r===i.getFidBySymbol("inbox"))t="inbox";else{if(r in i.ids())return!1;t="user_folder"}n.thread_id&&(t="thread");var o=this.getUnreads(),s=o.length;if(0===s)return!1;var a=this.getCount(),u=Math.round(s/a*100),l=[];switch(t){case"user_folder":(a<=10||u<=80)&&(l=e(o,20,10));break;case"thread":default:a<=10||u<=30?l=e(o,50):u<=80&&(l=e(o,50,10))}return Daria.messages.preload(l),!0},getNextPage:function(){return jpath(this.data,".details.pager.next")[0]||null},getPrevPage:function(){return jpath(this.data,".details.pager.prev")[0]||null},deleteMessage:function(e){var t=ns.Model.get("message",{ids:e});return this.remove(t)},getCountThreadMessageInFolder:function(){if(!this.canLoadMore())return this.select('.message[.fid == "'+ns.page.current.params.current_folder+'"]').length;return!1},getEmails:function(){var e={};return this.models.forEach(function(t){var n=t.getData(),i={};i.social=t.hasSocialLabels(),i.type=n.type,n.field.forEach(function(e){i[e.type]={ref:e.ref,email:e.email}}),e[n.mid]=i}),e},isFakeMessages:function(){return this.canRequest()&&!this._hasParamsForRequest()},insertMessage:function(e,t){if(!this.isValid())return!1;ns.events.trigger("daria:vContextMenu:close"),t&&this.remove(t);var n=0;return"yes"!==this.params.with_pins||e.isPinned()||(n=this.getPinned().length),this.insert(e,n),!0},insertMessageBySort:function(e){if(!this.isValid())return!1;if(this.isEmptyList())this.insert(e);else{var t=n[this.params.sort_type];ns.assert(t,"mMessages","invalid sort type");var i,r,o=this.models.length,s=this.getPinned(),a=s.length;e.isPinned()?(r=this.models.slice(0,a),-1===(i=_.findIndex(r,t,e))&&(i=a)):(r=this.models.slice(a),i=_.findIndex(r,t,e),-1===i?i=o:i+=a),i>=0?this.insert(e,i):this.insert(e)}},updateThreadMeta:function(e){var t=_.findIndex(this.models,function(e){return e.isExternalLike()});-1===t&&(t=0);var n=this.models[t];n&&e.updateThreadContextInfo(n)},isEmptyList:function(){return this.isValid()&&0===this.getCount()},isSearch:function(){return Object.keys(this.params).some(function(e){return _.include(this.SEARCH_PARAMS,e)},this)},isUnsubscribeEmailRequest:function(){var e=this.params.request;return!!e&&/^subscription-email:/.test(e)},getUnsubscribeEmailRequestDisplay:function(){var e=this.get(".details.search-options.request"),t=/\:\S+/.exec(e),n=t?t[0].substr(1):null;if(!n)return null;var i=ns.Model.get("unsubscribe-furita-newsletters");if(!i.getData())return null;var r=i.getData().newsletters.filter(function(e){return e.email===n});return r.length>0?r[0].displayName:null},isSearchNotFilter:function(){return!this.isUnsubscribeEmailRequest()&&(Boolean(this.params.search)&&(Boolean(this.params.request)||Boolean(this.params.fid)||Boolean(this.params.lid))&&"rpopinfo"!==this.params.scope)},isSearchTopResult:function(e){return(this.get(".details.topResultsMids")||[]).indexOf(e)>-1},isUnreadMessagesCollection:function(){return"only_new"===this.params.extra_cond||"yes"===this.params.unread||"unread"===this.params.unread},isWithAttachmentMessagesCollection:function(){return"only_atta"===this.params.extra_cond},isImportantMessagesCollection:function(){var e=ns.Model.get("labels");return this.params.current_label===e.getImportantLID()},_doOper:function(e,t){var n=new Daria.MOPS.Opinfo,i=this.models.length;if(!i)return n.resetAdjust(),n;n.setModelsCount(i);for(var r=0;r<i;r++){var o=this.models[r][e](t);n.merge(o)}return n},mark:function(){return this._doOper("mark")},unmark:function(){return this._doOper("unmark")},label:function(e){return this._doOper("label",e)},unlabel:function(e){return this._doOper("unlabel",e)},hasOnlyPinnedMessages:function(){return!this.hasUnpinned()&&!this.canLoadMore()},hasMessageWithLabel:function(e,t){var n=this.models.length;if(!n||n!==t)return null;for(var i=0;i<n;i++)if(this.models[i].hasLabel(e))return!0;return!1},getPrevMessageByMid:function(e){return this.getNearestMessageByMid(e,"prev")},getNextMessageByMid:function(e){return this.getNearestMessageByMid(e,"next")},getNearestMessageByMid:function(e,t){if(!e)return!1;var n=ns.Model.get("message",{ids:e}),i=this.models,r=i.indexOf(n),o=-1;switch(t){case"prev":o=r-1;break;case"next":o=r+1}return i[o]||!1},getMessageByMid:function(e){return _.find(this.models,"params.ids",e)||null},recalculateIndexesAfterPin:function(e,t){var n=this.params.current_folder;this.remove(e),e.forEach(function(e){(t||!t&&n===e.getFolderId())&&this.insertMessageBySort(e)},this)},getLastReplyMessage:function(){for(var e,t=0,n=this.models.length;t<n&&(e=this.models[t],!e.canReply());t++);return e},getLastReplyMessageQR:function(){return _.find(this.models,function(e){return e.canReplyQR()})},hasUnpinned:function(){return this.models.some(function(e){return!e.isPinned()})}}});var n={from:function(e){return e.getFromName().toLowerCase()>this.getFromName().toLowerCase()},from1:function(e){return e.getFromName().toLowerCase()<this.getFromName().toLowerCase()},date:function(e){return e.get(".date.ts")<this.get(".date.ts")},date1:function(e){return e.get(".date.ts")>this.get(".date.ts")},size:function(e){return e.get(".length")<this.get(".length")},size1:function(e){return e.get(".length")>this.get(".length")},subject:function(e){return e.getSubject().toLowerCase()>this.getSubject().toLowerCase()},subject1:function(e){return e.getSubject().toLowerCase()<this.getSubject().toLowerCase()}}}()},function(e,t){ns.Model.define("message-head-state",{params:{ids:null,hid:null},events:{"ns-model-init":function(){var e=ns.Model.get("settings"),t=Boolean(e.hasSetting(this.SETTING_MSG_HEAD_SENDER_CLOSE)&&e.isSet(this.SETTING_MSG_HEAD_SENDER_CLOSE)),n=Boolean(e.hasSetting(this.SETTING_MSG_HEAD_RECIEVERS_OPEN)&&e.isSet(this.SETTING_MSG_HEAD_RECIEVERS_OPEN));this.setData({"sender-closed":t,"recievers-opened":n})}},methods:{SETTING_MSG_HEAD_SENDER_CLOSE:"m_head_folded_sender",SETTING_MSG_HEAD_RECIEVERS_OPEN:"m_head_full_edition",toggleSenderOpened:function(){var e=this.get(".sender-closed");return this._lockToggleMessageHead||(this._lockToggleMessageHead=!0,ns.Model.get("settings")[e?"setSettingOff":"setSettingOn"](this.SETTING_MSG_HEAD_SENDER_CLOSE,this._onSettingsChangeSuccess.bind(this))),this.set(".sender-closed",!e),!e},setRecieversOpened:function(e){this.set(".recievers-opened",e)},getRecieversOpened:function(){return this.get(".recievers-opened")},toggleRecieversOpened:function(){var e=this.get(".recievers-opened");return this._lockToggleMessageHead||(this._lockToggleMessageHead=!0,ns.Model.get("settings")[e?"setSettingOff":"setSettingOn"](this.SETTING_MSG_HEAD_RECIEVERS_OPEN,this._onSettingsChangeSuccess.bind(this))),this.set(".recievers-opened",!e),!e},_onSettingsChangeSuccess:function(){this._lockToggleMessageHead=!1}}},ns.ModelStatic)},function(e,t){ns.Model.define("module-common",{methods:{MODULES:[],request:function(){var e=this;return new vow.Promise(function(t){Jane.Services.runModules(e.MODULES,function(){e.setData(!0),t()})})}}})},function(e,t){ns.Model.define("module-compose",{methods:{MODULES:["compose.css","compose2.js","compose2.yate"]}},"module-common")},function(e,t){ns.Model.define("module-editor",{methods:{MODULES:["ckeditor.js","ckeditor.yate","editor.css"]}},"module-common")},function(e,t){ns.Model.define("module-message",{methods:{MODULES:["message.css","message.js","message.yate"]}},"module-common")},function(e,t){ns.Model.define("module-messages",{methods:{MODULES:["messages.css","messages.js","messages.yate"]}},"module-common")},function(e,t){ns.Model.define("module-setup",{methods:{MODULES:["messages.css","setup.css","setup.js","setup.yate"]}},"module-common")},function(e,t){ns.Model.define("module-todo",{methods:{MODULES:["todo.js","todo.yate","todo.css"]}},"module-common")},function(e,t){ns.Model.define("scroller-common",{methods:{EVENT_NAME:"MUST_BE_DEFINED",HEIGHT_KEY:".height",SCROLL_HEIGHT_KEY:".scroll-height",SCROLL_BOTTOM_KEY:".scroll-bottom",SCROLL_TOP_KEY:".scroll-top",_rafTimer:0,_$area:null,init:function(){this.getScroller(),this._onResizeBinded||(this._onResizeBinded=!0,ns.Model.get("dimensions").on("resize",this._onScroll.bind(this)))},_initScroller:function(){var e="scroll."+this.id;this._$area&&(this._$area.off(e),this._$area=null),this._$area=this._getScroller(),this._$area[0]===window?this._$animatedArea=$("body, html"):this._$animatedArea=this._$area,this._$area.on(e,this._onScroll.bind(this))},_getScroller:ns.todo,_onScroll:function(){this._rafTimer||(this.clean(),ns.events.trigger(this.EVENT_NAME))},clean:function(){this.setData({},{silent:!0}),this._rafTimer=0},getScrollOffset:function(){return 0},getNodeTop:function(e){var t=this.getScroller()[0];if(t===window)return e.getBoundingClientRect().top+this.getScrollTop();var n=0,i=e;do{if(n+=i.offsetTop,(i=i.offsetParent)&&i===t)break}while(i);return n},getScroller:function(){var e=this._$area&&this._$area[0];return e&&($.isWindow(e)||document.body.contains(e))||this._initScroller(),this._$area},getHeight:function(){var e=this.get(this.HEIGHT_KEY);return"number"!=typeof e&&(e=this.getScroller().height(),this._setDimension(this.HEIGHT_KEY,e)),e},getScrollHeight:function(){var e=this.get(this.SCROLL_HEIGHT_KEY);return"number"!=typeof e&&(e=this.getScroller().prop("scrollHeight"),this._setDimension(this.SCROLL_HEIGHT_KEY,e)),e},getScrollBottom:function(){var e=this.get(this.SCROLL_BOTTOM_KEY);return"number"!=typeof e&&(e=this.getScrollHeight()-this.getHeight()-this.getScrollTop(),this._setDimension(this.SCROLL_BOTTOM_KEY,e)),e},getScrollTop:function(){var e=this.get(this.SCROLL_TOP_KEY);return"number"!=typeof e&&(e=this.getScroller().scrollTop(),this._setDimension(this.SCROLL_TOP_KEY,e)),e},getVDimensions:function(){var e=this.getScrollTop()+this.getScrollOffset();return{bottom:e+this.getHeight(),top:e}},setScrollTop:function(e,t){if(this._$animatedArea.stop(),t){var n=this;this._rafTimer="ANIMATED",this._$animatedArea.animate({scrollTop:e},{duration:"fast",always:function(){n._rafTimer=null,n._onScroll()}})}else this._$animatedArea.scrollTop(e)},scrollIntoView:function(e,t){t=t||{};var n,i="boolean"==typeof t.alignToTop,r=Number(t.viewTopOffset)||0,o=Number(t.viewBottomOffset)||0,s=$(e),a=t.relative?e.offsetTop:s.offset().top,u=a+s.outerHeight(),l=this.getScrollTop()+Math.abs(r),c=l+this.getHeight()+o;return u>c&&(!1===t.alignToTop||!i)?n=l+(u-c):a<l&&(!0===t.alignToTop||!i)&&(n=a+r),void 0!==n&&(n=Math.max(Math.floor(n),0),this.setScrollTop(n,Boolean(t.animate)),!0)},isRelativeOffset:function(){return!1},_setDimension:function(e,t){this.set(e,t,{silent:!0})}}},ns.ModelStatic)},function(e,t){ns.Model.define("scroller-message",{events:{"ns-model-init":"clean"},methods:{THREAD_HEAD_HEIGHT:51,EVENT_NAME:"daria:vScrollerMessage:scroll",getScrollOffset:function(){return this.THREAD_HEAD_HEIGHT},isRelativeOffset:function(){return Daria.is3pane()},_getScroller:function(){return Daria.is2pane()?$(window):$(".js-message-scroll-area")}}},"scroller-common")},function(e,t){ns.Model.define("scroller-messages",{events:{"ns-model-init":"clean"},methods:{EVENT_NAME:"daria:vScrollerMessages:scroll",FIXED_HEAD_HEIGHT:60,FIXED_TOOLBAR_HEIGHT:36,_getScroller:function(){return Daria.is2pane()?$(window):$(".js-messages-scroll-area")},getScrollOffset:function(){var e=this.FIXED_HEAD_HEIGHT;return Daria.is2pane()&&(e+=this.FIXED_TOOLBAR_HEIGHT),e}}},"scroller-common")},function(e,t){ns.Model.define("scroller-compose",{events:{"ns-model-init":"clean"},methods:{EVENT_NAME:"daria:vScrollerCompose:scroll",getScrollOffset:function(){return 0},isRelativeOffset:function(){return!1},_getScroller:function(){return Daria.is2pane()?$(window):$(".js-compose-scroller")}}},"scroller-common")},function(e,t){ns.Model.define("scroller-abook-contacts",{events:{"ns-model-init":"clean"},methods:{EVENT_NAME:"daria:vScrollerAbookContacts:scroll",FIXED_HEAD_HEIGHT:60,FIXED_TOOLBAR_HEIGHT:36,_getScroller:function(){return Daria.is2pane()?$(window):$(".js-entries-container")},getScrollOffset:function(){var e=this.FIXED_HEAD_HEIGHT;return Daria.is2pane()&&(e+=this.FIXED_TOOLBAR_HEIGHT),e}}},"scroller-common")},function(e,t){ns.Model.define("secret-key")},function(e,t){ns.Model.define("email-info",{events:{"ns-model-init":"_onInit"},params:{email:null,ref:null},methods:{_onInit:function(){this.params.email||this.setData({})}}})},function(e,t){ns.Model.define("informer-tanks-news",{events:{"ns-model-init":"onInit"},methods:{onInit:function(){setInterval(function(){ns.Model.invalidate("informer-tanks-news")},18e5)},preprocessData:function(e){if(!_.isEmpty(e))return e.forEach(function(e){e.date&&(e.date.view=Daria.MessageTime.getFormattedTime(e.date.timestamp)),e.firstline&&(e.firstline=$(e.firstline)[0].innerText.trim())}),e}}})},function(e,t){ns.Model.define("settings-sign",{methods:{SETTINGS_SIGN:{browser_notify_blank:"_invert",contextmenu_disable:"_invert",compose_samples:"_defaultTrue",dont_save_history:"_invert",disable_etickets:"_invert",disable_promo:"_invert",disable_inboxattachs:"_invert",disable_events:"_invert",disable_yabbles:"_invert",no_definition_types:"_invert",notify_message:"_signNotifyMessage",no_signature_select:"_invert",timeline_enable:"_signTimelineEnable",right_column_expanded:"_defaultTrue",show_priority_label:"_defaultTrue",show_priority_popup:"_defaultTrue",show_tabs:"_defaultTrue",subscribed_folders:"_allFoldersByDefault",show_widgets_decor:"_defaultTrue",show_widgets_buttons:"_defaultTrue"},getSign:function(e,t){var n=this.getSetting(e,t),i=this.SETTINGS_SIGN[e];return i&&(n=_.method(i,n,e)(this)),n},signToSetting:function(e,t){var n=this.SETTINGS_SIGN[e];return"_invert"===n&&(t=_.method(n,t,e)(this)),t},_invert:function(e){return!e},_defaultTrue:function(e,t){return e=!this.hasSetting(t)||this.getSetting(t),Boolean(e)},_signNotifyMessage:function(e,t){return this.hasSetting(t)||(e=!Daria.IS_CORP),Boolean(e)},_signTimelineEnable:function(){return ns.Model.get("timeline-state").checkEnable()},_allFoldersByDefault:function(){var e=ns.Model.get("folders"),t=ns.Model.get("settings").getSetting("subscribed_folders");if("string"==typeof t){var n=[];return"["===t[0]?n=JSON.parse(t.replace(/&quot;/g,'"')):t&&(n=t.split(",")),n.filter(e.isPresentAndNotShared.bind(e))}return e.getInboxFolders().sort()}}})},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e=function(e,t){_.isString(e)&&(e=e.split("."));var n=_.size(e)-1;return e.reduce(function(e,i,r){var o=r===n?t:{},s=_.last(e)[i]=o;return e.push(s),e},[{}])[0]},t=[{name:"enable_hotkeys",trueValue:!0},{name:"dnd_enabled",trueValue:!0}],i={};i.POPULAR_CONTACTS_SETTING_NAME="compose_samples",i.getSetting=function(e,n){if(Daria.Config.NO_SETTINGS){var i=_.find(t,"name",e);if(i)return i.trueValue}var r=this.get("."+e);if("json"===n)try{return JSON.parse(decodeURIComponent(r))}catch(e){return{}}if("signs"===e&&Array.isArray(r)&&r.length>0){var o=ns.Model.get("account-information").getAllUserEmails();r=r.map(function(e){return e.emails=e.emails.filter(function(e){return-1!==o.indexOf(e)}),e})}return r},i.hasSetting=function(e){return(this.getData()||{}).hasOwnProperty(e)},i.isSet=function(e){return!(!Daria.Config.NO_SETTINGS||!_.find(t,"name",e))||Boolean(this.get("."+e))},i.setSettingOn=function(e,t){if(t=t||Jane.Common.nop,this.isSet(e))t(!0);else{var n={};n[e]=!0,this.setSettings(n,function(e,n){t(e,n)})}},i.setSettingOff=function(e,t){if(t=t||Jane.Common.nop,this.isSet(e)){var n={};n[e]=!1,this.setSettings(n,function(e,n){t(e,n)})}else t(!0)},i.toggleSetting=function(e,t){this.isSet(e)?this.setSettingOff(e,t):this.setSettingOn(e,t)},i.setSettings=function(e,t,n){if("function"==typeof t&&(n=t,t=null),t=t||{},Daria.Config.NO_SETTINGS||$.isEmptyObject(e))return vow.reject();n=n||Jane.Common.nop;var i=this._makeSaveRequest(e);if(null===i)return n(!0,[]),vow.resolve();if(i.error)return n(!1,i.error),vow.reject();for(var r in e)this.setIfChanged("."+r,e[r],t);var o=ns.forcedRequest([{id:"do-settings",params:i},{id:"settings",params:{actual:!0,list:i.list}}]).then(function(e){var i=ns.Model.get("settings"),r=e[1].getData();for(var o in r)r.hasOwnProperty(o)&&i.setIfChanged("."+o,r[o],t);ns.Model.destroy(e[1]),n(!0,[])},function(){n(!1,[])});return vow.resolve().then(function(){return o})},i.getMultiSetting=function(e){return this.getSetting(e,"json")||{}},i.saveMultiSetting=function(e,t){if("object"!==(void 0===t?"undefined":n(t))||null===t)throw new TypeError("Parameter value must be not empty object");var i=$.Deferred(),r={};r[e]=t;var o=this;return this.setSettings(r,function(){i.resolve(o.getData())}),i.promise()},i.updateSetting=function(t,n,i){if(arguments.length<2)throw new Error(Daria.supplant("updateSettings takes exactly 2 arguments - {argc} given",{argc:arguments.length}));if(!t)throw new Error("Argument `name` must be specified");var r=t.split(".");t=r[0],r.length>1&&(n=e(r.slice(1),n));var o,s=this.getSetting(t,"json");return o=$.isPlainObject(n)?_.merge({},s,n):n,this.setSettings(_.zipObject([t],[o]),i)},i.setOpenedFolders=function(e){var t=e.join(",");this.setSettings({folders_open:t})},i.setLastActive=function(e){this.setSettings({last_active:Daria.now()},e)},i.recordAttemptToRegisterMAILTOProtocolHandler=function(e,t){if(t=Boolean(t),!e)return!1;var n=this.getSetting("rph")||"mozilla=0&opera=0&webkit=0",i=e+"="+Number(t);return!_(n).contains(i)&&(n=n.replace(e+"="+Number(!t),i),this.setSettings({rph:n}),!0)},i.isThreaded=function(){return this.isSet("folder_thread_view")},i.threadedOn=function(){this.isThreaded()||this.setSettingOn("folder_thread_view")},i.threadedOff=function(){this.isThreaded()&&this.setSettingOff("folder_thread_view")},i.threadedToggle=function(){this.isThreaded()?this.threadedOff():this.threadedOn()},i.getValidatedEmails=function(){return this.get(".reply_to")||[]},i._checkSName=function(e){if(!e)throw new Error("Parameter namespace is compulsory");if(e=String(e),e.length>30)throw new RangeError('Namespace "'+e+'" can not be over than 30 chars');return{name:e}},i._checkSValue=function(e,t){var n=$.type(t),i=!1;switch(n){case"boolean":case"object":case"array":case"string":case"null":case"undefined":case"number":break;default:throw new TypeError('Invalid type setting "'+e+'" value: '+n)}switch(e){case"signs":if("array"!==n)throw new TypeError('Invalid type setting "'+e+'" value: '+n);t=$.map(t,function(t){if("object"!==$.type(t))throw new TypeError('Invalid type setting "'+e+'"');if("string"===$.type(t.text)){t.text.length>1e4&&(i="signs.maxlen");var n={text:t.text,isDefault:Boolean(t.isDefault),emails:$.isArray(t.emails)?t.emails:[]};return t.userLang&&(n.lang=t.userLang),n}}),this.getSetting("signs").length<=t.length&&t.length>20&&(i="signs.maxcount")}return{value:t,error:i}},i._makeSaveRequest=function(e){var t={},n=[],i=[];for(var r in e){var o=this._checkSName(r),s=this._checkSValue(r,e[r]);!1===s.error?(t[o.name]=s.value,n.push(o.name)):i.push(s.error)}return i.length?{error:i}:{actual:!0,list:n.join(","),params:JSON.stringify(t)}},ns.Model.define("settings",{params:{list:null,actual:null},methods:no.extend(i,{COMPACT_MODE_SETTING:"liza_minified",COMPACT_HEADER_MODE_SETTING:"liza_minified_header",preprocessData:function(e){return["from_name"].forEach(function(t){e.hasOwnProperty(t)&&(e[t]=_.unescape(e[t]))}),Modernizr.ios&&(e.enable_richedit=!1),ns.events.trigger("settings-updated"),(!e.messages_per_page&&!this.params.list||Daria.is3pane())&&(e.messages_per_page=30),e},getPromoThemeSettingName:function(e){var t="_shown";return e&&(t="_set"),"promo_theme"+t},isCompactMode:function(){return this.isSet(this.COMPACT_MODE_SETTING)},isCompactHeaderMode:function(){return this.isSet(this.COMPACT_HEADER_MODE_SETTING)},switchCompactModeSettings:function(e){if(e){var t={};switch(e){case"compact-mode":t[this.COMPACT_MODE_SETTING]=!this.isCompactMode();break;case"compact-header-mode":t[this.COMPACT_HEADER_MODE_SETTING]=!this.isCompactHeaderMode()}(this.COMPACT_HEADER_MODE_SETTING in t&&!t[this.COMPACT_HEADER_MODE_SETTING]||this.COMPACT_MODE_SETTING in t&&!t[this.COMPACT_MODE_SETTING])&&(t["size-view-app2"]="0"),this.setSettings(t)}},withBiggerText:function(){return this.isSet("with_bigger_text")},isNativeEmail:function(){var e=this.getSetting("emails"),t=Daria.email.normalize(this.getSetting("default_email"));return(e.filter(function(e){return e.native?Daria.email.normalize(e.address)===t:e.address===t})[0]||{}).native}})},"settings-sign")}()},function(e,t){ns.Model.define("social-profiles-reset",{params:{emails:null}})},function(e,t){!function(){ns.Model.define("social-profiles",{methods:{getCacheByEmail:function(e){var t=null;return _.forEach(this.getData()||{},function(n,i){i.split(":").pop()===e&&(t=n.data)}),t}},params:{refs:null}},ns.ModelArmour)}()},function(e,t){ns.Model.define("do-translate",{params:{text:null,lang:null,format:null},methods:{_canRequest:function(){return!this.retries||this.retries<this.RETRY_LIMIT}}})},function(e,t){ns.Model.define("translate-langs",{methods:{getName:function(e){return _.get(this.data,"langs."+e,"")},getLangs:function(){return _(this.get(".langs")).chain().map(this._getLangsMapIterate).sortBy("name").value()},getRecent:function(){return _(ns.Model.get("settings").getSetting("translateRecent")||"").chain().split(",").uniq().map(this._getRecentMapIterate.bind(this)).compact().slice(0,5).value()},hasRecent:function(){return!_.isEmpty(this.getRecent())},setRecent:function(e){var t=_(this.getRecent()).chain().map(this._setRecentMapIterate).unshift(e).uniq().slice(0,5).join(",").value();ns.Model.get("settings").setSettings({translateRecent:t})},_getLangsMapIterate:function(e,t){return{name:e,lang:t}},_setRecentMapIterate:function(e){return e.lang},_getRecentMapIterate:function(e){var t=e&&this.getName(e);if(t)return{name:t,lang:e}}}})},function(e,t){ns.Model.define("typefilter-tabs-state",{events:{"ns-model-init":"onInit"},methods:{onInit:function(){var e={all:{id:"all",title:i18n("%Tab_Title_For_All_Categories"),metrikaTitle:"Все категории"},people:{id:"people",title:i18n("%Alternative_Tab_Title_For_People_Category"),description:i18n("%Typographic_Tab_Description_For_People_Category"),metrikaTitle:"Общение"},social:{id:"social",title:i18n("%Tab_Title_For_Social_Category"),description:i18n("%Typographic_Tab_Description_For_Social_Category"),metrikaTitle:"Соцсети"},eshops:{id:"eshops",title:i18n("%Tab_Title_For_Eshops_Category"),description:i18n("%Typographic_Tab_Description_For_Eshops_Category"),metrikaTitle:"Покупки"},trips:{id:"trips",title:i18n("%Tab_Title_For_Trips_Category"),description:i18n("%Typographic_Tab_Description_For_Trips_Category"),metrikaTitle:"Поездки"}};this.setData({tabs:e})},getIdsOfEnabledTabs:function(){return["all"].concat(["people","eshops","trips","social"])},getEnabledTabs:function(){var e=this.get(".tabs");return this.getIdsOfEnabledTabs().map(function(t){return e[t]})},isTabEnabled:function(e){return _.isObject(e)&&(e=yr.nodeset2scalar(e)),-1!==this.getIdsOfEnabledTabs().indexOf(e)},getMetrikaTitlesOfEnabledTabs:function(){var e=this.get(".tabs");return this.getIdsOfEnabledTabs().map(function(t){return e[t].metrikaTitle})},getMetrikaTitle:function(e){return this.get(".tabs."+e).metrikaTitle},getTab:function(e){return _.isObject(e)&&(e=yr.nodeset2scalar(e)),this.get(".tabs."+e)||null},getCategoryTitleBySearchRequest:function(e){var t=/filter:(\w*)/i.exec(e),n=t&&t[1];if(!n)return"";var i=this.getTab(n);return i&&i.title||""}}},ns.ModelStatic)},function(e,t){ns.Model.define("themes-selector",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({opened:!1})},isOpened:function(){return this.get(".opened")},open:function(){this.set(".opened",!0)},close:function(){this.set(".opened",!1)}}},ns.ModelStatic)},function(e,t){!function(){"use strict";var e={};e.getActivePhone=function(){var e=this.getData()||{};return jpath(e,'.phone[.active == "1"]')[0]},e.getUnconfirmedPhone=function(){},e.getActiveMaskedNumber=function(){var e=this.getActivePhone();return e&&e.masked_number},e.getUnconfirmedNumber=function(){},e.getUnconfirmedIdByNumber=function(){},e.hasActiveNumber=function(){var e=this.getData();return Boolean(jpath(e,'.phone[.active == "1"]').length)},e.normalize=function(e){return e=(e||"").replace(/^8/,"+7")},e.getPhone=function(e){if(!e)throw new ReferenceError("Required parameter phoneNumber is missing");return ns.forcedRequest("userphones").then(function(t){var n=t[0],i=$.makeArray(n.get(".phone")).filter(function(t){return t.number===e});return i.length?i[0]:null})},e.getAll=function(e){return ns.request.models([this],{forced:!e})},ns.Model.define("userphones",{methods:e})}()},function(e,t){!function(){ns.Model.define("user-apps-activity",{methods:{MOBILE_FIELDS:["mobile","mobile_ios","mobile_android","tablet_android","tablet_ios"],preprocessData:function(e){return Object.keys(e).forEach(function(t){e[t]=this._toNumber(e[t])},this),e},getActivityInterval:function(e){if("last-mobile-activity"!==e)return!1;var t=this.getLastMobileActivityDate();if(!1===t)return!1;var n=Daria.promoNow()-t.getTime();return!(n<0)&&n},getLastMobileActivityDate:function(){var e=this._fieldsToData(this.MOBILE_FIELDS),t=e.filter(function(e){return e}).reduce(function(e,t){return e<t?t:e},0);return this._secondsToDate(t)},isEmpty:function(){return Boolean(this.get(".empty"))||Boolean(this.get(".notfound"))},_secondsToDate:function(e){return!!e&&new Date(1e3*e)},_toNumber:function(e){return e=Number(e),isNaN(e)?0:e},_fieldsToData:function(e){return Array.isArray(e)||(e=[]),e.map(function(e){return this.get("."+e)},this)}}})}()},function(e,t){!function(){ns.Model.define("inline-wizard-container-state",{events:{"ns-model-init":"onInit"},methods:{onInit:function(){this.setData({isWizardOpen:!1,isWizardReady:!1,isContainerReady:!1,isFixed:!1,isAbsolute:!1},{silent:!0})},toggleFixed:function(e){this.set(".isFixed",e)},toggleAbsolute:function(e){this.set(".isAbsolute",e)},isAbsolute:function(){return this.get(".isAbsolute")},isFixed:function(){return this.get(".isFixed")},isWizardOpen:function(){return this.get(".isWizardOpen")},isContainerReady:function(){return this.get(".isContainerReady")},isWizardReady:function(){return this.get(".isWizardReady")}}},ns.ModelStatic)}()},function(e,t){ns.Model.define("weather",{params:{geoid:null,date:null}})},function(e,t){ns.Model.define("help-link",{events:{"ns-model-init":"_onInit"},methods:{_hrefSuffixMap:{inbox:"zout_context/context-inbox.html",folder:"web/mailbox/folders.html#my-folders",archive:"web/mailbox/folders.html",sent:"zout_context/context-sent.html",trash:"zout_context/context-trash.html",spam:"zout_context/context-spam.html",draft:"web/letter/create.html#drafts",template:"web/letter/create.html#templates",outbox:"zout_context/context-outbox.html",search:"zout_context/context-search.html",compose2:"zout_context/context-compose.html",message:"zout_context/context-message.html",abook:"web/abook.html",unread:"web/mailbox/tags.html",attachments:"web/letter/attachments.html",important:"web/mailbox/tags.html",label:"web/mailbox/tags.html",setup:"zout_context/context-setup.html","setup/sender":"zout_context/context-setup-sender.html","setup/collectors":"zout_context/context-setup-collectors.html","setup/security":"zout_context/context-setup-security.html","setup/folders":"zout_context/context-setup-folders.html","setup/abook":"web/abook.html","setup/client":"mail-clients.html","setup/journal":"web/security.html#journal","setup/todo":"web/features/to-do.html","setup/other":"zout_context/context-setup-other.html","setup/filters":"zout_context/context-setup-filters.html","setup/filters-create":"zout_context/context-setup-filters-create.html","setup/filters-create-simple":"zout_context/context-setup-filters-create-simple.html","setup/filters-create-simple/label":"zout_context/context-setup-filters-create-simple-label.html","setup/filters-create-simple/delete":"zout_context/context-setup-filters-create-simple-delete.html"},_onInit:function(){this.setData({href:this._getHref(ns.page.current)}),ns.events.on("ns-page-before-load",this._onPageBeforeLoad.bind(this))},_onPageBeforeLoad:function(e,t){_.isEqual(t[0],t[1])||this.updateHref(t[1])},updateHref:function(e){this.set(".href",this._getHref(e))},_getHref:function(e){var t=this._getHrefSuffix(e.page,e.params);return Daria.Config["help-url"]+(t?"/"+t:"")},_getHrefSuffix:function(e,t){if(t.ids||t.thread_id)return this._hrefSuffixMap.message;if("messages"===e){if(t.search)return this._hrefSuffixMap.search;if(t.important)return this._hrefSuffixMap.important;if("only_new"===t.extra_cond)return this._hrefSuffixMap.unread;if("only_atta"===t.extra_cond)return this._hrefSuffixMap.attachments}if(t.current_folder){var n=ns.Model.get("folders"),i=n.getFolderById(t.current_folder);if(i.symbol)return this._hrefSuffixMap[i.symbol];if(i.user)return this._hrefSuffixMap.folder}return t.current_label?this._hrefSuffixMap.label:"setup"===e||"setup-sender"===e?t.tab&&t.action?this._hrefSuffixMap["setup/"+t.tab+"/"+t.action]:t.tab?this._hrefSuffixMap["setup/"+t.tab]:this._hrefSuffixMap.setup:this._hrefSuffixMap[e]?this._hrefSuffixMap[e]:""}}},ns.ModelStatic)},function(e,t){ns.Model.define("skin-saver-state",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({previewMode:!1})},isPreviewMode:function(){return this.get(".previewMode")},togglePreviewMode:function(e){return this.set(".previewMode",e)}}},ns.ModelStatic)},function(e,t){ns.Model.define("current-day",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({}),_.delay(function(){this.set(".date",Daria.passportNow(),{silent:!0}),this.setNextDayTimeout()}.bind(this),Jane.Date.SECOND)},setNextDayTimeout:function(){var e=new Date(Daria.passportNow()),t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),n=t-e;setTimeout(this.updateDate.bind(this),n+1)},updateDate:function(){this.setIfChanged(".date",Daria.passportNow()),this.setNextDayTimeout()}}},ns.ModelStatic)},function(e,t){ns.Model.define("search-suggest",{params:{status:null,limit:null,request:null,scope:null,fid:null,lid:null,from:null,to:null,attaches:null,reqid:null,history:null,highlight:null},methods:{request:function(){var e=ns.request._getNodeRequestDetails(this.id,this);return ns.http(e.url,e.params).then(function(e){ns.request.extractModel(this,e.models[0])}.bind(this))}}})},function(e,t){ns.Model.define("filter-search",{params:{mids:null},methods:{preprocessData:function(e){if(Array.isArray(e.envelopes))for(var t=ns.Model.get("labels").get(".label"),n=e.envelopes.length;n--;){var i=e.envelopes[n];if(!i.processed){for(var r=0;r<i.labels.length;r++){var o=_.find(t,{lid:i.labels[r]});if(o&&o.social){i.dlid=o.name.replace(/^vtnrf0/,"");break}}i.processed=!0;var s=ns.Model.get("filter-search",{mids:i.mid});s.select(".envelopes.processed")[0]||s.setData({envelopes:[i]})}}return e},hasSocialLabels:function(){return Boolean(this.getSocialLID())},getSocialLID:function(){var e=_.flatten($.makeArray(this.select(".envelopes.labels"))),t=e.length;if(t)for(var n=ns.Model.get("labels"),i=0;i<t;i++)if(n.isSocial(e[i]))return e[i];return null}}})},function(e,t){!function(){ns.Model.define("messages-pager",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){if("all"===this.params.current_folder){var e;if(Daria.IS_CORP)e={year:"2000",month:"1",day:"1"};else{var t=ns.Model.get("account-information").getDataKey("reg_date");t=new Date(t),e={year:String(t.getFullYear()),month:String(t.getMonth()+1),day:"1"}}this.setData(e)}},preprocessData:function(e){var t=Jane.Common.n,n=e.year,i=e.month,r=e.day,o=new Date,s=new Date(n,i-1,r);if(!n||o<=s)return{};for(var a=o.getFullYear(),u=s.getFullYear(),l=o.getMonth()+1,c=s.getMonth()+1,d=[],f=u,p=c,h={id:f,datePager:f,year:f,from:"01.01."+f,to:"01.01."+(f+1),month:[],isYear:!0},m=0,g=f>=Daria.Config.messagesMaxDate;f<a||f===a&&p<=l;)if(g&&h.month.push({datePager:t(p)+"."+f,month:p-1,year:f,from:"01."+t(p)+"."+f,to:"01."+t(p<12?p+1:1)+"."+(p<12?f:f+1),id:t(p)+String(f)}),p++,13===p&&(p=1,g?d.push(h):0===d.length&&d.push({id:f,datePager:f,year:f,old:1}),f++,(g=f>=Daria.Config.messagesMaxDate)&&(h={id:f,datePager:f,year:f,from:"01.01."+f,to:"01.01."+(f+1),month:[],isYear:!0})),++m>1e3)return Jane.ErrorLog.send({errorType:"messages-pager.infinity",dataYear:n,dataMonth:i,dataDay:r,nowDate:o.toString()}),{};return h.month.length&&d.push(h),{year:d}},getCountMonth:function(){return this.select(".year.month.datePager").length}},params:{current_folder:null}})}()},function(e,t){!function(){var e=[{type:"#inbox",isInbox:!0,name:"Входящие",label:i18n("%Folder_inbox"),icon:"MailTypes-Inbox"},{type:"4",name:"Люди",label:i18n("%Messages_Title_By_Type_4"),icon:"MailTypes-People"},{type:"5",name:"Билеты",label:i18n("%Messages_Title_By_Type_5"),icon:"MailTypes-Ticket"},{type:"35",name:"Гостиницы",label:i18n("%Messages_Title_By_Type_35"),icon:"MailTypes-Hotels"},{type:"14",name:"Скидки",label:i18n("%Messages_Title_By_Type_14"),icon:"MailTypes-Sale"},{type:"18",name:"Социальные сети",label:i18n("%Messages_Title_By_Type_18"),shortLabel:i18n("%Messages_Title_By_Type_18_Short"),icon:"MailTypes-Social"}];ns.Model.define("messages-types",{methods:{preprocessData:function(t){var n,i=[];for(n in t)0!==t[n].freq&&i.push(n);var r={notEmptyTypes:i,typesInFilter:e};return $.extend(r,this.filterByArrayOfTypes(i,e)),r},getTypeById:function(t){return _(e).findWhere({type:String(t)})},filterByArrayOfTypes:function(e,t){var n={};return n.typesAfterFilter=[],n.typesAfterFilterDiscarded=[],t.forEach(function(t){t.canNotBeDeleted||"#inbox"===t.type||e.indexOf(t.type)>-1?n.typesAfterFilter.push(t):n.typesAfterFilterDiscarded.push(t)}),n}}})}()},function(e,t){!function(){ns.Model.define("message-read-mute-fsm",{params:{ids:null,type:null},methods:{start:"",transitions:{toRead:["toMute","toUnread"],toMute:["toUnmute","toUnread","toRead"],toUnmute:["toUnread","toRead"],toUnread:["toRead","toUnmute"]}}},ns.ModelFsm)}()},function(e,t){ns.Model.define("state-message-thread-item",{params:{ids:null},events:{"ns-model-init":"_onNsModelInit"},methods:{_onNsModelInit:function(){this.setData({isOpened:!1,isFocused:!1,isIgnoreMarkRead:!1,promiseWillBeLoaded:!1,isVisible:!1,shouldBeInViewport:!1,forceMark:!1})},_setChangedData:function(e,t,n){if(e="."+e,this.get(e)!==t){var i=n?{silent:!0}:{};return this.set(e,t,i),!0}return!1},isOpen:function(){return this.get(".isOpened")},setOpen:function(e,t){return this._setChangedData("isOpened",e,t)},setVisible:function(e,t){return this._setChangedData("isVisible",e,t)},setFocus:function(e,t){return this._setChangedData("isFocused",e,t)},setIgnore:function(e,t){return this._setChangedData("isIgnoreMarkRead",e,t)}}},ns.ModelStatic)},function(e,t){ns.Model.define("get-maillists",{params:{emails:null}})},function(e,t){ns.Model.define("get-maillists-static",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({emails:null},{silent:!0})},getMaillists:function(e){var t=this,n=this.get(".emails")||{},i=_.difference(e,Object.keys(n)),r=vow.fulfill();if(i.length>0){var o=ns.Model.get("get-maillists",{emails:i.join(",")});r=ns.request.models([o]).then(function(i){var r=i[0].get(".maillists");r.forEach(function(e){n[e]||(n[e]=!0)}),_.difference(e,r).forEach(function(e){n[e]||(n[e]=!1)}),t.set(".emails",n),vow.fulfill()})}return r.then(function(){var t=[];return e.forEach(function(e){!0===n[e]&&t.push(e)}),vow.fulfill(t)})}}},ns.ModelStatic)},function(e,t){ns.Model.define("reset-unvisited",{params:{fid:null},methods:{resetUnvisited:function(){return ns.Model.get("folder",{fid:this.params.fid}).get(".recent")?ns.forcedRequest([this]).then(function(e){return vow.fulfill(e[0].get(".is_reset"))}):vow.fulfill(!0)}}})},function(e,t){ns.Model.define("notifications",{isCollection:!0,events:{"ns-model-init":"_onInit"},methods:{_uniqueId:0,DELAY_BEFORE_DELETE:600,MAX_NOTIFICATION_COUNT:10,_onInit:function(){this.setData({queue:[]})},hasNotifications:function(){return 0!==this.models.length},hasNotificationsInQueue:function(){return 0!==this.get(".queue").length},addNotification:function(e){if(ns.Model.get("notifications-state").isExpanded()){var t=this.get(".queue");t=t.concat(e),this.set(".queue",t)}else{var n=this.models[0];if(n&&n.isVIP()&&!e.vip)return;this._addNotification(e),this._tryRemoveLastNotification()}},_addNotification:function(e){var t=ns.Model.get("notifications-item",{id:this._uniqueId++}).setData(e);this.insert(t,0)},_tryRemoveLastNotification:function(){if(this.models.length>this.MAX_NOTIFICATION_COUNT){var e=this;_.delay(function(){e.remove(e.models.length-1)},this.DELAY_BEFORE_DELETE)}},insertFromQueue:function(){this.get(".queue").length&&(this._moveVIPtoEndOfQueue(),this._insertFromQueue())},_moveVIPtoEndOfQueue:function(){var e=this.get(".queue");e=e.sort(function(e,t){return e.vip&&!t.vip?1:0}),this.set(".queue",e)},_insertFromQueue:function(){var e=this.get(".queue"),t=this;e.forEach(function(e){t._addNotification(e),t._tryRemoveLastNotification()}),this.set(".queue",[])}}},ns.ModelCollectionStatic)},function(e,t){ns.Model.define("notifications-item",{params:{id:null},methods:{isVIP:function(){return Boolean(this.get(".vip"))},isCalendarEvent:function(){return Boolean("calendar"===this.get(".type"))}}},ns.ModelStatic)},function(e,t){ns.Model.define("notifications-state",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({expanded:!1})},expand:function(){this.set(".expanded",!0)},collapse:function(){this.set(".expanded",!1)},isExpanded:function(){return this.get(".expanded")}}},ns.ModelStatic)},function(e,t){ns.Model.define("timeline-state",{events:{"ns-model-init":"_onInit","ns-model-changed.startDate":"_onChangedStartDate","ns-model-changed.startOffset":"_onChangedStartOffsetDebounce","ns-model-changed.currentDate":"_onChangedCurrentDate"},ctor:function(){this._onXivaCalendarChangedDebounce=_.debounce(this._onXivaCalendarChanged.bind(this),2*Jane.Date.MINUTE,{maxWait:5*Jane.Date.MINUTE,leading:!0,trailing:!0}),this.currentDateTick=this.currentDateTick.bind(this),this._onChangedStartOffsetDebounce=_.debounce(this._onChangedStartOffset.bind(this),500),this._lockStartDateSet=!1,this._lockStartDateAutoSet=!1},methods:{TIMELINE_COLLAPSED_HEIGHT:31,TIMELINE_START_HOUR_OFFSET:2,TIMELINE_HOUR_PIXEL_STEP:48,MAX_LAG_START_DATE:6*Jane.Date.HOUR,SLEEP_TIME:5*Jane.Date.MINUTE,CALENDAR_SID:31,SHOW_EMPTY:0,SHOW_COLLAPSED:1,SHOW_PROMO:2,SHOW_TIMELINE:3,_onInit:function(){var e=Math.floor(window.screen.width/this.TIMELINE_HOUR_PIXEL_STEP),t=this._getCurrentDate(),n=Jane.Date.clone(t);n=this._adjustHours(n,-this.TIMELINE_START_HOUR_OFFSET),this.setData({calendarSpeed:Number($.url(window.location.href).getParam("calendar_speed")||0),showState:this.SHOW_EMPTY,timerTick:0,height:0,currentDate:{get:_.constant(t)},startDate:n,startOffset:{get:_.constant(0)},showedHours:e,countOfDays:Math.ceil(e/24)}),ns.events.on("xiva.calendar.user-events-changed",this._onXivaCalendarChangedDebounce)},_onChangedStartDate:function(){this._lockStartDateSet=!0},_onChangedStartOffset:function(){this._lockStartDateSet=!1},_onChangedCurrentDate:function(e,t,n,i,r){var o=r.get().getTime(),s=this.getCurrentDate().getTime(),a=!1;if(Math.abs(s-o)>this.SLEEP_TIME&&(this._lockStartDateAutoSet=!1,ns.Model.invalidate("get-user-events",no.True),a=!0),!this._lockStartDateAutoSet){var u=this.get(".startDate").getTime();Math.abs(s-u)>this.MAX_LAG_START_DATE&&this.shiftCurrentStartDate()}if(a){var l=Daria.Transport.getInstance(!1);!l||l.onLine()?this.atrigger("daria:mTimelineState:update"):l.once("online",this.atrigger.bind(this,"daria:mTimelineState:update"))}},set:function(e){if(".startDate"!==e||!this._lockStartDateSet)return this.super_.set.apply(this,arguments)},recalcShowedHours:function(e){var t=Math.floor(e/this.TIMELINE_HOUR_PIXEL_STEP);this.setIfChanged(".showedHours",t),this.setIfChanged(".countOfDays",Math.ceil(t/24))},shiftForwardStartDate:function(){var e=Jane.Date.clone(this.get(".startDate"));e=this._adjustHours(e,this.get(".showedHours")),e=this._adjustHours(e,-this.TIMELINE_START_HOUR_OFFSET),this._lockStartDateAutoSet=!0,this.setIfChanged(".startDate",e)},shiftBackStartDate:function(){var e=Jane.Date.clone(this.get(".startDate"));e=this._adjustHours(e,-this.get(".showedHours")),e=this._adjustHours(e,this.TIMELINE_START_HOUR_OFFSET),this._lockStartDateAutoSet=!0,this.setIfChanged(".startDate",e)},shiftCurrentStartDate:function(){var e=Jane.Date.clone(this.getCurrentDate());e=this._adjustHours(e,-this.TIMELINE_START_HOUR_OFFSET),this._lockStartDateAutoSet=!1,this.setIfChanged(".startDate",e)},getCurrentDate:function(){return this.get(".currentDate.get")()},setStartOffset:function(e){this.set(".startOffset",{get:e})},checkShow:function(){return!this.checkUnavailable()&&this.checkEnable()},checkEnable:function(){var e=ns.Model.get("settings");if(this.checkAvailable())return!e.hasSetting("timeline_enable")||e.isSet("timeline_enable");var t=ns.Model.get("account-information");return e.isSet("timeline_enable")&&t.hasSid(this.CALENDAR_SID)},checkShowPromo:function(){return!1},checkShowCollapsed:function(){return!(!this.checkShow()&&!this.checkShowPromo())&&!this.checkSettingTimelineIsOpen()},checkAvailable:function(){return Boolean(Daria.IS_CORP||Daria.Config.pddDomain||Daria.Config.workspace)},checkUnavailable:function(){var e=ns.page.current.page;return Boolean(Daria.Config.NO_SETTINGS||"not-found"===e||"no-message"===e||!Daria.Config["is-timeline"])},checkSettingTimelineIsOpen:function(){var e=ns.Model.get("settings");return Daria.Config.pddDomain||Daria.Config.workspace?e.isSet("timeline-is-open"):!e.hasSetting("timeline-is-open")||e.isSet("timeline-is-open")},subscribeCalendar:function(){return this.checkAvailable()?Vow.resolve():ns.Model.get("settings").isSet("timeline_enable")?ns.Model.get("account-information").hasSid(this.CALENDAR_SID)?Vow.resolve():ns.forcedRequest("do-admsubscribe-calendar").then(this._checkSubscribeResponse,this).then(this._onSuccessSubscribeCalendar,this).fail(this._onErrorSubscribeCalendar,this):Vow.resolve()},metrika:function(){var e=Array.prototype.slice.call(arguments);e.unshift("Календарный таймлайн"),Jane.c.apply(Jane,e)},currentDateTick:function(){this._updateCurrentDate(),this.set(".timerTick",setTimeout(this.currentDateTick,this._getTickTime()),{silent:!0})},currentDateTickStop:function(){clearTimeout(this.get(".timerTick"))},_updateCurrentDate:function(){var e=this._getCurrentDate();this._isCustomCalendarSpeed()&&e.setMinutes(e.getMinutes()+1),this.set(".currentDate",{get:_.constant(e)})},_getTickTime:function(){var e=Jane.Date.MINUTE-Daria.now()%Jane.Date.MINUTE+1;return this._isCustomCalendarSpeed()&&(e=this.get(".calendarSpeed")),e},_checkSubscribeResponse:function(e){return"ok"===e[0].getData().status?Vow.resolve():Vow.reject()},_onSuccessSubscribeCalendar:function(){var e=ns.Model.get("account-information"),t=e.get(".sids")||[];return t.push(String(this.CALENDAR_SID)),e.set(".sids",t),Vow.resolve()},_onErrorSubscribeCalendar:function(){return new vow.Promise(function(e,t){ns.Model.get("settings").setSettingOff("timeline_enable",t)})},_getCurrentDate:function(){var e;if(this._isCustomCalendarSpeed())e=Jane.Date.clone(this.getCurrentDate());else{var t=ns.Model.get("account-information").getTimezoneInHours();e=Daria.now(!0),e=Jane.Date.dateWithCustomTimeZone(e.getTime(),t),e=Jane.Date.LocalDate.convertDate(e),e.setSeconds(0,0)}return e},_adjustHours:function(e,t){return t=Math.floor(t||0),e.setHours(e.getHours()+t),e},_roundAwayFromZero:function(e){return e<0?Math.floor(e):Math.ceil(e)},_isCustomCalendarSpeed:function(){return this.get(".calendarSpeed")>0},_onXivaCalendarChanged:function(){ns.Model.invalidate("get-user-events",no.True),this.atrigger("daria:mTimelineState:update")}}},ns.ModelStatic)},function(e,t){ns.Model.define("timeline-list",{events:{"ns-model-destroyed":"_onDestroyed"},params:{},split:{items:".items",params:{df:".df",dt:".dt"},model_id:"timeline-list-item"},ctor:function(){this._mapDaysToModelsIterator=this._mapDaysToModelsIterator.bind(this),this._filterRemovedIterator=this._filterRemovedIterator.bind(this),this._sortRangesByDateFrom=this._sortRangesByDateFrom.bind(this),this._mapModelsToDateIterator=this._mapModelsToDateIterator.bind(this),this._onChangedStartDateDebounce=_.debounce(this._onChangedStartDate.bind(this),50)},methods:{PRELOADED_VISIBLE_RANGES:3,request:function(){return ns.request("timeline-state").then(this._initFromModels,this)},loadMore:function(){var e=_.last(this.models),t=_.method(".get",".dateTo")(e);if(t||(t=this.mTimelineState.get(".startDate")),!t)return Vow.reject();var n=_.range(1,this._getVisibleDaysCount()).map(this._mapDaysIterator.bind(this,t)).map(this._mapDaysToModelsIterator);return this.setData({items:this._listModification(n)}),Vow.resolve()},_initFromModels:function(e){this.mTimelineState=_.find(e,"id","timeline-state"),this.mTimelineState.on("ns-model-changed.startDate",this._onChangedStartDateDebounce),this.setData({items:this._getStartingDays()})},_onDestroyed:function(){this._onChangedStartDateDebounce.cancel(),this.mTimelineState.off("ns-model-changed.startDate",this._onChangedStartDateDebounce),this.mTimelineState=null},_onChangedStartDate:function(){this._reinitialize()},_mapDaysIterator:function(e,t){var n=Jane.Date.clone(e);n.setDate(n.getDate()+t),n.setHours(0,0,0,0);var i=Jane.Date.clone(n);return i.setHours(23,59,0,0),{df:Jane.Date.format("%Date_iso",n),dt:Jane.Date.format("%Date_iso",i),dateFrom:n,dateTo:i}},_getStartingDays:function(){var e=this.mTimelineState.get(".startDate"),t=this._getVisibleDaysCount();return _.range(t).map(this._mapDaysIterator.bind(this,e))},_reinitialize:function(){var e=this._getStartingDays().map(this._mapDaysToModelsIterator),t=this.models.filter(this._filterRemovedIterator);this.setData({items:this._listModification(e,t)})},_listModification:function(e,t){return _(this.models).chain().difference(t).concat(e).uniq().sortBy(this._sortRangesByDateFrom).map(this._mapModelsToDateIterator).value()},_filterRemovedIterator:function(e){var t=this.mTimelineState.get(".startDate"),n=e.getOffsetRange(t),i=Jane.Date.DAY*this._getVisibleDaysCount();return n>i||n<-i},_getVisibleDaysCount:function(){return this.mTimelineState.get(".countOfDays")*this.PRELOADED_VISIBLE_RANGES},_mapDaysToModelsIterator:function(e){return ns.Model.get("timeline-list-item",e).setData(e)},_mapModelsToDateIterator:function(e){return e.getData()},_sortRangesByDateFrom:function(e){return e.get(".dateFrom").getTime()}}})},function(e,t){ns.Model.define("timeline-list-item",{events:{"ns-model-init":"_onInit"},params:{df:null,dt:null},methods:{_onInit:function(){this.setData({})},checkDateInRange:function(e){return(e=e.getTime())>=this.get(".dateFrom").getTime()&&e<=this.get(".dateTo").getTime()},checkDateGtRange:function(e){return e.getTime()>this.get(".dateTo").getTime()},checkDateLtRange:function(e){return e.getTime()<this.get(".dateFrom").getTime()},getOffsetRange:function(e){e=e.getTime();var t=this.get(".dateFrom").getTime(),n=this.get(".dateTo").getTime();return e>n?e-n:e<t?e-t:0}}},ns.ModelStatic)},function(e,t){ns.Model.define("disk-secret-key",{methods:{isValid:function(){return this.get(".expirationDate")>=Date.now()}}})},function(e,t){ns.Model.define("promo-mobile-app-state",{events:{"ns-model-init":"resetState"},params:{promo:null},methods:{STATE:{DEFAULT:"default",ENTER_PHONE:"enter-phone",ENTER_PHONE_INVALID:"enter-phone-invalid",SENDING:"sending",SEND_SUCCESS:"send-success",SEND_FAILED:"send-failed"},resetState:function(){this.setData({state:this.STATE.DEFAULT,retriesLeft:3,shouldGoNextWithDelay:!0})},resetErrorMessages:function(){var e=this.STATE;this.get(".state")===e.ENTER_PHONE_INVALID&&this.set(".state",e.DEFAULT),this.get(".state")===e.SEND_FAILED&&(this.canRetry()?this.set(".state",e.DEFAULT):this.resetState())},setDefaultState:function(){this.setIfChanged(".state",this.STATE.DEFAULT)},setEnterPhoneState:function(){this.setIfChanged(".state",this.STATE.ENTER_PHONE)},canTrySendAppLink:function(){var e=this.STATE,t=this.get(".state");return t===e.DEFAULT||t===e.ENTER_PHONE||t===e.SEND_FAILED},canRetry:function(){return this.get(".retriesLeft")>0},setInvalidPhoneNumberState:function(){this.set(".state",this.STATE.ENTER_PHONE_INVALID)},startSending:function(){this.set(".retriesLeft",this.get(".retriesLeft")-1,{silent:!0}),this.set(".state",this.STATE.SENDING)},isEnterPhoneState:function(){var e=this.STATE,t=this.get(".state");return t===e.DEFAULT||t===e.ENTER_PHONE||t===e.ENTER_PHONE_INVALID||t===e.SEND_FAILED},isStrictEnterPhoneState:function(){var e=this.STATE;return this.get(".state")===e.ENTER_PHONE},isInvalidPhoneNumberState:function(){return this.get(".state")===this.STATE.ENTER_PHONE_INVALID},isSendingState:function(){return this.get(".state")===this.STATE.SENDING},isSendFailedState:function(){return this.get(".state")===this.STATE.SEND_FAILED},isSendSuccessState:function(){return this.get(".state")===this.STATE.SEND_SUCCESS},shouldGoNextWithDelay:function(){return this.get(".shouldGoNextWithDelay")},unsetShouldGoNextWithDelay:function(){this.set(".shouldGoNextWithDelay",!1,{silent:!0})},onSuccess:function(){this.set(".state",this.STATE.SEND_SUCCESS)},onSendFailed:function(){this.set(".state",this.STATE.SEND_FAILED)}}},ns.ModelStatic)},function(e,t){ns.Model.define("account-security-state",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({wasHidden:!1})}}},ns.ModelStatic)},function(e,t){ns.Model.define("thread-info",{params:{thread_id:null},methods:{request:function(){var e=ns.request._getNodeRequestDetails(this.id,this),t=ns.Model.get("message",{ids:this.params.thread_id});return t.get(".FAKE_THREAD_DATA")&&Daria.is3pane()?ns.http(e.url,e.params).then(function(e){t.get(".FAKE_THREAD_DATA")&&t.setData(e.models[0].data),this.setData({})}.bind(this)):(this.setData({}),Vow.resolve())}}})},function(e,t){ns.Model.define("push-vapid",{})},function(e,t){ns.Model.define("push-subscriptions",{params:{clients:null}})},function(e,t){ns.Model.define("do-push-subscribe",{params:{folders:null,subscription:null}})},function(e,t){ns.Model.define("do-push-unsubscribe",{})},function(e,t,n){"use strict";function i(e){return _.get(e,"xhr.status",!1)}ns.Model.define("versions",{events:{"ns-model-init":"onInit"},ctor:function(){this._timer=null},methods:{TIMEOUT:9e5,onInit:function(){this.setData({u2709:{version:Daria.Config.version}}),this.scheduleVersionUpdate()},request:function(){var e=this,t=Daria.api.versions;return ns.http(t,{model:this.id},{type:"GET"}).then(function(t){return e.setData(_.isPlainObject(t)?t:{})}).fail(function(e){i(e)||Jane.ErrorLog.send({errorType:"no_version.set_data_err"},JSON.stringify(e))})},scheduleVersionUpdate:function(e){var t=this;this._timer&&clearTimeout(this._timer),e||(this._timer=setTimeout(function(){t.request().then(function(){return t._checkNeedPageUpdate()}).fail(function(){return!1}).then(function(e){return t.scheduleVersionUpdate(e)})},this.TIMEOUT))},_checkNeedPageUpdate:function(){if(Daria.Config.dev)return!1;var e=this.get(".u2709.version");return e?Jane.Services.setActualVersion(e):(Jane.ErrorLog.send({errorType:"no_version.model"},JSON.stringify(this.getData())),!1)}}})},function(e,t){ns.Model.define("system-status",{events:{"ns-model-init":"onInit","ns-model-changed":"updateLoop","ns-model-destroyed":"onDestroy"},methods:{TIMEOUT:Daria.IS_CORP?6e4:6e5,onInit:function(){var e=this;this._shouldLoad=!0,this._timer=null,this.onAuthExpired=function(){return e._onAuthExpired.apply(e,arguments)},this.onAuthSuccess=function(){return e._onAuthSuccess.apply(e,arguments)},ns.events.on("noauth",this.onAuthExpired),ns.events.on("getauth",this.onAuthSuccess)},onDestroy:function(){ns.events.off("noauth",this.onAuthExpired),ns.events.off("getauth",this.onAuthSuccess)},updateLoop:function(){Daria.Config["db-status"]=this.getData()["db-status"],this._restartTimer()},request:function(){if(!this._shouldLoad)return Vow.resolve();var e=ns.request._getNodeRequestDetails(this.id);return ns.http(e.url,e.params).then(function(e){if(!1===ns.request.canProcessResponse(e))return void this._setDefaultData();ns.request.extractModel(this,e.models[0])},this).fail(function(){this._setDefaultData()},this)},_onAuthExpired:function(){this._shouldLoad=!1},_onAuthSuccess:function(){this._shouldLoad=!0,this._restartTimer()},_restartTimer:function(){this._timer&&clearTimeout(this._timer),this._timer=setTimeout(this._timerRequest,this.TIMEOUT)},_timerRequest:function(){ns.forcedRequest("system-status")},_setDefaultData:function(){this.setData({"db-status":"rw",problem:""})}}})},function(e,t){ns.Model.define("unsubscribe-furita-newsletters",{params:{},methods:{getRequestParams:function(){var e=this.super_.getRequestParams.apply(this,arguments);return Daria.React.UnsubscribePopup.isMaster&&(e.master=1),e}}})},function(e,t){ns.Model.define("unsubscribe-furita-filters",{params:{},methods:{getRequestParams:function(){var e=this.super_.getRequestParams.apply(this,arguments);return Daria.React.UnsubscribePopup.isMaster&&(e.master=1),e}}})},function(e,t){ns.Model.define("do-unsubscribe-furita-filters-create",{params:{maillistList:null}})},function(e,t){ns.Model.define("do-unsubscribe-furita-filters-apply",{params:{filterIdList:null}})},function(e,t){ns.Model.define("do-unsubscribe-furita-filters-delete",{params:{filterIds:null}})},function(e,t){ns.Model.define("recipients",{params:{recipientsIds:null},methods:{extractData:function(e){return e&&e.data||{}}}})},function(e,t,n){var i=n(1579),r=n(1580);ns.events.on("pageinit",function(){ns.request(["filters"]),Daria.IS_CORP||ns.request(["userphones"]),ns.request(["module-compose","module-message"])}),ns.events.on("pageinit",function(){ns.forcedRequest(["do-mail-reset-recent-counter"]),ns.events.on("pageVisible.change",function(){Jane.watcher.get("pageVisible")&&ns.forcedRequest(["do-mail-reset-recent-counter"])})}),ns.events.on("pageinit",function(){ns.events.on("ns-page-before-changed",function(){nb.trigger("popup-close")})}),ns.events.on("pageinit",function(){Daria.Sound.preload("message")}),ns.events.on("pageinit",function(){Daria.Geolocation.monitoring()}),ns.events.on("pageinit",function(){ns.Model.get("settings").isSet("show_todo")&&ns.request(["module-todo"]).then(function(){Daria.Todo.init()})}),ns.events.on("pageinit",function(){Jane.HAS_AD&&i.run()}),ns.events.on("pageinit",function(){var e=ns.Model.get("app-state");e&&e.set(".shouldAnimate",!1)}),ns.events.on("pageinit",function(){new r({cspHost:Daria.Config.cspHost,from:"LIZA",tld:Daria.Config.TLD,reqid:Daria.Config.connection_id}).check()})},function(e,t,n){"use strict";e.exports={run:function(){return Jane.Services.runModules(["direct.js","direct.css"]).then(function(){return ns.Model.get("app-state").set(".directModuleLoaded",!0),Daria.directRunner.run()})}}},function(e,t){function n(){var e;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e||"undefined"==typeof XMLHttpRequest||(e=new XMLHttpRequest),e}function i(e){return/^(?:(?![^:@]+:[^:@\/]*@)[^:\/?#.]+:)?(?:\/\/)?(?:(?:[^:@\/]*(?::[^:@\/]*)?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)/.exec(e||"")[1]}function r(e){"withCredentials"in n()&&this.check()}function o(e){this.cspUrl=e.cspUrl||"//"+(e.cspHost||a)+"/csp",this.reqid=e.reqid,this.login=e.login,this.yandexuid=e.yandexuid,this.checkTimeout=e.checkTimeout||s,this.checkTimeoutId=null,this.from=e.from||u,this.counter=e.counter||l,this.tld=e.tld||c,this.domainExact=e.domainExact||["yandex."+this.tld,"yastatic.net","yandex.st"],this.domainSuffix=e.domainSuffix||[".yandex."+this.tld,".yandex.net",".yandex.ru"],this.onSendError=e.onSendError,this._onReady=r.bind(this);var t,n=document.cookie;return this.login||(t=n.match(/(?:^|;)\s*yandex_login\s*=\s*([^;]+)/))&&(this.login=t[1].trim()),this.yandexuid||(t=n.match(/(?:^|;)\s*yandexuid\s*=\s*([^;]+)/))&&(this.yandexuid=t[1].trim()),this}var s=5e3,a="yandex.ru",u="web4",l="690.1893.1894",c="ru";o.prototype.start=function(){return document.addEventListener("DOMContentLoaded",this._onReady,!1),this},o.prototype.stop=function(){return this.checkTimeoutId&&(this.removeListenerCallback(),clearTimeout(this.checkTimeoutId)),document.removeEventListener("DOMContentLoaded",this._onReady),this},o.prototype.check=function(){var e=document.documentElement,t=function(e){var t=e.target,n=t.nodeName.toLowerCase();"script"!==n&&"object"!==n||this._detect(t)}.bind(this);return this._detectByElem("script"),this._detectByElem("object"),e.addEventListener("load",t,!0),this.removeListenerCallback=function(){e.removeEventListener("load",t,!0)},this.checkTimeoutId=setTimeout(this.removeListenerCallback,this.checkTimeout),this},o.prototype._detectByElem=function(e){for(var t,n=document.getElementsByTagName(e),i=0;i<n.length;i++)t=n[i],t.src&&this._detect(t)},o.prototype._detect=function(e){if(!e.checked){e.checked=!0;var t=e.src;this._filterSrc(t)&&this._send(t)}},o.prototype._filterSrc=function(e){var t=i(e);return this.domainExact.every(function(e){return e!==t})&&this.domainSuffix.every(function(e){return t.indexOf(e)<0})},o.prototype._send=function(e){var t=n(),i="from="+encodeURIComponent(this.from)+"&path="+encodeURIComponent(this.counter)+"&reqid="+encodeURIComponent(this.reqid)+"&url="+encodeURIComponent(e)+"&yandex_login="+encodeURIComponent(this.login)+"&yandexuid="+encodeURIComponent(this.yandexuid);t.open("POST",this.cspUrl,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4===t.readyState&&200!==t.status&&this.onSendError&&this.onSendError(t.status,t.responseText)}.bind(this),t.send(i)},e.exports=o},function(e,t){Daria.IS_CORP&&ns.events.on("ns-page-after-load",function(){$.ajax({url:"//center.yandex-team.ru/whistlah",dataType:"jsonp"})}),ns.events.on("ns-page-before-load",function(e,t){var n=t[0],i=t[1];"messages"===n.page&&(n.params.ids||n.params.thread_id)&&(n.params.ids===i.params.ids&&n.params.thread_id===i.params.thread_id||ns.events.trigger("daria:message-will-close"))})},function(e,t){var n=function(e,t){return e.call(this,t)},i=_.throttle(n,100,{leading:!1});Daria.ContextMenu=function(e){if(!e.items||!e.items.length)throw new Error('Parameter "items" must contain at least 1 element');e.items=_.sortBy(e.items,"index"),this._params=e,this._parentMenu=e.parentMenu,this._scrollItervalIds={},this._menuInfo=this._transformItems(e.items),this._$container=$(Jane.tt("mail:context-menu",{items:this._menuInfo.items,"is-main-menu":!this._parentMenu})),this._$menu=this._$container.find(".js-context-menu"),this._$menuWrapper=this._$container.find(".js-context-menu-wrapper"),this._$menuContent=this._$container.find(".js-context-menu-items"),this._$menu.on("contextmenu",function(){return!1}).on("mouseenter",".js-item",i.bind(this,this._onItemHover)).on("click",".js-item:not(.is-inactive):not(.js-submenu)",this._onItemClick.bind(this))},ns.events.on("dropdowns-closed",function(){Daria.ContextMenu.close()}),ns.events.on("daria:dropdown:close",function(){Daria.ContextMenu.close()}),Daria.ContextMenu.Helpers={},Daria.ContextMenu._$menuContainer=null,Daria.ContextMenu._isOpened=!1,Daria.ContextMenu.isOpened=function(){return this._isOpened},Daria.ContextMenu.close=function(e){e=e||{},ns.events.trigger("daria:vContextMenu:close",{success:Boolean(e.success),staySelection:Boolean(e.staySelection)}),$(".js-layout-left").off("scroll.context-menu-close")},Daria.ContextMenu.prototype._isVisible=!1,Daria.ContextMenu.prototype.show=function(e){var t=this,n=this._isTopLevelMenu=!this._parentMenu,i=!n,r=$(window),o=$("BODY"),s=$(document);n&&(Daria.Dropdown.closeAll(),Daria.ContextMenu.close(),Daria.ContextMenu._isOpened=!0,ns.events.once("daria:vContextMenu:close",function(e,n){n=n||{},n.menuId&&n.menuId!==t._menuId||t._onCloseMenu(e,n)}),o[0].addEventListener("mousedown",this._closeMenuIfOut),o[0].addEventListener("contextmenu",this._closeMenuIfOut),this._$scrollContainer=e.$scrollContainer||r,this._$scrollContainer.on("scroll.context-menu-show",Daria.ContextMenu.close),r.on("resize.context-menu-show",Daria.ContextMenu.close),$.Shortcuts.modalListOn("context-menu"));var a=Daria.ContextMenu._$menuContainer;a||(a=Daria.ContextMenu._$menuContainer=$("<div>"),a.appendTo("body")),a.append(this._$container),this._isVisible=!0;var u=o.outerWidth(),l=o.outerHeight(),c=s.scrollLeft(),d=s.scrollTop(),f=!1,p={top:e.y,left:e.x},h=this._$menu.find(".js-item:first"),m=this._itemHeight=h.outerHeight(),g=this._$menu.outerWidth(),v=this._$menu.outerHeight();i&&v>l/2&&(v=l/2,v=Math.floor(v/m)*m,this._$menuWrapper.css({"max-height":v}),this._addScrollControls(),f=!0);var _=!1,b=e.x-c,y=e.y-d;if(b+g>u&&(p.left-=g,i&&(p.left-=this._parentMenu._$menu.outerWidth()+2)),y+v>l&&(p.top-=v,i&&(p.top+=m),_=!0),i){var w=h.offset().top-this._$menu.offset().top;_&&!f?p.top+=w:p.top-=w}this._$menu.css(p);var S=this._$menuWrapper.width(),k=this._$menuContent.width();S>k&&this._$menu.css({width:2*S-k}),n&&this._log("Показ")},Daria.ContextMenu.prototype._log=function(e){Jane.c("Меню по правому клику",this._params.metrika,e)},Daria.ContextMenu.prototype._closeMenuIfOut=function(e){$(e.target).closest(".js-context-menu").length||Daria.ContextMenu.close({staySelection:!0})},Daria.ContextMenu.prototype._addScrollControls=function(){this._$menu.addClass("context-menu_scroll"),this._$menu.addClass("context-menu_scroll_allow-down"),this._contentHeight=this._$menuContent.outerHeight(),this._contentWrapperHeight=this._$menuWrapper.outerHeight(),this._$menuWrapper.on("scroll",_.throttle(this._updateArrowsState.bind(this),50,{leading:!1})),this._$menu.on("mouseenter",".js-context-menu-scroll-up",this._toggleScrolling.bind(this,"up",!0)).on("mouseleave",".js-context-menu-scroll-up",this._toggleScrolling.bind(this,"up",!1)).on("mouseenter",".js-context-menu-scroll-down",this._toggleScrolling.bind(this,"down",!0)).on("mouseleave",".js-context-menu-scroll-down",this._toggleScrolling.bind(this,"down",!1))},Daria.ContextMenu.prototype._onItemHover=function(e){if(this._isVisible){var t=$(e.currentTarget);if(this._$activeItem&&(this._$activeItem.removeClass("context-menu-item_active"),this._$activeItem=null),t.hasClass("js-submenu")){this._$activeItem=t,t.addClass("context-menu-item_active");var n=t.data("id"),i=this._menuInfo.subMenusHash[n];if(i.subMenu&&i.subMenu.isShown())return;this._closeAllSubMenus(),i.subMenu=new Daria.ContextMenu({items:i.items,parentMenu:this,metrika:this._params.metrika}),i.subMenu.show({x:t.offset().left+t.outerWidth()+1,y:t.offset().top})}else this._closeAllSubMenus()}},Daria.ContextMenu.prototype._onItemClick=function(e){var t=$(e.currentTarget),n=this._params.items[t.data("id")];this.closeMenu({success:!0}),this._log(n.metrika||"Неизвестная строка"),n.onClick&&n.onClick()},Daria.ContextMenu.prototype._closeAllSubMenus=function(){for(var e in this._menuInfo.subMenusHash){var t=this._menuInfo.subMenusHash[e];t.subMenu&&t.subMenu.close()}},Daria.ContextMenu.prototype.isShown=function(){return this._isVisible},Daria.ContextMenu.prototype.close=function(){for(var e in this._scrollItervalIds)clearInterval(this._scrollItervalIds[e]);if(this._isTopLevelMenu){var t=$("BODY");t[0].removeEventListener("mousedown",this._closeMenuIfOut),t[0].removeEventListener("contextmenu",this._closeMenuIfOut),this._$scrollContainer.off(".context-menu-show"),$(window).off(".context-menu-show"),$.Shortcuts.modalListOff()}this._isVisible=!1,this._closeAllSubMenus(),this._$container&&this._$container.remove()},Daria.ContextMenu.prototype._transformItems=function(e){for(var t={},n=e.map(function(e,n){return e.items&&(t[n]={items:e.items}),{id:n,type:e.type,text:e.text,alt:e.alt,"inline-css":e.style,"add-class":e.addClass,"custom-icon":e.customIcon,"sub-menu":Boolean(e.items),inactive:e.hasOwnProperty("isActive")&&!e.isActive}}),i=[],r=0;r<n.length;++r){var o=n[r];("separator"!==o.type||0!==i.length&&r!==n.length-1&&"separator"!==n[r+1].type)&&i.push(o)}return{items:i,subMenusHash:t}},Daria.ContextMenu.prototype._onCloseMenu=function(e,t){Daria.ContextMenu._isOpened&&(t=t||{},this.close(),Daria.ContextMenu._$menuContainer.remove(),Daria.ContextMenu._$menuContainer=null,Daria.ContextMenu._isOpened=!1,!t.success&&this._params.onCancel&&this._params.onCancel(t),this._params.onClose&&this._params.onClose())},Daria.ContextMenu.prototype._updateArrowsState=function(){var e=this._$menuWrapper.scrollTop();this._$menu.toggleClass("context-menu_scroll_allow-up",e>0).toggleClass("context-menu_scroll_allow-down",this._contentHeight-this._contentWrapperHeight>e)},Daria.ContextMenu.prototype._toggleScrolling=function(e,t){t?this._scrollItervalIds[e]=setInterval(this._scroll.bind(this,e),220):clearInterval(this._scrollItervalIds[e])},Daria.ContextMenu.prototype._scroll=function(e){var t=this._$menuWrapper.scrollTop(),n="up"===e?Math.ceil:Math.floor,i=n(t/this._itemHeight)*this._itemHeight,r=i+("up"===e?-this._itemHeight:this._itemHeight);r=Math.min(Math.max(r,0),this._contentHeight-this._contentWrapperHeight),this._$menuWrapper.scrollTop(r),this._updateArrowsState()},Daria.ContextMenu.prototype.closeMenu=Daria.ContextMenu.close.bind(Daria.ContextMenu)},function(e,t,n){n(1584),n(1585),n(1586),n(1587),n(1588),n(1589),n(1590),n(1591),n(1592),n(1593),n(1594),n(1595),n(1596),n(1597),n(1598),n(1599),n(1600),n(1601),n(1602),n(1603),n(1604),n(1605),n(1606),n(1607),n(1608),n(1609),n(1610),n(1611),n(1612),n(1613),n(1614),n(1615),n(1616),n(1617),n(1618),n(1619),n(1620),n(1621),n(1622),n(1623),n(1624),n(1625),n(1626),n(1627),n(1628),n(1635),n(1636),n(1637),n(1638),n(1639),n(1640),n(1641),n(1642),n(1643),n(1644),n(1645),n(1646),n(1647),n(1648),n(1649),n(1650),n(1651),n(1652),n(1653),n(1654),n(1655),n(1656),n(1657),n(1658),n(1659),n(1660)},function(e,t){ns.View.define("prevent-scroll-propagation-mixin",{yateModule:"mail",methods:{getScrollContent:function(){throw new Error("Must be overwritten")},onWheel:function(e){var t=this.getScrollContent(e);if(!t)return e.preventDefault(),void e.stopImmediatePropagation();var n=e.originalEvent.deltaY,i=t.scrollTop,r=t.offsetHeight,o=t.scrollHeight;(n<0&&0===i||n>0&&i+r>=o||r===o)&&(e.preventDefault(),e.stopImmediatePropagation())}}})},function(e,t){ns.View.define("new-theme-render-view-mixin",{methods:{onThemeChanged:function(e,t,n,i,r){var o=ns.Model.get("settings").get(t);return Daria.isNewTheme(r)!==Daria.isNewTheme(o)&&(this.invalidate(),!0)}}})},function(e,t){ns.View.define("kbd-dropdown-actions",{methods:{moveKbdCursor:function(e){var t=this,n=function(e){var t=e[0],n=e.closest(".js-filter-list-wrap")[0];if(!t||!n)return!1;var i=0,r=n.getBoundingClientRect(),o=t.getBoundingClientRect(),s=o.height;o.top+o.height+s>=r.bottom&&(i=r.bottom-o.top-o.height-s),o.top<r.top+s&&(i=r.top-o.top+s),0!==i&&(n.scrollTop+=i>0?-i:Math.abs(i))},i=function(e){var i=t.visibleList[t.kbdSelected],r=t.visibleList[e];i?i.$node.removeClass(t.selectedClass):t.newListElementActive&&($(t.newListSelector).removeClass(t.selectedClass),t.newListElementActive=!1),r?(n(r.$node),r.$node.addClass(t.selectedClass),t.kbdSelected=e):(-2===e&&(t.newListElementActive=!0,$(t.newListSelector).addClass(t.selectedClass),t.kbdSelected=t.visibleList.length),-1===e&&(t.kbdSelected=-1))};i("down"===e?function(){return null===t.kbdSelected?0:t.kbdSelected+1<t.visibleList.length?t.kbdSelected+1:-2}():function(){return t.kbdSelected<0?-1:null===t.kbdSelected?0:t.kbdSelected-1>-1?t.kbdSelected-1:-1}())},getOpenOptions:function(e){var t={width:200,autoclose:!0,how:{my:"center top",at:"center bottom"}};return jpath(e,".isInMore")[0]?t=_.extend(t,{how:{my:"left center",at:"right center",collision:"flipfit fit",within:".mail-App"},class:"is-in-more-button"}):jpath(e,".isInDropdown")[0]&&(t=_.extend(t,{class:"is-in-dropdown"})),t},_preventDefaultAndStopPropagation:function(e){e.preventDefault(),e.stopPropagation()}}})},function(e,t){ns.View.define("404",{events:{"ns-view-show":"onShow","ns-view-hide":"onHide"},methods:{onShow:function(){$("html").addClass("mail-Page_404")},onHide:function(){$("html").removeClass("mail-Page_404")}},yateModule:"mail"})},function(e,t){ns.View.define("app",{models:{"app-state":!1,"account-information":!1,settings:{"ns-model-changed":!1,"ns-model-changed.liza_minified_header":"onChangedLizaMinifiedHeader","ns-model-changed.color_scheme":"onThemeChanged"},"index-data":!1,"skin-saver-state":{"ns-model-changed":!1,"ns-model-changed.previewMode":"toggleSkinPreviewMode"},"timeline-state":{"ns-model-changed":!1,"ns-model-changed.height":"onChangedTimelineHeight","ns-model-changed.showState":"onChangedTimelineShowState"},versions:!1},events:{"ns-view-htmlinit":"onHtmlinit","ns-view-show":"onShow","ns-view-hide":"onHide","ns-page-after-load":"onPageAfterLoad","click .mail-App-Content":"closeMessageOnExternalClick","scroll .js-messages-scroll-area":"_onPaneScroll","click .js-layout-left-toggler":"_onToggleLeftColumWidth","click .js-header-themes-selector":"_onThemesSelectorClick","click .js-NewYear-button":"_onNewYearButtonClick","resize window":"onWindowResize","message.sending":"_onMessageSending","message.sent":"_onMessageSent","message.error":"_onMessageSentError","daria:vMail:resizer:initialized":"_onMailResizerInitialized","daria:vApp:changeLeftColumWidth@show":"_onChangeLeftColumWidth","daria:vApp:enableLeftColumnResize@show":"_onEnableLeftColumnResize","daria:vApp:disableLeftColumnResize@show":"_onDisableLeftColumnResize","daria:vApp:changeAppWidth@show":"onChangeAppWidth","daria:unsubscribe-popup:show":"onShowUnsubscribePopup","daria:unsubscribe-popup:hide":"onHideUnsubscribePopup"},ctor:function(){this._onPaneScroll=_.throttle(this._onPaneScroll.bind(this),50),this._onThemesSelectorClick=_.throttle(this._onThemesSelectorClick.bind(this),300,{leading:!1}),this.onWindowResize=_.throttle(this.onWindowResize.bind(this),50),this.boundOnButtonKeyPress=this.onButtonKeyPress.bind(this),this._onTransitionEndDebounce=_.debounce(this._onTransitionEnd.bind(this),20)},yateModule:"mail",methods:{MIN_WIDTH_HEADER_LEFT:220,MIN_LOGO_GAP:20,MIN_WIDTH_HEADER_BUTTONS:201,_resizerCommon:{_vMailPane2Width:0,_vMailFixBeforeCssUpdate:_.noop,_vMailFixAfterCssUpdate:_.noop,_setActualRatio:_.once(function(){var e,t=this.getFromSettings();e=_.isFinite(t)?this.unitsToRatio(t):this.unitsToRatio(this.sizes.pane1),this.setRatio(e,!0,!0)})},onHtmlinit:function(){this.MIN_WIDTH_LOGO=this.$node.find(".js-mail-Logo").width(),this._loader=new Jane.Loader(0),Daria.resize.init(),this.$node.transitionEnd(this._onTransitionEndDebounce)},onShow:function(){this.splitter&&this.splitter.initialized&&this.splitter.options.splitter.show(),this._onChangeLeftColumWidth(),$("body").on("keydown","button",this.boundOnButtonKeyPress),"themes"===Daria.urlParams.startWithPromo&&this._openThemesSelector(),this.getLayoutConstraints(),this.onChangedTimelineShowState()},onHide:function(){$("body").off("keydown","button",this.boundOnButtonKeyPress)},onPageAfterLoad:function(){"messages"===ns.page.current.page&&(Daria.is3pv()&&(Daria.resize.reinit3paneVerticalResizer(),ns.events.trigger("daria:vApp:changeRightColumSize")),Daria.is3ph()&&(Daria.resize.reinit3paneHorizontalResizer(),ns.events.trigger("daria:vApp:changeAppWidth"))),this._onChangeLeftColumWidth()},onChangedTimelineHeight:function(){var e=this.getModel("timeline-state"),t=e.get(".height"),n=ns.Model.get("scroller-message").getScroller();n.scrollTop()+n.height()+t>(Daria.is2pane?this.$node.height():this.$node.find(".js-message-inner").height())&&(this._needScrollMessage=!0)},onChangedTimelineShowState:function(){var e=$(".js-page"),t=this.getModel("timeline-state");switch(e.removeClass("mail-Page_with_Timeline_collapsed mail-Page_with_Timeline"),t.get(".showState")){case t.SHOW_COLLAPSED:e.addClass("mail-Page_with_Timeline_collapsed");break;case t.SHOW_PROMO:case t.SHOW_TIMELINE:e.addClass("mail-Page_with_Timeline")}},_onTransitionEnd:function(){this._needScrollMessage&&(this._needScrollMessage=!1,this.onScrollOutTimeline())},onScrollOutTimeline:function(){var e=this.getModel("timeline-state").get(".height");if(e>0){var t=ns.Model.get("scroller-message").getScroller(),n=t.scrollTop();t.scrollTop(n+e)}},getLayoutConstraints:function(){var e=this.$node.find(".js-mail-layout")[0];this.getModel("app-state").set(".mailLayoutClientRect",e.getBoundingClientRect())},_leftColumnClassesAll:["mail-Layout-Aside_maximum","mail-Layout-Aside_middle","mail-Layout-Aside_minimum","mail-Layout-Aside_compact"].join(" "),_leftColumnWidthOptions:[{min:250,max:Number.MAX_VALUE,nameOfClass:"mail-Layout-Aside_maximum",sizeKind:"maximum"},{min:180,max:250,nameOfClass:"mail-Layout-Aside_middle",sizeKind:"middle"},{min:100,max:180,nameOfClass:"mail-Layout-Aside_minimum",sizeKind:"minimum"},{min:0,max:100,nameOfClass:"mail-Layout-Aside_minimum mail-Layout-Aside_compact",sizeKind:"compact"}],onChangedLizaMinifiedHeader:function(){this.resizeHeaderLeftColumn()},_onChangeLeftColumWidth:function(){var e=this.$node.find(".js-layout-left");if(!Daria.isPageWithResizableLeftColumn())return e.removeClass(this._leftColumnClassesAll),void(this._prevAsideSizeKind=null);var t=e.width(),n=_.find(this._leftColumnWidthOptions,function(e){return t>=e.min&&t<e.max});n.sizeKind!==this._prevAsideSizeKind&&(e.removeClass(this._leftColumnClassesAll),e.addClass(n.nameOfClass),Daria.resize.isWithCompactLeftColumn="compact"===n.sizeKind,"compact"===this._prevAsideSizeKind?Jane.c("Левая колонка",Daria.is2pane()?"2pane":"3pane","Выбран","Полный режим"):void 0!==this._prevAsideSizeKind&&"compact"===n.sizeKind&&Jane.c("Левая колонка",Daria.is2pane()?"2pane":"3pane","Выбран","Компактный режим")),$(window).trigger("resize.daria-sticky"),ns.events.trigger("shortcuts.update-labels-list"),this.getModel("app-state").setIfChanged(".asideSizeKind",n.sizeKind),this.resizeHeaderLeftColumn({size:{width:t}}),this._prevAsideSizeKind=n.sizeKind},_onToggleLeftColumWidth:function(){var e,t=ns.Model.get("settings"),n=this.$node.find(".js-layout-left"),i=n.width();Daria.resize.isWithCompactLeftColumn?(Jane.c("Левая колонка",Daria.is2pane()?"2pane":"3pane","Клик","Развернуть"),t.setSettings({"size-aside-minified":i}),e=Math.max(this.MIN_WIDTH_HEADER_LEFT,parseInt(t.getSetting("size-aside-expanded"),10))||this.MIN_WIDTH_HEADER_LEFT):(Jane.c("Левая колонка",Daria.is2pane()?"2pane":"3pane","Клик","Свернуть"),t.setSettings({"size-aside-expanded":i}),e=Math.min(79,parseInt(t.getSetting("size-aside-minified"),10))||60),n.width(e),Daria.resize.saveSizeOnSettings({settingName:"size-layout-left",type:"h"},n),Daria.is3pv()||ns.events.trigger("daria:vApp:changeAppWidth"),ns.events.trigger("daria:vApp:changeLeftColumWidth"),ns.events.trigger("daria:vApp:changeRightColumSize"),this.resizeHeaderLeftColumn({size:{width:e}})},_onDisableLeftColumnResize:function(){if(!Daria.isPageWithResizableLeftColumn()){var e=this.$node.find(".js-layout-left");e.addClass("with-disabled-resize"),this.resizeHeaderLeftColumn({size:{width:e.width()}})}},_onEnableLeftColumnResize:function(){if(Daria.isPageWithResizableLeftColumn()){var e=this.$node.find(".js-layout-left");e.hasClass("with-disabled-resize")&&(e.removeClass("with-disabled-resize"),ns.events.trigger("daria:vApp:changeAppWidth"),ns.events.trigger("daria:vApp:changeLeftColumWidth"))}},resizeHeaderLeftColumn:function(e){var t=void 0,n=ns.Model.get("settings");if(t=e?e.size.width:this.WIDTH_LAYOUT_LEFT?this.WIDTH_LAYOUT_LEFT:parseInt(n.getSetting("size-layout-left"),10)||this.MIN_WIDTH_HEADER_LEFT,this.WIDTH_LAYOUT_LEFT=t,n.isCompactHeaderMode()||(t=Math.max(t,this.MIN_WIDTH_LOGO),t-=Math.max(0,this.MIN_LOGO_GAP-this.getModel("app-state").get(".mailLayoutClientRect.left"))),Daria.isComposeButtonMoved()){var i=this.$node.find(".js-header-left-column").outerWidth(),r=Math.max(t-i,0);this.$node.find(".js-exp-header-left-column").css("max-width",r+"px")}this.$node.find(".js-header-left-column").css("min-width",t+"px")},_onThemesSelectorClick:function(){this._openThemesSelector()},_openThemesSelector:function(){ns.Model.get("themes-selector").open(),ns.page.go()},_onPaneScroll:function(e){var t=$(e.target),n=t.find(".ui-resizable-s");n.length&&n.css({top:t.scrollTop()+t.height()-n.height()})},onWindowResize:function(){this.getLayoutConstraints()},onChangeAppWidth:function(){this.getLayoutConstraints()},onButtonKeyPress:function(e){var t=$(e.currentTarget);if(e.keyCode===Jane.Common.keyCode.ENTER){var n=jQuery.Event("click");return t.trigger(n),!0}},closeMessageOnExternalClick:function(e){if(Daria.is2pane()){if(e.target===e.currentTarget){Daria.isMessageOpenedInList()&&(Jane.c("Закрытие писем кликом в сторону"),ns.page.go(Daria.Page.generateUrl.closeMessage()))}}},toggleSkinPreviewMode:function(){var e=this.getModel("skin-saver-state");$(".js-page").toggleClass("mail-Page_skin_preview",e.isPreviewMode())},_onNewYearButtonClick:function(){Jane.c("Залогиновая шапка. Правая часть",'Кнопка "Новогоднее"',"Клик")},canShowNewYearButton:function(){var e=Date.now(),t=-1!==["ru","uk","be","kk"].indexOf(Daria.locale),n="yandex.com"===Daria.Config["yandex-domain"];return e>=14821812e5&&e<=1483909199e3&&t&&!n},getNewYearPromoLink:function(){return Daria.Config["promos-path"]["newyear-2017"]},_onMailResizerInitialized:function(e,t){"h"===t.options.direction&&(this._resizerCommon._vMailFixBeforeCssUpdate=function(){t&&t.initialized&&(t.updateSizes(),this._vMailPane2Width=t.sizes.pane2)},this._resizerCommon._vMailFixAfterCssUpdate=function(){if(t&&t.initialized){t.updateSizes();var e=t.totalSize-this._vMailPane2Width,n=t.unitsToRatio(e);t.setRatio(n)}})},_onMessageSending:function(e,t){t=t||{},t.body&&Daria.Statusline.show(t)},_onMessageSent:function(e,t){t=t||{},t.body&&Daria.Statusline.show(t),Daria.setCookie("msgsent","1",{duration:Daria.timify({minutes:5})})},_onMessageSentError:function(){Daria.Statusline.hide()},onShowUnsubscribePopup:function(){$(".js-page").addClass("with-UnsubscribePopup")},onHideUnsubscribePopup:function(){$(".js-page").removeClass("with-UnsubscribePopup")}}},"new-theme-render-view-mixin",ns.View)},function(e,t){ns.View.define("journal-log-mixin",{methods:{getUserBehaviorId:function(){return this._readingId||(this._readingId=Daria.Config.yandexuid+(this.params.tid||"")+Math.random().toString(16).slice(2)),this._readingId},getUserBehaviorParams:function(){var e=this.params,t={target:e.tid?"thread":"message",isSearch:Daria.Page.isParamsForSearch(e),readingId:this.getUserBehaviorId()};return e.ids&&(t.mid=e.ids),e.tid&&(t.tid=e.tid),t},writeToUserJournal:function(e){Daria.monitoring.journal(e,this.getUserBehaviorParams())},writeLogForWidgets:function(e,t){Daria.monitoring.journal(e,Object.assign({target:"message"},t))}}})},function(e,t){ns.View.define("messages-search-logger-mixin",{methods:{logClickMessageFromSearch:function(e){var t=ns.page.current.params,n=ns.Model.get("messages",t),i=n.params,r=this.getModel("message")||ns.Model.get("message",this.params),o=r.get(".mid"),s=n.models.indexOf(r);s=s>-1?s+1:-1,Daria.React.logSearchMessageClick(e,r.get(".mid"),s,n.isSearchTopResult(o),i)},logSearchSuggest:function(e,t){var n=e.suggestUsed?Number(ns.Model.get("focus").findIndex(this))+1:-1;Daria.React.logSearchSuggest(_.extend({},e,{itemPos:n}),t)}}})},function(e,t){ns.View.define("preview-eml-mixin",{methods:{_getParamsFromNode:function(e){var t=Daria.parseQuery($(e).data("params")),n=t.mid||this.params.ids,i=t.hid,r=t.subj;return r&&"No subject"!==r||(r=i18n("%Без_темы")),{ids:n,hid:i,subj:r}},_getPopupWidth:function(){var e=Daria.is3pane()?$(".js-layout-second-pane").width():$(".js-layout-first-pane").width();return e||(e=this.$node.width()),e},previewEml:function(e){e.preventDefault();var t=this._getParamsFromNode(e.currentTarget);if(this.vPopup&&(this.popupIsLoading||this.vPopup.isValid()))return this.vPopup.close(),this.vPopup.destroy(),void(this.vPopup=null);var n=$(window).height(),i=this._getPopupWidth();this.vPopup=ns.View.create("attached-message-popup",t),this.vPopup.appendToNode=this.node,this.popupIsLoading=!0,ns.request(["message","message-body"],{ids:t.ids,hid:t.hid}).then(function(){this.vPopup.open({width:i,maxHeight:n,where:window}),this.popupIsLoading=!1},this),this.countAttachmentPreview()}}})},function(e,t){!function(){function e(e){return"m"+e.replace(/(^[a-z])|(?:-([a-z]))/gi,function(e,t,n){return(n||t).toUpperCase()})}var t=[201,203],n=[202,204];ns.View.define("promo-mobile-app-mixin",{methods:{initPromoMobileAppMixin:function(){this._checkModels();var e=this.nbPhoneNumber=nb.$block(".js-phone-number",this.node);this.nbGetAppLinkButton=nb.$block(".js-get-mobile-app-link",this.node);var t=this.getState();e.$control.trigger("input"),e.on("input",this.onPhoneNumberInput.bind(this)),e.$control.on("blur",function(){t.isStrictEnterPhoneState()&&t.setDefaultState()}),this._loadState()},_checkModels:function(){var t=this;["promo-mobile-app-state","userphones"].forEach(function(n){ns.assert(t.getModel(n),"Daria.vPromoMobileAppMixin","требует наличия модели "+e(n)+" в зависимостях")})},onPhoneNumberInput:function(){this.getState().setEnterPhoneState();var e=this.nbPhoneNumber.getValue(),t=this.applyPhoneNumberFormat(e);e.length===t.length&&this.checkPhoneNumberFormat(e)||this.nbPhoneNumber.setValue(t)},isMobileAppInstalled:function(){return t.some(Daria.hasSid)&&n.some(Daria.hasSid)},applyPhoneNumberFormat:function(e){return e},checkPhoneNumberFormat:function(){return!0},_loadState:function(){throw new Error("Метод #_loadState не определён")},sendMobileAppLink:function(){throw new Error("Метод #_sendMobileAppLink не определён")},getPhoneHint:function(){var e=this.getModel("userphones"),t=e.getActiveMaskedNumber();return t&&(t=t.replace(/^\+/,"")),t},getPhoneParams:function(){var e=this.getModel("userphones").getActivePhone(),t=null;return e&&(t=e.number?{phone_full:e.number}:{phone_id:e.id}),t},cleanPhoneNumber:function(e){return e.replace(/\D/g,"")},_getPhoneNumber:function(){var e=this.nbPhoneNumber.getValue();return this.cleanPhoneNumber(e)},getState:function(){return this.getModel("promo-mobile-app-state")},onStateChanged:function(){this.keepValid(),this._loadState()}}})}()},function(e,t){ns.View.define("save-to-disk-mixin",{events:{"click .js-show-save-popup":"showSavePopup"},yateModule:"mail",methods:{_deferred:null,showSavePopup:function(e){ns.assert(this.getCountLocationName,"Daria.vSaveToDiskMixin","method getCountLocationName should be declared");var t=e.currentTarget,n=$(t),i=n.closest(".js-mail-file");e.preventDefault(),this._deferred||(this._deferred=ns.View.create("disk-widget-save-popup").open({mid:t.getAttribute("data-mid"),hid:t.getAttribute("data-hid"),diskDownloadUrl:t.getAttribute("data-disk-download-url"),countLocationName:this.getCountLocationName(),popup:{where:t,withTail:!1}}),n.toggleClass("is-disabled",!0),i.toggleClass("is-active",!0),this._deferred.promise().then(function(){n.removeClass("is-disabled"),i.removeClass("is-active"),this._deferred=null},this),this.countSaveToDisk())}}})},function(e,t){ns.View.define("count-attachments-ops-mixin",{methods:{_locationNames:{"attachments-widget":"в списке писем","attachments-widget-body":"в письме","attachments-widget-popup":"в попапе в списке писем","thread-sidebar-item-attachments-item":"в правой колонке","compose-attach-area":"в композе"},getCountLocationName:function(){var e=this._locationNames[this.id];return ns.assert(e,"Daria.vAttachmentsWidget","no name specified for %s to count in metrika",this.id),e},countAttachmentsShow:function(){Jane.groupedCount(["Вложения","показ вложений",this.getCountLocationName(),"+"])},countAttachmentPreview:function(){Jane.c(["Вложения",'клик "просмотреть"',this.getCountLocationName()])},countDownloadAttachment:function(){Jane.c(["Вложения",'клик "скачать одно"',this.getCountLocationName()])},countDownloadAllAttachments:function(){Jane.c(["Вложения",'клик "скачать все"',this.getCountLocationName()])},countAttachmentsNumberClick:function(){Jane.c(["Вложения","клик в число вложений",this.getCountLocationName()])},countSaveToDisk:function(){Jane.c(["Вложения",'клик "сохранить на диск"',this.getCountLocationName()])}}})},function(e,t){ns.View.defineNg("attachments-widget",{models:{"message-body":!0},events:{"ns-view-show":"onShow","click .js-attachment-actions-item":"onAttachmentActionsItemClick","click .js-image-preview":"previewImage","click .js-download-attachment":"countDownloadAttachment","click .js-eml-preview":"previewEml","click .js-show-info":"showInfoPopup","click .js-download-all-attachments":"countDownloadAllAttachments","click .js-preview-attachment":"countAttachmentPreview","daria:vScrollerMessages:scroll":"_updateItemsVisibility","daria:vScrollerMessage:scroll":"_updateItemsVisibility"},params:function(e){var t=ns.Model.get("message",{ids:e.ids}),n={ids:t.get(".last_mid")||t.get(".mid")};return e.hid&&(n.hid=e.hid),n},yateModule:"mail",methods:{onShow:function(){this._updateItemsVisibility(),this.hasVisibleAttachments()&&this.countAttachmentsShow()},hasVisibleAttachments:function(){return this.$node.find(".js-mail-file").length>0},_updateItemsVisibility:function(e){var t=Daria.is3pane()?"scroller-message":"scroller-messages";if("daria:vScrollerMessages:scroll"!==e||!Daria.is3pane()){var n=this.$node.find(".js-mail-file-icon").toArray(),i=ns.Model.get(t),r=i.getHeight()+i.getScrollTop();n.forEach(function(e){var t=$(e),n="none"!==t.css("background-image"),o=i.getNodeTop(e)<r;!n&&o&&t.attr("style",t.attr("_style"))})}},previewImage:function(e){var t=Daria.parseQuery($(e.currentTarget).data("params")),n=t.mid||this.params.ids,i=t.hid,r=this.params.hid;Daria.ImageViewer.open("",n,i,r),e.preventDefault()},onAttachmentActionsItemClick:function(){this.logClickMessageFromSearch("attach")},showInfoPopup:function(e){"attachments-widget"===this.id&&(e.preventDefault(),ns.View.create("attachments-widget-popup",this.params).showAt(e.currentTarget),this.countAttachmentsNumberClick())}}},"count-attachments-ops-mixin","preview-eml-mixin","messages-search-logger-mixin","save-to-disk-mixin",ns.View)},function(e,t){ns.View.defineNg("attachments-widget-body",{models:{"message-body":!0},events:{"ns-view-htmlinit":"onHtmlInit","click .js-image-preview":"previewImage","click .js-eml-preview":"previewEml","click .js-show-info":"onShowInfoClick","daria:vApp:changeAppWidth@show":"updateBlockState","daria:vApp:changeRightColumSize@show":"updateBlockState","daria:vAttachmentsWidgetBody:downloadAttachments@show":"downloadAttachments"},methods:{CLASS_DISABLED_INFO_BUTTON:"disabled",CLASS_BLOCK_WITH_MASK:"mail-MessageSnippet-Item_attachments_closed",CLASS_ACTION_ALIGN_RIGHT:"mail-MessageSnippet-Item_actionRight",MIN_INDENT_ACTION_BLOCK:32,onHtmlInit:function(){this.$infoButton=this.$node.find(".js-show-info"),this.$filesBlock=this.$node.find(".js-attachments-files"),this.$actionBlock=this.$node.find(".js-attachments-action"),this.heightFilesBlockOnFirstLoad=this.$filesBlock.height(),this.updateBlockState(),this._openedManually&&this.showAllAttach(!0)},onShowInfoClick:function(){this.showAllAttach()},logClickMessageFromSearch:function(){},updateBlockState:function(){var e=this.$filesBlock[0]&&this.$filesBlock[0].scrollHeight;this.$filesBlock.height()===e?this.markOpened():this.markClosed(),e>this.heightFilesBlockOnFirstLoad?this.enableInfoButton():this.disableInfoButton(),this.updateAlignActionButton()},updateAlignActionButton:function(){var e=this.$node.width()-this.$filesBlock.width()-this.$actionBlock.width()<this.MIN_INDENT_ACTION_BLOCK;this.$node.toggleClass(this.CLASS_ACTION_ALIGN_RIGHT,e)},showAllAttach:function(e){if(!this.isDisabledInfoButton()){if(e)this.$filesBlock.css("max-height","none"),this.$filesBlock[0]&&this.$filesBlock.css("max-height",this.$filesBlock[0].scrollHeight),this.markOpened(),this._openedManually=!0;else{var t=this.$filesBlock[0]&&this.$filesBlock[0].scrollHeight,n=this.$filesBlock.height();t>n?(this.$filesBlock.css("max-height",t),this.markOpened(),this._openedManually=!0):n>this.heightFilesBlockOnFirstLoad&&(this.$filesBlock.css("max-height","").afterTransition(this.markClosed.bind(this)),this._openedManually=!1)}this.countAttachmentsNumberClick()}},markClosed:function(){this.$node.addClass(this.CLASS_BLOCK_WITH_MASK)},markOpened:function(){this.$node.removeClass(this.CLASS_BLOCK_WITH_MASK)},isDisabledInfoButton:function(){return this.$infoButton.hasClass(this.CLASS_DISABLED_INFO_BUTTON)},disableInfoButton:function(){this.$infoButton.addClass("is-hidden "+this.CLASS_DISABLED_INFO_BUTTON)},enableInfoButton:function(){this.$infoButton.removeClass("is-hidden "+this.CLASS_DISABLED_INFO_BUTTON)},downloadAttachments:function(){var e=Daria.url.archive(this.getModel("message-body").getData(),this.params.ids);e&&(window.location.href=e)}},yateModule:"mail"},"attachments-widget")},function(e,t){ns.View.edefine("attachments-widget-popup",{models:{"message-body":!0,message:!0,dimensions:{"ns-model-changed":!1,resize:"_onResize"}},events:{"click .js-show-info":"onClickInfo"},yateModule:"mail",methods:{showAt:function(e){this.update(this.params).then(this._initNbPopup.bind(this,e))},onClickInfo:function(e){e.stopPropagation(),nb.block(this.node).close()},getScrollContent:function(e){return $(e.target).parents("._nb-popup")[0]},_initNbPopup:function(e){var t=this;$(e).closest(":focusable").focus();var n=nb.block(this.node);n.on("nb-closed",function(){t.destroy(),this.destroy(),t._nbPopup=null}),n.open({where:e,how:{my:"right+20 top-16",at:"right top",collision:"fit fit"},animation:!1,autoclose:!0}),this._nbPopup=n,this._onResize()},_onResize:function(){this._nbPopup&&this.$node.contextDialog("option",{maxHeight:this._$window.height()})}}},"attachments-widget","prevent-scroll-propagation-mixin",ns.View)},function(e,t){ns.View.define("footer",{models:["footer-data","languages"],events:{"ns-view-show":"onShow","daria:vScrollerMessages:scroll":"_checkFooterVisibility"},yateModule:"mail",methods:{_isVisible:!1,onShow:function(){this._checkFooterVisibility()},_checkFooterVisibility:function(){if(Daria.is2pane()){var e=ns.Model.get("scroller-messages"),t=e.getHeight()+e.getScrollTop(),n=e.getNodeTop(this.node)<t;!this._isVisible&&n&&Jane.c("Футер в 2-пейн","показ футера"),this._isVisible=n}}}})},function(e,t){ns.View.define("footer-journal-link",{models:{"system-status":!0},yateModule:"mail"})},function(e,t){ns.View.define("services-list-mixin",{methods:{METRIKA_TABS_NAMES:{search:"Поиск",search_more:"Поиск",contacts:"Контакты",disk:"Диск",money:"Деньги",images:"Картинки",news:"Новости",maps:"Карты",metrika:"Метрика",pogoda:"Погода",tv:"Телепрограмма",music:"Музыка",afisha:"Афиша",browser:"Браузер",market:"Маркет",direct:"Директ",fotki:"Фотки",yamb:"Ямб",all_services:"Все сервисы",calendar:"Календарь",translate:"Переводчик",inbox:"Письма",portal:"Коннект"},isShowMetrikaSend:!1,_getShowMetrikaData:function(){var e=ns.Model.get("index-data"),t=e.getAllTabsIds(),n=t.head,i=t.more,r=this.getHiddenTabsMetrikaId();return n=n.filter(function(e){return-1===r.indexOf(e)}),i=i.concat(r),{head:n,more:i}},getHiddenTabsMetrikaId:function(){return this.getHiddenTabs().map(function(e){return e.node.getAttribute("data-metrika-id")}).filter(function(e){return e})},_tabsMetrikaIdToObj:function(e,t){if(!Array.isArray(e))return[];var n=this;return e.map(function(e){var i=n._getMetrikaTabName(e);if(!i)return!1;if(t){var r={};return r[i]=t,r}return i}).filter(function(e){return e})},registerShowTabs:function(e){this._registerShowTabs(e)},_registerShowTabs:function(e){if(ns.assert(e,"Daria.vServicesListMixin",'parameter "mode" is obligatory'),!Daria.IS_CORP){var t=-1!==["navigation-visible-tabs","navigation-hidden-tabs"].indexOf(e),n=ns.Model.get("settings").isSet("liza_minified_header");if(!(t&&n||"navigation-visible-tabs"===e&&this.isShowMetrikaSend)){var i=[];if("services"===e){var r=ns.Model.get("index-data").getAllTabsIds();i=[].concat(r.head,r.more)}else i=this._getShowMetrikaData()["navigation-visible-tabs"===e?"head":"more"];if(i.length){var o={},s={"Залогиновая шапка.Левая часть":{"Портальная навигация/Сервисы":o}},a=this._tabsMetrikaIdToObj(i,"Показ");-1!==["services","navigation-hidden-tabs"].indexOf(e)?(o[Daria.Config["yandex-domain"]]={},o[Daria.Config["yandex-domain"]]["services"===e?"Сервисы":"Ещё"]=a):o[Daria.Config["yandex-domain"]]=a,Jane.c(s),this.isShowMetrikaSend=!0}}}},registerTabClick:function(e,t){this._registerTabClick(e,t)},_registerTabClick:function(e,t){if(!Daria.IS_CORP){var n=["Залогиновая шапка.Левая часть","Портальная навигация/Сервисы",Daria.Config["yandex-domain"]],i=this._getMetrikaTabName(e);i&&("navigation-hidden-tabs"===t?n.push("Ещё"):"services"===t&&n.push("Сервисы"),Jane.c(n.concat([i,"Клик"])))}},_getMetrikaTabName:function(e){return!(!e||"string"!=typeof e)&&this.METRIKA_TABS_NAMES[e]}}})},function(e,t){ns.View.define("head-tabs",{events:{"ns-view-htmlinit":"onHtmlInit","click@show .js-more-services":"showDropdown","mousedown .js-services-tab":"onServicesTabClick","ns-page-before-load":"onPageBeforeLoad","head-tabs-recalculate":"recalculateTabs","daria:vApp:changeAppWidth":"recalculateTabs","resize window":"onResize"},models:{"index-data":"invalidate",settings:{"ns-model-changed":"keepValid","ns-model-changed.liza_minified_header":"onLizaMinifiedHeaderChanged"}},yateModule:"mail",ctor:function(){this.nbPopup=null,this.onPopupClosed=this.onPopupClosed.bind(this),this.onResize=_.throttle(this.onResize.bind(this),50),this.onHtmlInitDebounce=_.debounce(this._onHtmlInitDebounce.bind(this),0)},methods:{onHtmlInit:function(){this.onHtmlInitDebounce()},_onHtmlInitDebounce:function(){this.recalculateTabs(),this.registerShowTabs("navigation-visible-tabs")},onLizaMinifiedHeaderChanged:function(){this.registerShowTabs("navigation-visible-tabs")},recalculateTabs:function(){this.calculateTabs(),this.onResize()},calculateTabs:function(){var e=_.toArray(this.$node.children(":not(.js-phantom-tab)"));$(this.node).addClass("js-force-visible-tabs");var t=0;this.tab=e.map(function(e){return t+=e.clientWidth+1,{node:e,minWidth:t}}),$(this.node).removeClass("js-force-visible-tabs"),this.getHiddenTabsId().length>5&&Jane.ErrorLog.send({errorType:"header-tabs.infinity"})},onPageBeforeLoad:function(){this.popupClose()},onResize:function(){if(this.tab&&!Daria.isComposeButtonMoved()){var e=this.$node.width();this.tab.forEach(function(t){t.node&&$(t.node).toggleClass("is-hidden",t.minWidth>=e)})}},getHiddenTabs:function(){return _.isArray(this.tab)?this.tab.filter(function(e){return e.node&&e.node.classList.contains("is-hidden")}):[]},getHiddenTabsId:function(){return this.getHiddenTabs().map(function(e){return e.node.getAttribute("data-id")})},showDropdown:function(){if(!this.popupClose()){var e=this.getModel("index-data"),t=this.getHiddenTabsId(),n=e.get(".tabs.more"),i=e.get(".tabs.head").filter(function(e){return _(t).includes(e.id)}),r=[].concat(i,n);r=r.map(function(e){var t=_.omit(e,["id"]);return t.class="js-more-services-tab js-services-tab",e.id&&"string"==typeof e.id&&(t.attrs={"data-metrika-id":e.id}),t}),this.nbPopup=nb.block(ns.renderNode({tabs:r},"head-tabs-popup","mail")),this.nbPopup.on("nb-opened",this.onPopupOpened.bind(this)),this.nbPopup.on("nb-closed",this.onPopupClosed.bind(this)),this.nbPopup.open({where:this.$node.find(".js-more-services-target")}),this.registerShowTabs("navigation-hidden-tabs")}},onPopupOpened:function(){this.nbPopup.$node.on("mousedown",".js-services-tab",this.onServicesTabClick.bind(this))},onPopupClosed:function(){this.nbPopup&&(this.nbPopup.$node.off(),this.nbPopup.destroy(),this.nbPopup=null)},popupClose:function(){return!!this.nbPopup&&(this.nbPopup.close(),!0)},onServicesTabClick:function(e){if(e&&"mousedown"===e.type&&(0===e.button||1===e.button)){var t=e.currentTarget;this.registerTabClick(t.getAttribute("data-metrika-id"),t.classList.contains("js-more-services-tab")?"navigation-hidden-tabs":"navigation-visible-tabs")}}}},"services-list-mixin")},function(e,t){ns.View.edefine("head-settings-controls",{models:{settings:{"ns-model-changed":!1,"ns-model-changed.color_scheme":"onThemeChanged"}},yateModule:"mail",ctor:function(){this.mSettings=ns.Model.get("settings"),this.START_SHOW_NEW_ICON_TIME=new Date("2018-04-01").getTime()},events:{"click .js-header-settings":"onHeaderSettingsClick"},methods:{hasNewItems:function(){var e=parseInt(this.mSettings.get(".settingsOpenedTime"),10)||0;return Daria.allowUnsubscribeFiltersPopup()&&e<this.START_SHOW_NEW_ICON_TIME},onHeaderSettingsClick:function(){this.mSettings.setSettings({settingsOpenedTime:Date.now()}),this.$node.find(".js-header-settings").removeClass("mail-GhostButton_has_new_items")}}},"new-theme-render-view-mixin",ns.View)},function(e,t){ns.View.define("head-user",{events:{"ns-view-show":"onShow","ns-view-hide":"onHide",click:"toggleDropdown","daria:vApp:changeAppWidth@show":"onChangeAppWidth"},models:{"index-data":"keepValid","head-user-state":{"ns-model-changed":"keepValid","ns-model-changed.newLettersInMA":"onNewLettersInMA"}},yateModule:"mail",ctor:function(){var e=this;this._onChangeAppWidthThrottle=_.throttle(function(){return e._onChangeAppWidth()},100)},methods:{MINIFIED_TITLE_APP_SIZE:1060,MINIFIED_TITLE_CLASS:"mail-User_minified",onShow:function(){this.$mailLayoutElement=this.$node.closest(".js-mail-layout"),this.onChangeAppWidth(),this.onNewLettersInMA(),this.metriksForAddMultiUser(),_.delay(function(){ns.request(["user-dropdown-data"])},1e3)},onHide:function(){this._onChangeAppWidthThrottle&&this._onChangeAppWidthThrottle.cancel&&this._onChangeAppWidthThrottle.cancel(),this.$mailLayoutElement=null},onChangeAppWidth:function(){this._onChangeAppWidthThrottle()},_onChangeAppWidth:function(){this.$mailLayoutElement&&this.$node.toggleClass(this.MINIFIED_TITLE_CLASS,this.$mailLayoutElement.width()<=this.MINIFIED_TITLE_APP_SIZE)},toggleDropdown:function(){if(this.vPopup&&this.vPopup.isValid())return this.vPopup.close(),void(this.vPopup=null);var e=$(window).innerHeight()-120;this.vPopup=ns.View.create("user-dropdown"),this.vPopup.open({maxHeight:e,where:this.node,withoutTail:!0})},onNewLettersInMA:function(){var e=this.getModel("head-user-state").hasNewLettersInMA();this.$node.find(".js-user-picture").toggleClass("is-updated",e)},metriksForAddMultiUser:function(){var e=["Залогиновая шапка. Правая часть","Меню за логином"],t=!1;Daria.urlParams.addMultiUserFromDropdownLink?(t=!0,e.push("Пользователь добавлен по ссылке Добавить пользователя под Выходом")):Daria.urlParams.addMultiUserFromDropdownButton?(t=!0,e.push('Пользователь добавлен по ссылке "Добавить пользователя"')):Daria.urlParams.addMultiUserFromDropdownPromo&&(t=!0,e.push("Пользователь добавлен по кнопке «Добавить аккаунт» в промо")),t&&(Jane.c(e),ns.Model.get("settings").setSettingOn("user_dropdown_promo"))}}})},function(e,t){ns.View.define("loader",{events:{"ns-page-before-load":"start","ns-page-after-load":"stop","ns-page-error-load":"stop","fake-loader":"fake"},ctor:function(){this.start=_.debounce(this.start.bind(this),200)},yateModule:"mail",methods:{start:function(){this.$node.addClass("is-active"),this.locked=!1},stop:function(){this.locked||(this.start.cancel(),this.$node.removeClass("is-active"))},fake:function(){this.locked=!0,this.$node.addClass("is-active"),setTimeout(this.unlock.bind(this),1500)},unlock:function(){this.locked=!1,this.stop()}}})},function(e,t){ns.View.define("logo",{models:{"index-data":!1,"header-logo-data":!1},events:{"ns-view-htmlinit":"onHtmlInit","daria:vApp:changeRightColumSize":"onResizeRightColumn"},ctor:function(){this.onResizeRightColumn=_.once(this.onResizeRightColumn),this.onWheel=this.onWheel.bind(this)},yateModule:"mail",methods:{onHtmlInit:function(){var e=this,t=this.$node.closest(".js-header-left-column").find("#logo-dropdown");if(t&&t.length){this.popup=nb.block(t[0]);var n=$(".js-mail-logo-yandex");this.popup.on("nb-opened",function(){n.addClass("is-active"),$(window).on("wheel",e.onWheel),Jane.c("Залогиновая шапка.Левая часть","Меню-бургер сервисов","Открытие поп-апа бургера")}),this.popup.on("nb-closed",function(){n.removeClass("is-active"),$(window).off("wheel",e.onWheel)}),$(t[0]).on("mouseenter",function(){$(window).on("wheel",e.onWheel)}),$(t[0]).on("mouseleave",function(){$(window).off("wheel",e.onWheel)})}},onResizeRightColumn:function(){this.popup&&this.popup.close()},getScrollContent:function(e){return e&&e.target?$(e.target).parents("._nb-popup")[0]:null}}},"prevent-scroll-propagation-mixin")},function(e,t){ns.View.define("search-react",{models:{dimensions:!1,folders:!1,labels:!1,settings:{"ns-model-changed":!1,"ns-model-changed.color_scheme":"invalidate"}},events:{"ns-view-htmlinit":"onHtmlInit","ns-view-htmldestroy":"onHtmlDestroy"},yateModule:"mail",methods:{onHtmlInit:function(){Daria.React.setInitialState(),Daria.React.renderSearchBox(this.node)},onHtmlDestroy:function(){Daria.React.unmountReactBox(this.node)}}})},function(e,t){ns.View.define("timeline-wrap",{events:{"ns-view-show":"onShow","ns-page-before-load@show":"onPageBeforeLoad","ns-page-after-load@show":"onPageAfterLoad"},models:{"timeline-state":!1,settings:{"ns-model-changed":!1,"ns-model-changed.timeline_enable":"onChangedTimelineEnableDebounce","ns-model-changed.timeline-is-open":"updateTimeline"}},yateModule:"mail",ctor:function(){this.onChangedTimelineEnableDebounce=_.debounce(this.onChangedTimelineEnable.bind(this),100)},methods:{patchLayout:function(){var e=this.getModel("timeline-state"),t="layout-timeline-empty";return e.checkShowCollapsed()?(e.setIfChanged(".showState",e.SHOW_COLLAPSED),t="layout-timeline-collapsed"):e.checkShowPromo()?(e.setIfChanged(".showState",e.SHOW_PROMO),t="layout-timeline-promo"):e.checkShow()?(e.setIfChanged(".showState",e.SHOW_TIMELINE),t="layout-timeline"):e.setIfChanged(".showState",e.SHOW_EMPTY),t},onShow:function(){var e=this.getModel("timeline-state");this.prevCheckShow=_.constant(e.checkShow()||e.checkShowPromo())},onPageBeforeLoad:function(){var e=this.getModel("timeline-state");this.prevCheckShow=_.constant(e.checkShow()||e.checkShowPromo())},onPageAfterLoad:function(){var e=this.getModel("timeline-state"),t=e.checkShow()||e.checkShowPromo();this.prevCheckShow()!==t&&this.updateTimeline()},updateTimeline:function(){this.update(null,{execFlag:ns.U.EXEC.PARALLEL})},onChangedTimelineEnable:function(){this.getModel("timeline-state").subscribeCalendar().fail(this.onErrorSubscribeCalendar,this).always(this.updateTimeline,this)},onErrorSubscribeCalendar:function(){Daria.Statusline.show({name:"timeline_loading_failed",body:i18n("%Timeline_loading_error_message",Daria.Config["timeline-yandex-host"]),params:{url:Daria.Config["timeline-yandex-host"]}})}}})},function(e,t){ns.View.define("timeline-common",{yateModule:"mail",methods:{_commonInit:function(){this.getModel("timeline-state").setIfChanged(".height",this.$node.height())},_commonDestroy:function(){this.getModel("timeline-state").setIfChanged(".height",0)}}})},function(e,t){ns.View.edefine("timeline-ng",{models:{"app-state":!1,"timeline-state":{"ns-model-changed":!1,"daria:mTimelineState:update":"onTimelineStateUpdate"}},events:{"ns-view-show":"onShow","ns-view-hide":"onHide"},yateModule:"mail",ctor:function(){this.super_.constructor.call(this),this.showMetrikaOnce=_.once(this.showMetrika.bind(this))},methods:{onShow:function(){this._commonInit(),this.getModel("timeline-state").currentDateTick(),this.showMetrikaOnce()},onHide:function(){this._commonDestroy(),this.getModel("timeline-state").currentDateTickStop()},onTimelineStateUpdate:function(){this.isVisible()&&ns.page.lazyRefresh()},showMetrika:function(){this.getModel("timeline-state").metrika("Показ","полоска")}}},"timeline-common")},function(e,t){ns.View.edefine("timeline-promo",{models:{"app-state":!1,"timeline-state":!1},events:{"ns-view-show":"onShow","ns-view-hide":"onHide","click@show .js-timeline-subscribe":"onClickSubscribe","click@show .js-timeline-promo-close":"onClickClose"},yateModule:"mail",ctor:function(){this.super_.constructor.call(this)},methods:{onShow:function(){this.getModel("timeline-state").metrika("Показ","промка"),this._commonInit()},onHide:function(){this._commonDestroy()},onClickSubscribe:function(){this.getModel("timeline-state").metrika("Действия","включили через промку"),ns.Model.get("settings").setSettings({timeline_enable:!0})},onClickClose:function(){this.getModel("timeline-state").metrika("Действия","выключили через промку"),ns.Model.get("settings").setSettings({timeline_enable:!1})}}},"timeline-common")},function(e,t){!function(){var e=ns.View.infoLite("promo-mobile-app-mixin");ns.View.edefine("promo-mobile-app-common",{models:{"promo-mobile-app-state":"onStateChanged",userphones:!1,"user-apps-activity":!1},events:{"ns-view-show":"onShow","ns-view-htmlinit":"onHtmlInit","click .js-get-mobile-app-link":"sendMobileAppLink","click .js-promo-mobile-app-close-button":"closeView"},yateModule:"mail",params:function(){return{promo:"mobile-app-common"}},methods:{promoMobileAppName:"mail-promo-inbox-popup-liza",PICTURE_PREFIX:"MailAppLink2",PICTURE_PREFIX_RU:"MailAppLink3",SHOW_CLOSE_BUTTON:!0,SHOW_FORM_FIELDS:!0,SHOW_IN_POPUP:!1,SEND_BUTTON_TEXT:i18n("%Promo_МобПриложение_ПолучитьСсылку2"),SENDING_BUTTON_TEXT:i18n("%Promo_МобПриложение_Отправка2"),CUSTOM_CLASSES:"",metrikaData:null,SIZE_INTERVALS:[{className:"mail-PromoMobileApp_big",from:945,to:Number.MAX_VALUE},{className:"mail-PromoMobileApp_medium-big",from:890,to:945},{className:"mail-PromoMobileApp_medium",from:853,to:890},{className:"mail-PromoMobileApp_medium-small",from:796,to:853},{className:"mail-PromoMobileApp_small",from:740,to:796},{className:"mail-PromoMobileApp_extra-small",from:0,to:740}],PROMO_TYPES:{NEW_PROMO:"new-promo",FORGOT_PROMO:"forgot-promo",UPDATE_PROMO:"update-promo"},onHtmlInit:function(){this.initPromoMobileAppMixin(),this.initView()},initView:function(){var e=this.getPromoType();this.initAppName(e),this.initMetrikaData(e)},initMetrikaData:function(){},hasMobileActivityLastMonth:function(){var e=ns.Model.get("user-apps-activity"),t=e.getActivityInterval("last-mobile-activity");return!1!==t&&t<Jane.Date.MONTH},canShowByMobileActivity:function(){var e=ns.Model.get("user-apps-activity"),t=e.isEmpty(),n=this.hasMobileActivityLastMonth();return!t&&!n},_initMetrikaData:function(e,t){if(!Array.isArray(t)||!t.length)throw new Error("Daria.vPromoMobileAppCommon#_initMetrikaData - initPrefix должен быть не пустым массивом");var n={show:"Показы",enterPhone:"ввод телефона",sendClick:"клик на получить",sendSuccess:"сообщение отправлено",closeClick:"клик по закрыть"},i=[].concat(t);e===this.PROMO_TYPES.UPDATE_PROMO?i.push("Обнови (установлено, но пользовался 1-6 мес назад)"):(i.push("Установи"),e===this.PROMO_TYPES.FORGOT_PROMO?i.push("Установил, не пользовался 6+ мес"):i.push("Не ставил приложение + ставил, не авторизовался")),this.metrikaData={prefix:i,actions:n}},initAppName:function(){throw new Error("Daria.vPromoMobileAppCommon#initAppName должен быть определён")},onStateChanged:function(){e.methods.onStateChanged.apply(this,arguments),this.getState().isStrictEnterPhoneState()&&this.metrikaMarkAction("enterPhone")},applyPhoneNumberFormat:function(e){return this.cleanPhoneNumber(e)},metrikaMarkAction:function(e){if(!this.metrikaData||!this.metrikaData.prefix||!this.metrikaData.actions)throw new Error("Не правильно инициализированы данные для метрики");if(!1!==this.metrikaData.actions[e]&&void 0!==this.metrikaData.actions[e]){var t=[this.metrikaData.prefix,this.metrikaData.actions[e]].reduce(function(e,t){return _.isArray(t)?e.concat(t):(e.push(t),e)},[]);Jane.c.apply(Jane,t)}},onShow:function(){this.metrikaMarkAction("show"),this.onShowAction()},onShowAction:function(){},closeView:function(){this.metrikaMarkAction("closeClick"),this.closeViewAction()},closeViewAction:function(){},getPromoType:function(){var e=ns.Model.get("user-apps-activity"),t=e.getActivityInterval("last-mobile-activity");return!1===t?this.PROMO_TYPES.NEW_PROMO:t>6*Jane.Date.MONTH?this.PROMO_TYPES.FORGOT_PROMO:this.PROMO_TYPES.UPDATE_PROMO},_loadState:function(){var e=this.getState(),t=e.isEnterPhoneState(),n=e.isInvalidPhoneNumberState(),i=e.isSendingState(),r=e.isSendFailedState(),o=e.isSendSuccessState(),s=t&&e.canRetry(),a=n,u=r&&!e.canRetry(),l=!a&&r&&!u,c=a||l||u;this.$node.find(".js-buttons-send").toggleClass("is-hidden",!s),this.$node.find(".js-error-message-phone-number").toggleClass("is-hidden",!a),this.$node.find(".js-promo-mobile-app-info").toggleClass("is-hidden",c),this.$node.find(".js-buttons-sending").toggleClass("is-hidden",!i),this.$node.find(".js-error-message-send-failed").toggleClass("is-hidden",!l),this.$node.find(".js-error-message-try-failed").toggleClass("is-hidden",!u),this.$node.find(".js-content-wrapper").toggleClass("is-hidden",o),this.$node.find(".js-promo-mobile-app-desc").toggleClass("is-hidden",o);var d=this.$node.find(".js-send-success");d.toggleClass("is-hidden",!o),setTimeout(function(){d.toggleClass("is-invisible",!o)},100),(t||n)&&!this.nbPhoneNumber.getValue()&&this.SHOW_IN_POPUP&&_.defer(function(){this.nbPhoneNumber.focus()}.bind(this)),u&&this.onErrorCanNotRetry(),o&&(ns.Model.get("settings").setSettings({"promo-mobile_sms-send":!0,"promo-mobile_sms-send_date":Daria.now()}),this.metrikaMarkAction("sendSuccess"),this.onSendSuccess())},onSendSuccess:function(){},onErrorCanNotRetry:function(){},sendMobileAppLink:function(){this.metrikaMarkAction("sendClick");var e=this.getState();if(!e.canTrySendAppLink()||!e.canRetry())return void(e.isInvalidPhoneNumberState()&&this.nbPhoneNumber.focus());var t={app:this.promoMobileAppName},n=this._getPhoneNumber();if(n){if(!Jane.FormValidation.checkPhoneNumber(n))return e.setInvalidPhoneNumberState(),void this.nbPhoneNumber.focus();t.phone_full=n}else{var i=this.getPhoneParams();if(!i)return e.setInvalidPhoneNumberState(),void this.nbPhoneNumber.focus();_.assign(t,i)}e.startSending(),ns.forcedRequest(["get-link-app"],t).then(function(t){setTimeout(function(){var n=t[0].getData();if(n&&"ok"===n.result)return void e.onSuccess();e.onSendFailed()},1e3)}).fail(function(){setTimeout(function(){e.onSendFailed()},1e3)})},onResize:function(){if(!this.$resizeNode)throw new Error("Не определена this.$resizeNode");var e=this.getSizeClass(this.$resizeNode);this.$resizeNode.hasClass(e)||(this.$node.removeClass(this.getAllSizeClasses().join(" ")),this.$node.addClass(e))},getAllSizeClasses:function(){return this.SIZE_INTERVALS.map(function(e){return e.className})},getSizeClass:function(e){var t=Number(e.outerWidth()||0);if("number"!=typeof t)return"";var n="";return this.SIZE_INTERVALS.some(function(e){return e.from<t&&t<=e.to&&(n=e.className,!0)}),n},getPicturePrefixName:function(){return this.isRuPromo()?this.PICTURE_PREFIX_RU:this.PICTURE_PREFIX},canShowCloseButton:function(){return this.SHOW_CLOSE_BUTTON},inPopup:function(){return this.SHOW_IN_POPUP},canShowFormFields:function(){return this.SHOW_FORM_FIELDS},getPromoTitle:function(){return this.isRuPromo()?i18n("%Promo_MobileApp_Title3"):this.getPromoType()===this.PROMO_TYPES.UPDATE_PROMO?i18n("%Promo_MobileApp_Title2"):i18n("%Promo_MobileApp_Title1")},getPromoDescription:function(){return this.isRuPromo()?i18n("%Promo_MobileApp_Description3"):this.getPromoType()===this.PROMO_TYPES.UPDATE_PROMO?i18n("%Promo_MobileApp_Desccription2"):i18n("%Promo_MobileApp_Desccription1")},getPromoInfo:function(){return i18n("%Promo_MobileApp_Description")},getSendButtonText:function(){return this.SEND_BUTTON_TEXT},getSendingButtonText:function(){return this.SENDING_BUTTON_TEXT},getCustomClasses:function(){return this.CUSTOM_CLASSES},isRuPromo:function(){return"ru"===Daria.Config.locale}}},"promo-mobile-app-mixin",ns.View)}()},function(e,t){ns.View.define("timeline-collapsed",{yateModule:"mail",methods:{}})},function(e,t){ns.View.define("timeline-date",{models:{"timeline-state":{"ns-model-changed":!1,"ns-model-changed.currentDate":"onChangedCurrentDate"}},events:{"click@show":"onClick"},yateModule:"mail",methods:{onClick:function(){var e=this.getModel("timeline-state");e.metrika("Действия","клик на текущую дату"),e.shiftCurrentStartDate()},onChangedCurrentDate:function(){this.isVisible()&&this.$node.text(this.getLabel())},getLabel:function(){return Jane.Date.format("%Date_dm__dot",this.getModel("timeline-state").getCurrentDate())}}})},function(e,t){ns.View.define("timeline-back",{models:{"timeline-state":!1},events:{"click@show":"onClick"},yateModule:"mail",methods:{onClick:function(){this.getModel("timeline-state").shiftBackStartDate()}}})},function(e,t){ns.View.define("timeline-toggle",{models:{"timeline-state":!1,settings:{"ns-model-changed":!1,"ns-model-changed.timeline-is-open":"invalidate"}},events:{"click@show":"onClick"},yateModule:"mail",ctor:function(){this.onSuccessToggleSetting=this.onSuccessToggleSetting.bind(this)},methods:{onClick:function(){var e=this.getModel("timeline-state").checkSettingTimelineIsOpen();this.getModel("settings").setSettings({"timeline-is-open":!e},this.onSuccessToggleSetting)},onSuccessToggleSetting:function(){var e=this.getModel("timeline-state");this.getModel("settings").isSet("timeline-is-open")?e.metrika("Действия","развернули полоску"):e.metrika("Действия","свернули полоску")}}})},function(e,t){ns.View.define("timeline-forward",{models:{"timeline-state":!1},events:{"click@show":"onClick"},yateModule:"mail",methods:{onClick:function(){this.getModel("timeline-state").shiftForwardStartDate()}}})},function(e,t){ns.View.define("timeline-newevent",{models:{"timeline-state":!1},events:{"click@show":"onClick"},yateModule:"mail",methods:{onClick:function(){this.getModel("timeline-state").metrika("Действия","клик на создать событие")}}})},function(e,t){ns.ViewCollection.define("timeline-list",{models:{"timeline-list":{"ns-model-changed":"forceUpdate","ns-model-remove":"onRemoveTimelineList","ns-model-insert":"keepValid"},"timeline-state":{"ns-model-changed":!1,"ns-model-changed.startOffset":"onChangedStartOffset"}},events:{"ns-view-htmlinit":"onHtmlInit","ns-view-show":"onShow","ns-view-hide":"onHide","ns-view-touch":"onTouch","daria:vApp:changeLeftColumWidth@show":"onResizeDebounce"},split:{byModel:"timeline-list",intoLayouts:_.constant("layout-timeline-item")},yateModule:"mail",ctor:function(){this.offsetCorrection=this.offsetCorrection.bind(this),this.offsetCorrectionOnce=_.once(this.offsetCorrection),this.onResizeDebounce=_.debounce(this.onResize.bind(this),50),this.toLoadMoreDebounce=_.debounce(this.toLoadMore.bind(this),50),this.onChangedStartOffsetDebounce=_.debounce(this.onChangedStartOffset.bind(this),50)},methods:{onHtmlInit:function(){this.$content=this.$node.find(".js-content"),this.$scroller=this.$node.find(".js-scroller")},onShow:function(){this.updateDisplayedTimeInterval(),this.offsetCorrectionOnce()},onHide:function(){this.onResizeDebounce.cancel(),this.toLoadMoreDebounce.cancel(),this.onChangedStartOffsetDebounce.cancel()},onTouch:function(){this.offsetCorrectionOnce()},onResize:function(){this.updateDisplayedTimeInterval()},onRemoveTimelineList:function(e,t){this.keepValid();var n=this.getModel("timeline-state").get(".startDate");_.some(t,function(e){return e.checkDateGtRange(n)})&&(this.offsetCorrectionOnce=_.once(this.offsetCorrection))},onChangedStartOffset:function(e,t,n,i,r){this.scrollOffset(!0,null,r).then(this.toLoadMore,this)},scrollOffset:function(e,t,n){t=t||this.getModel("timeline-state").get(".startOffset");var i=this.$content,r=this.getContentOffset(t.get());return n&&(n=this.getContentOffset(n.get()),i.stop(!0,!0).css({textIndent:-n,transform:"translate(-"+n+"em, 0)"})),new vow.Promise(function(t,n){e?i.stop(!0,!0).animate({textIndent:-r},{step:function(e){$(this).css("transform","translate("+e+"em, 0)")},complete:t,fail:n}):i.promise().always(function(){i.css({textIndent:-r,transform:"translate(-"+r+"em, 0)"}),t()})}).catch(_.noop)},offsetCorrection:function(){this.scrollOffset().then(this.toLoadMore,this)},getContentOffset:function(e){var t=this.getModel("timeline-state"),n=this.$scroller.offset().left,i=parseFloat(this.$content.css("text-indent")||0);return Math.floor((e-n)/t.TIMELINE_HOUR_PIXEL_STEP-i)},updateDisplayedTimeInterval:function(){var e=this.$scroller.width();this.getModel("timeline-state").recalcShowedHours(e)},checkToLoadMore:function(){if(this._lockLoadMore||!this.isVisible())return!1;var e=this.$content[0].getBoundingClientRect(),t=this.$scroller[0].getBoundingClientRect();if(!e||!t)return!1;var n=this.getModel("timeline-list").PRELOADED_VISIBLE_RANGES,i=t.right+t.width*n;return e.right<i},toLoadMore:function(){this.checkToLoadMore()&&(this._lockLoadMore=!0,this.getModel("timeline-list").loadMore().always(function(){this._lockLoadMore=!1},this))}}})},function(e,t){ns.View.define("timeline-list-item",{models:{"timeline-list-item":!1,"timeline-state":{"ns-model-changed":!1,"ns-model-changed.startDate":"onChangedStartDate","ns-model-changed.currentDate":"onChangedCurrentDate"}},events:{"ns-view-htmlinit":"onHtmlInit","ns-view-htmldestroy":"onHtmlDestroy","ns-view-show":"onShow","click@show .js-item-hour":"onClickItemHour"},yateModule:"mail",ctor:function(){this.mapHourIterate=this.mapHourIterate.bind(this)},methods:{patchTree:function(){var e=this.super_.patchTree.call(this);return e.startDay=Jane.Date.format("%F",this.getModel("timeline-list-item").get(".dateFrom")),e},onHtmlInit:function(){this.$hours=this.$node.find(".js-item-hour"),this.$current=this.$node.find(".js-current")},onHtmlDestroy:function(){delete this.$hours,delete this.$current},onShow:function(){this.updateStartOffset(),this.updateShowCurrentDate()},onClickItemHour:function(){this.getModel("timeline-state").metrika("Действия","клик на слот")},onChangedStartDate:function(){this.isVisible()&&this.updateStartOffset()},onChangedCurrentDate:function(){this.isVisible()&&this.updateShowCurrentDate()},updateStartOffset:function(){var e=this.getModel("timeline-state"),t=this.getModel("timeline-list-item"),n=e.get(".startDate");t.checkDateInRange(n)&&e.setStartOffset(this.getOffset.bind(this,n.getHours()))},updateShowCurrentDate:function(){var e=this.getModel("timeline-state"),t=this.getModel("timeline-list-item"),n=e.getCurrentDate();if(this.$hours.removeClass("is-current"),this.$current.css("display","none"),t.checkDateInRange(n)){var i=n.getHours(),r=n.getMinutes();this.$hours.eq(i).addClass("is-current"),this.$current.css({display:"block",left:i+r/60+"em"})}},getOffset:function(e){return this.$hours?this.$hours.eq(e).offset().left:0},getHours:function(){return _.range(24).map(this.mapHourIterate)},mapHourIterate:function(e){var t="";return t=0===e?Jane.Date.format("%Date_dm__dot",this.getModel("timeline-list-item").get(".dateFrom")):_.padLeft(e,2,"0")+":00",{hour:e,label:t}}}})},function(e,t){!function(){var e=null,t=_.debounce(function(){e&&e.close()},500),n=_.debounce(function(){var e,t=function(e){return Boolean(e%2)},n=function(e){return!t(e)},i=0;$(".js-timeline-event").each(function(r){var o=$(this);o.hasClass("is-notstarted")&&i++,e=i%2?n:t,o.toggleClass("is-grey",e(r))})},50);ns.View.define("timeline-events",{models:{"timeline-state":!1,"timeline-list-item":!1,"get-user-events":{"ns-model-changed":"forceUpdate","daria:mGetUserEvents:update":"lazyUpdate"}},events:{"ns-view-show":"onShow","mouseenter@show .js-timeline-event":"showTooltip","mouseleave@show .js-timeline-event":"hideTooltip","click@show .js-timeline-event":"onClickEvent"},yateModule:"mail",paramsRewrite:function(e){return{from:e.df.split("T")[0],to:e.dt.split("T")[0]}},ctor:function(){this.onDestroyedTooltip=this.onDestroyedTooltip.bind(this),this.onClosedTooltip=this.onClosedTooltip.bind(this),this.onOpenedTooltip=this.onOpenedTooltip.bind(this),this.onClickEventEdit=this.onClickEventEdit.bind(this),this.onScroll=this.onScroll.bind(this)},methods:{onShow:function(){n()},showTooltip:function(n){t.cancel(),e&&(e.destroy(),e=null);var i=$(n.currentTarget),r=Number(i.attr("data-event-index")),o=this.getModel("get-user-events").select(".ranges["+r+"]")[0];if(o){e=nb.block(ns.renderNode(o,"js-timeline-events-tooltip","mail")),e.on("nb-destroyed",this.onDestroyedTooltip),e.on("nb-opened",this.onOpenedTooltip),e.on("nb-closed",this.onClosedTooltip),e.$node.on("mouseenter",t.cancel).on("mouseleave",t).on("click",".js-timeline-event-edit",this.onClickEventEdit);var s=i.offset().top-n.pageY;s=String(s>=0?"+"+s:s),e.open({withoutTail:!1,autofocus:!1,how:{my:"center bottom"+s,at:"center top",collision:"fit none"},where:n})}},hideTooltip:function(){t()},onClickEvent:function(){this.getModel("timeline-state").metrika("Действия","клик на слот")},onDestroyedTooltip:function(){ns.events.off("daria:vScrollerMessages:scroll",this.onScroll),ns.events.off("daria:layout-changed",this.onScroll),e=null},onOpenedTooltip:function(){ns.events.on("daria:vScrollerMessages:scroll",this.onScroll),ns.events.on("daria:layout-changed",this.onScroll),this.getModel("timeline-state").metrika("Показ","превьюшка встречи")},onClickEventEdit:function(){this.getModel("timeline-state").metrika("Действия",'клик на "редактировать" в попапе')},onClosedTooltip:function(e,t){t.destroy()},onScroll:function(){if(e){var t=_.get(e,"node.widget");t&&t._position()}}}})}()},function(e,t){ns.View.define("typefilter-tabs",{models:["typefilter-tabs-state"],events:{"ns-page-before-load@show":"onPageBeforeLoad","ns-view-show":"sendMetricsOnFirstShow","click .js-invalidate-tab":"invalidateTab"},methods:{onPageBeforeLoad:function(e,t,n){ns.page.currentUrl!==n&&this.invalidate()},invalidateTab:function(e){var t=$(e.currentTarget).data("category");t&&"all"!==t&&ns.Model.invalidate("messages",function(e){return e.params.category===t})},sendMetricsOnFirstShow:_.once(function(){var e=this.getModel("typefilter-tabs-state").getMetrikaTitlesOfEnabledTabs(),t={"Табы":e.reduce(function(e,t){return _.set(e,t,"Показ ссылки на таб")},{})};Jane.c(t)})},yateModule:"mail"})},function(e,t){ns.View.define("themes-selector",{models:{themes:"keepValid",settings:{"ns-model-changed":"keepValid","ns-model-changed.color_scheme":"invalidate","daria:vWelcomeWizardThemeStep:setTheme":"onSetTheme"}},params:function(e){return e},events:{"ns-view-htmlinit":"onHtmlInit","ns-view-show":"onShow","click .js-close":"onCloseClick","click .js-themes-overlay":"onThemesOverlayClick","Daria:vThemesSelector:close":"closePopup","mouseenter .js-theme":"onThemeThumbFocus","mousedown .js-theme":"onThemeThumbClick","wheel .js-themes-list":"onMouseWheel","click .js-themes-content":"stopPropagation","scroll .js-themes-list":"notifyListScroll","daria:vThemeColorfulSelector:scope-changed@show":"_metrikaCountThemeChange","daria:vThemeWeatherSettings:weather-city-changed@show":"_metrikaCountThemeChange","daria:vThemeSeasonsSelector:scope-changed@show":"_metrikaCountThemeChange"},yateModule:"mail",methods:{CONTENT_TRANSITION_SAFE_DELAY:350,SETTINGS_TRANSITION_SAFE_DELAY:250,_wasHidden:!0,onHtmlInit:function(){this.$list=this.$node.find(".js-themes-list"),this.setListScrollTop()},onShow:function(){if(!this._closeInProgress)return this.isInWelcomeWizard()||$.Shortcuts.modalListOn("themes-selector"),this._wasHidden&&this._metrikaCount(["открытие"]),this._wasHidden?(this._wasHidden=!1,vow.Promise.resolve().then(this._scrollIntoView.bind(this,!0)).then(this._showContent,this)):vow.Promise.resolve().then(this._showContent,this).then(this._scrollIntoView,this)},onCloseClick:function(){this.closePopup(),this._metrikaCount(["крестик"])},onThemesOverlayClick:function(){this.closePopup(),this._metrikaCount(["закрытие по клику вне попапа"])},isInWelcomeWizard:function(){return Boolean(this.params.wizard)},setListScrollTop:function(){this.$list.scrollTop(this._listScrollTop||this._howToScrollIntoView())},_howToScrollIntoView:function(){if(this.$node){var e=this.$node.find(".is-active");if(e.length){var t=this.$list.scrollTop(),n=e.position().top,i=n+e.height(),r=this.$list.outerHeight(),o=t;return i>r?o+=i-r+16:n<0&&(o+=n-16),o}}},_showContent:function(){return new vow.Promise(function(e){if(this.isInWelcomeWizard())return e();this.$node.find(".js-themes-content").one("transitionend",e),_.delay(e,this.CONTENT_TRANSITION_SAFE_DELAY),_.delay(function(){$("html").addClass("with-ThemeOverlay")},50)}.bind(this))},_scrollIntoView:function(e){return new vow.Promise(function(t){if(this._listWasScrolled)return t();var n=this._howToScrollIntoView();this._saveListScrollTop(n),e?(this.$list.scrollTop(n),t()):this.$list.animate({scrollTop:n},n,t)}.bind(this))},_saveListScrollTop:function(e){this._listWasScrolled=!1,this._listScrollTop=e||this.$list.scrollTop()},onSetTheme:function(e,t){return this._setThemeById(t)},onThemeThumbClick:function(e){var t=$(e.currentTarget);if(!t.hasClass("is-active")){this._metrikaCountThemeChange();var n=t.data("id");return this._setThemeById(n)}},_setThemeById:function(e){return this._saveListScrollTop(),this._lastLoadingThemeId=e,this._currentLoadingTheme=this._currentLoadingTheme||vow.Promise.resolve(),this._currentLoadingTheme.then(function(){return vow.Promise.all([this._setTheme(e),this._runTheme(e),this._hideSettings(Daria.themeId).then(function(){if(this._isActualTheme(e))return Daria.themeId=e,this.$node&&(this.$node.find(".is-active").removeClass("is-active"),this.$node.find('[data-id="'+e+'"]').addClass("is-active")),this._showSettings(e)},this)])},this).then(function(){if(this._isActualTheme(e))return ns.events.trigger("daria:vThemesSelector:new-schema"),ns.page.go().then(function(){$(window).trigger("resize"),this._scrollIntoView(),this._lastLoadingThemeId=null,this._currentLoadingTheme=null},this)},this)},_setTheme:function(e){return ns.Model.get("settings").setSettings({color_scheme:e})},_runTheme:function(e){return new vow.Promise(function(t){Jane.Services.runModules(["theme-"+e+".css"],t)})},_loadTheme:function(e){return new vow.Promise(function(t){Jane.Services.loadModules(["theme-"+e+".css"],t)})},_hideSettings:function(e){return new vow.Promise(function(t){if(!this.$node)return t();var n=this.$node.find(".is-active"),i=n.data("id"),r=ns.Model.get("themes").hasSettings(e);if(i!==e||!r)return t();_.delay(t,this.SETTINGS_TRANSITION_SAFE_DELAY),this._trySwitchSettings(),n.one("transitionend",t),n.removeClass("has-settings")}.bind(this))},_trySwitchSettings:function(){var e=this.$node.find(".is-active"),t=this.$node.find('[data-id="'+this._lastLoadingThemeId+'"]'),n=ns.Model.get("themes").hasSettings(this._lastLoadingThemeId),i=e.offset().top===t.offset().top,r=n&&i,o=t.data("index")-e.data("index");r&&e.addClass("switch-settings switch-settings-"+o)},_showSettings:function(e){return new vow.Promise(function(t){if(!this.$node)return t();var n=this.$node.find(".is-active");if(n.data("id")!==e||!ns.Model.get("themes").hasSettings(e))return t();_.delay(t,this.SETTINGS_TRANSITION_SAFE_DELAY),n.one("transitionend",t),n.addClass("has-settings")}.bind(this))},_isActualTheme:function(e){return!this._lastLoadingThemeId||this._lastLoadingThemeId===e},onMouseWheel:function(){this._listWasScrolled=!0,this._listScrollTop=this.$list.scrollTop()},closePopup:function(){return this._closeInProgress=!0,$.Shortcuts.modalListOff("themes-selector"),vow.Promise.resolve().then(this._hideContent,this).then(function(){return ns.Model.get("themes-selector").close(),this._closeInProgress=!1,ns.page.go()},this)},_hideContent:function(){return new vow.Promise(function(e){if(this.isInWelcomeWizard())return e();this._saveListScrollTop(),this._wasHidden=!0,this.$node.find(".js-themes-content").one("transitionend",e),_.delay(e,this.CONTENT_TRANSITION_SAFE_DELAY),$("html").removeClass("with-ThemeOverlay")}.bind(this))},onThemeThumbFocus:function(e){var t=$(e.currentTarget),n=t.data("id");return this._loadTheme(n)},getThumbName:function(e){e=yr.nodeset2scalar(e);var t="";return"seasons"===e&&(t="-"+ns.Model.get("theme-seasons").getSeason()),e+t},stopPropagation:function(e){e.stopPropagation()},notifyListScroll:function(){ns.events.trigger("daria:vThemesSelector:themes-list-scroll")},_metrikaCount:function(e){if(!this.isInWelcomeWizard()){var t=["Залогиновая шапка. Правая часть","Выпадушка тем"];Jane.c(t.concat(e))}},_metrikaCountThemeChange:function(){this._metrikaCount(["выбор темы"])}}})},function(e,t){ns.View.define("unsubscribe-popup-react",{events:{"ns-view-htmlinit":"onHtmlInit","ns-view-htmldestroy":"onHtmlDestroy","daria:unsubscribe-popup:show":"openPopup","daria:MOPS:action-complete":"updateUnsubscribeFiltersInformation"},yateModule:"mail",methods:{onHtmlInit:function(){Daria.React.UnsubscribePopup.renderUnsubscribePopupContainerBox(this.node)},openPopup:function(){Daria.React.UnsubscribePopup.openPopup()},onHtmlDestroy:function(){Daria.React.UnsubscribePopup.disposeUnsubscribeContainer(),Daria.React.unmountReactBox(this.node)},updateUnsubscribeFiltersInformation:function(){return ns.forcedRequest(["unsubscribe-furita-newsletters","unsubscribe-furita-filters"],{}).then(function(e){return e}).fail(function(e){throw new Error(e)})}}})},function(e,t){!function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length;return t?1===t?e[0]:_.set({},e.slice(0,t-1),e[t-1]):e}function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return _.set({},t,n.map(e))}function n(e){var t=e.data("metric");return t?t.trim().split(":"):[]}ns.View.define("user-dropdown",{models:{"index-data":!1,"user-dropdown-data":!0,settings:!1},events:{"ns-view-show":"onShow","click a":"onLinkClick","click .js-user-dropdown-promo-click":"onPromoClick","click .js-user-dropdown-promo-close":"onPromoClose"},yateModule:"mail",methods:{open:function(e){this.updateByLayout("user-dropdown",{execFlag:ns.U.EXEC.PARALLEL}).then(function(){this.nbPopup=nb.block(this.node),this.nbPopup.open(e),this.nbPopup.on("nb-opened",this.onPopupShow.bind(this)),this.nbPopup.on("nb-closed",this.destroySelf.bind(this))},this)},onPopupShow:function(){var e=this.nbPopup&&this.nbPopup.$node;if(e&&e.length){var t=[];e.find(".js-user-dropdown-item").each(function(e,i){var r=n($(i));r.length&&(r.push("Показ"),t.push(r))}),t.length&&this._metriks(t,!0)}},close:function(){this.nbPopup&&this.nbPopup.close()},destroySelf:function(){var e=this;_.defer(function(){e.nbPopup&&(e.nbPopup.destroy(),e.nbPopup=null),e.destroy()})},onShow:function(){ns.Model.get("head-user-state").setNewLettersInMA(!1),ns.forcedRequest("do-mail-reset-recent-counter"),this._metriks();var e=this.$node.find(".js-user-dropdown-promo");e.length&&!e.children().length&&(e.html(Jane.tt("mail:js-user-dropdown-promo")),this._metriks("Показы промо"));var t=this.getModel("user-dropdown-data").getSumOfFresh();t&&(t<11?this._metriks(["Количество писем",t+" писем"]):t<51?this._metriks(["Количество писем","11-50 писем"]):t<101?this._metriks(["Количество писем","51-100 писем"]):this._metriks(["Количество писем","более 100 писем"]))},onLinkClick:function(e){var t=$(e.currentTarget),i=n(t);return i.length&&(t.hasClass("js-user-dropdown-item")&&i.push("Клик"),this._metriks(i)),!0},onPromoClick:function(e){e.preventDefault(),e.stopPropagation(),this.getModel("settings").setSettingOn("user_dropdown_promo",function(){var t=$(e.currentTarget).attr("href");window.location.replace(t)})},onPromoClose:function(){return this.getModel("settings").setSettingOn("user_dropdown_promo"),this.$node.find(".js-user-dropdown-promo").addClass("g-hidden"),this.$node.find(".js-dropdown-users-list").removeClass("g-hidden"),this.$node.find(".js-mail-dropdown__item-user-add").removeClass("g-hidden"),!1},_metriks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],i=["Залогиновая шапка. Правая часть","Меню за логином"],r=void 0;if(e.length){var o=this.getModel("user-dropdown-data").getSumOfFresh();i.push(o?"Есть новые письма":"Нет новых писем"),r=n?t(i,e):i.concat(e)}else r=i.concat(["Клик"]);Jane.c(r)}}})}()},function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){function e(){throw new Error("Это абстрактный метод. Он должен быть перегружен в производном классе.")}ns.View.define("message-actions",{methods:{onReplyHotkey:function(e,t){if("qr"===t.compose)this.showQuickReply(t.replyAll);else{var n=t.replyAll?"reply-all":"reply";this._replyHelper(n,{from:"toolbar"})}},_replyHelper:function(e,t){t=t?_.clone(t):{},t.mMessagesChecked||(t.mMessagesChecked=this.getMessagesCheckedInstance(!0));var n=_.last(e.split(":"));ns.action.run(n,t)},_onDrop:function(e,t){var i;switch(t.operation){case"label":case"unlabel":case"mark":case"unmark":case"move":case"remove":case"tospam":case"notspam":case"reply":case"reply-all":case"forward":i="_on"+t.operation.split("-").map(function(e){return Daria.capitalize(e)}).join("")+"ToolbarButton";break;case"messages.deselect":i="_onDeselect";break;default:return!1}i&&_.isFunction(this[i])&&(t.params=t.params||{},t.params._source="dnd",this[i](e,t.params));var r=t.operation,o={forward:["тулбар","переслать"],remove:["тулбар","удалить"],tospam:["тулбар","спам"],mark:["тулбар","прочитано"],move:["в папку (левая колонка)"],unmark:["тулбар","не прочитано"]}[r];if(o){var s;(s=Jane).c.apply(s,["Drag-n-drop","Почта"].concat(n(o)))}},_onLabelToolbarButton:e,_onUnlabelToolbarButton:e,_onMarkToolbarButton:e,_onUnmarkToolbarButton:e,_onMoveToolbarButton:e,_onRemoveToolbarButton:e,_onTospamToolbarButton:e,_onNotspamToolbarButton:e,_onDeselect:e,_onReplyToolbarButton:function(e,t){this._replyHelper("reply",t)},_onReplyAllToolbarButton:function(e,t){this._replyHelper("reply-all",t)},_onForwardToolbarButton:function(e,t){Jane.ToolbarMetric.messageToolbar("переслать"),this._replyHelper("forward",t)},getMessagesCheckedInstance:function(e){return ns.Model.get("messages-checked")},showQuickReply:function(e){ns.page.go(ns.router.generateUrl("compose2",{ids:this.params.ids,oper:e?"reply-all":"reply"}))}}})}()},function(e,t){ns.View.define("setup-avatar",{models:{settings:!1,"account-information":!1},events:{"daria:vSetupAvatar:remove@show":"_remove","daria:recipients:update@show":"toggleRemoveControlVisibility","ns-view-htmlinit":"onHtmlInit","ns-view-htmldestroy":"onHtmlDestroy"},yateModule:"mail",methods:{onHtmlInit:function(){this.$node.find(".js-avatar-remove").on("click",this._onClickAvatarRemove),this.toggleRemoveControlVisibility()},onHtmlDestroy:function(){this.$node.find(".js-avatar-remove").off("click",this._onClickAvatarRemove)},_onClickAvatarRemove:function(e){e.preventDefault();var t=this,n=$(e.currentTarget);this.sendMetrika(n),Daria.Dialog.confirm({body:i18n("%Setup_Sender_Dialog_Ava_delete"),width:350,okValue:i18n("%Удалить"),okHandler:function(){Daria.upicUploader.remove(function(){t._remove()})}})},sendMetrika:function(e){var t=e.attr("data-metrika");t&&Jane.c(t.trim().split(":"))},_remove:function(){var e=$(".js-header-right-column .js-user-picture"),t=$(".js-header-right-column .js-dropdown-user-picture"),n=this.$node.find(".js-avatar-img");return Daria.Recipients.update([e.data("id"),n.data("id"),t.data("id")])},toggleRemoveControlVisibility:function(){var e=this.$node.find(".js-avatar-img"),t=Daria.Recipients.getRecipient(e.data("id"));this.$node.find(".js-avatar-remove").toggleClass("g-hidden",!t.url)}}})},function(e,t){ns.View.define("contact-actions",{params:function(e){return e.emails=e.email,e},models:{"account-information":!1,"abook-contacts":!1,"email-info":!1},events:{"ns-view-show":"_onNsViewShow","ns-view-hide":"_onNsViewHide","ns-view-htmldestroy":"_onHtmlDestroy","daria:vScrollerMessage:scroll":"onScroll"},yateModule:"mail",methods:{patchTree:function(){var e=this.super_.patchTree.call(this);return e.menuItems=this._getMenuItems(),e},_onNsViewShow:function(){var e=this.$node.find(".js-clipboard");if(e.length){var t=this.params.email;this._clip=new Daria.Clipboard(e,{hoverClass:"mail-ContactMenu-Item_hover"}),this._clip.on("ready",function(){this.setText(t)})}},_onNsViewHide:function(){this._clip&&(this._clip.destroy(),delete this._clip)},_onHtmlDestroy:function(){this.nbPopup&&(this.nbPopup.destroy(),this.nbPopup=null)},_destroySelf:function(){_.defer(this.destroy.bind(this))},_onPopupSelect:function(e,t){t.ui.item.children().data("noclose")||this.nbPopup.close()},onScroll:function(){this.nbPopup&&this.nbPopup.close()},open:function(e){this.update({},{execFlag:ns.U.EXEC.PARALLEL}).then(function(){var t=this.nbPopup=nb.block(this.node);t.on("nb-select",this._onPopupSelect.bind(this)),t.on("nb-closed",this._destroySelf.bind(this)),t.open(e)}.bind(this))},_getAbookContact:function(){return this.getModel("abook-contacts").getContactDataByEmail(this.params.email)||{}},_getMenuItems:function(){var e=this.getModel("account-information").isMyEmail(this.params.email),t=[{content:this.params.email,class:["mail-ContactMenu-Item_selectonly"],attrs:{"data-noclose":"1"}},{separator:!0}];if(e||t.push({content:i18n("%Message_Написать_письмо"),attrs:{href:ns.router.generateUrl("compose2",{to:this.params.email})}}),Daria.IS_CORP){var n=this.getModel("email-info").getData();"staff"!==n.type||n.staff._error||t.push({content:i18n("%Message_Перейти_на_Стафф"),attrs:{href:_.result(_.find(n.staff.services,"type","staff"),"url"),target:"_blank",rel:"noopener noreferrer"}})}return t.push({content:i18n("%Скопировать_адрес"),class:[Daria.Clipboard.canUse?"js-clipboard":"mail-ContactMenu-Item_disabled"]}),e||(this._getAbookContact().cid||t.push({content:i18n("%Message_to_contacts"),class:["ns-action"],attrs:{"data-click-action":"message.add-contact","data-params":ns.params2query({email:this.params.email,name:this.params.name,counter:"71054"})}}),t.push({content:i18n("%Message_to_blacklist"),class:["ns-action"],attrs:{"data-click-action":"message.lists-add-from-message","data-params":ns.params2query({listtype:"black",email:this.params.email,counter:"71055"})}})),t}}})},function(e,t,n){n(1629),n(1630),n(1631),n(1632),n(1633),n(1634)},function(e,t){var n=!1,i=!0;ns.View.define("context-menu-mixin-base",{methods:{_insertCustomIcon:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"context-menu-MainToolbar-icon";return yr.run("mail",{icon:e},t)},_cmBaseBindMenuableElements:function(e){var t=ns.Model.get("settings");i=!t.getSetting("contextmenu_disable"),n||(n=!0);var r=e.$node;this.__$bindedNode=r,this.__mMessagesChecked=e.mMessagesChecked,r.on("mousedown.context-menu",e.selector,this.__cmBaseOnMouseDown.bind(this)).on("contextmenu.context-menu",e.selector,this.__cmBaseOnContextMenu.bind(this))},_cmBaseUnbindMenuableElements:function(){this.__$bindedNode&&(this.__$bindedNode.off(".context-menu"),this.__$bindedNode=null)},__cmBaseOnMouseDown:function(e){i&&2===e.button&&$(e.currentTarget).addClass("no-user-select")},__cmBaseOnContextMenu:function(e){i&&(e.stopPropagation(),e.preventDefault(),this.__showContextMenu(e))}}})},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ns.View.edefine("context-menu-mixin-messages",{methods:{__showContextMenu:function(e){$(e.currentTarget).closest(".js-messages-item-checkbox-controller").hasClass("is-checked")||ns.events.trigger("daria:vMessages:deselect"),this.__cmMessagesPrepareToShowMenu(e).show({x:e.pageX,y:e.pageY,$scrollContainer:Daria.is3pane()?$(".b-layout__inner_type_messages:visible"):null}),$(".js-messages-scroll-area").one("scroll",function(){Daria.ContextMenu.close()})},__cmMessagesPrepareToShowMenu:function(e){var t=this;Jane.watcher.set("messages-context-menu:opened",!0),clearTimeout(this.__deferredCloseTimeout),this.__preventDeselect=!1,this.__$onMessage=$(e.currentTarget);var n=this.__isThread=this.__$onMessage.hasClass("js-thread");this.__originalMid=this.__$onMessage.data("id");var i=this.__originalMid;/^t/.test(i)&&(i=i.substr(1)),this.__mid=i,Daria.is3pane()&&this.__toggleMessagesSelectionSuppression(!0);var r=!1,o=this.__mMessagesChecked.getIds();if(o.tids.length+o.ids.length>0?(!n&&!_.contains(o.ids,i)||n&&!_.contains(o.tids,i))&&(r=!0):r=!0,r){this.__isNeedDeselect=!0;ns.Model.get("messages-checked").check(ns.Model.get("message",{ids:this.__originalMid}),!0)}return new Daria.ContextMenu({items:this.__getContextMenuItems(),metrika:"Письма",onClose:function(){Jane.watcher.set("messages-context-menu:opened",!1),t.__toggleMessagesSelectionSuppression(!1),Daria.is3pane()&&r&&(t.__deferredCloseTimeout=_.defer(function(){t.__preventDeselect||(t.__preventDeselect=!1)}))}})},__toggleMessagesSelectionSuppression:function(e){Jane.watcher.set("Daria:vMessagesSelection.dontChangeViewToBatchOperation",e)},__getContextMenuItems:function(){var e,t=this,n=this.__extractButtonsFromToolbar(),i=this.__getFolders(),r=[],o=ns.page.current.params.current_folder;o&&(e=ns.Model.get("folders").getFolderById(o).symbol);var s=this.__mMessagesChecked.getIds();r.push({type:"separator",index:8.9});var a=0,u=i.map(function(e){return{id:e.fid,text:e.name,alt:e.name,isActive:!e.isCurrent,addClass:e.isCurrent?"is-current":"",style:"padding-left:"+(e.level+2)+"em",index:a++,metrika:"Переложить в папку",onClick:function(){ns.action.run("move",{fid:e.fid})}}});if(u.push({type:"separator",index:998.9}),u.push({text:i18n("%Folders_Dropdown_Add"),index:999,metrika:"Новая папка",onClick:function(){t.__preventDeselect=!0,ns.action.run("folders.add",{contextMenu:!0,isNeedDeselect:t.__isNeedDeselect})}}),r.push({text:i18n("%Folders_Dropdown_Label"),customIcon:this._insertCustomIcon("Folder"),index:9,metrika:"Переложить в папку",items:u}),!_.contains(["trash","spam"],e)){var l=this.__getLabels(),c=this.__processLabels(l.label,"label",0),d=this.__processLabels(l.unLabel,"unlabel",500);c.push({type:"separator",index:998.9}),c.push({text:i18n("%Labels_Dropdown_Add"),index:999,metrika:"Создать метку",onClick:function(){t.__preventDeselect=!0,ns.action.run("labels.add",{contextMenu:!0,isNeedDeselect:t.__isNeedDeselect})}});var f=c;d.length&&(f.push({type:"separator",index:489},{text:i18n("%Labels_Dropdown_Unlabel_Title"),index:490,isActive:!1}),f.push.apply(f,d)),r.push({text:i18n("%Labels_Dropdown_Label"),customIcon:this._insertCustomIcon("Tag"),index:10,items:f})}if(r.push({type:"separator",index:10.1}),(1===s.ids.length+s.tids.length||0===s.ids.length&&1===s.tids.length&&this.__isThread)&&(r.push({text:i18n("%Messages_Context_Menu_Open_Tab"),index:1,metrika:"Открыть в новом окне",onClick:function(){var e,n=t.__$onMessage;e=t.__isThread?n.find(".b-messages__thread-count"):n.find(".js-message-snippet"),window.open(e.attr("href"))}}),r.push({type:"separator",index:1.1})),0===s.tids.length&&1===s.ids.length){var p=this.__$onMessage.find('A[href*="print"]');p.length&&r.push({text:i18n("%Message_Print"),index:100,metrika:"Печать",onClick:function(){window.open(p.attr("href"))}})}var h=ns.Model.get("message",{ids:this.__originalMid});if(1===s.tids.length&&0===s.ids.length||0===s.tids.length&&1===s.ids.length){var m=h.get(".fid"),g=ns.Model.get("folders").getFolderById(m).symbol;_.contains(["outbox","template","draft"],g)||r.push({text:i18n("%Messages_Context_Menu_Create_Filter"),index:14,metrika:"Настроить фильтр",onClick:function(){ns.page.go(ns.router.generateUrl("setup",{tab:"filters-create",message:t.__$onMessage.attr("data-id")}))}})}return r.push.apply(r,n),r},__processLabels:function(e,t,n){var i=ns.Model.get("labels"),r=i.getImportantLID(),o=n,s=this;return e.map(function(e){var a=e===r,u=i.getLabelById(e),l=a?yr.run("mail",{icon:"Important"},"context-menu-MainToolbar-icon"):yr.run("mail",{color:u.color},"context-menu-label-custom-icon"),c="label"===t?"Поставить метку":"Снять метку";return{id:e,text:u.name,alt:u.name,index:a?o-1:++n,customIcon:l,metrika:c,onClick:function(){s._onToolbarButton(t,{lid:e})}}})},__extractButtonsFromToolbar:function(){function e(){this._triggerAction&&(i._onToolbarButton(this._triggerAction,{},{refreshImmediately:!0}),-1===["remove","tospam"].indexOf(this._triggerAction)&&ns.events.trigger("daria:vMessages:deselect"))}var t,i=this,r=(t={},n(t,Daria.Constants.TOOLBAR_BUTTONS.DELETE,{text:i18n("%Удалить"),customIcon:this._insertCustomIcon("Delete"),index:2,metrika:"Удалить",onClick:e,_triggerAction:"remove"}),n(t,Daria.Constants.TOOLBAR_BUTTONS.REPLY,{text:i18n("%Toolbar_Ответить"),customIcon:this._insertCustomIcon("Reply"),index:3,metrika:"Ответить всем",onClick:this.__onReplyClick.bind(this)}),n(t,Daria.Constants.TOOLBAR_BUTTONS.DRAFT_FINISH,{text:i18n("%Toolbar_Дописать"),customIcon:this._insertCustomIcon("Compose"),index:3,metrika:"Дописать",onClick:function(){var e=i.__$onMessage.attr("data-id");ns.page.go(ns.router.generateUrl("compose2",{ids:e}))}}),n(t,Daria.Constants.TOOLBAR_BUTTONS.FORWARD,{text:i18n("%Toolbar_Переслать"),customIcon:this._insertCustomIcon("Forward"),index:4,metrika:"Переслать",onClick:function(){var e={};e.mMessagesChecked=ns.Model.get("messages-checked"),ns.action.run("forward",e)}}),n(t,Daria.Constants.TOOLBAR_BUTTONS.MARK_AS_READ,{text:i18n("%Toolbar_Прочитано"),customIcon:this._insertCustomIcon("Read"),index:5,metrika:"Прочитано",onClick:e,_triggerAction:"mark"}),n(t,Daria.Constants.TOOLBAR_BUTTONS.MARK_AS_UNREAD,{text:i18n("%Toolbar_Не_прочитано"),customIcon:this._insertCustomIcon("Unread"),index:5,metrika:"Не прочитано",onClick:e,_triggerAction:"unmark"}),n(t,Daria.Constants.TOOLBAR_BUTTONS.SPAM,{text:i18n("%Folder_spam"),customIcon:this._insertCustomIcon("Spam"),index:6,metrika:"Спам",onClick:e,_triggerAction:"tospam"}),n(t,Daria.Constants.TOOLBAR_BUTTONS.NOT_SPAM,{text:i18n("%Toolbar_Не_спам"),customIcon:this._insertCustomIcon("Unspam"),index:6,metrika:"Не спам",onClick:e,_triggerAction:"notspam"}),n(t,Daria.Constants.TOOLBAR_BUTTONS.ARCHIVE,{text:i18n("%Folder_archive"),customIcon:this._insertCustomIcon("Archive"),index:7,metrika:"Архив",onClick:function(){Daria.MOPS.archive(i.__mMessagesChecked).then(function(){i.__mMessagesChecked.resetChecked()})}}),t),o=[];return this.__getButtonsIds().forEach(function(e){e in r&&o.push(r[e])}),o},__getButtonsIds:function(){var e=ns.Model.get("folders"),t=null;ns.page.current.params.current_folder&&(t=e.getFolderById(ns.page.current.params.current_folder).symbol);var n=[Daria.Constants.TOOLBAR_BUTTONS.DELETE];this.__mMessagesChecked.getCount()<=Daria.Constants.MAX_MESSAGES_TO_FORWARD&&"template"!==t&&n.push(Daria.Constants.TOOLBAR_BUTTONS.FORWARD);var i=this.__mMessagesChecked.getIds();i.ids.concat(i.tids).some(function(t){var n=ns.Model.get("message",{ids:t});if(!n.hasRealData())return!1;var i=e.getFolderById(n.get(".fid")).symbol;return!_.contains(["spam","template","draft","outbox","sent"],i)})?n.push(Daria.Constants.TOOLBAR_BUTTONS.SPAM):"spam"===t&&n.push(Daria.Constants.TOOLBAR_BUTTONS.NOT_SPAM),"archive"!==t&&n.push(Daria.Constants.TOOLBAR_BUTTONS.ARCHIVE),"template"!==t&&(this.__hasUnreadMessages()?n.push(Daria.Constants.TOOLBAR_BUTTONS.MARK_AS_READ):n.push(Daria.Constants.TOOLBAR_BUTTONS.MARK_AS_UNREAD));var r=!1;if(1===i.ids.length){var o=ns.Model.get("message",{ids:i.ids[0]});if(!o.hasRealData())return!1;var s=e.getFolderById(o.get(".fid")).symbol;r=_.contains(["draft"],s)}return(1===i.ids.length&&0===i.tids.length||0===i.ids.length&&1===i.tids.length)&&!r&&n.push(Daria.Constants.TOOLBAR_BUTTONS.REPLY),r&&n.push(Daria.Constants.TOOLBAR_BUTTONS.DRAFT_FINISH),n},__getFolders:function(){var e,t,n=ns.Model.get("folders"),i=this.__mMessagesChecked.getIds();i.ids.concat(i.tids).some(function(t){var n=ns.Model.get("message",{ids:t});if(n.isThread())return!0;if(n){var i=n.get(".fid");if(e&&e!==i)return!0;e=i}})||(t=e);var r=n.getHierarchyStructure(function(e){return!_.contains(["outbox"],e.symbol)&&"1000"!==e.fid});return this.__processItems(r,t)},__processItems:function(e,t,n,i){var r=this;return i=i||[],n=n||0,e.forEach(function(e){i.push({name:e.name,fid:e.fid,isSystem:Boolean(!e.user||e.symbol),isCurrent:e.fid===t,level:n}),e.items&&r.__processItems(e.items,t,n+1,i)}),i},__getLabels:function(){var e=this.__getUserLabelHash(),t=[],n=[];return e.labels.forEach(function(i){i.count!==e.count&&t.push(i.lid),i.count&&n.push(i.lid)}),{label:t,unLabel:n}},__getUserLabelHash:function(){var e=[],t={},n=ns.Model.get("labels"),i=n.getImportantLID(),r=ns.Model.get("settings").getSetting("label_sort");n.data.label.forEach(function(n){if(n.user||n.lid===i){var r={name:n.name,lid:n.lid,count:0,allCount:n.count};t[n.lid]=r,e.push(r)}}),e="by_count"===r?e.sort(function(e,t){return t.allCount-e.allCount}):_.sortBy(e,"name");var o=this.__mMessagesChecked.getCount(),s=this.__mMessagesChecked.getLabels();return _.forEach(s,function(e,n){t[n]&&(t[n].count=e)}),{count:o,labels:e}},__hasUnreadMessages:function(){var e=this.__mMessagesChecked.getIds();return e.ids.concat(e.tids.map(function(e){return e})).some(function(e){var t=ns.Model.get("message",{ids:e});return t&&t.get(".new")})},__replyClickDataPreparation:function(e){return new vow.Promise(function(t,n){ns.Model.get("message",{ids:e}).isThread()?ns.request("messages",{thread_id:e}).then(function(e){var i=e[0].getLastReplyMessageQR();i?t(i.get(".mid")):n()}):t(e)})},__onReplyClick:function(){var e=this.__$onMessage.attr("data-id");if(e){var t=this.__replyClickDataPreparation(e);t.always(function(){ns.events.trigger("daria:vMessages:deselect")}),t.then(function(e){var t=ns.router.generateUrl("compose2",{oper:"reply-all",ids:e});ns.page.go(t)})}}}},"context-menu-mixin-base",ns.View)},function(e,t){ns.View.edefine("context-menu-mixin-left-panel",{methods:{__showContextMenu:function(e){var t=this;e.preventDefault();var n=$(e.currentTarget);n.removeClass("no-user-select");var i=new Daria.ContextMenu({items:this.__getContextMenuItems({$item:n,url:this.__leftPanelExtractUrl(e),id:this.__extractId(n)}),onClose:function(){t.__toggleHoverClass(n,!1)},metrika:this.__metrika});this.__toggleHoverClass(n,!0),i.show({x:e.pageX,y:e.pageY,$scrollContainer:null}),$(".js-layout-left").one("scroll.context-menu-close",function(){Daria.ContextMenu.close()})},__toggleHoverClass:no.nop,__leftPanelExtractUrl:function(e){return $(e.target).closest("A[href]").attr("href")},__cmLeftPanelGetContextMenuItems:function(e){return[{text:i18n("%Messages_Context_Menu_Open_Tab"),index:1,metrika:"Открыть в новом окне",onClick:function(){window.open(e.url)}},{type:"separator",index:2},{text:i18n("%Messages_Context_Menu_New_Folder"),customIcon:this._insertCustomIcon("Folder"),index:3,metrika:"Создать новую папку",onClick:function(){var t=Daria.parseQuery(e.$item.attr("data-params")).fid,n=ns.Model.get("folders"),i=n.getFolderById(t);i&&(i.symbol||i.shared)&&(t=n.getFidBySymbol("inbox")),ns.action.run("folders.add",{"only-create":!0,parent_id:t})}},{text:i18n("%Messages_Context_Menu_New_Label"),customIcon:this._insertCustomIcon("Tag"),index:4,metrika:"Создать новую метку",onClick:function(){ns.action.run("labels.add",{"only-create":!0})}},{type:"separator",index:5},{text:i18n("%Messages_Context_Menu_Folders_Setup"),index:6,metrika:"Настройки папок и меток",onClick:function(){var e=ns.router.generateUrl("setup",{tab:"folders"});ns.page.go(e)}}]}}},"context-menu-mixin-base",ns.View)},function(e,t){ns.View.edefine("context-menu-mixin-labels",{methods:{__metrika:"Метки",__extractId:function(e){return Daria.parseQuery(e.attr("data-params")).lid},__toggleHoverClass:function(e,t){e.toggleClass("is-checked",t)},__getContextMenuItems:function(e){var t=this.__cmLeftPanelGetContextMenuItems.call(this,e);if(e.id){ns.Model.get("labels").getLabelById(e.id).user&&t.push({text:i18n("%LabelsMenu_Edit_Button"),customIcon:this._insertCustomIcon("Edit"),index:2.4,metrika:"Переименовать метку",onClick:function(){ns.action.run("label.edit",{id:e.id,"only-edit":!0})}}),t.push({text:i18n("%Labels_Remove_Button"),customIcon:this._insertCustomIcon("Delete"),index:2.5,metrika:"Удалить метку",onClick:function(){ns.action.run("label.remove",{id:e.id})}}),t.push({type:"separator",index:2.9})}return t}}},"context-menu-mixin-left-panel",ns.View)},function(e,t){ns.View.edefine("context-menu-mixin-folders",{methods:{__metrika:"Папки",__extractId:function(e){return Daria.parseQuery(e.attr("data-params")).fid},__toggleHoverClass:function(e,t){e.toggleClass("mail-NestedList-Item_hover",t)},__getContextMenuItems:function(e){var t=this.__cmLeftPanelGetContextMenuItems.call(this,e);if(e.id){var n=ns.Model.get("folders"),i=n.getFolderById(e.id);i.user&&!i.symbol&&"1000"!==i.fid&&"1000"!==i.parent_id&&t.push({text:i18n("%Folders_Edit_Button"),customIcon:this._insertCustomIcon("Edit"),index:2.4,metrika:"Переименовать папку",onClick:function(){ns.action.run("folder.edit",{id:e.id,"only-edit":!0})}}),(!i.default&&"1000"!==i.fid&&"1000"!==i.parent_id||Daria.Folder.REMOVABLE_SYMBOLS[i.symbol])&&t.push({text:i18n("%Folders_Remove_Button"),customIcon:this._insertCustomIcon("Delete"),index:2.5,metrika:"Удалить папку",onClick:function(){ns.action.run("folder.remove",{id:e.id})}}),i.new>0&&t.push({text:i18n("%Message_Right_Пометить_все_прочитанными"),customIcon:this._insertCustomIcon("Read"),index:2.3,metrika:"Пометить все письма прочитанными",onClick:function(){Daria.Folder.markRead(e.id)}}),_.contains(["trash","spam"],i.symbol)&&i.count>0&&t.push({text:i18n("%Messages_Infoline_Folder_Clear_Spam_Intruder"),customIcon:this._insertCustomIcon("Inbox-CleanFolder","context-menu-icon"),index:2.6,metrika:"Очистить папку",onClick:function(){ns.action.run("folder.clear",{fid:e.id})}}),_.contains(["template"],i.symbol)&&t.push({text:i18n("%Toolbar_Создать_шаблон"),customIcon:this._insertCustomIcon("AddTemplate"),index:2.7,metrika:"создать шаблон",onClick:function(){ns.page.go(ns.router.generateUrl("compose2",{save_symbol:"template"}))}}),t.push({type:"separator",index:2.9})}return t}}},"context-menu-mixin-left-panel",ns.View)},function(e,t){ns.View.edefine("context-menu-mixin-collectors",{methods:{__metrika:"Коллектор",__extractId:function(e){return{popid:e.attr("data-popid"),email:e.attr("data-email")}},__toggleHoverClass:no.nop,__getContextMenuItems:function(e){return[{text:i18n("%Messages_Context_Menu_Open_Tab"),index:1,metrika:"Открыть в новом окне",onClick:function(){window.open(e.url)}},{type:"separator",index:1.1},{text:i18n("%Messages_Context_Menu_Edit_Settings"),customIcon:this._insertCustomIcon("Settings","context-menu-icon"),index:2,metrika:"Редактировать",onClick:function(){var t=ns.router.generateUrl("setup",{tab:"collector",popid:e.id.popid,email:e.id.email});ns.page.go(t)}},{type:"separator",index:9.9},{text:i18n("%Messages_Context_Menu_Create_New_Collector"),customIcon:this._insertCustomIcon("AddBtn"),index:10,metrika:"Создать новый сборщик",onClick:function(){var e=ns.router.generateUrl("setup",{tab:"collectors"});ns.page.go(e)}}]}}},"context-menu-mixin-left-panel",ns.View)},function(e,t){ns.View.define("footer-help-link",{models:{"help-link":{"ns-model-changed":"keepValid","ns-model-changed.href":"invalidate"}},yateModule:"mail"})},function(e,t){ns.View.define("user-dropdown-help-link",{models:{"help-link":{"ns-model-changed":"keepValid","ns-model-changed.href":"invalidate"}},yateModule:"mail"})},function(e,t){ns.View.define("messages-time-updater",{models:{"current-day":{"ns-model-changed":!1,"ns-model-changed.date":"updateTime"}},yateModule:"mail",methods:{updateTime:function(){ns.Model.traverse("message",this.updateMessageRelativeTime),ns.Model.traverse("message-body",this.updateMessageRelativeTime),ns.Model.traverse("messages-from-item",this.updateMessageRelativeTime)},updateMessageRelativeTime:function(e){e.isValid()&&e.hasRelativeTime()&&e.updateTime()}}})},function(e,t){ns.View.define("messages-direct-line-placeholder",{events:{"ns-view-htmlinit":"onHtmlInit"},yateModule:"mail",methods:{onHtmlInit:function(){Jane.HAS_AD||this.$node.addClass("is-hidden")}}})},function(e,t){ns.View.define("message-dimensions-mixin",{methods:{getDimensions:function(e){return Daria.is2pane()?this.getDimensions2Pane(e):this.getDimensions3Pane(e)},getDimensions2Pane:function(e){var t,n,i={bottom:0,height:0,top:0};if(e){if(t=this.$node.find(".js-message-body"),0===t.length)return i;n=t.outerHeight()}else t=this.$node,n=t.height();return i.top=t.offset().top,i.height=n,i.bottom=i.top+i.height,i},getDimensions3Pane:function(e){var t,n,i={bottom:0,height:0,top:0};if(!this.node)return i;if(e){if(!(t=this.node.getElementsByClassName("js-message-body")[0]))return i;n=this.node.offsetTop+t.offsetTop}else t=this.node,n=t.offsetTop;return i.height=t.offsetHeight,i.top=n,i.bottom=i.top+i.height,i},isVisibleInScroller:function(e,t){if(t){if(!ns.Model.get("message-body",this.params).isValid())return!1}var n=this.getDimensions(t),i=n.height,r=n.top,o=n.bottom,s=e.top,a=e.bottom;return i>0&&(s<=r&&r<=a||s<=o&&o<=a||s>=r&&o>=a)}}})},function(e,t){!function(){ns.View.define("fixed-element-in-message-mixin",{events:{"daria:vApp:changeRightColumSize@show":"recalculateHeaderFixedState","daria:vFixedElementInMessageMixin:resize@show":"_fixedElementChangeHeight","daria:vScrollerMessage:scroll@show":"_fixedElementOnWindowScroll","daria:layout-changed@show":"_fixedElementOnWindowScroll","resize@show window":"recalculateHeaderFixedState","scroll@show window":"recalculateHeaderFixedState"},methods:{_fixedElementHeader:!1,fixedElementStart:function(){this.getModel("scroller-message").init(),this._fixedElementSetFixed3PaneHeader()},lazyFixedRecalc:function(){_.defer(this.fixedElementStart.bind(this))},fixedElementStop:function(){this._fixedElementReset3PaneHeader(),this._fixedElementHeader=!1},_fixedElementOnWindowScroll:function(){Daria.is3pane()?this._checkFixedState():Daria.isMessagePage()||this._fixedElementRecalcStickyHeader()},_checkFixedState:function(){var e=this.$node.find(".js-thread-toolbar"),t=this.getModel("scroller-message").getScrollTop(),n=t>0;this._fixedElementHeader!==n&&(this._fixedElementHeader=n,e.toggleClass("is-fixed",n))},_fixedElementRecalcStickyHeader:function(){var e=this.getModel("scroller-message").getScrollTop(),t=this.$node.offset(),n=e>t.top;if(n){var i=this.$node.closest(".js-cbt-item").height();i||(i=this.$node.height()),t.top+i<e+60&&(n=!1)}this._fixedElementToggleFixedHeader(n,t)},_fixedElementSetFixed3PaneHeader:function(){if(!Daria.is2pane()){var e=this.$node.find(".js-thread-toolbar");e.css("position","absolute");var t=this.$node.offset(),n=this.$node.outerWidth();e.css({position:"fixed",left:this._$window.scrollLeft()>0?this.node.getBoundingClientRect().left:t.left,top:this.getModel("scroller-message").getScroller().offset().top,width:n,"z-index":10});var i=this.$node.find(".js-mail-Message-Toolbar-Content").outerHeight();this.$node.css({paddingTop:i}),this._fixedElementChangeHeight()}},_fixedElementReset3PaneHeader:function(){var e=this.$node.find(".js-thread-toolbar"),t=this.$node.find(".js-mail-Message-Toolbar-Content");e.length&&(e[0].style.cssText="",e.removeClass("is-fixed")),t.length&&(t[0].style.cssText=""),this.$node.length&&(this.$node[0].style.cssText="")},_fixedElementToggleFixedHeader:function(e,t){this._fixedElementHeader=e;var n=this.$node.find(".js-thread-toolbar"),i=n.find(".js-mail-Message-Toolbar-Content"),r=n.width()-16;i.css({left:e?this._$window.scrollLeft()>0?this.node.getBoundingClientRect().left:t.left:"",width:e?r:""}),n.toggleClass("is-fixed",e)},_fixedElementChangeHeight:function(){var e=this.$node,t=e.find(".js-mail-Message-Toolbar-Content").outerHeight();e.find(".js-thread-toolbar").css({height:t}),Daria.is3pane()&&e.css({paddingTop:t})},recalculateHeaderFixedState:function(){Daria.is2pane()?this._fixedElementOnWindowScroll():this._fixedElementSetFixed3PaneHeader()}}})}()},function(e,t){ns.View.define("preserve-scroll-position-mixin",{events:{"vMessages:items-list-will-update@show":"_saveScrollPosition","vMessages:items-list-updated@show":"_restoreScrollPosition"},methods:{_shouldPreserveScrollPosition:!1,_offsetTop:null,_saveScrollPosition:function(){this._shouldPreserveScrollPosition&&(this._offsetTop=this.$node.offset().top-this._$document.scrollTop())},_restoreScrollPosition:function(){null!==this._offsetTop&&(this._$document.scrollTop(this.$node.offset().top-this._offsetTop),this._offsetTop=null)}}})},function(e,t){ns.View.define("fixed-message-toolbar-mixin",{events:{"daria:vScrollerMessage:scroll@show":"_fixedToolbar","daria:layout-changed@show":"_fixedToolbar","daria:vMessageToolbar:toolbar-didRendered":"_fixedToolbar","daria:vApp:changeRightColumSize@show":"_fixedToolbar","ns-view-htmlinit":"onInit","resize@show window":"_fixedToolbar","scroll@show window":"_fixedToolbar"},methods:{onInit:function(){var e=Daria.is2pane()?".js-cbt-item":".js-message-scroll-area";this.$header=this.$node.closest(e).find(".js-thread-toolbar"),0===this.$header.length&&Daria.isMessagePage()&&(this.$header=this.$node.find(".js-thread-toolbar")),this.$headerHeight=this.$header.height()||0,this.$messageHead=this.$node.find(".js-message-head"),this.getMessageToolbar()},getMessageToolbar:function(){this.$toolbar=this.$node.find(".js-message-toolbar-content")},_fixedToolbar:function(){this.getMessageToolbar();var e=this.getModel("scroller-message"),t=e.getScrollTop(),n=this.isVisibleInScroller(e.getVDimensions(),!1);if(this.isOpen()&&n){var i=this.getDimensions(!1),r=i.top+16,o=i.bottom-this.$toolbar.height()-60;Daria.isMessagePage()?r+=this.$headerHeight:(r-=this.$headerHeight,r+=this.$messageHead.height());var s=t>r&&t<=o;this._toggleFixed(s)}else this._toggleFixed(!1)},_toggleFixed:function(e){if(e){var t=this.$node.offset(),n=parseInt(this.$toolbar.css("padding-left"))+parseInt(this.$toolbar.css("padding-right")),i=this.$node.width()-n,r=this.$headerHeight;Daria.is3pane()&&(r+=this.getModel("scroller-message").getScroller().offset().top),this.$toolbar.css({left:this._$window.scrollLeft()>0?this.node.getBoundingClientRect().left:t.left,top:r,width:i})}else this.$toolbar&&this.$toolbar[0]&&(this.$toolbar[0].style.cssText="");this.$toolbar.toggleClass("is-fixed",e)},resetFixedToolbar:function(){this._toggleFixed(!1)}}})},function(e,t){ns.View.define("fixed-quick-reply-mixin",{events:{"daria:vScrollerMessage:scroll@show":"toggleStickyMode","message-body-full-load@show":"fixedInit","resize@show window":"onResize","scroll@show window":"onResize"},methods:{QR_OFFSET:20,fixedInit:function(){this.$qr=this.$node.find(".mail-QuickReply"),this.$message=this.$node.closest(".js-message-wrap"),this.getModel("scroller-message").init();var e=ns.Model.get("timeline-state");this.toggleFixedAfterTimeline=this.toggleFixedAfterTimeline.bind(this),e.on("ns-model-changed.height",this.toggleFixedAfterTimeline),this.toggleStickyMode()},fixedDestroy:function(){ns.Model.get("timeline-state").off("ns-model-changed.height",this.toggleFixedAfterTimeline)},toggleFixedAfterTimeline:function(){this.getModel("quick-reply-state").get(".fixed")&&this.stickyModeOn()},isQRInvisibleInScrollArea:function(){var e=this.getModel("scroller-message"),t=ns.Model.get("timeline-state").get(".height"),n=this.$qr.offset().top+this.$qr.innerHeight()+t;return e.getVDimensions().bottom-e.getScrollOffset()<=n},setFixed:function(e){this.getModel("quick-reply-state").setIfChanged(".fixed",e)},isFixed:function(){return this.getModel("quick-reply-state").get(".fixed")},stickyModeOn:function(){this.isFixed()||(this.setFixed(!0),this.handleResizeIfSticky())},stickyModeOff:function(){this.isFixed()&&(this.setFixed(!1),this.$node[0].style.cssText="",this.$qr.removeClass("is-fixed"),this.$qr[0].style.cssText="")},onResize:function(){this.handleResizeIfSticky(),this.toggleStickyMode()},handleResizeIfSticky:function(){this.isFixed()&&(this.$node.css({height:this.$node.innerHeight()}),this.$qr.addClass("is-fixed"),this.$qr.css({width:this.$node.innerWidth(),left:this._$window.scrollLeft()>0?this.$message[0].getBoundingClientRect().left:this.$message.offset().left,bottom:ns.Model.get("timeline-state").get(".height")}))},toggleStickyMode:function(){this.getModel("message").isHuman()&&(Math.floor(this.$qr.offset().top)>=Math.floor(this.$node.offset().top)+this.QR_OFFSET?(this.stickyModeOff(),this.isQRInvisibleInScrollArea()&&this.stickyModeOn()):this.stickyModeOn())}}})},function(e,t){ns.View.define("go-to-replied-message-mixin",{events:{"click .js-go-to-replied-message":"goToRepliedMessage"},methods:{goToRepliedMessage:function(){var e={mid:this.params.ids},t=this.getModel("message").get(".message_id");return t&&(e.message_id=t),ns.request(["message-in-reply-to"],e).then(function(e){var t=e[0].get(".mid");if(t){var n=ns.router.generateUrl("message",{ids:t});ns.page.go(n)}}),!1}}})},function(e,t){ns.View.edefine("infoline",{events:{"ns-view-show":"onShow","ns-view-hide":"onHide","ns-view-htmlinit":"onHtmlinit","daria:vApp:changeAppWidth@show":"onResize","daria:vApp:changeLeftColumWidth@show":"onResize","daria:vScrollerMessages:scroll@show":"onScroll","daria:layout-changed@show":"onScroll","daria:vMessagesItemWrap:message-closed":"onToggleOpenMessage","daria:vToolbar:message-opened":"onToggleOpenMessage","click .js-deselect-all":"onDeselectAllClick","click .js-select-folder":"onSelectFolderClick"},yateModule:"mail",ctor:function(){this._isMessageOpened=!1,this._isFixed=!1,this._isVisible=!1,this.recalculateValues=function(){_.defer(this._recalculateValues.bind(this))},this.onCompactModeChanged=function(){_.defer(this._onCompactModeChanged.bind(this))},this.onMessagesCheckedChanged=function(){_.defer(this._onMessagesCheckedChanged.bind(this))},this.onScroll=_.throttle(this.onScroll.bind(this),100)},models:{settings:{"ns-model-changed":!1,"ns-model-changed.liza_minified":"onCompactModeChanged","ns-model-changed.liza_minified_header":"onCompactModeChanged","ns-model-changed.size-layout-left":"onLayoutLeftSizeChanged"},"scroller-messages":!1,"messages-checked":{"ns-model-changed":"onMessagesCheckedChanged"},dimensions:{resize:"onResize"},folders:{"ns-model-changed":"onFoldersChanged"}},params:function(e){var t=["thread_id","ids","important"];for(var n in e)_.include(t,n)&&delete e[n];var i={};return Object.keys(e).sort().forEach(function(t){i[t]=e[t]}),i},methods:{MIN_LAYOUT_WIDTH:990,leftPanelWidth:null,offset:null,getToolbarHeight:function(){return ns.Model.get("settings").getSetting("hide_daria_left")?43:58},onHtmlinit:function(){this.$counter=this.$node.find(".js-messages-count"),_.defer(function(){this.onLayoutLeftSizeChanged(),this.toggleVisibility(),this.updateCounter()}.bind(this))},onShow:function(){Daria.is2pane()&&(this.getModel("scroller-messages").init(),this._isVisible&&this.togglePositionFixed(!1))},onHide:function(){this.togglePositionFixed(!1),this.resetValues()},onResize:function(){this._isVisible&&this.togglePositionFixed(this._isFixed)},onLayoutLeftSizeChanged:function(){this.leftPanelWidth=parseFloat(this.getModel("settings").getSetting("size-layout-left")),this.onResize()},onDeselectAllClick:function(){this.getModel("messages-checked").resetChecked()},_onCompactModeChanged:function(){if(!this._isVisible)return!1;Daria.is2pane()&&(this.recalculateValues(),this.togglePositionFixed(this._isFixed),this.onScroll())},togglePositionFixed:function(e){this._isFixed=e,this._isFixed?this.toFixed():this.toInitial()},toFixed:function(){this.$node.addClass("is-fixed"),this.$node.css({left:this.getPositionFixedLeft(),top:this.getToolbarHeight()})},toInitial:function(){this.$node.removeClass("is-fixed"),this.resetValues(),this.$node.css({left:"50%",top:"auto"})},getPositionFixedLeft:function(){var e=this.getModel("dimensions");return Math.max(this.MIN_LAYOUT_WIDTH,e.getWindowWidth())/2+this.leftPanelWidth/2},resetValues:function(){this.offset=null},_recalculateValues:function(){this.offset=this.getOffset()},getOffset:function(){return this.$node.offset()},toggleVisibility:function(){var e=this.getModel("messages-checked");this._isVisible=e.canShowInfoline(),this._isVisible&&(this._isVisible=!(this._isVisible&&this._isMessageOpened)),this._isVisible&&(e.atrigger("ns-model-reset-checked"),this.updateCounter()),this.$node.toggleClass("is-hidden",!this._isVisible),this.togglePositionFixed(this._isFixed)},_onMessagesCheckedChanged:function(){this.toggleVisibility(),this._isVisible&&this.updateCounter(),Daria.is2pane()&&this.onScroll(),this.toggleSelectFolderLinkDisabled(this.getModel("messages-checked").areAllCheckedInFolder())},updateCounter:function(){if(this.$counter){var e=this.getModel("messages-checked"),t=e.getSelectedFolder(),n=t?ns.Model.get("folder",{fid:t}).get(".count"):e.getCount();this.$counter.html(i18n("%Выбрано_N_писем",n))}},onScroll:function(){return!Daria.is3pane()&&(!!this._isVisible&&(_.isNull(this.offset)&&(this.offset=this.getOffset()),void(this.getModel("scroller-messages").getScrollTop()>this.offset.top-this.getToolbarHeight()?this._isFixed||this.togglePositionFixed(!0):this._isFixed&&this.togglePositionFixed(!1))))},onToggleOpenMessage:function(e){switch(e){case"daria:vMessagesItemWrap:message-closed":this._isMessageOpened=!1;break;case"daria:vToolbar:message-opened":this._isMessageOpened=!0}Daria.is2pane()&&this.toggleVisibility()},onSelectFolderClick:function(){var e=this.getModel("messages-checked");e.resetChecked(),e.selectFolder()},onFoldersChanged:function(){this.updateCounter()},showSelectFolderLink:function(){return Boolean(ns.page.current.params.current_folder)},toggleSelectFolderLinkDisabled:function(e){this.$node.find(".js-select-folder").toggleClass("is-disabled",e)}}})},function(e,t){ns.ViewCollection.edefine("notifications",{events:{"wheel .js-notifications-scroll":"onMouseWheel","mouseleave .js-notifications-scroll":"onMouseLeave","mouseenter .js-notifications-fake":"loadMore"},models:{notifications:{"ns-model-changed":"keepValid","ns-model-changed.queue":"onQueueUpdate","ns-model-insert":"forceUpdate","ns-model-remove":"onItemRemove"},"notifications-state":{"ns-model-changed":"keepValid","ns-model-changed.expanded":"onExpandedChange"}},split:{byModel:"notifications",intoViews:"notifications-item"},yateModule:"mail",methods:{DELAY_BEFORE_HIDE_FAKE:150,getScrollContent:function(e){return $(e.target).closest(".js-notifications-scroll")[0]},onExpandedChange:function(){var e=this.getModel("notifications-state").isExpanded();this.$node.toggleClass("is-expanded",e),e||this.getModel("notifications").insertFromQueue()},onMouseLeave:function(){this.$node.find(".js-notifications-scroll").scrollTop(0),this.getModel("notifications-state").collapse()},onMouseWheel:function(e){e.originalEvent.deltaY<0&&this.loadMore(),this.onWheel(e)},onItemRemove:function(){var e=this.getModel("notifications"),t=this.getModel("notifications-state");!e.hasNotifications()&&t.isExpanded()&&t.collapse(),this.forceUpdate()},loadMore:function(){this.getModel("notifications").insertFromQueue()},onQueueUpdate:function(){var e=this.$node.find(".js-notifications-fake");this.getModel("notifications").hasNotificationsInQueue()?e.addClass("is-show"):_.delay(function(){e.removeClass("is-show")},this.DELAY_BEFORE_HIDE_FAKE)}}},"prevent-scroll-propagation-mixin",ns.ViewCollection)},function(e,t){ns.View.define("notifications-item",{events:{"ns-view-show":"onShow",click:"onClick","click .js-remove":"onRemoveClick",mouseenter:"onMouseEnter"},models:{"notifications-item":"keepValid","notifications-state":{"ns-model-changed":"keepValid","ns-model-changed.expanded":"recalculateShowTimer"}},params:{id:null},ctor:function(){this.startTimerTime=0,this.stopTimerTime=0,this.timerId=null},yateModule:"mail",methods:{MIN_TIME_TO_SHOW:1e3,TIME_TO_SHOW:3e3,TIME_TO_SHOW_VIP:6e3,DELAY_BEFORE_REMOVE:300,DELAY_BEFORE_VIP_ANIMATION:400,onShow:function(){var e=this,t=this.getModel("notifications-item").isVIP(),n=this.getModel("notifications-state").isExpanded();_.defer(function(){e.$node.addClass("is-showed")}),t&&!n&&_.delay(function(){e.$node.addClass("is-vip")},this.DELAY_BEFORE_VIP_ANIMATION),n||(this.startTimerTime=Date.now(),this.startShowTimer(t?this.TIME_TO_SHOW_VIP:this.TIME_TO_SHOW)),this.sendMetric("Показ")},startShowTimer:function(e){this.timerId=setTimeout(this.remove.bind(this),e)},clearShowTimer:function(){this.timerId&&(this.stopTimerTime=Date.now(),clearTimeout(this.timerId))},onClick:function(){this.getModel("notifications-item").isCalendarEvent()||(this.remove(),this.getModel("notifications-state").collapse()),this.sendMetric("Клик на нотификацию")},onRemoveClick:function(e){e.preventDefault(),e.stopPropagation(),this.clearShowTimer(),this.remove()},remove:function(){if(this.isValid()){this.$node.addClass("is-removed");var e=this;_.delay(function(){ns.Model.get("notifications").remove(e.getModel("notifications-item"))},this.DELAY_BEFORE_REMOVE)}},onMouseEnter:function(){this.getModel("notifications-state").isExpanded()||this.getModel("notifications-state").expand()},recalculateShowTimer:function(){if(this.getModel("notifications-state").isExpanded())this.clearShowTimer();else{var e=this.stopTimerTime-this.startTimerTime,t=Math.max(this.TIME_TO_SHOW-e,this.MIN_TIME_TO_SHOW);this.startTimerTime||(this.startTimerTime=Date.now()),this.startShowTimer(t)}},sendMetric:function(e){Jane.c("Нотификации","Нотификации-оповещения",e)}}})},function(e,t){!function(){"use strict";function e(e){return"on"===e||!0===e}ns.View.define("browser-notifications",{events:{"ns-view-init":"onInit","daria:PushManager:permissionResolved@show":"onPermissionResolved","daria:PushManager:permissionConverted@show":"onPermissionConverted","daria:PushManager:subscriptionUpdated@show":"onSubscriptionUpdated","daria:folder-add-done":"onFolderCreation"},models:{settings:{"ns-model-changed":!1,"ns-model-changed.browser_notify_message":"updateSubscription","ns-model-changed.open-message-list":"updateServiceWorkerSettings","ns-model-changed.folder_thread_view":"updateServiceWorkerSettings","ns-model-changed.browser_notify_blank":"updateServiceWorkerSettings","ns-model-changed.layout":"updateServiceWorkerSettings","ns-model-changed.subscribed_folders":"updateSubscribedFolders"},folders:!1},yateModule:"mail",methods:{onInit:function(){Daria.Config.NO_SETTINGS||this._checkSubscription(this.isEnabled())},isEnabled:function(){var e=this.getModel("settings"),t=e.get(".browser_notify_message"),n=e.get(".browser_notify_requested");return t||!n&&Daria.IS_CORP},onSubscriptionUpdated:function(e,t){var n=this.getModel("settings");(n.getSetting("subscribed_folders")||"").replace(/&quot;/g,'"')!==t.folders&&n.setSettings({subscribed_folders:t.folders},{silent:!0})},onPermissionResolved:function(e,t){this.keepValid();var n=this.getModel("settings"),i=this._fillSubscriptionSettings({browser_notify_requested:!0},t),r=!0;n.setSettings(i).catch(function(){return r=!1}).then(function(){return Daria.monitoring.workflow.ipush(Object.assign({action:"requested",saved:r},i))})},onPermissionConverted:function(e,t){this.keepValid();var n=this.getModel("settings"),i=this._fillSubscriptionSettings({browser_notify_converted:!0},t),r=!0;n.setSettings(i).catch(function(){return r=!1}).then(function(){return Daria.monitoring.workflow.ipush(Object.assign({action:"converted",saved:r},i))})},_fillSubscriptionSettings:function(e,t){var n=this.getModel("settings"),i=n.get(".browser_notify_message"),r=t!==Daria.PushManager.PERMISSION.SKIPPED,o=t===Daria.PushManager.PERMISSION.GRANTED;return r&&!i&&o&&(e.browser_notify_message=o,e.subscribed_folders=JSON.stringify(this._getSubscribedFolders())),e},onFolderCreation:function(e,t){var n=this.getModel("folders").getParentFid(t),i=this._getSubscribedFolders();if(_.includes(i,n)){var r=JSON.stringify(i.concat(t).sort());this.getModel("settings").setSettings({subscribed_folders:r})}},updateSubscription:function(t,n,i,r,o){this.keepValid();var s=this.getModel("settings"),a=s.get(".browser_notify_message");o=e(o),a=e(a),o!==a&&this._checkSubscription(a,!0)},updateServiceWorkerSettings:function(){this.keepValid();var e=this.getModel("settings");return e.getSign("browser_notify_message")?Daria.PushManager.settings({openMessageInList:e.getSign("open-message-list"),folderThreadView:e.getSign("folder_thread_view"),openInNewWindow:e.getSign("browser_notify_blank"),is3pane:e.getSign("layout")>0}):Promise.resolve()},updateSubscribedFolders:function(){this.isEnabled()&&(Daria.PushManager.resetSubscriptionDatetime(),Daria.PushManager.subscribe(this._getSubscribedFolders(),!0))},_checkSubscription:function(e,t){e?Daria.PushManager.subscribe(this._getSubscribedFolders()):Daria.PushManager.unsubscribe(t)},_getSubscribedFolders:function(){return ns.Model.get("settings").getSign("subscribed_folders")}}})}()},function(e,t){ns.View.define("translate-select-lang",{events:{"click@show .js-lang":"_onClick","daria:vScrollerMessages:scroll@show":"_onScroll","daria:vScrollerMessage:scroll@show":"_onScroll","daria:layout-changed@show":"_onScroll"},models:{"translate-langs":!1},params:function(e){return{currentLang:e.currentLang}},ctor:function(){this._defaultOptions={withoutTail:Daria.isComposePage(),autofocus:!0,autoclose:!0,how:{my:"left top",at:"left-100 bottom"}},this._options={},this._popup=null},yateModule:"mail",methods:{open:function(e){return this._options=_.extend({},this._defaultOptions,e),this.update(this.params,{execFlag:ns.U.EXEC.PARALLEL}).then(this._onAfterRender,this)},close:function(){_.method("close")(this._popup)},_onClick:function(e){var t=$(e.currentTarget).data("lang");this.getModel("translate-langs").setRecent(t),this.trigger("selected",t)},_onScroll:function(){var e=_.get(this._popup,"node.widget");_.method("_position")(e)},_onAfterRender:function(){this._popup=nb.block(ns.renderNode({},"js-translate-select-lang","mail")),this._popup.setContent(this.node),this._popup.on("nb-opened",this._onOpened.bind(this)),this._popup.on("nb-closed",this._onClosed.bind(this)),this._popup.on("nb-destroyed",this._onDestroyed.bind(this)),this._popup.open(this._options)},_onOpened:function(){this.trigger("opened")},_onClosed:function(e,t){t.destroy(),this.trigger("closed")},_onDestroyed:function(){delete this._popup,this._options={},this.destroy()}}})},function(e,t){ns.View.define("bug-report",{events:{click:"onClick"},yateModule:"mail",methods:{onClick:function(){ns.action.run("user-feedback.show",{onlyReport:!0})}}})},function(e,t){!function(){var e=null,t=function(){if(e)return e;var t=new Vow.Promise;return Daria.Libs("DiskWidgetSaveApi",function(){t.fulfill()}),e=t};ns.View.define("disk-widget-save-popup",{yateModule:"mail",methods:{_deferred:null,open:function(e){return this._deferred?null:(this._deferred=new vow.Deferred,this.update({},{execFlag:ns.U.EXEC.PARALLEL}).then(function(){$(e.popup.where).closest(":focusable").focus(),this.nbPopup=nb.block(this.node),this.nbPopup.open(e.popup),Vow.all([ns.request([ns.Model.get("disk-secret-key")]),t()]).then(function(t){var n=t[0][0],i=this._getSaveToDiskWidgetParams(e,n.get(".key"),this.$node.find(".js-container")[0]);if(!i)return void this.destroySelf();this.$node.toggleClass("mail-DiskWidgetSavePopup-Content_Loaded",!0),this.widget=window.WidgetSaveApi.saveAndMove(i,{onClose:this.close.bind(this),onError:function(t){Jane.c(["Вложения","Ошибка сохранения на Диск",e.countLocationName||"Не задано"]),t&&Jane.ErrorLog.send({errorType:"disk-widget-save-popup_save-failed",error:JSON.stringify(t)})}})},function(){this.close(),Jane.ErrorLog.send({errorType:"disk-widget-save-popup_open-failed"})},this),this.nbPopup.on("nb-closed",this.destroySelf.bind(this))},this),this._deferred)},close:function(){this.nbPopup&&this.nbPopup.close()},destroySelf:function(){var e=this;_.defer(function(){e.nbPopup&&(e.nbPopup.destroy(),e.nbPopup=null),e.widget&&(e.widget.destroy(),e.widget=null),e._deferred&&(e._deferred.resolve(),e._deferred=null),e.destroy()})},_getSaveToDiskWidgetParams:function(e,t,n){var i=e.mid,r=e.hid,o=e.diskDownloadUrl,s=o?"disk-public":"mail",a=o||this._getMailAttachmentSrc(i,r);return a?{source:"copy-widget-yamail",type:s,sourceId:a,uid:ns.Model.get("account-information").get(".uid"),sk:t,container:n}:(Jane.ErrorLog.send({errorType:"disk-widget-save-popup_could-not-generate-source-id",mid:i,hid:r,diskDownloadUrl:o}),null)},_getMailAttachmentSrc:function(e,t){return e&&t?"/mail/file:"+e+":"+t:null}}})}()},function(e,t){ns.View.define("fake-head-background",{yateModule:"mail"})},function(e,t){ns.View.define("account-security",{models:{"account-information":{"ns-model-changed":"_redrawButton","daria:vAccountSecurityPopup:secure-clicked":"_onSecureAccountClicked"},"account-security-state":"_redrawButton"},events:{"ns-view-show":"_onShow","click .js-header-show-security-popup":"_onShowSecurityPopupClick"},yateModule:"mail",methods:{_accountSecurityShowData:{4:{metrikaButtonName:"Щит низкий уровень защиты (плохо)",origin:"mail_security_low",iconId:"mail--SecurityLevel-low",title:i18n("%Promo_AccountSecurity_LevelLow_Title"),buttonText:i18n("%Promo_AccountSecurity_LevelLow_Button")},16:{metrikaButtonName:"Щит средний уровень защиты (средне)",origin:"mail_security_middle",iconId:"mail--SecurityLevel-middle",title:i18n("%Promo_AccountSecurity_LevelMiddle_Title"),buttonText:i18n("%Promo_AccountSecurity_LevelMiddle_Button")}},_onShow:function(){this._countButtonMetrika("Показ")},_redrawButton:function(){this.invalidate(),this.update({},{execFlag:ns.U.EXEC.PARALLEL})},_onSecureAccountClicked:function(){this.getModel("account-security-state").set(".wasHidden",!0),this._redrawButton()},_getAccountSecurityShowData:function(){if(this.getModel("account-security-state").get(".wasHidden"))return null;var e=this.getModel("account-information"),t=e.get(".attributes.security_level")||0;return this._accountSecurityShowData[t]},_onShowSecurityPopupClick:function(){var e=this._getAccountSecurityShowData(),t=Daria.Config["passport-account-security"];t+="?origin="+e.origin,t+="&retpath="+encodeURIComponent(document.location.href),ns.View.create("account-security-popup").open({showData:{title:e.title,url:t,buttonText:e.buttonText},popup:{withTail:!0,where:this.$node.find(".js-header-show-security-popup"),how:{at:"bottom",my:"top+4"}}}),this._countButtonMetrika("Клик")},_countButtonMetrika:function(e){var t=this._getAccountSecurityShowData();t&&Jane.c("Залогиновая шапка. Правая часть","Защита аккаунта",t.metrikaButtonName,e)}}})},function(e,t){ns.View.define("account-security-popup",{events:{"click .js-secure-account":"onSecureClick"},yateModule:"mail",methods:{_deferred:null,_showData:null,open:function(e){return this._deferred?this._deferred.promise():(this._deferred=new vow.Deferred,this._showData=e.showData,this.update({},{execFlag:ns.U.EXEC.PARALLEL}).then(function(){$(e.popup.where).closest(":focusable").focus(),this.nbPopup=nb.block(this.node),this.nbPopup.open(e.popup),this.nbPopup.on("nb-closed",this.destroySelf.bind(this)),this._countPopupMetrika("Показ")},this),this._deferred.promise())},getShowData:function(){return this._showData},onSecureClick:function(){this.nbPopup&&this.nbPopup.close(),ns.Model.get("account-information").trigger("daria:vAccountSecurityPopup:secure-clicked"),this._countPopupMetrika('Клик в кнопку "Защитить"')},destroySelf:function(){var e=this;_.defer(function(){e.nbPopup&&(e.nbPopup.destroy(),e.nbPopup=null),e._deferred&&(e._deferred.resolve(),e._deferred=null),e.destroy()})},_countPopupMetrika:function(e){Jane.c("Залогиновая шапка. Правая часть","Защита аккаунта","Поясняющий поп-ап",e)}}})},function(e,t){!function(){ns.View.define("technical-problems-alert",{models:{"system-status":{"ns-model-changed":"forceUpdate"}},yateModule:"mail",events:{"click .js-technical-problems-alert-toggler":"toggleDescription"},methods:{ERRORS:{internal:{title:i18n("%TechProblem_INTERNAL_title"),description:i18n("%TechProblem_INTERNAL_desc")},db_ro:{title:i18n("%TechProblem_DB_RO_title"),description:i18n("%TechProblem_DB_RO_desc")},no_send:{title:i18n("%TechProblem_NO_SEND_title")},no_settings:{title:i18n("%TechProblem_NO_SETTINGS_title")},no_search:{title:i18n("%TechProblem_NO_SEARCH_title")},no_abook:{title:i18n("%TechProblem_NO_ABOOK_title")},no_attachment:{title:i18n("%TechProblem_NO_ATTACHMENT_title")},slow_output:{title:i18n("%TechProblem_SLOW_OUTPUT_title")},slow_input:{title:i18n("%TechProblem_SLOW_INPUT_title")},broken_mails:{title:i18n("%TechProblem_BROKEN_MAILS_title")},broken_folders_labels:{title:i18n("%TechProblem_BROKEN_FOLDERS_LABELS_title")}},getErrorMessage:function(){var e=this.getModel("system-status").getData()||{};if(!e.problem)return{};if("%"===e.problem[0]){var t=e.problem.slice(1);return this.ERRORS[t]||this.ERRORS.internal}return{title:e.problem}},toggleDescription:function(e){e.preventDefault(),this.$node.toggleClass("mail-Page-Intruder__full_info"),ns.events.trigger("daria:layout-changed"),$(window).trigger("resize"),Daria.Dialog.position()}}})}()},function(e,t){ns.View.define("async-view-loading-fix-mixin",{methods:{_getTree:function(){var e=ns.View.prototype._getTree.apply(this);return this.isLoading()&&this._fixTreeStateByModels(e),e},_fixTreeStateByModels:function(e){var t=!1,n=this._getModelsForTree();for(var i in n)if("error"===n[i].status&&!n[i][i]){t=!0;break}t&&(e.state="loading")}}})},function(e,t,n){"use strict";ns.View.define("yandex-plus",{events:{"ns-view-htmlinit":"onHtmlInit","ns-view-htmldestroy":"onHtmlDestroy","daria:promo-manager:show-yandex-plus-tooltip@show":"showVisible"},yateModule:"mail",methods:{onHtmlInit:function(){Daria.React.yandexPlus.render(this.node)},showVisible:function(){Daria.React.yandexPlus.render(this.node,{tooltipAutoShow:!0})},onHtmlDestroy:function(){Daria.React.yandexPlus.unmount(this.node)}}})},function(e,t,n){"use strict";ns.View.define("yandex-plus-renderer",{models:{settings:{"ns-model-changed":!1,"ns-model-changed.disable_promo":"forceUpdate"}},yateModule:"mail"})},function(e,t){ns.View.define("zen-in-messages",{events:{"ns-view-show":"onShow","ns-view-hide":"onHide","click .js-zen-messages-widget-toggler":"disableWidget","click .js-zen-messages-widget-content":"logMouseClick","mouseenter .js-zen-messages-widget-content":"logMouseEnter","mouseleave .js-zen-messages-widget-content":"cancelMouseEnter"},models:{"app-state":{"ns-model-changed":!1,"ns-model-changed.zen-loaded":"_update"},settings:{"ns-model-changed":!1,"ns-model-changed.show-zen-in-messages":"forceUpdate"}},yateModule:"themes",ctor:function(){this._onLoadZenWidget=this._onLoadZenWidget.bind(this),this.onWinResize=_.debounce(this.onWinResize.bind(this),200),this.logInViewport=_.throttle(this.logInViewport.bind(this),6e4),this.logMouseEnter=_.throttle(this.logMouseEnter.bind(this),6e4)},methods:{INTERSECTION_THRESHOLD:.9,onShow:function(){if(!this.getModel("app-state").get(".zen-loaded"))return void this._loadZenWidget();this.nodeId="js-zen-messages-widget-content",this._renderZenWidget(),this._observeIntersection()},onHide:function(){this._disconnectIntersection(),this.onWinResize.cancel()},onWinResize:function(){this.isVisible()&&this.nodeId&&this._renderZenWidget()},disableWidget:function(e){e.stopPropagation(),this.getModel("settings").setSettingOff("show-zen-in-messages"),this._metrika(["взаимодействие","клик в крестик"])},_metrika:function(e){Jane.c(["Zen","в списке писем"].concat(e||[]))},_update:function(){this.invalidate(),this.update()},_loadZenWidget:function(){window.yandexZenAsyncCallbacks=window.yandexZenAsyncCallbacks||[],window.yandexZenAsyncCallbacks.indexOf(this._onLoadZenWidget)>-1||(this._metrika(["показ","загрузка"]),window.yandexZenAsyncCallbacks.push(this._onLoadZenWidget),Daria.Libs("Ya.Zen"))},_onLoadZenWidget:function(){this._metrika(["показ","загружен"]),ns.Model.get("app-state").set(".zen-loaded",!0)},_renderZenWidget:function(){if($("."+this.nodeId,this.node).children().length)return void this._recalculateZenWidgetBox();window.YandexZen.renderWidget({clid:[410,411],container:"."+this.nodeId,successCallback:function(){this._metrika(["показ","удачный"])}.bind(this),failCallback:function(e){this._metrika(["показ","ошибка",e&&e.message||e])}.bind(this)})},_recalculateZenWidgetBox:function(){try{var e=document.createEvent("Event");e.initEvent("resize",!0,!0),e.data={custom:!0},window.dispatchEvent(e)}catch(e){Jane.ErrorLog.send({errorType:"zenWidgetError",reason:"recalculateZenWidgetBox",message:e&&e.message||e})}},_observeIntersection:function(){if(!window.IntersectionObserver)return void this._metrika(["взаимодействие","ограниченные данные"]);if(!this._observer){var e=function(e){e[0].intersectionRatio>=this.INTERSECTION_THRESHOLD&&this.logInViewport()}.bind(this);this._observer=new IntersectionObserver(e,{threshold:this.INTERSECTION_THRESHOLD}),this._observer.observe(this.node)}},_disconnectIntersection:function(){this._observer&&this._observer.disconnect(this.node)},logInViewport:function(){this._metrika(["взаимодействие","в области видимости"])},logMouseClick:function(){this._metrika(["взаимодействие","клик"])},logMouseEnter:function(){this._mouseEnterTimeout=setTimeout(function(){this._metrika(["взаимодействие","фокус"])}.bind(this),1e3)},cancelMouseEnter:function(){clearTimeout(this._mouseEnterTimeout)}}})},function(e,t){ns.View.define("unsubscribe-popup-promo-folder-react",{yateModule:"mail",models:{settings:!1},events:{"daria:unsubscribe-popup:hide":"onPopupClose","ns-view-htmldestroy":"onDestroy"},methods:{onPopupClose:function(){if(Daria.showUnsubscribePromoFolder()){Daria.React.UnsubscribePopup.renderUnsubscribePopupPromoBox(this.node,"folders"),Daria.React.UnsubscribePopup.showPromoFolderTooltip();this.getModel("settings").setSettings({"show-u-promo-folder":!0})}},onDestroy:function(){Daria.React.unmountReactBox(this.node)}}})},function(e,t,n){yr.externals["is-my-email"]=function(e){return ns.Model.get("account-information").isMyEmail(e)},yr.externals["has-experiment"]=Daria.hasExperiment,yr.externals["has-feature"]=Daria.hasFeature,yr.externals["show-doublesized-contacts"]=Daria.showDoubleSizedContacts,function(){function e(e){return t(),r.getFolderById(e)||r.getFolderBySymbol(e)}function t(){r||(r=ns.Model.get("folders"),o=ns.Model.get("labels"))}function i(e){var t=e.url,n=e["preview-supported"]||e["preview-src"],i="image"===e.class,r=[],o=_.includes(r,e.class);return(!t||n)&&(i&&n||o)}var r,o;n(1662),yr.externals["daria-url-docviewer"]=function(){var e=Array.prototype.slice.call(arguments);return e[0]=yr.nodeset2data(e[0]),Daria.url.docviewer.apply(Daria.url,e)},yr.externals["daria-url-attachment"]=function(){var e=Array.prototype.slice.call(arguments);return e[0]=yr.nodeset2data(e[0]),Daria.url.attachment.apply(Daria.url,e)},yr.externals["daria-url-attachment-archive"]=function(){var e=Array.prototype.slice.call(arguments);return e[0]=yr.nodeset2data(e[0]),Daria.url.archive.apply(Daria.url,e)},yr.externals["get-folder-by-fid-or-symbol"]=function(t){return yr.object2nodeset(e(t)||{})},yr.externals["get-folders-by-fids-or-symbols"]=function(t){for(var n=[],i=0;i<t.length;++i){var r=t[i].data,o=e(r);o&&n.push(o)}return yr.object2nodeset({folders:n})},yr.externals["get-human-size"]=Jane.getHumanSize,yr.externals["get-label-by-name"]=function(e){return t(),yr.object2nodeset(o.getLabelByName(e)||{})},yr.externals["get-label-by-lid"]=function(e){return t(),yr.object2nodeset(o.getLabelById(e)||{})},yr.externals["get-label-important"]=function(){return t(),yr.object2nodeset(o.getLabelBySymbolicName("important_label")||{})},yr.externals["is-message-imap-deleted"]=function(e){var t=ns.Model.get("message",{ids:e});return t.hasLabelWithSymbolicName("deleted_label")||t.get(".flags.imap-deleted")},yr.externals["get-shortcut-label-for"]=function(e,t,n){return Daria.Shortcuts.getShortcutLabelFor(e,t,n)},yr.externals["get-current-page"]=function(){return ns.page.current.page},yr.externals["get-current-page-params"]=function(){return yr.object2nodeset(ns.page.current.params)},yr.externals["get-current-page-param"]=function(e){return ns.page.current.params[e]},yr.externals["is-2pane"]=Daria.is2pane,yr.externals["is-3pane"]=Daria.is3pane,yr.externals["is-message-page"]=Daria.isMessagePage,yr.externals["is-folder"]=function(e,n){return!(!e||!n)&&(t(),r.isFolder(e,n))},yr.externals.avatar=function(e){return Daria.Recipients.add(e)},yr.externals["should-show-checkbox-inside-userpic"]=Daria.UISettings.shouldShowCheckboxInsideUserpic,yr.externals["get-labels-by-lid"]=function(e){t();var n=yr.nodeset2data(e);"string"==typeof n&&(n=[n]);for(var i=[],r=0,s=n.length;r<s;r++){var a=o.getLabelById(n[r]);if(a){var u=yr.object2nodeset(a)[0];u.name="label",i.push(u)}}return i},yr.externals["can-use-pins-by-params"]=function(e){return Daria.messages.checkUsePinsByParams(yr.nodeset2data(e))},yr.externals["can-show-pin-controls-by-params"]=Daria.messages.canShowPinControlsByParams,yr.externals["has-attachment-preview"]=function(e){return i(yr.nodeset2data(e))},yr.externals["get-count-attachments-to-show"]=function(e){var t=yr.nodeset2data(e);return t=_.isArray(t)?t:[t],t.length>3?3:t.length},yr.externals["get-message-presentation-by-fid"]=function(e,t){var n=yr.nodeset2data(e)||{},i={ids:n.mid,fid:t||ns.page.current.params.current_folder||n.fid},r=ns.Model.get("message-presentation",i);return r&&r.isValid()&&r.getData()?yr.object2nodeset(r.getData()):null},yr.externals["get-browser-notifications-permission"]=function(){return Daria.PushManager.permission()},yr.externals["has-browser-notifications-support"]=function(){return Daria.PushManager.compatible}}(),yr.externals["show-priority-label"]=function(){return Daria.showPriorityLabel()},yr.externals["new-theme"]=function(){return Daria.isNewTheme()},yr.externals["select-messages-direct-view"]=function(e){var t=yr.nodeset2data(e),n=Daria.getDirectBlockLayoutInfo("messages-direct").id,i=yr.object2nodeset(t[n]);return i[0].name=n,i[0].parent=e[0],i},yr.externals["allow-zen-in-messages"]=function(){return Daria.allowZenInMessages()},yr.externals["is-compose-button-moved"]=function(){return Daria.isComposeButtonMoved()}},function(e,t){!function(){function e(){var e=ns.page.current.params,t=[];if("only_atta"===e.extra_cond)t.push("#attachments?");else if("only_new"===e.extra_cond)t.push("#unread?");else{var n=yr.externals["get-folder-by-fid-or-symbol"](e.current_folder);t.push(yr.externals["url-content-folder"](n,!0))}return t.push(yr.externals["url-params"](e,["current_folder","sort_type","page_number","extra_cond","goto","currentDateId","nextDateId","prevDateId"])),t.join("")}function t(){var e=ns.page.current.params,t=[];if(e.current_folder){var n=yr.externals["get-folder-by-fid-or-symbol"](e.current_folder);t.push(yr.externals["url-content-folder"](n,!0))}else if(e.current_label){var i=yr.externals["get-label-by-lid"](e.current_label);t.push(yr.externals["url-content-label"](i,!0))}else e.thread_id?t.push("#thread/"+e.thread_id+"?"):"search"===e.search?t.push("#search?request="+encodeURIComponent(e.request)+"&"):"only_new"===e.extra_cond?t.push("#unread?"):"only_atta"===e.extra_cond?t.push("#attachments?"):"all"===e.goto?t.push("#all?"):t.push("#messages?");return t.join("")}function n(){var e=ns.page.current.params,t=[];return e.current_folder?(t=["ids","thread_id","page_number","current_folder","datePager","mrange","pager_top","currentDateId","prevDateId","nextDateId"],Daria.is2pane()&&t.push("extra_cond")):t=e.current_label?["ids","thread_id","page_number","current_label"]:e.thread_id?["ids","thread_id","page_number"]:"search"===e.search?["ids","thread_id","page_number","search","request"]:"only_new"===e.extra_cond||"only_atta"===e.extra_cond||"all"===e.goto?["ids","thread_id","page_number","extra_cond","goto"]:["ids","thread_id","page_number","pager_top"],yr.externals["url-params"](e,t)}yr.externals["url-params"]=function(e,t,n){e||(e=ns.page.current.params),t=$.makeArray(t),n=$.makeArray(n),t.push("threaded");var i=[];for(var r in e)!e.hasOwnProperty(r)||t.length&&-1!==t.indexOf(r)||n.length&&-1===n.indexOf(r)||i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return i.length?i.join("&")+"&":""},yr.externals["url-content-folder"]=function(e,t){return e=yr.nodeset2data(e),t=t?"?":"",e.symbol?"#"+e.symbol+t:"#folder/"+e.fid+t},yr.externals["url-content-label"]=function(e,t){return e=yr.nodeset2data(e),t=t?e.lid?"?":"&":"",e.lid?"#label/"+e.lid+t:"#messages?goto=all&extra_cond="+e.symbol+t},yr.externals["url-content-message"]=function(e,t){return e=yr.nodeset2data(e),Daria.Page.generateUrl.contentMessage(e,t)},yr.externals["url-content-sort"]=function(t,n){return Array.isArray(t)&&(t=yr.nodeset2scalar(t)),Array.isArray(n)&&(n=yr.nodeset2scalar(n)),e()+"sort_type="+t+("asc"===n?"1":"")+"&"},yr.externals["page-url-prefix"]=function(){return t()+n()}}()},function(e,t){yr.externals["from-user-emails"]=function(){return $.map(ns.Model.get("account-information").getFromEmails(),function(e){return{data:e}})}},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e=function e(t,n){this.options=$.extend({},e.defaults,n),this.options.showDoubleSizedContacts&&(this.options.suggestClass+=" mail-Suggest_size_double"),this.cache={},this.currentContent=[],this.currentTerm="",this._janeEvents={},this.dontClose=!1,this.isInputFieldBlur=!1,this.$document=$(document),this.changeInputField(t,!0)};no.extend(e.prototype,ns.Events),e.defaults={suggestClass:"nb-island _nb-fly-island _nb-suggest-container _nb-s-suggest mail-Suggest",handlers:{},cacheSize:50,multiple:!1,multipleSeparator:",",valuePrefix:"",minLength:0,delay:0,autoFocus:!0,getPositionNode:_.noop},e.extractLast=function(e,t){return e.split(t).pop()},e.mixPrivateMethodWithOption=function(e,t,n){return $.map(n,function(n){var i="_"+n,r=e[i],o=t[n];$.isFunction(e[i])&&($.isFunction(o)?o.isMixed||(t[n]=function(){o.apply(this,arguments),r.apply(e,arguments)}):t[n]=function(){r.apply(e,arguments)},t[n].isMixed=!0)}),t},e.prototype.changeInputField=function(e,t){return t||this.destroy(),this.$inputField=$(e),this.inputField=this.$inputField[0],this.inputField&&"object"===n(this.inputField)&&1===this.inputField.nodeType&&this.init(),this},e.prototype.init=function(){return this.$inputField.addClass("_init"),this.$inputField.attr({"data-nb":"suggest","data-class-suggest":this.options.suggestClass}),this.nbSuggest=nb.block(this.inputField),this.setOptions(this.options).bindEvents(),this.nbSuggest.$jUI.suggest({open:function(){this._opened||(this._opened=!0,this.trigger("open"))}.bind(this),close:function(){this._opened&&(this._opened=!1,this.trigger("close"))}.bind(this)}),this},e.prototype.isOpen=function(){return Boolean(this._opened)},e.prototype.setOptions=function(t){if(t=t||{},$.extend(this.options,t),e.mixPrivateMethodWithOption(this,this.options,["source","search","select","focus","response","open","close"]),this.nbSuggest){var n=this.options.getPositionNode();n&&$.extend(!0,this.options,{position:{of:n}}),this.nbSuggest.setOption(this.options)}return this.options.multiple&&(this.options.multipleSeparatorRegExp=new RegExp(this.options.multipleSeparator+"\\s*")),this},e.prototype.show=function(e){return this.nbSuggest&&(e||(e=this.nbSuggest.getValue()),this.nbSuggest.search(e)),this},e.prototype.hide=function(){return this.dontClose=!1,this.abort(),this.nbSuggest&&this.nbSuggest.close(),$.isFunction(this.options.hide)&&this.options.hide.apply(this.inputField,arguments),this},e.prototype.bindJaneEvent=function(e,t){var n=this[t].bind(this);return this._janeEvents[e]=n,ns.events.on(e,n),this},e.prototype.unbindJaneEvent=function(e){return ns.events.off(e,this._janeEvents[e]),delete this._janeEvents[e],this},e.prototype.bindEvents=function(){if(Modernizr.msie){var e=this,t=this.$inputField.data("uiSuggest"),n=t.close;t.close=function(){e.dontClose||n.apply(this,arguments)},this.$document.on("mousedown.daria-suggest",this._ieDocumentMousedown.bind(this)),this.$inputField.on("blur.daria-suggest",this._ieInputBlur.bind(this))}return this},e.prototype.focusedSelect=function(){var e=$.Event("keydown",{which:Jane.Common.keyCode.ENTER,keyCode:Jane.Common.keyCode.ENTER});this.currentContent.length?this.$inputField.trigger(e):this.options.select(e,{item:{email:this.currentTerm,value:this.currentTerm}})},e.prototype._isSuggestDropDown=function(e){var t=this.nbSuggest.$suggest;return t[0]===e.target||$.contains(t[0],e.target)},e.prototype._ieDocumentMousedown=function(e){var t=this._isSuggestDropDown(e);this.dontClose=t,this.isInputFieldBlur&&!t&&this.hide()},e.prototype._ieInputBlur=function(){this.isInputFieldBlur=!0},e.prototype.getValueWithPrevious=function(){var e="";if(this.nbSuggest&&(e=this.nbSuggest.getValue(),this.options.multiple)){var t=[].concat(this.options.previousValues);t.push(e),e=t.join(this.options.multipleSeparator+" ")}return e},e.prototype._convertHandlers=function(e){var t=this.options.extraParams;return $.map(this.options.handlers,function(n,i){return{name:i,params:$.extend({},t,n,e)}})},e.prototype._parseHandlersData=function(e,t){var n=this,i=[],r=e.length;return $.each(t,function(t,o){if(t>=r)return!1;var s;s=r>1?o[0].models:o.models,s||(s=[{}]),s[0].data||(s[0].data={});var a=n.parse(e[t].name,s[0].data);i=i.concat(a)}),i},e.prototype._getTerm=function(t){return this.options.multiple&&(t=e.extractLast(t,this.options.multipleSeparatorRegExp)),t},e.prototype._source=function(e,t){var n=this,i=this._getTerm(e.term);if(n.currentTerm=i,!(i.length<this.options.minLength)){var r={q:i},o=this._convertHandlers(r);if(this.abort(),!o.length)return void t([]);this.requests=[];var s=[];$.map(o,function(e){var t={};$.each(e.params,function(e,n){t[e+".0"]=n}),e.params=t,s.push(e.params)});var a=JSON.stringify(s);s=[];var u=this.getCache(a);if(u&&u.length>0)return void t(u);$.map(o,function(e){var t=$.url(Daria.api.models),i={"_model.0":e.name};ns.request.addRequestParams(i),t.addParams(i);var r=$.ajax({type:"get",dataType:"json",jsonp:"jsonp",scriptCharset:"utf-8",cache:!1,url:t.toString(),data:e.params});n.requests.push(r)}),$.when.apply($,this.requests).then(function(){var e=n._parseHandlersData(o,arguments);n.setCache(a,e),t(e)})}},e.prototype._select=function(e,t){this.trigger("select",e,t);for(var n,i=e;i&&"click"!==i.type;)i=i.originalEvent;if(i&&(n=$(i.target).hasClass("nb-button")?$(i.target):$(i.target).parents(".nb-button"),n.length>0&&(t.button=n,this.trigger("button-click",i,t))),this.dontClose=!1,!e.isDefaultPrevented()){var r=this.nbSuggest.getValue(),o=t.item.value;this.options.multiple&&(o=r.split(this.options.multipleSeparatorRegExp),o.pop(),o.push(t.item.value),o.push(""),o=o.join(this.options.multipleSeparator+" ")),this.nbSuggest.setValue(o),e.preventDefault(),this.trigger("value-set",e,t,o)}},e.prototype._focus=function(e){e.preventDefault()},e.prototype._response=function(e,t){t.content.length?this.currentContent=t.content:this.currentContent=[];var n=this.getValueWithPrevious();if(this.options.multiple&&n.split(this.options.multipleSeparator).length>1){var i=$.grep(t.content,function(e){return-1===n.indexOf(e.value)});t.content.length=0,t.content.push.apply(t.content,i)}},e.prototype._search=_.noop,e.prototype._open=_.noop,e.prototype._close=function(){this.dontClose=!1,this.isInputFieldBlur=!1,this.currentContent=[],this.currentTerm=""},e.prototype.abort=function(){return $.isArray(this.requests)&&$.map(this.requests,function(e){$.isFunction(e.abort)&&e.abort()}),delete this.requests,this},e.prototype.destroy=function(){var e=this;return this.abort(),this._close(),this.nbSuggest&&(this.nbSuggest.destroy(),this.nbSuggest=null),this.$inputField&&this.$inputField.off(".daria-suggest"),this.$document.off(".daria-suggest"),$.each(this._janeEvents,function(t){e.unbindJaneEvent(t)}),this.off(),this},e.prototype.parse=function(e,t){return t},e.prototype.setCache=function(e,t){return Object.keys(this.cache).length>=this.options.cacheSize&&this.clearCache(),this.cache[e]=t,this},e.prototype.getCache=function(e){return this.cache[e]},e.prototype.clearCache=function(){return this.cache={},this},Daria.Suggest=e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(295),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e=function(e,t){t&&_.isFunction(t.exclude)&&(this._getContactsToExclude=t.exclude,delete t.exclude),t=$.extend({countMax:11,timeoutOfCopyToSms:!1,noSmsButton:!Daria.Config.MAY_HAVE_SMS_COPY,renderItem:this._renderItem.bind(this),showDoubleSizedContacts:Daria.showDoubleSizedContacts()},t),this.countOfClick=0,this.showAbookPopupButton=t.showAbookPopupButton,this.prevTerm="",this.hasBeenShown=!1,this.preventLog=!1,Daria.Suggest.call(this,e,t)};Daria.extend(e,Daria.Suggest);var t=e.superClass;e.prototype.init=function(){return this.$inputField.closest(".js-compose-mail-input").hasClass("js-compose-mail-message-input")&&(this.options.noSmsButton=!0),t.init.apply(this,arguments)},e.prototype.bindEvents=function(){return this.$inputField.on("keydown.daria-suggest keypress.daria-suggest",this._keydownEvent.bind(this)).on("click.daria-suggest",this._clickEvent.bind(this)),t.bindEvents.apply(this,arguments)},e.prototype._keydownEvent=function(e){var t=Jane.Common.keyCode;if(e.which!==t.ENTER){var n=!1;if(","===$.trim(this.options.multipleSeparator))switch(e.which){case t.COMMA_CHAR:case t.SEMI_CHAR:n=!0;break;case t.SPACE_CHAR:n=this.currentContent.length<=1}n&&this.currentFocused&&(e.preventDefault(),this.focusedSelect(),this.currentFocused=null)}},e.prototype._clickEvent=function(){this.show(),this.countOfClick++},e.prototype._renderItem=function(e){this.hasBeenShown=!0;var t=this,n=e.item,i=$.extend({noSmsButton:!1},this.options);if("label"!==n.type){var r=!0;$.each(["name","email","phone"],function(e,i){var o="highlighted-"+i;r?(n[o]=t._highlight(n[i],t.currentTerm),-1!==n[o].indexOf("js-suggest-highlight")&&(r=!1)):n[o]=_.escape(n[i]),n[i]=_.escape(n[i])})}if(n.email){var o=ns.Model.get("account-information").getAllUserEmails();$.inArray(n.email,o)>-1&&(i.noSmsButton=!0)}return Daria.showDoubleSizedContacts()&&(i.doubleHeight=!0),n.options=i,yr.run("mail",e,"compose-email-suggest-item")},e.prototype._isTemplate=function(){var e=ns.page.current.params,t="template"===jpath(Daria,".composeParams.save_symbol")[0],n="template"===e.save_symbol,i=!1;if(e.ids){var r=ns.Model.get("message",{ids:e.ids}),o=ns.Model.get("folders").getFidBySymbol("template");i=r.inFolder(o)}return t||n||i},e.prototype._isInnerEvent=function(e){return!e.originalEvent},e.prototype._isKeydown=function(e){return Boolean(e.originalEvent&&"keydown"===e.originalEvent.type)},e.prototype._isDownOrUpKey=function(e){var t=Jane.Common.keyCode;return this._isKeydown(e)&&(e.originalEvent.which===t.DOWN||e.originalEvent.which===t.UP)},e.prototype._search=function(e){return this.searchEvent=e,t._search.apply(this,arguments)},e.prototype._source=function(e){this.preventLog?this.preventLog=!1:this.prevTerm=this.currentTerm;var n,i=this.searchEvent,r=this._getTerm(e.term);this._getContactsToExclude&&(n=this._getContactsToExclude());var o={"abook-suggest":_.extend({},n,{climit:35,glimit:5,useAbook:"on"})};return r||this._isTemplate()||(this._isInnerEvent(i)||this._isDownOrUpKey(i)?(o["abook-suggest"].popular=!0,this.showAbookPopupButton&&!this._getTerm(e.term)?Daria.showDoubleSizedContacts()?o["abook-suggest"].climit=4:o["abook-suggest"].climit=5:o["abook-suggest"].climit=10):o={}),this.options.handlers=o,t._source.apply(this,arguments)},e.prototype._select=function(e,n){var i=n.item,r="abook-popup-button"===i.type;if(this.log({pos:_.findIndex(this.currentContent,n.item),count:this.currentContent.length,search_text:r?"all-contacts":n.item.email,suggest_used:"yes",suggest_show:"yes"}),r)return t._select.apply(this,arguments);var o=this.options.handlers["abook-suggest"];o&&o.popular&&(Daria.composeParams=Daria.composeParams||{},Daria.composeParams["popular-suggest-general"]||(Daria.composeParams["popular-suggest-general"]=[]),Daria.composeParams["popular-suggest-general"].push(i.email),Jane.c(["popular_suggest","Клики в саджест популярных контактов"]));var s={q:this.currentTerm,section:"group"===i.type?"group":"email",id:i.id||i.mcid,title:i.title||i.email};return ns.forcedRequest("abook-suggest-report",s),t._select.apply(this,arguments)},e.prototype._focus=function(e,n){return this.currentFocused=n.item,t._focus.apply(this,arguments)},e.prototype._response=function(e,n){t._response.apply(this,arguments),1===n.content.length&&"label"===n.content[0].type&&(n.content.length=0)},e.prototype._open=function(){jpath(this,".options.handlers.abook-suggest.popular")[0]&&Jane.c(["popular_suggest","Показы саджеста популярных контактов"]),t._open.apply(this,arguments),this._updateGroupView()},e.prototype._close=function(){this.countOfClick=0,t._close.apply(this,arguments)},e.prototype._updateGroupView=function(){$(this.nbSuggest.$suggest).find(".js-group-data").each(function(){if(this.clientWidth<this.scrollWidth){var e=$(".js-group-more",this.parentNode)[0];e&&$(e).show().css("min-width",e.scrollWidth)}})},e.prototype._highlight=function(e,t){if(!e)return"";var n="/%strong-"+String($.now())+String(Math.round(1e3*Math.random())),i=Daria.regexpEscape(n);i=new RegExp(i+"(.*)"+i,"i"),t=Daria.regexpEscape(t);var r=new RegExp("("+t+")","i");return e=e.replace(r,n+"$1"+n),e=_.escape(e),e.replace(i,'<strong class="js-suggest-highlight">$1</strong>')},e.prototype.parse=function(e,t){switch(e){case"abook-suggest":return this.parseAbookSuggest(t)}return[]},e.prototype.parseAbookSuggest=function(e){var t=this;if("object"!==(void 0===e?"undefined":r(e))||!e)return[];$.isArray(e.contacts)||(e.contacts=[]),$.isArray(e.groups)||(e.groups=[]);var n=!0,i=$.map(e.contacts,function(e){var i="contact";e.popdom?i="popdom":n=!1,!e.ya_directory||"group"!==e.ya_directory.type&&"department"!==e.ya_directory.type||(i="wsContainer");var o="";return Array.isArray(e.phones)?"object"===r(e.phones[0])?e.phones[0].value&&(o=e.phones[0].value):e.phones[0]&&(o=e.phones[0]):"string"==typeof e.phones&&(o=e.phones),e=$.extend({},e,{type:i,phone:o}),e.value=t.parseValue(e),e}),o=$.map(e.groups,function(e){return n=!1,e=$.extend({},e,{type:"group",name:e.title?e.title:""}),e.email=$.map(e.contacts,function(e){return e.email}).join(", "),e.value=t.parseValue(e),e}),s=[].concat(i,o);return this.showAbookPopupButton&&!this.currentTerm&&s.length&&s.push({type:"abook-popup-button"}),n&&s.length&&(s=[].concat({type:"label",name:i18n("%Suggest_notify")+":"},s)),s},e.prototype.parseValue=function(e){var t,n=this;if("group"===e.type){t=$.map(e.contacts,function(e){return n.formatContact(e)}).join(", ")}else t=this.formatContact(e);return t},e.prototype.formatContact=function(e){return Jane.FormValidation.obj2contact(e)},e.prototype.log=function(e){this.preventLog||(e=Object.assign({project:"search_mail",action:"suggest-compose",product:i.b,uid:Daria.uid,filed:this.options.fieldType,suggest_used:"",suggest_show:this.hasBeenShown?"yes":"no",pos:"",count:"",user_text:this.currentTerm||this.prevTerm,search_text:""},e),"number"==typeof e.pos&&(e.pos=-1===e.pos?"":e.pos+1),e.user_text=e.user_text?encodeURIComponent(e.user_text):"",e.search_text=e.search_text?encodeURIComponent(e.search_text):"",Daria.searchClickCounter(_.pairs(e).map(function(e){return e.join("=")})),this.hasBeenShown=!1,this.prevTerm="",this.preventLog=!0)},Daria.Suggest.Contacts=e}()},function(e,t){!function(){var e=function(e,t){t=$.extend({noSmsButton:!0},t),Daria.Suggest.Contacts.call(this,e,t)};Daria.extend(e,Daria.Suggest.Contacts),e.prototype._source=function(){return this.options.handlers={"abook-suggest":{climit:35,glimit:5,phone:"must",useAbook:"on"}},Daria.Suggest.prototype._source.apply(this,arguments)},e.prototype.parse=function(e,t){return t&&$.isArray(t.groups)&&(t.groups=[]),Daria.Suggest.Contacts.prototype.parse.apply(this,arguments)},e.prototype.formatContact=function(e){return e.phone},Daria.Suggest.Phones=e}()},function(e,t){Daria.Folder=function(e){e=e||{};var t="boolean"!=typeof e.hotkey||e.hotkey;return{validate:function(){if(!this.folderName)return ns.events.trigger("folder.error",i18n("%Setup_Filters_Create_Error_Empty")),!1;var t,n=this.parent_folder&&this.parent_folder.data("fid")||e.parent_id,i=ns.Model.get("folders");t=n&&n!==i.getFidBySymbol("inbox")?i.getFolderByName(this.folderName,n):i.getFolderByName(this.folderName);var r=i.getFolderById(e.id);if(t&&t.fid!==n&&(!r||r.name!==this.folderName)){var o=t.symbol?i18n("%Folders_System_Msg",this.folderName):i18n("%Folders_Exists_Msg");return ns.events.trigger("folder.error",o),!1}return!0},setName:function(e){this.folderName=e},bindEvents:function(){var e=this,n=this.context.find(".b-teaser"),i=this.context.find(".b-form-layout_filters-simple");this.filter&&(this.filter.form=i.find("form"));var r={cls:"b-popup__field_error",active:!1,show:function(t){this.notification=e.context.find(".b-notification__text"),this.row=this.notification.closest(".b-table"),t&&(this.notification.text(t),this.row.addClass(this.cls),this.active=!0)},hide:function(){this.row.removeClass(this.cls),this.active=!1,ns.events.trigger("folder.error.hide")}};ns.events.on("folder.error",function(t,n){r.show(n),e.input.focus()}),this.context.on("click",".js-filter-open",function(){Jane.c(["Поп-ап создания папки","клик на открыть фильтры"]),n.fadeOut(150,function(){i.fadeIn(200,function(){var e=i.find("input:visible").eq(0).focus(),t=Daria.Autocompleter.getContact();t.setOptions({multiple:!1,formatResult:function(e){if(e.contacts){for(var t=[],n=0,i=e.contacts.length;n<i;n++)t.push(e.contacts[n].email);return t.join(", ")}return e.email}}),t.bindField({field:e,focus:1}),ns.events.trigger("folder.filter.toggle",!0)})})}),this.context.on("click",".js-filter-close",function(){Jane.c(["Поп-ап создания папки","клик на свернуть фильтры"]),i.fadeOut(150,function(){n.fadeIn(200,function(){e.input.focus(),ns.events.trigger("folder.filter.toggle",!0)})})}),this.context.on("click",".js-filter-link",function(){return e.filter=!1,e.success=function(e){ns.page.go("#setup/filters-create/folder="+e)},e.onCreate(),!1}),this.context.on("keyup",".js-input-name",function(n){var i=$.trim(this.value);i!=e.folderName&&r.active&&r.hide(),e.setName(i),13===n.which&&t&&e.onCreate()}),this.context.on("click",".js-dropdown-folder-labels",function(){var e=$(window).height()-$(this).rect().top-40;$(".js-folders-list").css("max-height",e).scrollTop(0)})},filter:Daria.FilterSimpleCreatePopup(),onCreate:function(){var e=this;if(this.setName($.trim(this.input[0].value)),this.validate()){Daria.Dialog.close();var t=null;this.parent_folder&&this.parent_folder[0]&&(t=this.parent_folder[0].getAttribute("data-fid")||null),this.create(function(t){e.filter&&(e.filter.params.move_folder=t,e.filter.create())},null,t)}},init:function(){this.input=$("input[name=folder_name]",this.context),this.parent_folder=$(".js-selink__folder",this.context),e.name&&this.input.val(e.name),this.bindEvents(),this.open()}}},Daria.Folder.REMOVABLE_SYMBOLS={archive:!0},Daria.Folder.remove=function(e){var t,n=ns.Model.get("folders"),i=n.getFolderById(e),r=_.escape(i.name),o=Number(i.count);n.getSubfolders(e).length&&(t=function e(t){for(var i=n.getSubfolders(t),r=0,o=0;o<i.length;o++){var s=i[o];r+=Number(s.count),n.getSubfolders([s.fid]).length&&(r+=e(s.fid))}return r}(e));var s=ns.Model.get("filters").getForFolder(e),a=[],u=[];$.each(s,function(e,t){jpath(t,'.condition[.div == "X-yandex-rpop-id"]').length?a.push(t):u.push(t)});var l,c=u.length,d=a.length,f=ns.page.current.params.current_folder,p=f===e||ns.Model.get("folders").hasChildByFid(e,f),h=function(t){var r=[{id:"do-folder-remove",params:{fid:e,force:t?"yes":""}},{id:"folders"}];Daria.Folder.REMOVABLE_SYMBOLS[i.symbol]&&r.unshift({id:"do-folder-set-symbol",params:{fid:e,symbol:""}}),ns.forcedRequest(r).then(function(){ns.events.trigger("daria:folder-remove-done",e),p&&ns.page.go(ns.router.generateUrl("messages",{current_folder:n.getFidBySymbol("inbox")}))},function(){ns.events.trigger("daria:folder-remove-fail",e)})},m=function(){for(var e=[],t=0;t<c;t++){var n=u[t];e.push('— «<a href="#setup/filters-create/id='+n.filid+'">'+_.escape(n.name)+"</a>»<br/>")}return e.join("")},g=[],v=i18n("%Folders_Remove_Button");o&&c?(g.push(i18n("%Folders_Remove_Messages_Filters_Body_1",o,c,r)),g.push(m()),g.push(i18n("%Folders_Remove_Messages_Filters_Body_2",o,c)),v=i18n("%Folders_Remove_Messages_Filters_Button",o,c)):o&&t?(g.push(i18n("%Folders_Remove_Messages_Submessages_Body",o+t,r)),l=o+t>1?2:1,v=i18n("%Folders_Remove_Messages_Button",l)):o?(g.push(i18n("%Folders_Remove_Messages_Body",o,r)),l=o>1?2:1,v=i18n("%Folders_Remove_Messages_Button",l)):t?(g.push(i18n("%Folders_Remove_SubMessages_Body",t,r)),l=t>1?2:1,v=i18n("%Folders_Remove_Messages_Button",l)):c&&(g.push(i18n("%Folders_Remove_Filters_Body_1",c)),g.push(m()),g.push(i18n("%Folders_Remove_Filters_Body_2",c)),v=i18n("%Folders_Remove_Filters_Button",c)),d&&g.push(i18n("%Folders_Remove_Collectors_Body",d,o||c)),o||c||d||t?Daria.Dialog.confirm({title:i18n("%Folders_Remove_Title"),width:450,body:g.join(""),okValue:v,okHandler:function(){if(h(!0),c||d){ns.Model.get("filters").getForFolder(e).forEach(function(e){Daria.Filter.removeById(e.filid)})}}}):h()},Daria.Folder.markRead=function(e){ns.Model.get("folders").getUnreadCount(e)&&(["message-nearest","message-thread-nearest"].forEach(function(e){ns.Model.invalidate(e)}),ns.forcedRequest([{id:"do-folder-mark-read",params:{fid:e}}]).fail(function(t){return Daria.MOPS.registerOperationFail("mark",{fid:e},t,"do-folder-mark-read")}),Daria.MOPS.markByFid("mark",e))},Daria.Folder.createFilter=function(e){var t=$(Jane.tt("setup:js-setup-folders-dialog-folder-filter",{fid:e,single:null}));t.on("click",".js-filter-link",function(){Jane.c(["Новый поп-ап фильтров","папка","клик на подробные условия"])});var n=Daria.FilterSimpleCreatePopupSingle({form:t.find("form")});Daria.Dialog.open({title:i18n("%Setup_Filters_Simple_title_folder"),body:t,buttons:[{name:"submit",value:i18n("%Setup_filters-create_title"),onclick:function(){return Jane.c(["Новый поп-ап фильтров","папка","клик по создать"]),n.create()}},{name:"cancel"}],oncancel:function(){Jane.c(["Новый поп-ап фильтров","папка","клик по отменить"])},width:432,onopen:function(){Jane.c(["Новый поп-ап фильтров","папка","показ поп-апа для создания фильтра на папку"]),t.find("input[name=field3]:eq(0)").focus(),n.bindAutocompleter()}})}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(96),o=(n.n(r),n(360)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){return Object(r.uniqueId)("recipient-")},u={messageByMid:function(e){return delete e.tid,u.messageById(e)},messageByTid:function(e){return delete e.mid,u.messageById(e)},messageById:function(e){var t=e.tid||e.mid;if(t){var n=ns.Model.get("message",{ids:t});if(n.isValid()){var i={dlid:n.get(".dlid"),dtype:n.get(".dtype"),socialLid:n.getSocialLID()};return e.mid&&(i.fid=n.get(".fid")),i}}},messageBySearchId:function(e){if(e.mid){var t=ns.Model.get("filter-search",{mids:e.mid});return t.isValid()?{fid:t.select(".envelopes.fid")[0],dlid:t.select(".envelopes.dlid")[0],dtype:t.select(".envelopes.dtype")[0],socialLid:t.getSocialLID()}:void 0}}},l=function(){function e(){var t=this;i(this,e),this._request=Object(r.debounce)(function(){t._makeRequest()},100),this._extractData=function(e){var n=e[0],i=n.getData();for(var o in i){var s=t._cache[o]||{},a=Object(r.extend)({},s,t._normalizeRecipientData(i[o],s.isGroup,s.isWsContainer));t._cache[o]=a,t._validityCache[t._extractEmail(a.email)]=a.valid}t._updateAvatarsViews(),t._queue=[],n.destroy()},this._cache={},this._validityCache={},this._queue=[],this._recipients={},this._shouldUpdate=[],this._retryCount=0}return s(e,[{key:"_makeRequest",value:function(){var e=this;return this._queue.length?this._retryCount<=0?vow.reject("no-more-retries"):ns.forcedRequest("recipients",{recipientsIds:JSON.stringify(this._queue)}).then(this._extractData).fail(function(){return e._retryCount--,e._makeRequest()}):vow.resolve()}},{key:"_resetRetryCount",value:function(){this._retryCount=3}},{key:"_getCacheId",value:function(e,t){return t?'"'+t+'" <'+e+">":"<"+e+">"}},{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=e.name,i=void 0===n?"":n,o=e.email,s=void 0===o?"":o,u=e.size,l=e.id,c=e.className,d=e.target,f=e.title,p=e.isGroup,h=void 0!==p&&p,m=e.isWsContainer,g=void 0!==m&&m,v=e.showUserAvatar,_=void 0===v||v,b=e.href,y=e.mid,w=e.tid,S=e.participantType,k=e.single;l=l||a(),u=-1!==Daria.Constants.AVATARS.VALID_SIZES.indexOf(parseInt(u,10))?u:Daria.Constants.AVATARS.DEFAULT_SIZE,Array.isArray(s)&&(s=s[0]),Array.isArray(i)&&(i=i[0]),i=i.replace(/"/g,""),h&&(s+="@yamail-group");var C=this._getCacheId(s,i);if(this._recipients[l])t&&(this._shouldUpdate.push(l),-1===this._queue.indexOf(C)&&this._queue.push(C),this._cache[C]&&delete this._cache[C]);else{var M=this._getMessageInfo({mid:y,tid:w,participantType:S,single:k});if(this._shouldUpdate.push(l),this._recipients[l]=Object(r.extend)({email:s,name:i,size:u,id:l,className:c,cacheId:C,target:d,title:f,showUserAvatar:_,href:b},this._createHref({href:b,message:M,title:f,participantType:S,email:s})),-1!==this._queue.indexOf(C)||this._cache[C]||this._queue.push(C),!this._cache[C]||!this._cache[C].normalized){var D=this._normalizeRecipientData(this._cache[C],h,g);this._cache[C]=D,this._validityCache[s]=D.valid}}return this._resetRetryCount(),this._request(),this._getAvatarView(l)}},{key:"requestContacts",value:function(e){var t=this;return e.forEach(function(e){var n=t._getCacheId(e.email,e.name);-1!==t._queue.indexOf(n)||t._cache[n]||t._queue.push(n)}),this._resetRetryCount(),this._makeRequest()}},{key:"_normalizeRecipientData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],i=e.type,s=e.url,a=e.urlSmall,u=e.mono,l=void 0===u?"":u,c=Object(r.extend)({},e,{fallbackAvatar:this._getSocialavatarsUrl(t||n?"group":"person"),shortMono:1===l.length,isGroup:t,isWsContainer:n,normalized:!0});return c.url="icon"===i?this._getSocialavatarsUrl(s):o.a.isIE()||o.a.isEdge()?a:s,c}},{key:"_getSocialavatarsUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(Daria.Config.socialavatarsUrl+"/v4/"+e+"."+(o.a.isIE()?"png":"svg")).replace(Daria.Constants.HTTP_REG_EX,"")}},{key:"getRecipient",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this._recipients[e]||{};return"url"in t&&!t.url&&delete t.url,Object(r.extend)({},this._cache[t.cacheId]||{},t)}},{key:"isEmailValid",value:function(e){return this._validityCache[e]}},{key:"getRecipientFromCache",value:function(e,t){return this._cache[this._getCacheId(t,e)]}},{key:"_getAvatarView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return ns.renderString(Object(r.extend)({},this.getRecipient(e),{isIE:o.a.isIE()}),"js-avatars","mail")}},{key:"_updateAvatarsViews",value:function(){var e=this,t=this._shouldUpdate.map(function(e){return"#"+e}).join(",");$(t).each(function(t,n){var i=$(n).closest(".js-bubble").get(0);if(i)Daria.BaseBubble.updateBubbleAtNode(i);else{var r=ns.html2node(e._getAvatarView(n.id));r&&n.parentElement.replaceChild(r.firstChild,n)}}),this._shouldUpdate=[],ns.events.trigger("daria:recipients:update")}},{key:"update",value:function(){var e=this;[].concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t){return e.add(e.getRecipient(t),!0)})}},{key:"cacheRecipient",value:function(e){var t=e.cacheId;delete e.cacheId,Daria.debug.enabled&&ns.assert(t,"Daria.Recipients.cacheRecipient","cacheId not specified for recipient"),this._cache[t]||(this._cache[t]=e,this._validityCache[this._extractEmail(e.email)]=e.valid)}},{key:"_getMessageInfo",value:function(e){var t=e.mid,n=e.tid,i=e.single,o=e.participantType,s=["messageByMid","messageBySearchId","messageByTid"],a={};return"from"===o&&n&&!i&&(s=s.reverse()),s.some(function(e){return a=u[e]({mid:t,tid:n})}),Object(r.isEmpty)(a)?{}:{fid:a.fid,dlid:a.dlid,dtype:a.dtype,isService:Boolean(a.dlid||a.dtype),serviceName:a.dlid||a.dtype&&a.dtype.name,socialLabel:a.socialLid&&ns.Model.get("labels").getLabelById(a.socialLid)}}},{key:"_createHref",value:function(e){var t=e.message,n=e.participantType,i=e.email,o=t.socialLabel,s=void 0===o?{}:o,a=t.fid,u=t.dtype,l=e.href,c=e.title,d=void 0,f=void 0;if(!1===l||!t)return{};if(Object(r.isEmpty)(s)){if(u&&u.sender&&24!==Number(u.id))d=ns.router.generateUrl("messages",{search:"search",type:u.id});else if(n&&a){var p={search:"search",scope:"to"===n?"hdr_to":"hdr_from",request:i};ns.Model.get("folders").isFolder(a,["sent","draft"])&&(p.scope="hdr_to"),"hdr_to"===p.scope?(p.fid=a,f=i18n("%Все_письма_на_этот_адрес")):f=i18n("%Все_письма_с_этого_адреса"),d=ns.router.generateUrl("messages",p)}}else d=ns.router.generateUrl("messages",{current_label:s.lid}),f=s.title;return d&&(l=d),f&&!c&&!1!==c&&(c=f),{href:l,title:c}}},{key:"_extractEmail",value:function(e){var t=Jane.FormValidation.splitContacts(e);return t.length?t[0].email:e}}]),e}();Daria.Recipients=new l},function(e,t,n){var i=n(1670);ns.View.define("loading-bar",{events:{"ns-view-htmlinit":"onHtmlInit","ns-view-htmldestroy":"onHtmlDestroy","ns-page-before-load@show":"start","ns-page-after-load@show":"stop","ns-page-error-load@show":"stop","fake-loader@show":"refresh","beforeunload window@show":"onBeforePageUnload"},ctor:function(){this.start=_.debounce(this.start.bind(this),200)},yateModule:"mail",methods:{onHtmlInit:function(){this.progressBar=new i({node:this.node.querySelector(".js-loading-bar")}),this._refreshLock=!1},onHtmlDestroy:function(){this.progressBar.reset(),this.progressBar=null},start:function(){if(this._refreshLock)return void(this._refreshLock=!1);this.progressBar.start()},stop:function(){this.progressBar.isInProgress()&&this.progressBar.finish(),this.start.cancel()},refresh:function(){this.progressBar.start(),this._refreshLock=!0},onBeforePageUnload:function(){this.progressBar.reset()}}})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=0,s=100;e.exports=function(){function e(t){var n=t.node,r=t.steps,a=void 0===r?4:r,u=t.stepDuration,l=void 0===u?.5:u;if(i(this,e),!n)throw new Error("Progress bar must have element");this._steps=a,this._minStepDuration=l,this._maxStepDuration=2*l,this._progress=o,this._progressLimit=s,this._progressTimeout=null,this._elem=n,this._makeStep()}return r(e,[{key:"_style",value:function(e){this._elem&&Object.assign(this._elem.style,e)}},{key:"_makeStep",value:function(){this._style({width:this._progress+"%"})}},{key:"_move",value:function(){var e=this;this._progress+=this._stepWidth,this._makeStep(),this._progressTimeout=setTimeout(function(){return e._move()},1e3*this._stepDuration)}},{key:"start",value:function(){var e=this;return Promise.resolve().then(function(){return e.isInProgress()?e.reset():null}).then(function(){return e._move()})}},{key:"finish",value:function(){var e=this;return clearTimeout(this._progressTimeout),this._progressLimit=s,this._progress=this._progressLimit,this._makeStep(),new Promise(function(t){setTimeout(function(){return e.reset().then(t)},1e3*e._minStepDuration)})}},{key:"reset",value:function(){var e=this;return clearTimeout(this._progressTimeout),this._progressLimit=s,this._progress=o,this._style({opacity:0,transitionDuration:0}),this._makeStep(),new Promise(function(t){setTimeout(function(){e._style({opacity:1,transitionDuration:e._minStepDuration+"s"}),t()},1e3*e._minStepDuration)})}},{key:"isInProgress",value:function(){return this._progress!==o}},{key:"_stepWidth",get:function(){var e=this._progressLimit-this._progress,t=Math.floor(e/this._steps);return Math.floor(t/_.random(1,this._steps))}},{key:"_stepDuration",get:function(){return _.random(this._minStepDuration,this._maxStepDuration)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){var i=n(234),r=n(303),o=n(246),s=n(238),a=(n.n(s),n(96)),u=n.n(a),l=n(264),c=n(304),d=n(393),f=n(305),p=n(306),h=n(394),m=n(395),g=n(307),v=n(1768),_=n(293),b=n(341),y=n(1880),w=n(1903),S=n(1914),k=n(1916),C=n(1919),M=n(1951),D=n(578),O=n(2020),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};Object(i.useStrict)(Object(o.h)());var T=u.a.memoize,P=T(function(){return new p.a}),E=T(function(){return new D.a}),I=T(function(){return new h.a(P())}),A=T(function(){return new _.a(P())}),j=T(function(){return new b.a}),R=T(function(){return{foldersStore:new l.a,labelsStore:new c.a,routerStore:new d.a,searchStore:new f.a,settingsStore:P()}}),L=T(function(){var e=R(),t={};return t.routerService=new m.a(e,t),t.searchService=new g.b(e,t),t.searchLogService=new g.a(e,t),t});Daria.React=Daria.React||{},Daria.React.UnsubscribePopup=y.a,Daria.React.renderSearchBox=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=R(),o=r.searchStore.searchQuery,a=x({},R(),L(),{shortcuts:j()}),u=A();u.currentShowText=o.currentSearchText,u.shouldShowCurrentSearchText=o.shouldShowCurrentSearchText,e.render(t.createElement(s.Provider,a,t.createElement(v.a,x({},i,{searchState:u}))),n)},Daria.React.unmountReactBox=function(t){e.unmountComponentAtNode(t)},Daria.React.foldSuggest=Object(i.action)(function(e){A().isFolded=e}),Daria.React.showLastSearchQuery=Object(i.action)(function(){var e=A(),t=L(),n=t.searchService,i=R(),r=i.searchStore;n.syncSearchQuery(),e.currentShowText=r.searchQuery.currentSuggestText}),Daria.React.activateSearch=function(){j().emit("Search:activate")},Daria.React.getSearchBoxIsFolded=function(){return A().isFolded},Daria.React.logSearchSuggest=function(e,t){var n=L(),i=n.searchLogService;i.logSearchSuggest(e),t&&(i.suggestWasLogged=!0)},Daria.React.logSearchMessageClick=function(e,t,n,i,r){L().searchLogService.logMessageClick(e,t,n,i,r)},Daria.React.wasSearchRequestSimplified=function(){return R().searchStore.wasSearchRequestSimplified},Daria.React.setSimplifiedParams=Object(i.action)(function(e){R().searchStore.simplifiedParams=e}),Daria.React.startSearch=function(e,t,n){var i=R(),r=i.searchStore,o=L(),s=o.searchService,a=A();n&&s.lockSearch(function(){r.searchQuery.reset()}),s.startSearch(e,t,a)},Daria.React.getSearchParams=function(){return R().searchStore.searchQuery.paramsForSearch},Daria.React.setInitialState=function(){L().searchService.syncSearchQuery()},Daria.React.reactOnAdvancedChange=function(e,t){var n=R(),r=n.searchStore;return Object(i.reaction)(function(){return r.searchQuery.getAutosearchParams()},t,e)},Daria.React.reactOnFoldedChange=function(e,t){var n=A();return Object(i.reaction)(function(){return n.isFolded},t,e)},Daria.React.getSearchSessionId=function(){return R().searchStore.getSearchSessionId()},Daria.React.dropSearchSession=function(){R().searchStore.dropSearchSession()},Daria.React.getSearchId=function(){return R().searchStore.getSearchId()},Daria.React.generateSearchId=function(){R().searchStore.generateSearchId()},Daria.React.saveShowSearchResultsTimestamp=function(){R().searchStore.saveShowSearchResultsTimestamp()},Daria.React.promoNPS=w.a,Daria.React.promoPopularContacts=S.a,Daria.React.promoUnsubscribePopup=k.a,Daria.React.promoCloseOldThemes=O.a,Daria.React.yandexPlus=C.a,Daria.React.initStatusline=function(){var e=E();return Object(M.a)({statuslineState:e,themeStore:I()}),e},Daria.React.MESSAGE_SENDING_PROGRESS_TIME=r.b}.call(t,n(237),n(232))},function(e,t,n){"use strict";var i=n(243),r=n(1673),o=n(391),s=n(278),a=n(253),u=n(1758),l=n(1759),c=n(392),d=n(1760);n(236);r.inject();var f={findDOMNode:l,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:u,unstable_batchedUpdates:a.batchedUpdates,unstable_renderSubtreeIntoContainer:d};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:i.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?i.getNodeFromInstance(e):null}},Mount:o,Reconciler:s});e.exports=f},function(e,t,n){"use strict";function i(){k||(k=!0,_.EventEmitter.injectReactEventListener(v),_.EventPluginHub.injectEventPluginOrder(a),_.EventPluginUtils.injectComponentTree(f),_.EventPluginUtils.injectTreeTraversal(h),_.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:S,EnterLeaveEventPlugin:u,ChangeEventPlugin:s,SelectEventPlugin:w,BeforeInputEventPlugin:o}),_.HostComponent.injectGenericComponentClass(d),_.HostComponent.injectTextComponentClass(m),_.DOMProperty.injectDOMPropertyConfig(r),_.DOMProperty.injectDOMPropertyConfig(l),_.DOMProperty.injectDOMPropertyConfig(y),_.EmptyComponent.injectEmptyComponentFactory(function(e){return new p(e)}),_.Updates.injectReconcileTransaction(b),_.Updates.injectBatchingStrategy(g),_.Component.injectEnvironment(c))}var r=n(1674),o=n(1675),s=n(1679),a=n(1682),u=n(1683),l=n(1684),c=n(1685),d=n(1691),f=n(243),p=n(1729),h=n(1730),m=n(1731),g=n(1732),v=n(1733),_=n(1735),b=n(1736),y=n(1742),w=n(1743),S=n(1744),k=!1;e.exports={inject:i}},function(e,t,n){"use strict";var i={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};e.exports=i},function(e,t,n){"use strict";function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function r(e){switch(e){case"topCompositionStart":return M.compositionStart;case"topCompositionEnd":return M.compositionEnd;case"topCompositionUpdate":return M.compositionUpdate}}function o(e,t){return"topKeyDown"===e&&t.keyCode===_}function s(e,t){switch(e){case"topKeyUp":return-1!==v.indexOf(t.keyCode);case"topKeyDown":return t.keyCode!==_;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function a(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,i){var u,l;if(b?u=r(e):O?s(e,n)&&(u=M.compositionEnd):o(e,n)&&(u=M.compositionStart),!u)return null;S&&(O||u!==M.compositionStart?u===M.compositionEnd&&O&&(l=O.getData()):O=h.getPooled(i));var c=m.getPooled(u,t,n,i);if(l)c.data=l;else{var d=a(n);null!==d&&(c.data=d)}return f.accumulateTwoPhaseDispatches(c),c}function l(e,t){switch(e){case"topCompositionEnd":return a(t);case"topKeyPress":return t.which!==k?null:(D=!0,C);case"topTextInput":var n=t.data;return n===C&&D?null:n;default:return null}}function c(e,t){if(O){if("topCompositionEnd"===e||!b&&s(e,t)){var n=O.getData();return h.release(O),O=null,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!i(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return S?null:t.data;default:return null}}function d(e,t,n,i){var r;if(!(r=w?l(e,n):c(e,n)))return null;var o=g.getPooled(M.beforeInput,t,n,i);return o.data=r,f.accumulateTwoPhaseDispatches(o),o}var f=n(287),p=n(247),h=n(1676),m=n(1677),g=n(1678),v=[9,13,27,32],_=229,b=p.canUseDOM&&"CompositionEvent"in window,y=null;p.canUseDOM&&"documentMode"in document&&(y=document.documentMode);var w=p.canUseDOM&&"TextEvent"in window&&!y&&!function(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}(),S=p.canUseDOM&&(!b||y&&y>8&&y<=11),k=32,C=String.fromCharCode(k),M={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},D=!1,O=null,x={eventTypes:M,extractEvents:function(e,t,n,i){return[u(e,t,n,i),d(e,t,n,i)]}};e.exports=x},function(e,t,n){"use strict";function i(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var r=n(240),o=n(267),s=n(364);r(i.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[s()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,i=n.length,r=this.getText(),o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);var a=t>1?1-t:void 0;return this._fallbackText=r.slice(e,a),this._fallbackText}}),o.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(258),o={data:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(258),o={data:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){var i=D.getPooled(E.change,e,t,n);return i.type="change",S.accumulateTwoPhaseDispatches(i),i}function r(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function o(e){var t=i(A,e,x(e));M.batchedUpdates(s,t)}function s(e){w.enqueueEvents(e),w.processEventQueue(!1)}function a(e,t){I=e,A=t,I.attachEvent("onchange",o)}function u(){I&&(I.detachEvent("onchange",o),I=null,A=null)}function l(e,t){var n=O.updateValueIfChanged(e),i=!0===t.simulated&&L._allowSimulatedPassThrough;if(n||i)return e}function c(e,t){if("topChange"===e)return t}function d(e,t,n){"topFocus"===e?(u(),a(t,n)):"topBlur"===e&&u()}function f(e,t){I=e,A=t,I.attachEvent("onpropertychange",h)}function p(){I&&(I.detachEvent("onpropertychange",h),I=null,A=null)}function h(e){"value"===e.propertyName&&l(A,e)&&o(e)}function m(e,t,n){"topFocus"===e?(p(),f(t,n)):"topBlur"===e&&p()}function g(e,t,n){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return l(A,n)}function v(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function _(e,t,n){if("topClick"===e)return l(t,n)}function b(e,t,n){if("topInput"===e||"topChange"===e)return l(t,n)}function y(e,t){if(null!=e){var n=e._wrapperState||t._wrapperState;if(n&&n.controlled&&"number"===t.type){var i=""+t.value;t.getAttribute("value")!==i&&t.setAttribute("value",i)}}}var w=n(288),S=n(287),k=n(247),C=n(243),M=n(253),D=n(258),O=n(367),x=n(325),T=n(326),P=n(368),E={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},I=null,A=null,j=!1;k.canUseDOM&&(j=T("change")&&(!document.documentMode||document.documentMode>8));var R=!1;k.canUseDOM&&(R=T("input")&&(!document.documentMode||document.documentMode>9));var L={eventTypes:E,_allowSimulatedPassThrough:!0,_isInputEventSupported:R,extractEvents:function(e,t,n,o){var s,a,u=t?C.getNodeFromInstance(t):window;if(r(u)?j?s=c:a=d:P(u)?R?s=b:(s=g,a=m):v(u)&&(s=_),s){var l=s(e,t,n);if(l){return i(l,n,o)}}a&&a(e,u,t),"topBlur"===e&&y(t,u)}};e.exports=L},function(e,t,n){"use strict";function i(e,t,n){"function"==typeof e?e(t.getPublicInstance()):o.addComponentAsRefTo(t,e,n)}function r(e,t,n){"function"==typeof e?e(null):o.removeComponentAsRefFrom(t,e,n)}var o=n(1681),s={};s.attachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&i(n,e,t._owner)}},s.shouldUpdateRefs=function(e,t){var n=null,i=null;null!==e&&"object"==typeof e&&(n=e.ref,i=e._owner);var r=null,o=null;return null!==t&&"object"==typeof t&&(r=t.ref,o=t._owner),n!==r||"string"==typeof r&&o!==i},s.detachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&r(n,e,t._owner)}},e.exports=s},function(e,t,n){"use strict";function i(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)}var r=n(235),o=(n(233),{addComponentAsRefTo:function(e,t,n){i(n)||r("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){i(n)||r("120");var o=n.getPublicInstance();o&&o.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});e.exports=o},function(e,t,n){"use strict";var i=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];e.exports=i},function(e,t,n){"use strict";var i=n(287),r=n(243),o=n(298),s={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},a={eventTypes:s,extractEvents:function(e,t,n,a){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var u;if(a.window===a)u=a;else{var l=a.ownerDocument;u=l?l.defaultView||l.parentWindow:window}var c,d;if("topMouseOut"===e){c=t;var f=n.relatedTarget||n.toElement;d=f?r.getClosestInstanceFromNode(f):null}else c=null,d=t;if(c===d)return null;var p=null==c?u:r.getNodeFromInstance(c),h=null==d?u:r.getNodeFromInstance(d),m=o.getPooled(s.mouseLeave,c,n,a);m.type="mouseleave",m.target=p,m.relatedTarget=h;var g=o.getPooled(s.mouseEnter,d,n,a);return g.type="mouseenter",g.target=h,g.relatedTarget=p,i.accumulateEnterLeaveDispatches(m,g,c,d),[m,g]}};e.exports=a},function(e,t,n){"use strict";var i=n(277),r=i.injection.MUST_USE_PROPERTY,o=i.injection.HAS_BOOLEAN_VALUE,s=i.injection.HAS_NUMERIC_VALUE,a=i.injection.HAS_POSITIVE_NUMERIC_VALUE,u=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE,l={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+i.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,as:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:r|o,cite:0,classID:0,className:0,cols:a,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:r|o,muted:r|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,playsInline:o,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:a,rowSpan:s,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:r|o,shape:0,size:a,sizes:0,span:a,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:s,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}};e.exports=l},function(e,t,n){"use strict";var i=n(328),r=n(1690),o={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup};e.exports=o},function(e,t,n){"use strict";var i=n(235),r=n(279),o=n(247),s=n(1687),a=n(249),u=(n(233),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(o.canUseDOM||i("56"),t||i("57"),"HTML"===e.nodeName&&i("58"),"string"==typeof t){var n=s(t,a)[0];e.parentNode.replaceChild(n,e)}else r.replaceChildWithTree(e,t)}});e.exports=u},function(e,t,n){"use strict";function i(e){var t=e.match(c);return t&&t[1].toLowerCase()}function r(e,t){var n=l;l||u(!1);var r=i(e),o=r&&a(r);if(o){n.innerHTML=o[1]+e+o[2];for(var c=o[0];c--;)n=n.lastChild}else n.innerHTML=e;var d=n.getElementsByTagName("script");d.length&&(t||u(!1),s(d).forEach(t));for(var f=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return f}var o=n(247),s=n(1688),a=n(1689),u=n(233),l=o.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;e.exports=r},function(e,t,n){"use strict";function i(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&s(!1),"number"!=typeof t&&s(!1),0===t||t-1 in e||s(!1),"function"==typeof e.callee&&s(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function o(e){return r(e)?Array.isArray(e)?e.slice():i(e):[e]}var s=n(233);e.exports=o},function(e,t,n){"use strict";function i(e){return s||o(!1),f.hasOwnProperty(e)||(e="*"),a.hasOwnProperty(e)||(s.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",a[e]=!s.firstChild),a[e]?f[e]:null}var r=n(247),o=n(233),s=r.canUseDOM?document.createElement("div"):null,a={},u=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],d=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],f={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:c,th:c};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(e){f[e]=d,a[e]=!0}),e.exports=i},function(e,t,n){"use strict";var i=n(328),r=n(243),o={dangerouslyProcessChildrenUpdates:function(e,t){var n=r.getNodeFromInstance(e);i.processUpdates(n,t)}};e.exports=o},function(e,t,n){"use strict";function i(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function r(e,t){t&&(J[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&g("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&g("60"),"object"==typeof t.dangerouslySetInnerHTML&&V in t.dangerouslySetInnerHTML||g("61")),null!=t.style&&"object"!=typeof t.style&&g("62",i(e)))}function o(e,t,n,i){if(!(i instanceof j)){var r=e._hostContainerInfo,o=r._node&&r._node.nodeType===q,a=o?r._node:r._ownerDocument;U(t,a),i.getReactMountReady().enqueue(s,{inst:e,registrationName:t,listener:n})}}function s(){var e=this;C.putListener(e.inst,e.registrationName,e.listener)}function a(){var e=this;T.postMountWrapper(e)}function u(){var e=this;I.postMountWrapper(e)}function l(){var e=this;P.postMountWrapper(e)}function c(){L.track(this)}function d(){var e=this;e._rootNodeID||g("63");var t=B(e);switch(t||g("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[D.trapBubbledEvent("topLoad","load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in W)W.hasOwnProperty(n)&&e._wrapperState.listeners.push(D.trapBubbledEvent(n,W[n],t));break;case"source":e._wrapperState.listeners=[D.trapBubbledEvent("topError","error",t)];break;case"img":e._wrapperState.listeners=[D.trapBubbledEvent("topError","error",t),D.trapBubbledEvent("topLoad","load",t)];break;case"form":e._wrapperState.listeners=[D.trapBubbledEvent("topReset","reset",t),D.trapBubbledEvent("topSubmit","submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[D.trapBubbledEvent("topInvalid","invalid",t)]}}function f(){E.postUpdateWrapper(this)}function p(e){Q.call(X,e)||(Y.test(e)||g("65",e),X[e]=!0)}function h(e,t){return e.indexOf("-")>=0||null!=t.is}function m(e){var t=e.type;p(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var g=n(235),v=n(240),_=n(1692),b=n(1693),y=n(279),w=n(329),S=n(277),k=n(373),C=n(288),M=n(322),D=n(301),O=n(361),x=n(243),T=n(1703),P=n(1718),E=n(381),I=n(1719),A=(n(251),n(1720)),j=n(1727),R=(n(249),n(300)),L=(n(233),n(326),n(333),n(367)),N=(n(337),n(236),O),F=C.deleteListener,B=x.getNodeFromInstance,U=D.listenTo,$=M.registrationNameModules,z={string:!0,number:!0},V="__html",H={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},q=11,W={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},G={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},K={listing:!0,pre:!0,textarea:!0},J=v({menuitem:!0},G),Y=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,X={},Q={}.hasOwnProperty,Z=1;m.displayName="ReactDOMComponent",m.Mixin={mountComponent:function(e,t,n,i){this._rootNodeID=Z++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(d,this);break;case"input":T.mountWrapper(this,o,t),o=T.getHostProps(this,o),e.getReactMountReady().enqueue(c,this),e.getReactMountReady().enqueue(d,this);break;case"option":P.mountWrapper(this,o,t),o=P.getHostProps(this,o);break;case"select":E.mountWrapper(this,o,t),o=E.getHostProps(this,o),e.getReactMountReady().enqueue(d,this);break;case"textarea":I.mountWrapper(this,o,t),o=I.getHostProps(this,o),e.getReactMountReady().enqueue(c,this),e.getReactMountReady().enqueue(d,this)}r(this,o);var s,f;null!=t?(s=t._namespaceURI,f=t._tag):n._tag&&(s=n._namespaceURI,f=n._tag),(null==s||s===w.svg&&"foreignobject"===f)&&(s=w.html),s===w.html&&("svg"===this._tag?s=w.svg:"math"===this._tag&&(s=w.mathml)),this._namespaceURI=s;var p;if(e.useCreateElement){var h,m=n._ownerDocument;if(s===w.html)if("script"===this._tag){var g=m.createElement("div"),v=this._currentElement.type;g.innerHTML="<"+v+"></"+v+">",h=g.removeChild(g.firstChild)}else h=o.is?m.createElement(this._currentElement.type,o.is):m.createElement(this._currentElement.type);else h=m.createElementNS(s,this._currentElement.type);x.precacheNode(this,h),this._flags|=N.hasCachedChildNodes,this._hostParent||k.setAttributeForRoot(h),this._updateDOMProperties(null,o,e);var b=y(h);this._createInitialChildren(e,o,i,b),p=b}else{var S=this._createOpenTagMarkupAndPutListeners(e,o),C=this._createContentMarkup(e,o,i);p=!C&&G[this._tag]?S+"/>":S+">"+C+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(a,this),o.autoFocus&&e.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(u,this),o.autoFocus&&e.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"select":case"button":o.autoFocus&&e.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(l,this)}return p},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];if(null!=r)if($.hasOwnProperty(i))r&&o(this,i,r,e);else{"style"===i&&(r&&(r=this._previousStyleCopy=v({},t.style)),r=b.createMarkupForStyles(r,this));var s=null;null!=this._tag&&h(this._tag,t)?H.hasOwnProperty(i)||(s=k.createMarkupForCustomAttribute(i,r)):s=k.createMarkupForProperty(i,r),s&&(n+=" "+s)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+k.createMarkupForRoot()),n+=" "+k.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var i="",r=t.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&(i=r.__html);else{var o=z[typeof t.children]?t.children:null,s=null!=o?null:t.children;if(null!=o)i=R(o);else if(null!=s){var a=this.mountChildren(s,e,n);i=a.join("")}}return K[this._tag]&&"\n"===i.charAt(0)?"\n"+i:i},_createInitialChildren:function(e,t,n,i){var r=t.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&y.queueHTML(i,r.__html);else{var o=z[typeof t.children]?t.children:null,s=null!=o?null:t.children;if(null!=o)""!==o&&y.queueText(i,o);else if(null!=s)for(var a=this.mountChildren(s,e,n),u=0;u<a.length;u++)y.queueChild(i,a[u])}},receiveComponent:function(e,t,n){var i=this._currentElement;this._currentElement=e,this.updateComponent(t,i,e,n)},updateComponent:function(e,t,n,i){var o=t.props,s=this._currentElement.props;switch(this._tag){case"input":o=T.getHostProps(this,o),s=T.getHostProps(this,s);break;case"option":o=P.getHostProps(this,o),s=P.getHostProps(this,s);break;case"select":o=E.getHostProps(this,o),s=E.getHostProps(this,s);break;case"textarea":o=I.getHostProps(this,o),s=I.getHostProps(this,s)}switch(r(this,s),this._updateDOMProperties(o,s,e),this._updateDOMChildren(o,s,e,i),this._tag){case"input":T.updateWrapper(this),L.updateValueIfChanged(this);break;case"textarea":I.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(f,this)}},_updateDOMProperties:function(e,t,n){var i,r,s;for(i in e)if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&null!=e[i])if("style"===i){var a=this._previousStyleCopy;for(r in a)a.hasOwnProperty(r)&&(s=s||{},s[r]="");this._previousStyleCopy=null}else $.hasOwnProperty(i)?e[i]&&F(this,i):h(this._tag,e)?H.hasOwnProperty(i)||k.deleteValueForAttribute(B(this),i):(S.properties[i]||S.isCustomAttribute(i))&&k.deleteValueForProperty(B(this),i);for(i in t){var u=t[i],l="style"===i?this._previousStyleCopy:null!=e?e[i]:void 0;if(t.hasOwnProperty(i)&&u!==l&&(null!=u||null!=l))if("style"===i)if(u?u=this._previousStyleCopy=v({},u):this._previousStyleCopy=null,l){for(r in l)!l.hasOwnProperty(r)||u&&u.hasOwnProperty(r)||(s=s||{},s[r]="");for(r in u)u.hasOwnProperty(r)&&l[r]!==u[r]&&(s=s||{},s[r]=u[r])}else s=u;else if($.hasOwnProperty(i))u?o(this,i,u,n):l&&F(this,i);else if(h(this._tag,t))H.hasOwnProperty(i)||k.setValueForAttribute(B(this),i,u);else if(S.properties[i]||S.isCustomAttribute(i)){var c=B(this);null!=u?k.setValueForProperty(c,i,u):k.deleteValueForProperty(c,i)}}s&&b.setValueForStyles(B(this),s,this)},_updateDOMChildren:function(e,t,n,i){var r=z[typeof e.children]?e.children:null,o=z[typeof t.children]?t.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=null!=r?null:e.children,l=null!=o?null:t.children,c=null!=r||null!=s,d=null!=o||null!=a;null!=u&&null==l?this.updateChildren(null,n,i):c&&!d&&this.updateTextContent(""),null!=o?r!==o&&this.updateTextContent(""+o):null!=a?s!==a&&this.updateMarkup(""+a):null!=l&&this.updateChildren(l,n,i)},getHostNode:function(){return B(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"input":case"textarea":L.stopTracking(this);break;case"html":case"head":case"body":g("66",this._tag)}this.unmountChildren(e),x.uncacheNode(this),C.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return B(this)}},v(m.prototype,m.Mixin,A.Mixin),e.exports=m},function(e,t,n){"use strict";var i=n(243),r=n(371),o={focusDOMComponent:function(){r(i.getNodeFromInstance(this))}};e.exports=o},function(e,t,n){"use strict";var i=n(372),r=n(247),o=(n(251),n(1694),n(1696)),s=n(1697),a=n(1699),u=(n(236),a(function(e){return s(e)})),l=!1,c="cssFloat";if(r.canUseDOM){var d=document.createElement("div").style;try{d.font=""}catch(e){l=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var f={createMarkupForStyles:function(e,t){var n="";for(var i in e)if(e.hasOwnProperty(i)){var r=0===i.indexOf("--"),s=e[i];null!=s&&(n+=u(i)+":",n+=o(i,s,t,r)+";")}return n||null},setValueForStyles:function(e,t,n){var r=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=0===s.indexOf("--"),u=o(s,t[s],n,a);if("float"!==s&&"cssFloat"!==s||(s=c),a)r.setProperty(s,u);else if(u)r[s]=u;else{var d=l&&i.shorthandPropertyExpansions[s];if(d)for(var f in d)r[f]="";else r[s]=""}}}};e.exports=f},function(e,t,n){"use strict";function i(e){return r(e.replace(o,"ms-"))}var r=n(1695),o=/^-ms-/;e.exports=i},function(e,t,n){"use strict";function i(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){if(null==t||"boolean"==typeof t||""===t)return"";var r=isNaN(t);if(i||r||0===t||o.hasOwnProperty(e)&&o[e])return""+t;if("string"==typeof t){t=t.trim()}return t+"px"}var r=n(372),o=(n(236),r.isUnitlessNumber);e.exports=i},function(e,t,n){"use strict";function i(e){return r(e).replace(o,"-ms-")}var r=n(1698),o=/^ms-/;e.exports=i},function(e,t,n){"use strict";function i(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;e.exports=i},function(e,t,n){"use strict";function i(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=i},function(e,t,n){"use strict";function i(e){return'"'+r(e)+'"'}var r=n(300);e.exports=i},function(e,t,n){"use strict";function i(e){r.enqueueEvents(e),r.processEventQueue(!1)}var r=n(288),o={handleTopLevel:function(e,t,n,o){i(r.extractEvents(e,t,n,o))}};e.exports=o},function(e,t,n){"use strict";function i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function r(e){if(a[e])return a[e];if(!s[e])return e;var t=s[e];for(var n in t)if(t.hasOwnProperty(n)&&n in u)return a[e]=t[n];return""}var o=n(247),s={animationend:i("Animation","AnimationEnd"),animationiteration:i("Animation","AnimationIteration"),animationstart:i("Animation","AnimationStart"),transitionend:i("Transition","TransitionEnd")},a={},u={};o.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete s.animationend.animation,delete s.animationiteration.animation,delete s.animationstart.animation),"TransitionEvent"in window||delete s.transitionend.transition),e.exports=r},function(e,t,n){"use strict";function i(){this._rootNodeID&&f.updateWrapper(this)}function r(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function o(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);d.asap(i,this);var r=t.name;if("radio"===t.type&&null!=r){for(var o=c.getNodeFromInstance(this),a=o;a.parentNode;)a=a.parentNode;for(var u=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),f=0;f<u.length;f++){var p=u[f];if(p!==o&&p.form===o.form){var h=c.getInstanceFromNode(p);h||s("90"),d.asap(i,h)}}}return n}var s=n(235),a=n(240),u=n(373),l=n(331),c=n(243),d=n(253),f=(n(233),n(236),{getHostProps:function(e,t){var n=l.getValue(t),i=l.getChecked(t);return a({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=i?i:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:o.bind(e),controlled:r(t)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&u.setValueForProperty(c.getNodeFromInstance(e),"checked",n||!1);var i=c.getNodeFromInstance(e),r=l.getValue(t);if(null!=r)if(0===r&&""===i.value)i.value="0";else if("number"===t.type){var o=parseFloat(i.value,10)||0;(r!=o||r==o&&i.value!=r)&&(i.value=""+r)}else i.value!==""+r&&(i.value=""+r);else null==t.value&&null!=t.defaultValue&&i.defaultValue!==""+t.defaultValue&&(i.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(i.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var i=n.name;""!==i&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==i&&(n.name=i)}});e.exports=f},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var i=n(249),r=n(233),o=n(236),s=n(375),a=n(1706);e.exports=function(e,t){function n(e){var t=e&&(C&&e[C]||e[M]);if("function"==typeof t)return t}function u(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function l(e){this.message=e,this.stack=""}function c(e){function n(n,i,o,a,u,c,d){if(a=a||D,c=c||o,d!==s)if(t)r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==i[o]?n?new l(null===i[o]?"The "+u+" `"+c+"` is marked as required in `"+a+"`, but its value is `null`.":"The "+u+" `"+c+"` is marked as required in `"+a+"`, but its value is `undefined`."):null:e(i,o,a,u,c)}var i=n.bind(null,!1);return i.isRequired=n.bind(null,!0),i}function d(e){function t(t,n,i,r,o,s){var a=t[n];if(y(a)!==e)return new l("Invalid "+r+" `"+o+"` of type `"+w(a)+"` supplied to `"+i+"`, expected `"+e+"`.");return null}return c(t)}function f(e){function t(t,n,i,r,o){if("function"!=typeof e)return new l("Property `"+o+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a)){return new l("Invalid "+r+" `"+o+"` of type `"+y(a)+"` supplied to `"+i+"`, expected an array.")}for(var u=0;u<a.length;u++){var c=e(a,u,i,r,o+"["+u+"]",s);if(c instanceof Error)return c}return null}return c(t)}function p(e){function t(t,n,i,r,o){if(!(t[n]instanceof e)){var s=e.name||D;return new l("Invalid "+r+" `"+o+"` of type `"+k(t[n])+"` supplied to `"+i+"`, expected instance of `"+s+"`.")}return null}return c(t)}function h(e){function t(t,n,i,r,o){for(var s=t[n],a=0;a<e.length;a++)if(u(s,e[a]))return null;return new l("Invalid "+r+" `"+o+"` of value `"+s+"` supplied to `"+i+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?c(t):i.thatReturnsNull}function m(e){function t(t,n,i,r,o){if("function"!=typeof e)return new l("Property `"+o+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var a=t[n],u=y(a);if("object"!==u)return new l("Invalid "+r+" `"+o+"` of type `"+u+"` supplied to `"+i+"`, expected an object.");for(var c in a)if(a.hasOwnProperty(c)){var d=e(a,c,i,r,o+"."+c,s);if(d instanceof Error)return d}return null}return c(t)}function g(e){function t(t,n,i,r,o){for(var a=0;a<e.length;a++){if(null==(0,e[a])(t,n,i,r,o,s))return null}return new l("Invalid "+r+" `"+o+"` supplied to `"+i+"`.")}if(!Array.isArray(e))return i.thatReturnsNull;for(var n=0;n<e.length;n++){var r=e[n];if("function"!=typeof r)return o(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",S(r),n),i.thatReturnsNull}return c(t)}function v(e){function t(t,n,i,r,o){var a=t[n],u=y(a);if("object"!==u)return new l("Invalid "+r+" `"+o+"` of type `"+u+"` supplied to `"+i+"`, expected `object`.");for(var c in e){var d=e[c];if(d){var f=d(a,c,i,r,o+"."+c,s);if(f)return f}}return null}return c(t)}function _(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(_);if(null===t||e(t))return!0;var i=n(t);if(!i)return!1;var r,o=i.call(t);if(i!==t.entries){for(;!(r=o.next()).done;)if(!_(r.value))return!1}else for(;!(r=o.next()).done;){var s=r.value;if(s&&!_(s[1]))return!1}return!0;default:return!1}}function b(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function y(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":b(t,e)?"symbol":t}function w(e){if(void 0===e||null===e)return""+e;var t=y(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function S(e){var t=w(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function k(e){return e.constructor&&e.constructor.name?e.constructor.name:D}var C="function"==typeof Symbol&&Symbol.iterator,M="@@iterator",D="<<anonymous>>",O={array:d("array"),bool:d("boolean"),func:d("function"),number:d("number"),object:d("object"),string:d("string"),symbol:d("symbol"),any:function(){return c(i.thatReturnsNull)}(),arrayOf:f,element:function(){function t(t,n,i,r,o){var s=t[n];if(!e(s)){return new l("Invalid "+r+" `"+o+"` of type `"+y(s)+"` supplied to `"+i+"`, expected a single ReactElement.")}return null}return c(t)}(),instanceOf:p,node:function(){function e(e,t,n,i,r){return _(e[t])?null:new l("Invalid "+i+" `"+r+"` supplied to `"+n+"`, expected a ReactNode.")}return c(e)}(),objectOf:m,oneOf:h,oneOfType:g,shape:v};return l.prototype=Error.prototype,O.checkPropTypes=a,O.PropTypes=O,O}},function(e,t,n){"use strict";function i(e,t,n,i,r){}e.exports=i},function(e,t,n){"use strict";var i=function(){};e.exports=i},function(e,t,n){"use strict";function i(e){return(""+e).replace(y,"$&/")}function r(e,t){this.func=e,this.context=t,this.count=0}function o(e,t,n){var i=e.func,r=e.context;i.call(r,t,e.count++)}function s(e,t,n){if(null==e)return e;var i=r.getPooled(t,n);v(e,o,i),r.release(i)}function a(e,t,n,i){this.result=e,this.keyPrefix=t,this.func=n,this.context=i,this.count=0}function u(e,t,n){var r=e.result,o=e.keyPrefix,s=e.func,a=e.context,u=s.call(a,t,e.count++);Array.isArray(u)?l(u,r,n,g.thatReturnsArgument):null!=u&&(m.isValidElement(u)&&(u=m.cloneAndReplaceKey(u,o+(!u.key||t&&t.key===u.key?"":i(u.key)+"/")+n)),r.push(u))}function l(e,t,n,r,o){var s="";null!=n&&(s=i(n)+"/");var l=a.getPooled(t,s,r,o);v(e,u,l),a.release(l)}function c(e,t,n){if(null==e)return e;var i=[];return l(e,i,null,t,n),i}function d(e,t,n){return null}function f(e,t){return v(e,d,null)}function p(e){var t=[];return l(e,t,null,g.thatReturnsArgument),t}var h=n(1709),m=n(281),g=n(249),v=n(1710),_=h.twoArgumentPooler,b=h.fourArgumentPooler,y=/\/+/g;r.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},h.addPoolingTo(r,_),a.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h.addPoolingTo(a,b);var w={forEach:s,map:c,mapIntoWithKeyPrefixInternal:l,count:f,toArray:p};e.exports=w},function(e,t,n){"use strict";var i=n(290),r=(n(233),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),o=function(e,t){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,e,t),i}return new n(e,t)},s=function(e,t,n){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,e,t,n),r}return new i(e,t,n)},a=function(e,t,n,i){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n,i),o}return new r(e,t,n,i)},u=function(e){var t=this;e instanceof t||i("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},l=r,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=10),n.release=u,n},d={addPoolingTo:c,oneArgumentPooler:r,twoArgumentPooler:o,threeArgumentPooler:s,fourArgumentPooler:a};e.exports=d},function(e,t,n){"use strict";function i(e,t){return e&&"object"==typeof e&&null!=e.key?l.escape(e.key):t.toString(36)}function r(e,t,n,o){var f=typeof e;if("undefined"!==f&&"boolean"!==f||(e=null),null===e||"string"===f||"number"===f||"object"===f&&e.$$typeof===a)return n(o,e,""===t?c+i(e,0):t),1;var p,h,m=0,g=""===t?c:t+d;if(Array.isArray(e))for(var v=0;v<e.length;v++)p=e[v],h=g+i(p,v),m+=r(p,h,n,o);else{var _=u(e);if(_){var b,y=_.call(e);if(_!==e.entries)for(var w=0;!(b=y.next()).done;)p=b.value,h=g+i(p,w++),m+=r(p,h,n,o);else for(;!(b=y.next()).done;){var S=b.value;S&&(p=S[1],h=g+l.escape(S[0])+d+i(p,0),m+=r(p,h,n,o))}}else if("object"===f){var k="",C=String(e);s("31","[object Object]"===C?"object with keys {"+Object.keys(e).join(", ")+"}":C,k)}}return m}function o(e,t,n){return null==e?0:r(e,"",t,n)}var s=n(290),a=(n(259),n(379)),u=n(1711),l=(n(233),n(1712)),c=(n(236),"."),d=":";e.exports=o},function(e,t,n){"use strict";function i(e){var t=e&&(r&&e[r]||e[o]);if("function"==typeof t)return t}var r="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";e.exports=i},function(e,t,n){"use strict";function i(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function r(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(t,function(e){return n[e]})}var o={escape:i,unescape:r};e.exports=o},function(e,t,n){"use strict";var i=n(281),r=i.createFactory,o={a:r("a"),abbr:r("abbr"),address:r("address"),area:r("area"),article:r("article"),aside:r("aside"),audio:r("audio"),b:r("b"),base:r("base"),bdi:r("bdi"),bdo:r("bdo"),big:r("big"),blockquote:r("blockquote"),body:r("body"),br:r("br"),button:r("button"),canvas:r("canvas"),caption:r("caption"),cite:r("cite"),code:r("code"),col:r("col"),colgroup:r("colgroup"),data:r("data"),datalist:r("datalist"),dd:r("dd"),del:r("del"),details:r("details"),dfn:r("dfn"),dialog:r("dialog"),div:r("div"),dl:r("dl"),dt:r("dt"),em:r("em"),embed:r("embed"),fieldset:r("fieldset"),figcaption:r("figcaption"),figure:r("figure"),footer:r("footer"),form:r("form"),h1:r("h1"),h2:r("h2"),h3:r("h3"),h4:r("h4"),h5:r("h5"),h6:r("h6"),head:r("head"),header:r("header"),hgroup:r("hgroup"),hr:r("hr"),html:r("html"),i:r("i"),iframe:r("iframe"),img:r("img"),input:r("input"),ins:r("ins"),kbd:r("kbd"),keygen:r("keygen"),label:r("label"),legend:r("legend"),li:r("li"),link:r("link"),main:r("main"),map:r("map"),mark:r("mark"),menu:r("menu"),menuitem:r("menuitem"),meta:r("meta"),meter:r("meter"),nav:r("nav"),noscript:r("noscript"),object:r("object"),ol:r("ol"),optgroup:r("optgroup"),option:r("option"),output:r("output"),p:r("p"),param:r("param"),picture:r("picture"),pre:r("pre"),progress:r("progress"),q:r("q"),rp:r("rp"),rt:r("rt"),ruby:r("ruby"),s:r("s"),samp:r("samp"),script:r("script"),section:r("section"),select:r("select"),small:r("small"),source:r("source"),span:r("span"),strong:r("strong"),style:r("style"),sub:r("sub"),summary:r("summary"),sup:r("sup"),table:r("table"),tbody:r("tbody"),td:r("td"),textarea:r("textarea"),tfoot:r("tfoot"),th:r("th"),thead:r("thead"),time:r("time"),title:r("title"),tr:r("tr"),track:r("track"),u:r("u"),ul:r("ul"),var:r("var"),video:r("video"),wbr:r("wbr"),circle:r("circle"),clipPath:r("clipPath"),defs:r("defs"),ellipse:r("ellipse"),g:r("g"),image:r("image"),line:r("line"),linearGradient:r("linearGradient"),mask:r("mask"),path:r("path"),pattern:r("pattern"),polygon:r("polygon"),polyline:r("polyline"),radialGradient:r("radialGradient"),rect:r("rect"),stop:r("stop"),svg:r("svg"),text:r("text"),tspan:r("tspan")};e.exports=o},function(e,t,n){"use strict";var i=n(281),r=i.isValidElement,o=n(374);e.exports=o(r)},function(e,t,n){"use strict";e.exports="15.6.2"},function(e,t,n){"use strict";var i=n(376),r=i.Component,o=n(281),s=o.isValidElement,a=n(377),u=n(380);e.exports=u(r,s,a)},function(e,t,n){"use strict";function i(e){return o.isValidElement(e)||r("143"),e}var r=n(290),o=n(281);n(233);e.exports=i},function(e,t,n){"use strict";function i(e){var t="";return o.Children.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:u||(u=!0))}),t}var r=n(240),o=n(280),s=n(243),a=n(381),u=(n(236),!1),l={mountWrapper:function(e,t,n){var r=null;if(null!=n){var o=n;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(r=a.getSelectValueContext(o))}var s=null;if(null!=r){var u;if(u=null!=t.value?t.value+"":i(t.children),s=!1,Array.isArray(r)){for(var l=0;l<r.length;l++)if(""+r[l]===u){s=!0;break}}else s=""+r===u}e._wrapperState={selected:s}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){s.getNodeFromInstance(e).setAttribute("value",t.value)}},getHostProps:function(e,t){var n=r({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var o=i(t.children);return o&&(n.children=o),n}};e.exports=l},function(e,t,n){"use strict";function i(){this._rootNodeID&&c.updateWrapper(this)}function r(e){var t=this._currentElement.props,n=a.executeOnChange(t,e);return l.asap(i,this),n}var o=n(235),s=n(240),a=n(331),u=n(243),l=n(253),c=(n(233),n(236),{getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&o("91"),s({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=a.getValue(t),i=n;if(null==n){var s=t.defaultValue,u=t.children;null!=u&&(null!=s&&o("92"),Array.isArray(u)&&(u.length<=1||o("93"),u=u[0]),s=""+u),null==s&&(s=""),i=s}e._wrapperState={initialValue:""+i,listeners:null,onChange:r.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=u.getNodeFromInstance(e),i=a.getValue(t);if(null!=i){var r=""+i;r!==n.value&&(n.value=r),null==t.defaultValue&&(n.defaultValue=r)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=u.getNodeFromInstance(e),n=t.textContent;n===e._wrapperState.initialValue&&(t.value=n)}});e.exports=c},function(e,t,n){"use strict";function i(e,t,n){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function r(e,t,n){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:f.getHostNode(e),toIndex:n,afterNode:t}}function o(e,t){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function s(e){return{type:"SET_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function a(e){return{type:"TEXT_CONTENT",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(e,t){return t&&(e=e||[],e.push(t)),e}function l(e,t){d.processChildrenUpdates(e,t)}var c=n(235),d=n(332),f=(n(291),n(251),n(259),n(278)),p=n(1721),h=(n(249),n(1726)),m=(n(233),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return p.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,i,r,o){var s,a=0;return s=h(t,a),p.updateChildren(e,s,n,i,r,this,this._hostContainerInfo,o,a),s},mountChildren:function(e,t,n){var i=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=i;var r=[],o=0;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s],u=0,l=f.mountComponent(a,t,this,this._hostContainerInfo,n,u);a._mountIndex=o++,r.push(l)}return r},updateTextContent:function(e){var t=this._renderedChildren;p.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");l(this,[a(e)])},updateMarkup:function(e){var t=this._renderedChildren;p.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");l(this,[s(e)])},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var i=this._renderedChildren,r={},o=[],s=this._reconcilerUpdateChildren(i,e,o,r,t,n);if(s||i){var a,c=null,d=0,p=0,h=0,m=null;for(a in s)if(s.hasOwnProperty(a)){var g=i&&i[a],v=s[a];g===v?(c=u(c,this.moveChild(g,m,d,p)),p=Math.max(g._mountIndex,p),g._mountIndex=d):(g&&(p=Math.max(g._mountIndex,p)),c=u(c,this._mountChildAtIndex(v,o[h],m,d,t,n)),h++),d++,m=f.getHostNode(v)}for(a in r)r.hasOwnProperty(a)&&(c=u(c,this._unmountChild(i[a],r[a])));c&&l(this,c),this._renderedChildren=s}},unmountChildren:function(e){var t=this._renderedChildren;p.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,i){if(e._mountIndex<i)return r(e,t,n)},createChild:function(e,t,n){return i(n,t,e._mountIndex)},removeChild:function(e,t){return o(e,t)},_mountChildAtIndex:function(e,t,n,i,r,o){return e._mountIndex=i,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});e.exports=m},function(e,t,n){"use strict";function i(e,t,n,i){var r=void 0===e[n];null!=t&&r&&(e[n]=o(t,!0))}var r=n(278),o=n(382),s=(n(335),n(334)),a=n(386);n(236);"undefined"!=typeof process&&process.env;var u={instantiateChildren:function(e,t,n,r){if(null==e)return null;var o={};return a(e,i,o),o},updateChildren:function(e,t,n,i,a,u,l,c,d){if(t||e){var f,p;for(f in t)if(t.hasOwnProperty(f)){p=e&&e[f];var h=p&&p._currentElement,m=t[f];if(null!=p&&s(h,m))r.receiveComponent(p,m,a,c),t[f]=p;else{p&&(i[f]=r.getHostNode(p),r.unmountComponent(p,!1));var g=o(m,!0);t[f]=g;var v=r.mountComponent(g,a,u,l,c,d);n.push(v)}}for(f in e)!e.hasOwnProperty(f)||t&&t.hasOwnProperty(f)||(p=e[f],i[f]=r.getHostNode(p),r.unmountComponent(p,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];r.unmountComponent(i,t)}}};e.exports=u},function(e,t,n){"use strict";function i(e){}function r(e){return!(!e.prototype||!e.prototype.isReactComponent)}function o(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var s=n(235),a=n(240),u=n(280),l=n(332),c=n(259),d=n(324),f=n(291),p=(n(251),n(383)),h=n(278),m=n(302),g=(n(233),n(333)),v=n(334),_=(n(236),{ImpureClass:0,PureClass:1,StatelessFunctional:2});i.prototype.render=function(){var e=f.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return t};var b=1,y={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,a){this._context=a,this._mountOrder=b++,this._hostParent=t,this._hostContainerInfo=n;var l,c=this._currentElement.props,d=this._processContext(a),p=this._currentElement.type,h=e.getUpdateQueue(),g=r(p),v=this._constructComponent(g,c,d,h);g||null!=v&&null!=v.render?o(p)?this._compositeType=_.PureClass:this._compositeType=_.ImpureClass:(l=v,null===v||!1===v||u.isValidElement(v)||s("105",p.displayName||p.name||"Component"),v=new i(p),this._compositeType=_.StatelessFunctional);v.props=c,v.context=d,v.refs=m,v.updater=h,this._instance=v,f.set(v,this);var y=v.state;void 0===y&&(v.state=y=null),("object"!=typeof y||Array.isArray(y))&&s("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var w;return w=v.unstable_handleError?this.performInitialMountWithErrorHandling(l,t,n,e,a):this.performInitialMount(l,t,n,e,a),v.componentDidMount&&e.getReactMountReady().enqueue(v.componentDidMount,v),w},_constructComponent:function(e,t,n,i){return this._constructComponentWithoutOwner(e,t,n,i)},_constructComponentWithoutOwner:function(e,t,n,i){var r=this._currentElement.type;return e?new r(t,n,i):r(t,n,i)},performInitialMountWithErrorHandling:function(e,t,n,i,r){var o,s=i.checkpoint();try{o=this.performInitialMount(e,t,n,i,r)}catch(a){i.rollback(s),this._instance.unstable_handleError(a),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),s=i.checkpoint(),this._renderedComponent.unmountComponent(!0),i.rollback(s),o=this.performInitialMount(e,t,n,i,r)}return o},performInitialMount:function(e,t,n,i,r){var o=this._instance,s=0;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===e&&(e=this._renderValidatedComponent());var a=p.getType(e);this._renderedNodeType=a;var u=this._instantiateReactComponent(e,a!==p.EMPTY);this._renderedComponent=u;var l=h.mountComponent(u,i,t,n,this._processChildContext(r),s);return l},getHostNode:function(){return h.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";d.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(h.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,f.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return m;var i={};for(var r in n)i[r]=e[r];return i},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t,n=this._currentElement.type,i=this._instance;if(i.getChildContext&&(t=i.getChildContext()),t){"object"!=typeof n.childContextTypes&&s("107",this.getName()||"ReactCompositeComponent");for(var r in t)r in n.childContextTypes||s("108",this.getName()||"ReactCompositeComponent",r);return a({},e,t)}return e},_checkContextTypes:function(e,t,n){},receiveComponent:function(e,t,n){var i=this._currentElement,r=this._context;this._pendingElement=null,this.updateComponent(t,i,e,r,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?h.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,i,r){var o=this._instance;null==o&&s("136",this.getName()||"ReactCompositeComponent");var a,u=!1;this._context===r?a=o.context:(a=this._processContext(r),u=!0);var l=t.props,c=n.props;t!==n&&(u=!0),u&&o.componentWillReceiveProps&&o.componentWillReceiveProps(c,a);var d=this._processPendingState(c,a),f=!0;this._pendingForceUpdate||(o.shouldComponentUpdate?f=o.shouldComponentUpdate(c,d,a):this._compositeType===_.PureClass&&(f=!g(l,c)||!g(o.state,d))),this._updateBatchNumber=null,f?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,d,a,e,r)):(this._currentElement=n,this._context=r,o.props=c,o.state=d,o.context=a)},_processPendingState:function(e,t){var n=this._instance,i=this._pendingStateQueue,r=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!i)return n.state;if(r&&1===i.length)return i[0];for(var o=a({},r?i[0]:n.state),s=r?1:0;s<i.length;s++){var u=i[s];a(o,"function"==typeof u?u.call(n,o,e,t):u)}return o},_performComponentUpdate:function(e,t,n,i,r,o){var s,a,u,l=this._instance,c=Boolean(l.componentDidUpdate);c&&(s=l.props,a=l.state,u=l.context),l.componentWillUpdate&&l.componentWillUpdate(t,n,i),this._currentElement=e,this._context=o,l.props=t,l.state=n,l.context=i,this._updateRenderedComponent(r,o),c&&r.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,s,a,u),l)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,i=n._currentElement,r=this._renderValidatedComponent(),o=0;if(v(i,r))h.receiveComponent(n,r,e,this._processChildContext(t));else{var s=h.getHostNode(n);h.unmountComponent(n,!1);var a=p.getType(r);this._renderedNodeType=a;var u=this._instantiateReactComponent(r,a!==p.EMPTY);this._renderedComponent=u;var l=h.mountComponent(u,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),o);this._replaceNodeWithMarkup(s,l,n)}},_replaceNodeWithMarkup:function(e,t,n){l.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance;return e.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==_.StatelessFunctional){c.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||!1===e||u.isValidElement(e)||s("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&s("110");var i=t.getPublicInstance();(n.refs===m?n.refs={}:n.refs)[e]=i},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===_.StatelessFunctional?null:e},_instantiateReactComponent:null};e.exports=y},function(e,t,n){"use strict";function i(){return r++}var r=1;e.exports=i},function(e,t,n){"use strict";var i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=i},function(e,t,n){"use strict";function i(e){var t=e&&(r&&e[r]||e[o]);if("function"==typeof t)return t}var r="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){if(e&&"object"==typeof e){var r=e,o=void 0===r[n];o&&null!=t&&(r[n]=t)}}function r(e,t){if(null==e)return e;var n={};return o(e,i,n),n}var o=(n(335),n(386));n(236);"undefined"!=typeof process&&process.env,e.exports=r},function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new a(this)}var r=n(240),o=n(267),s=n(297),a=(n(251),n(1728)),u=[],l={enqueue:function(){}},c={getTransactionWrappers:function(){return u},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};r(i.prototype,s,c),o.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(336),o=(n(236),function(){function e(t){i(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&r.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()&&r.enqueueForceUpdate(e)},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()&&r.enqueueReplaceState(e,t)},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()&&r.enqueueSetState(e,t)},e}());e.exports=o},function(e,t,n){"use strict";var i=n(240),r=n(279),o=n(243),s=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};i(s.prototype,{mountComponent:function(e,t,n,i){var s=n._idCounter++;this._domID=s,this._hostParent=t,this._hostContainerInfo=n;var a=" react-empty: "+this._domID+" ";if(e.useCreateElement){var u=n._ownerDocument,l=u.createComment(a);return o.precacheNode(this,l),r(l)}return e.renderToStaticMarkup?"":"\x3c!--"+a+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),e.exports=s},function(e,t,n){"use strict";function i(e,t){"_hostNode"in e||u("33"),"_hostNode"in t||u("33");for(var n=0,i=e;i;i=i._hostParent)n++;for(var r=0,o=t;o;o=o._hostParent)r++;for(;n-r>0;)e=e._hostParent,n--;for(;r-n>0;)t=t._hostParent,r--;for(var s=n;s--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function r(e,t){"_hostNode"in e||u("35"),"_hostNode"in t||u("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function o(e){return"_hostNode"in e||u("36"),e._hostParent}function s(e,t,n){for(var i=[];e;)i.push(e),e=e._hostParent;var r;for(r=i.length;r-- >0;)t(i[r],"captured",n);for(r=0;r<i.length;r++)t(i[r],"bubbled",n)}function a(e,t,n,r,o){for(var s=e&&t?i(e,t):null,a=[];e&&e!==s;)a.push(e),e=e._hostParent;for(var u=[];t&&t!==s;)u.push(t),t=t._hostParent;var l;for(l=0;l<a.length;l++)n(a[l],"bubbled",r);for(l=u.length;l-- >0;)n(u[l],"captured",o)}var u=n(235);n(233);e.exports={isAncestor:r,getLowestCommonAncestor:i,getParentInstance:o,traverseTwoPhase:s,traverseEnterLeave:a}},function(e,t,n){"use strict";var i=n(235),r=n(240),o=n(328),s=n(279),a=n(243),u=n(300),l=(n(233),n(337),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});r(l.prototype,{mountComponent:function(e,t,n,i){var r=n._idCounter++,o=" react-text: "+r+" ";if(this._domID=r,this._hostParent=t,e.useCreateElement){var l=n._ownerDocument,c=l.createComment(o),d=l.createComment(" /react-text "),f=s(l.createDocumentFragment());return s.queueChild(f,s(c)),this._stringText&&s.queueChild(f,s(l.createTextNode(this._stringText))),s.queueChild(f,s(d)),a.precacheNode(this,c),this._closingComment=d,f}var p=u(this._stringText);return e.renderToStaticMarkup?p:"\x3c!--"+o+"--\x3e"+p+"\x3c!-- /react-text --\x3e"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var i=this.getHostNode();o.replaceDelimitedText(i[0],i[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=a.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n&&i("67",this._domID),8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,a.uncacheNode(this)}}),e.exports=l},function(e,t,n){"use strict";function i(){this.reinitializeTransaction()}var r=n(240),o=n(253),s=n(297),a=n(249),u={initialize:a,close:function(){f.isBatchingUpdates=!1}},l={initialize:a,close:o.flushBatchedUpdates.bind(o)},c=[l,u];r(i.prototype,s,{getTransactionWrappers:function(){return c}});var d=new i,f={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,i,r,o){var s=f.isBatchingUpdates;return f.isBatchingUpdates=!0,s?e(t,n,i,r,o):d.perform(e,null,t,n,i,r,o)}};e.exports=f},function(e,t,n){"use strict";function i(e){for(;e._hostParent;)e=e._hostParent;var t=d.getNodeFromInstance(e),n=t.parentNode;return d.getClosestInstanceFromNode(n)}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){var t=p(e.nativeEvent),n=d.getClosestInstanceFromNode(t),r=n;do{e.ancestors.push(r),r=r&&i(r)}while(r);for(var o=0;o<e.ancestors.length;o++)n=e.ancestors[o],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,p(e.nativeEvent))}function s(e){e(h(window))}var a=n(240),u=n(388),l=n(247),c=n(267),d=n(243),f=n(253),p=n(325),h=n(1734);a(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(r,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){return n?u.listen(n,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?u.capture(n,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=s.bind(null,e);u.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=r.getPooled(e,t);try{f.batchedUpdates(o,n)}finally{r.release(n)}}}};e.exports=m},function(e,t,n){"use strict";function i(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=i},function(e,t,n){"use strict";var i=n(277),r=n(288),o=n(323),s=n(332),a=n(384),u=n(301),l=n(385),c=n(253),d={Component:s.injection,DOMProperty:i.injection,EmptyComponent:a.injection,EventPluginHub:r.injection,EventPluginUtils:o.injection,EventEmitter:u.injection,HostComponent:l.injection,Updates:c.injection};e.exports=d},function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=e}var r=n(240),o=n(365),s=n(267),a=n(301),u=n(389),l=(n(251),n(297)),c=n(336),d={initialize:u.getSelectionInformation,close:u.restoreSelection},f={initialize:function(){var e=a.isEnabled();return a.setEnabled(!1),e},close:function(e){a.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h=[d,f,p],m={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};r(i.prototype,l,m),s.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return e===n&&t===i}function r(e){var t=document.selection,n=t.createRange(),i=n.text.length,r=n.duplicate();r.moveToElementText(e),r.setEndPoint("EndToStart",n);var o=r.text.length;return{start:o,end:o+i}}function o(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,o=t.focusNode,s=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(e){return null}var u=i(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),l=u?0:a.toString().length,c=a.cloneRange();c.selectNodeContents(e),c.setEnd(a.startContainer,a.startOffset);var d=i(c.startContainer,c.startOffset,c.endContainer,c.endOffset),f=d?0:c.toString().length,p=f+l,h=document.createRange();h.setStart(n,r),h.setEnd(o,s);var m=h.collapsed;return{start:m?p:f,end:m?f:p}}function s(e,t){var n,i,r=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,i=n):t.start>t.end?(n=t.end,i=t.start):(n=t.start,i=t.end),r.moveToElementText(e),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",i-n),r.select()}function a(e,t){if(window.getSelection){var n=window.getSelection(),i=e[c()].length,r=Math.min(t.start,i),o=void 0===t.end?r:Math.min(t.end,i);if(!n.extend&&r>o){var s=o;o=r,r=s}var a=l(e,r),u=l(e,o);if(a&&u){var d=document.createRange();d.setStart(a.node,a.offset),n.removeAllRanges(),r>o?(n.addRange(d),n.extend(u.node,u.offset)):(d.setEnd(u.node,u.offset),n.addRange(d))}}}var u=n(247),l=n(1738),c=n(364),d=u.canUseDOM&&"selection"in document&&!("getSelection"in window),f={getOffsets:d?r:o,setOffsets:d?s:a};e.exports=f},function(e,t,n){"use strict";function i(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function o(e,t){for(var n=i(e),o=0,s=0;n;){if(3===n.nodeType){if(s=o+n.textContent.length,o<=t&&s>=t)return{node:n,offset:t-o};o=s}n=i(r(n))}}e.exports=o},function(e,t,n){"use strict";function i(e,t){return!(!e||!t)&&(e===t||!r(e)&&(r(t)?i(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var r=n(1740);e.exports=i},function(e,t,n){"use strict";function i(e){return r(e)&&3==e.nodeType}var r=n(1741);e.exports=i},function(e,t,n){"use strict";function i(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"==typeof n.Node?e instanceof n.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=i},function(e,t,n){"use strict";var i={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},o={Properties:{},DOMAttributeNamespaces:{xlinkActuate:i.xlink,xlinkArcrole:i.xlink,xlinkHref:i.xlink,xlinkRole:i.xlink,xlinkShow:i.xlink,xlinkTitle:i.xlink,xlinkType:i.xlink,xmlBase:i.xml,xmlLang:i.xml,xmlSpace:i.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(e){o.Properties[e]=0,r[e]&&(o.DOMAttributeNames[e]=r[e])}),e.exports=o},function(e,t,n){"use strict";function i(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function r(e,t){if(_||null==m||m!==c())return null;var n=i(m);if(!v||!f(v,n)){v=n;var r=l.getPooled(h.select,g,e,t);return r.type="select",r.target=m,o.accumulateTwoPhaseDispatches(r),r}return null}var o=n(287),s=n(247),a=n(243),u=n(389),l=n(258),c=n(390),d=n(368),f=n(333),p=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,h={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},m=null,g=null,v=null,_=!1,b=!1,y={eventTypes:h,extractEvents:function(e,t,n,i){if(!b)return null;var o=t?a.getNodeFromInstance(t):window;switch(e){case"topFocus":(d(o)||"true"===o.contentEditable)&&(m=o,g=t,v=null);break;case"topBlur":m=null,g=null,v=null;break;case"topMouseDown":_=!0;break;case"topContextMenu":case"topMouseUp":return _=!1,r(n,i);case"topSelectionChange":if(p)break;case"topKeyDown":case"topKeyUp":return r(n,i)}return null},didPutListener:function(e,t,n){"onSelect"===t&&(b=!0)}};e.exports=y},function(e,t,n){"use strict";function i(e){return"."+e._rootNodeID}function r(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var o=n(235),s=n(388),a=n(287),u=n(243),l=n(1745),c=n(1746),d=n(258),f=n(1747),p=n(1748),h=n(298),m=n(1750),g=n(1751),v=n(1752),_=n(289),b=n(1753),y=n(249),w=n(338),S=(n(233),{}),k={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t,i="top"+t,r={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[i]};S[e]=r,k[i]=r});var C={},M={eventTypes:S,extractEvents:function(e,t,n,i){var r=k[e];if(!r)return null;var s;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":s=d;break;case"topKeyPress":if(0===w(n))return null;case"topKeyDown":case"topKeyUp":s=p;break;case"topBlur":case"topFocus":s=f;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":s=h;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":s=m;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":s=g;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":s=l;break;case"topTransitionEnd":s=v;break;case"topScroll":s=_;break;case"topWheel":s=b;break;case"topCopy":case"topCut":case"topPaste":s=c}s||o("86",e);var u=s.getPooled(r,t,n,i);return a.accumulateTwoPhaseDispatches(u),u},didPutListener:function(e,t,n){if("onClick"===t&&!r(e._tag)){var o=i(e),a=u.getNodeFromInstance(e);C[o]||(C[o]=s.listen(a,"click",y))}},willDeleteListener:function(e,t){if("onClick"===t&&!r(e._tag)){var n=i(e);C[n].remove(),delete C[n]}}};e.exports=M},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(258),o={animationName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(258),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(289),o={relatedTarget:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(289),o=n(338),s=n(1749),a=n(327),u={key:s,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};r.augmentClass(i,u),e.exports=i},function(e,t,n){"use strict";function i(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=r(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?s[e.keyCode]||"Unidentified":""}var r=n(338),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(298),o={dataTransfer:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(289),o=n(327),s={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(258),o={propertyName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(298),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===r?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var r=(n(337),9);e.exports=i},function(e,t,n){"use strict";var i={useCreateElement:!0,useFiber:!1};e.exports=i},function(e,t,n){"use strict";var i=n(1757),r=/\/?>/,o=/^<\!\-\-/,s={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=i(e);return o.test(e)?e:e.replace(r," "+s.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(s.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),i(e)===n}};e.exports=s},function(e,t,n){"use strict";function i(e){for(var t=1,n=0,i=0,o=e.length,s=-4&o;i<s;){for(var a=Math.min(i+4096,s);i<a;i+=4)n+=(t+=e.charCodeAt(i))+(t+=e.charCodeAt(i+1))+(t+=e.charCodeAt(i+2))+(t+=e.charCodeAt(i+3));t%=r,n%=r}for(;i<o;i++)n+=t+=e.charCodeAt(i);return t%=r,n%=r,t|n<<16}var r=65521;e.exports=i},function(e,t,n){"use strict";e.exports="15.6.2"},function(e,t,n){"use strict";function i(e){if(null==e)return null;if(1===e.nodeType)return e;var t=s.get(e);if(t)return t=a(t),t?o.getNodeFromInstance(t):null;"function"==typeof e.render?r("44"):r("45",Object.keys(e))}var r=n(235),o=(n(259),n(243)),s=n(291),a=n(392);n(233),n(236);e.exports=i},function(e,t,n){"use strict";var i=n(391);e.exports=i.renderSubtreeIntoContainer},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(339),a=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(339),a=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return s});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=/^#(search(\?|\/|$)|(contacts))/,s=function(){function e(){i(this,e)}return r(e,[{key:"navigateToMessage",value:function(e,t){var n=Daria.is2pane()?ns.router.generateUrl("message",{ids:e,tab:"thread"}):ns.router.generateUrl("messages",{ids:e,current_folder:t});ns.page.go(n)}},{key:"openLastPageBeforeSearch",value:function(){var e=ns.page.history.getFirstValidPrevious(function(e){return!o.test(e)}),t=e||ns.page.getDefaultUrl();ns.page.go(t,"replace")}}]),e}()},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function s(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return p});var a,u,l=n(234),c=n(274),d=n(1765),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=(a=function(){function e(t,n){r(this,e),this._searchSuggest=null,this._isSearchLocked=!1,o(this,"_setSuggestItems",u,this),this._stores=t,this._services=n}return f(e,[{key:"startSuggest",value:function(){var e=this._stores.searchStore;this._suggest.request(e.searchQuery.paramsForSuggest)}},{key:"cleanupSuggest",value:function(){var e=this._stores.searchStore;this._suggest.abortCurrentRequest(),e.suggestItems=[]}},{key:"resetSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._services.routerService,n=this._stores.searchStore.searchQuery;return n.currentSuggestText.trim()&&!e.forced?(n.currentSuggestText="",!1):(n.currentSuggestText="",e.openPageBeforeSearch&&t.openLastPageBeforeSearch(),!0)}},{key:"startSearch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],i=this._services.searchLogService,r=this._stores.searchStore.searchQuery;try{r.currentSearchText=e,r.currentSuggestText=e,ns.Model.invalidate("history-suggest");var o=r.paramsForSearch;t.extraSearchParams&&Object.assign(o,t.extraSearchParams);var s=Object(l.action)(function(e){n.currentShowText=e,r.currentSuggestText=e});(e||t.force)&&(Daria.MessagesSearch.search(o,{onCorrecting:s,onSuccess:t.onSuccess,onError:t.onError}),i.suggestWasLogged||(i.logSearchSuggest({text:e}),i.suggestWasLogged=!0),i.logSearch(e,o,t,n.showAdvanced))}finally{i.suggestWasLogged=!1}}},{key:"syncSearchQuery",value:function(){var e=this._stores,t=e.routerStore,n=e.searchStore,i=n.searchQuery,r=t.currentPage.params,o=r.request||"";i.currentSearchText=o,i.currentSuggestText=o,i.updateAdvancedParams(this.getInitialAdvancedSearchParams(),r),i.shouldShowCurrentSearchText=!Daria.MessagesSearch.isUnsubscribeEmailRequest()}},{key:"getInitialAdvancedSearchParams",value:function(){var e=this._stores,t=e.routerStore,n=e.foldersStore,i=t.currentPage.params;if("only_atta"===i.extra_cond&&"all"===i.goto)return{attaches:"yes"};if("only_new"===i.extra_cond&&"all"===i.goto)return{lid:"unread"};if(Daria.messages.params4SimpleLabel(i))return{lid:i.current_label};if(Daria.messages.params4SimplePath(i)){var r=i.current_folder;if(Daria.IS_CORP)return{fid:r};if(!n.isFidSymbol(r,"inbox"))return{fid:r}}return{}}},{key:"lockSearch",value:function(e){if(this._isSearchLocked)return void Object(c.b)({errorType:"search-service:search-already-locked",failIfPossible:!0});try{this._isSearchLocked=!0,e()}finally{this._isSearchLocked=!1}}},{key:"_suggest",get:function(){var e=this._stores,t=e.settingsStore,n=e.searchStore;return this._searchSuggest||(this._searchSuggest=new d.a(t,n,this._setSuggestItems)),this._searchSuggest}},{key:"isSearchLocked",get:function(){return this._isSearchLocked}}]),e}(),s(a.prototype,"startSuggest",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"startSuggest"),a.prototype),u=s(a.prototype,"_setSuggestItems",[l.action],{enumerable:!0,initializer:function(){var e=this;return function(t,n){var r=e._stores.searchStore;r.suggestItems=n?[].concat(i(r.suggestItems),i(t)):[].concat(i(t))}}}),s(a.prototype,"cleanupSuggest",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"cleanupSuggest"),a.prototype),s(a.prototype,"resetSearch",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"resetSearch"),a.prototype),s(a.prototype,"startSearch",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"startSearch"),a.prototype),s(a.prototype,"syncSearchQuery",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"syncSearchQuery"),a.prototype),a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return d});var r=n(96),o=n.n(r),s=n(282),a=n(1766),u=n(1767),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=o.a.isEqual,d=function(){function e(t,n,r){i(this,e),this._aborted=!1,this._lastParams=null,this._suggest=new a.a(this._requestSuggest.bind(this),300),this._settingsStore=t,this._searchStore=n,this._handleSuggest=r}return l(e,[{key:"request",value:function(e){this._aborted=!1,this._suggest.request(e)}},{key:"abortCurrentRequest",value:function(){this._aborted=!0}},{key:"_requestSuggest",value:function(e){var t=this;this._aborted||(this._lastParams=e,this._requestSuggestPart(e).then(function(n){n&&n.status&&t._requestSuggestPart(e,n.status,n.limit)}))}},{key:"_requestSuggestPart",value:function(e,t,n){if(!this._aborted){var i=new vow.Deferred,r=!this._settingsStore.isSet("dont_save_history"),o=Object.assign({},e,{highlight:1,limit:n||10,history:r?"yes":"no",reqid:this._searchStore.getSearchSessionId()});return t&&(o.status=t),s.a.forcedRequest("search-suggest",o).then(function(n){if(!c(this._lastParams,e)||this._aborted)return void i.reject();var r=(n.items||[]).map(function(e){return new u.a(e)});t?(this._handleSuggest(r,Boolean(t)),i.resolve()):(this._handleSuggest(r),i.resolve({status:n.status,limit:10-r.length}))},function(e){i.reject(e)},this),i.promise()}}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a});var r=n(96),o=n.n(r),s=o.a.throttle,a=function e(t,n){var r=this;i(this,e),this._throttledRequest=function(e){r._request(e)},this._request=t,this.request=s(this._throttledRequest,n,{leading:!1})}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(339),a=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";var i=n(1769);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";var i=n(1770);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function u(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var l,c,d,f,p,h,m,g,v,_=n(396),b=n(246),y=n(234),w=n(238),S=(n.n(w),n(293)),k=n(305),C=n(393),M=n(264),D=n(304),O=n(306),x=n(307),T=n(395),P=n(341),E=n(1772),I=n(1773),A=n(1774),j=n(1775),R=n(1776),L=n(1777),N=n(1778),F=n(255),B=n(1786),U=n(250),$=n(1791),z=n(1810),V=n(1837),H=n(1879),q=(n.n(H),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),W=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),G=i18n("%ServiceTabs__Search_Button"),K=W(U.a,{id:"mail--Header-Search"}),J=W(U.a,{id:"mail--Header-Search"}),Y=W(B.a,{}),X=(l=Object(w.inject)("searchStore","routerStore","foldersStore","labelsStore","settingsStore","searchService","searchLogService","routerService","shortcuts"))(c=Object(w.observer)((v=g=function(t){function n(e,t){r(this,n);var i=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return i.searchState=null,i.state={wasMounted:!1},a(i,"_selectItem",f,i),i._logSelectSuggestItem=function(e){var t=i.props,n=t.searchStore,r=t.searchLogService,o=i.searchState,s=e.data,a=n.getItemPosition(e)+1,u={text:o.currentShowText,suggestUsed:!0,target:s.target,show_text:s.show_text,search_text:s.search_text,itemPos:a};r.logSearchSuggest(u),r.suggestWasLogged=!0},a(i,"_handleMessageClick",p,i),a(i,"_handleQueryLanguageClick",h,i),a(i,"_setAdvancedOption",m,i),i._selectNext=i._selectNext.bind(i),i._selectPrev=i._selectPrev.bind(i),i._searchViaEnterPress=i._searchViaEnterPress.bind(i),i._searchViaButton=i._searchViaButton.bind(i),i._compactModeExpand=i._compactModeExpand.bind(i),i.unfoldAndShowSuggest=i.unfoldAndShowSuggest.bind(i),i._activateSearch=i._activateSearch.bind(i),i._searchContainer=null,i}return s(n,t),q(n,[{key:"componentWillMount",value:function(){this.searchState=this.props.searchState}},{key:"componentDidMount",value:function(){var e=this.props,t=e.searchStore,n=e.routerStore,i=e.searchService,r=e.searchLogService,o=e.shortcuts,s=this.searchState;this._navigationSearchReaction=new A.a(n,t,i,s),this._searchSuggestReaction=new E.a(t,i,s),this._searchReaction=new I.a(n,t,i,s),this._cleanupSuggestReaction=new j.a(i,s),this._forgetCurrentSuggestItemReaction=new R.a(t,s),this._advancedShowReaction=new L.a(r,s),this._defaultSuggestShowReaction=new N.a(t,r,s),o.on("SearchInput:enter",this._searchViaEnterPress),o.on("SearchInput:down",this._selectNext),o.on("SearchInput:up",this._selectPrev),o.on("Search:activate",this._activateSearch),this.setState({wasMounted:!0})}},{key:"componentWillUnmount",value:function(){var e=this.props.shortcuts;this._navigationSearchReaction.cancel(),this._searchSuggestReaction.cancel(),this._searchReaction.cancel(),this._cleanupSuggestReaction.cancel(),this._forgetCurrentSuggestItemReaction.cancel(),this._advancedShowReaction.cancel(),this._defaultSuggestShowReaction.cancel(),e.off("SearchInput:enter",this._searchViaEnterPress),e.off("SearchInput:down",this._selectNext),e.off("SearchInput:up",this._selectPrev),e.off("Search:activate",this._activateSearch)}},{key:"_selectNext",value:function(){this._changeSelectedItem(1)}},{key:"_selectPrev",value:function(){this._changeSelectedItem(-1)}},{key:"_changeSelectedItem",value:function(e){var t=this.props.searchStore,n=t.getSuggestItemRelative(this.searchState.getHighlightedSuggestItemIndex(),e),i=n.newIndex,r=n.newItem;this.searchState.setHighlightedSuggestItemIndex(i),this.searchState.setLastSelectedSuggestItem(r),this.searchState.currentShowText=r?this._getItemShowText(r):t.searchQuery.currentSuggestText}},{key:"_getItemShowText",value:function(e){var t=e.data;switch(t.target){case"mail":return t.show_text;default:return t.search_text}}},{key:"_searchViaEnterPress",value:function(){this._startSearch({force:!0,metrika:"enter"})}},{key:"_searchViaButton",value:function(){if(this.searchState.isFolded)return void this._activateSearch();this.searchState.resetCurrentSuggestItem(),this._startSearch({force:!0,metrika:"button"})}},{key:"_activateSearch",value:function(){this._setFocusOnInput(),this.unfoldAndShowSuggest()}},{key:"_startSearch",value:function(e){var t=this.props.searchService,n=this.searchState,i=n.getLastSelectedSuggestItem();if(i)return void this._selectItem(i,e);n.showSuggest=!1,t.startSearch(n.currentShowText,e,n)}},{key:"_compactModeExpand",value:function(){this._activateSearch()}},{key:"_setFocusOnInput",value:function(){this._searchInput&&this._searchInput.wrappedInstance.setFocus()}},{key:"unfoldAndShowSuggest",value:function(){var e=this.props,t=e.searchState;e.searchService.startSuggest(),t.isFolded=!1,t.showSuggest=!0}},{key:"_maybeRenderSuggest",value:function(){var e=this.searchState;return e.isFolded||e.isAnimated||!e.showSuggest||!this._searchInput?null:W(z.a,{anchorElement:Daria.isNewTheme()?this._searchContainer:this._searchInput,onItemClick:this._selectItem})}},{key:"_maybeRenderAdvancedParamsPopup",value:function(){var e=this.searchState;return e.isFolded||e.isAnimated||!this._searchInput||!e.showAdvanced?null:W(V.a,{anchorElement:this._searchInput})}},{key:"_maybeRenderCompactModeSearchButton",value:function(){return this.isCompactHeaderMode&&this.searchState.isFolded?W("a",{className:"mail-GhostButton mail-GhostButton_search",onClick:this._compactModeExpand},void 0,K):null}},{key:"_maybeRenderSearchInput",value:function(){var t=this;return e.createElement($.a,{ref:function(e){return t._searchInput=e},unfoldAndShowSuggest:this.unfoldAndShowSuggest})}},{key:"_maybeRenderSearchContainerButton",value:function(){return this.isCompactHeaderMode&&this.searchState.isFolded?null:W(F.a,{theme:"normal",size:"m",pin:Object(b.f)()?"round-brick":"brick-round",cls:"mail-SearchContainer-Button",onClick:this._searchViaButton},void 0,Daria.isNewTheme()?J:G)}},{key:"render",value:function(){var t=this,i=this.props.searchStore,r=this.searchState,o={searchQuery:i.searchQuery,searchState:r},s={className:"mail-SearchContainer "+(r.hasLeftGap?"has-left-gap":"")};return Daria.isNewTheme()&&(s.ref=function(e){return t._searchContainer=e}),n.legacy.searchToggled(r.isFolded),e.createElement(w.Provider,o,e.createElement("div",s,this._maybeRenderCompactModeSearchButton(),Object(b.f)()?this._maybeRenderSearchContainerButton():this._maybeRenderSearchInput(),Object(b.f)()?this._maybeRenderSearchInput():this._maybeRenderSearchContainerButton(),this._maybeRenderSuggest(),this._maybeRenderAdvancedParamsPopup(),Y))}},{key:"isCompactHeaderMode",get:function(){var e=this.props,t=e.settingsStore,n=e.routerStore,i=["no-message","not-found"];return t.isCompactHeaderMode&&-1===i.indexOf(n.currentPage.page)}}]),n}(e.Component),g.propTypes={searchState:i.instanceOf(S.a).isRequired,searchStore:i.instanceOf(k.a).isRequired,routerStore:i.instanceOf(C.a).isRequired,foldersStore:i.instanceOf(M.a).isRequired,labelsStore:i.instanceOf(D.a).isRequired,settingsStore:i.instanceOf(O.a).isRequired,searchService:i.instanceOf(x.b).isRequired,searchLogService:i.instanceOf(x.a).isRequired,routerService:i.instanceOf(T.a).isRequired,shortcuts:i.instanceOf(P.a).isRequired},g.legacy={searchToggled:function(e){_.a.getSearchNode().toggleClass("is-folded",e),_.a.getAppNode().toggleClass("mail-App-Search",!e),_.a.getAppHeaderNode().toggleClass("with-Search",!e)}},d=v,u(d.prototype,"_changeSelectedItem",[y.action],Object.getOwnPropertyDescriptor(d.prototype,"_changeSelectedItem"),d.prototype),u(d.prototype,"_startSearch",[y.action],Object.getOwnPropertyDescriptor(d.prototype,"_startSearch"),d.prototype),f=u(d.prototype,"_selectItem",[y.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{force:!0,metrika:"suggest"},i=e.props.searchService,r=e.searchState,o=t.data,s=!1;switch(e._logSelectSuggestItem(t),r.showSuggest=!1,o.target){case"mail":s=e._handleMessageClick(o);break;case"ql":s=e._handleQueryLanguageClick(o);break;case"folder":s=e._setAdvancedOption("fid",o.fid);break;case"label":case"unread":case"important":s=e._setAdvancedOption("lid",o.lid)}s||(r.currentShowText=o.search_text,i.startSearch(o.search_text,n,r))}}}),p=u(d.prototype,"_handleMessageClick",[y.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.props.routerService;return!!t.mid&&(n.navigateToMessage(t.mid,t.fid),!0)}}}),h=u(d.prototype,"_handleQueryLanguageClick",[y.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.props.searchStore.searchQuery,i=e.searchState;return n.currentSearchText=t.search_text,n.currentSuggestText=t.search_text,i.currentShowText=t.search_text,e._setFocusOnInput(),!0}}}),m=u(d.prototype,"_setAdvancedOption",[y.action],{enumerable:!0,initializer:function(){var e=this;return function(t,n){var i=e.props.searchStore.searchQuery;return!!n&&(i.setAdvanced(t,n),i.currentSearchText="",i.currentSuggestText="",e.searchState.currentShowText="",!0)}}}),u(d.prototype,"_compactModeExpand",[y.action],Object.getOwnPropertyDescriptor(d.prototype,"_compactModeExpand"),d.prototype),u(d.prototype,"unfoldAndShowSuggest",[y.action],Object.getOwnPropertyDescriptor(d.prototype,"unfoldAndShowSuggest"),d.prototype),u(d.prototype,"isCompactHeaderMode",[y.computed],Object.getOwnPropertyDescriptor(d.prototype,"isCompactHeaderMode"),d.prototype),c=d))||c)||c;t.a=X}).call(t,n(232),n(230))},function(e,t,n){"use strict";var i=n(249),r=n(233),o=n(375);e.exports=function(){function e(e,t,n,i,s,a){a!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(254),a=function(e){function t(e,n,o){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return e.searchQuery.paramsForSuggest},function(){o.showSuggest&&n.startSuggest()}))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(254),a=function(e){function t(e,n,o,s){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return n.searchQuery.getAutosearchParams()},function(){s.isFolded||o.isSearchLocked||o.startSearch(s.currentShowText,{force:!0,metrika:"advanced"},s)}))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(254),a=function(e){function t(e,n,o,s){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return{page:e.currentPage.page,params:e.currentPage.params}},function(){if(!n.wasSearchRequestSimplified){if(e.isCollectorSearch())return s.isFolded=!0,void n.searchQuery.reset();var t=e.isSearchResultsPage;o.syncSearchQuery(),s.currentShowText=n.searchQuery.currentSuggestText;var i=n.searchQuery.isAdvancedDirty||Boolean(n.searchQuery.currentSearchText);s.isFolded&&t&&i?s.isFolded=!1:s.isFolded||t||s.showAdvanced||(s.isFolded=!0)}},{fireImmediately:!0}))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(254),a=function(e){function t(e,n){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return n.showSuggest},function(t){t||e.cleanupSuggest()}))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(254),a=function(e){function t(e,n){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return e.suggestItems},function(){return n.resetCurrentSuggestItem()}))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(254),a=function(e){function t(e,n){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return n.showAdvanced},function(){e.logToggleAdvanced(n.currentShowText,n.showAdvanced)}))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(254),a=function(e){function t(e,n,o){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return{isUnfolded:!o.isFolded,isDefaultSuggest:e.searchQuery.isDefaultSuggest,hasSuggestItems:e.hasSuggestItems}},function(e){e.isUnfolded&&e.isDefaultSuggest&&e.hasSuggestItems&&n.logSearchSuggest({suggestWithEmptyRequest:!0})}))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";e.exports={delims:{elem:"__",mod:{name:"_",val:"_"}},fs:{pattern:"${layer}.blocks/${entity}.${tech}",scheme:"nested"},wordPattern:"[a-zA-Z0-9]+(?:-[a-zA-Z0-9]+)*"}},function(e,t,n){"use strict";e.exports={delims:{elem:"-",mod:{name:"_",val:"_"}},fs:{delims:{elem:""},pattern:"${layer?${layer}.}blocks/${entity}.${tech}",scheme:"nested"},wordPattern:"[a-zA-Z0-9]+"}},function(e,t,n){"use strict";e.exports={delims:{elem:"__",mod:{name:"--",val:"_"}},fs:{pattern:"${layer}.blocks/${entity}.${tech}",scheme:"nested"},wordPattern:"[a-zA-Z0-9]+(?:-[a-zA-Z0-9]+)*"}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(232),a=i(s),u=n(231),l=(n(402).default||n(402)).applyDecls(),c=i(l);t.default=(0,u.declMod)(function(e){return e.hasControl},{block:"button2",tag:"span",mods:function(){return o({},this.__base.apply(this,arguments),{"has-control":"yes"})},attrs:function(){return o({},this.__base.apply(this,arguments),{type:void 0,name:void 0,value:void 0,id:void 0,tabIndex:void 0,disabled:void 0,"aria-disabled":void 0,autoComplete:void 0})},content:function(e){var t=e.id,n=e.name,i=e.value,s=e.tabIndex,u=e.disabled,l=e.control,d=void 0===l?{}:l,f=d.attrs,p=d.type,h=d.mix,m={};return["checkbox","radio"].indexOf(p)>=0&&(m={"aria-checked":this.state.checked?"true":void 0,checked:this.state.checked||!1}),[].concat(r(this.__base.apply(this,arguments)),[a.default.createElement(c.default,o({id:t,name:n,value:i,disabled:u,mix:h,attrs:o({},f,m),type:p},{tabIndex:s,key:"control"}))])}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(230),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.declMod)({type:"check"},{block:"button2",onClick:function(e){this.__base.apply(this,arguments),this.setState({checked:!this.state.checked})}},{propTypes:{checked:r.default.bool,type:r.default.string}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.declMod)({type:"link"},{block:"button2",tag:"a",willInit:function(){this.__base.apply(this,arguments),this.defaultPressKeys=["ENTER"]},attrs:function(e){var t=e.target,n=e.url,r=e.rel,o=e.tabIndex,s=void 0===o?0:o,a=this.state.disabled;return"_blank"===t&&r&&-1===r.indexOf("noopener")&&(r+=" noopener"),i({},this.__base.apply(this,arguments),{rel:r,target:t,type:void 0,autoComplete:void 0,href:a?void 0:n,disabled:void 0,tabIndex:a?-1:s})}},{propTypes:{url:o.default.string,target:o.default.string,type:o.default.string,rel:o.default.string}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(230),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(231);t.default=(0,o.declMod)({type:"radio"},{block:"button2",onClick:function(e){this.__base.apply(this,arguments),this.setState({checked:!0})}},{propTypes:{type:r.default.string}})},function(e,t,n){"use strict";var i=n(1787),r=n.n(i);t.a=r.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(405).default||n(405)).applyDecls(),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";(function(e,i){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return b});var u,l,c=n(265),d=n.n(c),f=n(360),p=n(274),h=n(1789),m=n(1790),g=(n.n(m),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),b=(l=u=function(t){function n(){return o(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),v(n,[{key:"_maybeRenderTitle",value:function(){var e=this.props.title;return e?_("title",{},void 0,e):null}},{key:"render",value:function(){var t,i=this.props,o=i.cls,s=i.color,a=i.id,u=i.onMouseDown,l=i.data,c=void 0===l?{}:l,f={};s&&(f.color=s);var p=d()((t={svgicon:!0},r(t,"svgicon-"+a,!0),r(t,o||"",!0),t));return _("svg",{xmlns:"http://www.w3.org/2000/svg",className:p,style:f,onMouseDown:u},void 0,n.useOrInlineSvg(a),e.createElement("rect",g({height:"100%",width:"100%",style:{fill:"transparent"}},c),this._maybeRenderTitle()))}}],[{key:"useOrInlineSvg",value:function(e){if(f.a.isIE()){var t=Object(h.a)(e);return t?_("svg",{id:t.id,viewBox:t.viewBox,dangerouslySetInnerHTML:{__html:t.svgBody}}):(Object(p.a)("Не удалось найти SVG иконку #"+t.id),null)}return _("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"#svgicon-"+e})}}]),n}(e.PureComponent),u.propTypes={id:i.string.isRequired,color:i.string,cls:i.string,onMouseDown:i.func,title:i.string,data:i.object},l)}).call(t,n(232),n(230))},function(e,t,n){"use strict";t.a=function(){var e={};return function(t){if(e[t])return e[t];var n="svgicon-"+t,i=document.getElementById(n);if(i){var r=Array.prototype.slice.call(i.childNodes),o=new XMLSerializer,s=r.reduce(function(e,t){return e+o.serializeToString(t)},""),a=i.getAttribute("viewBox");return e[t]={id:n,viewBox:a,svgBody:s},e[t]}return null}}()},function(e,t){},function(e,t,n){"use strict";var i=n(1792);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function u(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return W});var l,c,d,f,p,h,m,g,v,_,b,y=n(396),w=n(234),S=n(238),k=(n.n(S),n(265)),C=n.n(k),M=n(268),D=n(293),O=n(305),x=n(306),T=n(307),P=n(341),E=n(1793),I=n(250),A=n(1804),j=n(1807),R=n(1808),L=n(303),N=n(1809),F=(n.n(N),n(246)),B=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),U=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),$=i18n("%Search_Placeholder"),z=i18n("%Toolbar_Mobile_SearchMessages"),V=i18n("%Search_Advanced_Search"),H=U(I.a,{id:"mail--SearchSuggest-Close"}),q=U(I.a,{id:"mail--SearchSuggest-Settings"}),W=(l=Object(S.inject)("searchStore","searchService","searchLogService","searchQuery","searchState","settingsStore","shortcuts"))(c=Object(S.observer)((b=_=function(t){function n(){var e,t,i,s;r(this,n);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return t=i=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),i.onInputClick=function(){i.props.unfoldAndShowSuggest()},i.onInputKeyDown=function(e){var t=i.props.shortcuts;switch(e.which){case R.a.ENTER:i.preventKeyDown(e),t.emit("SearchInput:enter");break;case R.a.ESC:i.preventKeyDown(e),i._handleEsc();break;case R.a.DOWN:i.preventKeyDown(e),t.emit("SearchInput:down");break;case R.a.UP:i.preventKeyDown(e),t.emit("SearchInput:up")}},i.onInputFocus=function(){i.props.unfoldAndShowSuggest()},a(i,"onInputChange",f,i),a(i,"onIconAdvancedMouseDown",p,i),a(i,"onIconCleanMouseDown",h,i),a(i,"_handleEsc",m,i),a(i,"_resetAndShowDefaultSuggest",g,i),a(i,"_fold",v,i),i.setFocus=function(){i._textInput._control.focus()},i._blur=function(){i._textInput._control.blur()},i._getValue=function(){return i._textInput._control.value},s=t,o(i,s)}return s(n,t),B(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.searchState,n=e.searchStore,i=e.searchService,r=e.searchLogService;this._animateReaction=new j.a(t,n,i,r,this._blur,y.a.headTabsRecalculate)}},{key:"componentWillUnmount",value:function(){this._animateReaction.cancel()}},{key:"preventClick",value:function(e){e.stopPropagation()}},{key:"preventKeyDown",value:function(e){e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},{key:"_maybeRenderInputIcons",value:function(){var e=this.props,t=e.searchStore,n=e.searchState,i=t.searchQuery;if(n.isFolded&&!Object(F.f)())return null;var r=C()({"mail-SearchInput_IconContainer":!0,"is-active":n.showAdvanced||i.isAdvancedDirty});return U(A.a,{},void 0,U("span",{className:"mail-SearchInput_IconContainer",onMouseDown:this.onIconCleanMouseDown,onClick:this.preventClick},void 0,H),U("span",{className:r,onMouseDown:this.onIconAdvancedMouseDown,onClick:this.preventClick,title:V},void 0,q))}},{key:"_maybeGetInputPlaceholder",value:function(){return this.props.searchState.isFolded?Daria.isNewTheme()?z:null:$}},{key:"_getShowText",value:function(){var e=this.props.searchState,t=e.isFolded,n=e.currentShowText,i=e.shouldShowCurrentSearchText;return t||!i?"":n}},{key:"render",value:function(){var t=this;return e.createElement(E.a,{cls:"mail-SearchInput",theme:"normal",size:"m",pin:(Object(F.f)(),"clear-brick"),iconRight:this._maybeRenderInputIcons(),placeholder:this._maybeGetInputPlaceholder(),text:this._getShowText(),ref:function(e){t._textInput=e},onFocus:this.onInputFocus,controlAttrs:{onClick:this.onInputClick,onKeyDown:this.onInputKeyDown,onChange:this.onInputChange,maxLength:L.a}})}}]),n}(e.Component),_.propTypes={searchStore:i.instanceOf(O.a).isRequired,searchService:i.instanceOf(T.b).isRequired,searchLogService:i.instanceOf(T.a).isRequired,searchQuery:i.instanceOf(M.a).isRequired,searchState:i.instanceOf(D.a).isRequired,settingsStore:i.instanceOf(x.a).isRequired,shortcuts:i.instanceOf(P.a).isRequired,unfoldAndShowSuggest:i.func.isRequired},d=b,f=u(d.prototype,"onInputChange",[w.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e._getValue(),n=e.props,i=n.searchQuery,r=n.searchState;i.currentSuggestText=t,r.currentShowText=t,i.shouldShowCurrentSearchText=!0,r.shouldShowCurrentSearchText=!0,e.props.unfoldAndShowSuggest()}}}),p=u(d.prototype,"onIconAdvancedMouseDown",[w.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.props.searchState;t.preventDefault(),t.stopPropagation(),n.showAdvanced=!n.showAdvanced}}}),h=u(d.prototype,"onIconCleanMouseDown",[w.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.props,i=n.searchState,r=n.settingsStore;i.currentShowText?(e._resetAndShowDefaultSuggest(),t.preventDefault(),t.stopPropagation()):e._fold(),r.isCompactHeaderMode&&ns.events.trigger("daria:vToolbarButton:restruct")}}}),m=u(d.prototype,"_handleEsc",[w.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props.searchState;t.showAdvanced?t.showAdvanced=!1:t.showSuggest?t.showSuggest=!1:t.currentShowText?e._resetAndShowDefaultSuggest():e._fold()}}}),g=u(d.prototype,"_resetAndShowDefaultSuggest",[w.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props,n=t.searchState,i=t.searchService;n.currentShowText="",i.resetSearch(),e.props.unfoldAndShowSuggest()}}}),v=u(d.prototype,"_fold",[w.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props,n=t.searchState,i=t.searchService;n.isFolded=!0,i.resetSearch({openPageBeforeSearch:!0})}}}),c=d))||c)||c}).call(t,n(232),n(230))},function(e,t,n){"use strict";var i=n(1794),r=n.n(i),o=n(1803);n.n(o);t.a=r.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(1795),n(1796),n(343),n(344),n(1799),n(1800),n(1802),(n(412).default||n(412)).applyDecls()),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(231),c=(n(260),(n(244).default||n(244)).applyDecls()),d=i(c),f=(n(406).default||n(406)).applyDecls(),p=i(f),h=(n(308).default||n(308)).applyDecls(),m=i(h);t.default=(0,l.decl)(d.default,{block:"textinput",tag:"span",willInit:function(){this.__base.apply(this,arguments),this._onChange=this._onChange.bind(this),this.setControlReference=this.setControlReference.bind(this)},attrs:function(e){var t=e.style,n=e.attrs;return r({},this.__base.apply(this,arguments),n,{style:t})},_getControlAttrs:function(){return{}},mods:function(e){var t=e.type,n=e.theme,i=e.size,o=e.pin,s=e.view;return r({},this.__base.apply(this,arguments),{type:"text"!==t&&t,theme:n,view:s,size:i,pin:o})},content:function(e){var t=e.id,n=e.type,i=e.name,o=e.text,a=e.tabIndex,u=e.placeholder,l=e.autocomplete,c=e.controlAttrs,d=e.onKeyDown,f=this.state.disabled;return[s.default.createElement(p.default,r({key:"control"},r({id:t,type:n,name:i,tabIndex:a,disabled:f,placeholder:u,value:void 0===o?"":o,innerRef:this.setControlReference,autoComplete:!1===l?"off":void 0,onChange:f?void 0:this._onChange,onKeyDown:f?void 0:d},c))),s.default.createElement(m.default,{key:"box"})]},_onChange:function(e){this.props.onChange&&this.props.onChange(e.target.value,this.props)},setControlReference:function(e){this._control=e},focus:function(){this._control.focus()},blur:function(){this._control.blur()}},{propTypes:{view:u.default.oneOf(["classic","default"]),tone:u.default.string,theme:u.default.string.isRequired,size:u.default.oneOf(["xs","s","m","n"]),type:u.default.string,id:u.default.string,name:u.default.string,tabindex:u.default.string,text:u.default.string,placeholder:u.default.string,autocomplete:u.default.bool,onChange:u.default.func},defaultProps:{view:"classic",type:"text",onChange:function(){}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.decl)({block:"textinput",didMount:function(){this.props.autoFocus&&this.focus()}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(231),u=(n(260),(n(244).default||n(244)).applyDecls()),l=i(u),c=(n(256),n(309),(n(407).default||n(407)).applyDecls()),d=i(c);t.default=(0,a.decl)(l.default,{block:"textinput",elem:"clear",iconType:function(){},iconGlyph:function(){},mods:function(e){var t=e.theme,n=e.visible;return r({},this.__base.apply(this,arguments),{theme:t,visible:(0,a.bool2string)(n)})},render:function(){var e=this.block,t=this.elem,n=this.props,i=n.disabled,r=n.size;return s.default.createElement(d.default,{size:r,disabled:i,type:this.iconType(this.props),glyph:this.iconGlyph(this.props),attrs:this.attrs(this.props),mix:[{block:e,elem:t,mods:this.mods(this.props)},{block:e,elem:"icon"}]})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.declMod)({theme:"normal"},{block:"textinput",elem:"clear",iconType:function(e){return"default"!==e.view?"cross":void 0},iconGlyph:function(e){return"default"===e.view?"x-sign":void 0}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);t.default=(0,r.declMod)(function(e){return e.pin},{block:"textinput",mods:function(){return i({},this.__base.apply(this,arguments),{"has-pin":"yes"})}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(237),c=n(231),d=(n(248).default||n(248)).applyDecls(),f=i(d),p=(n(269),n(261),(n(270).default||n(270)).applyDecls()),h=i(p),m=(n(1801),(n(411).default||n(411)).applyDecls()),g=i(m),v=(n(308).default||n(308)).applyDecls(),_=i(v);t.default=(0,c.declMod)({suggest:!0},{block:"textinput",willInit:function(){this.__base.apply(this,arguments),this.state.suggestVisible=!1,this.state.items=[],this.state.metainfo={},this.state.popupWidth=100,this.state.currentItem=-1,this.state.origText=null,this._onDocKeyDown=this._onDocKeyDown.bind(this),this._onItemMouseDown=this._onItemMouseDown.bind(this),this._onItemMouseEnter=this._onItemMouseEnter.bind(this),this._onItemMouseLeave=this._onItemMouseLeave.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onKeyPress=this._onKeyPress.bind(this)},didMount:function(){this.__base.apply(this,arguments),this.setState({popupWidth:this._boxDom.offsetWidth})},mods:function(e){var t=e.suggest;return r({},this.__base.apply(this,arguments),{suggest:(0,c.bool2string)(t)})},attrs:function(){return r({},this.__base.apply(this,arguments),{onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress})},content:function(e){var t=this,n=(e.suggestUrl,this.block),i=this.__base.apply(this,arguments);return i=o.Children.map(i,function(e){return _.default.isBox(e)?s.default.cloneElement(e,{ref:function(e){t._box=e,t._boxDom=(0,l.findDOMNode)(e)}}):e}),this.elems=this._buildPopupContent(this.state.items,this.state.metainfo),i.push(s.default.createElement(h.default,{mix:{block:n,elem:"popup"},key:"popup",theme:"normal",mainOffset:0,zIndexGroupLevel:this.props.zIndexGroupLevel,directions:["bottom-left"],visible:this.state.suggestVisible,style:{minWidth:this.state.popupWidth},anchor:this._box},this.elems)),i},_onDocKeyDown:function(e){e.which===f.default.ESC&&this._suggestHide()},_onClearClick:function(e){this.preventShow=!0,this._suggestHide();var t=this.__base.apply(this,arguments);return this.preventShow=!1,t},_onChange:function(e){return this._doRequest(e),this.__base.apply(this,arguments)},_suggestShow:function(){window.addEventListener("keydown",this._onDocKeyDown)},_suggestHide:function(){window.removeEventListener("keydown",this._onDocKeyDown),this.elems=[],this.setState({items:[],metainfo:{},currentItem:-1,origText:null,suggestVisible:!1})},_doRequest:function(e){var t=this,n=e.target.value||"",i=this.props;(0,i.dataprovider)(i.suggestUrl,n,function(e,n){var i=t.state.focused&&Boolean(e.length);t.state.suggestVisible!==i&&t._suggestShow(),t.setState({items:e,metainfo:n,suggestVisible:i,currentItem:-1,origText:null})})},onFocus:function(e){return this.props.showListOnFocus&&!this.preventShow&&this._doRequest(e),this.__base.apply(this,arguments)},onBlur:function(){return this._suggestHide(),this.__base.apply(this,arguments)},_onSelectItem:function(e,t){var n=this;this.props.onChange&&this.props.onChange(e.props.val,this.props,{source:"suggest",byKeyboard:t}),this._setCarret(),this._suggestHide(),t||(this.preventShow=!0,setTimeout(function(){n.focus(),n.preventShow=!1},1))},_setCarret:function(){var e=this._control,t=e.value.length;e.selectionStart===t&&e.setSelectionRange(t,t)},_onItemMouseDown:function(e,t){this._onSelectItem(t)},_onItemMouseEnter:function(e,t){this.setState({currentItem:t.props.pos})},_onItemMouseLeave:function(e,t){this.setState({currentItem:-1})},_onKeyDown:function(e){if(f.default.is(e.which,"DOWN","UP")&&!e.shiftKey){e.preventDefault();var t=this.state.items.length;if(t){var n=e.which-39,i=this.state.currentItem;if(0===i&&-1===n||i+n>=t)return null!==this.state.origText&&this.props.onChange&&this.props.onChange(this.state.origText,this.props,{source:"suggest"}),void this.setState({currentItem:-1,origText:null});i+=n,i<0?i=t-1:i>=t&&(i=0),this.setState({currentItem:i}),this.props.updateOnEnter&&(null===this.state.origText&&this.setState({origText:this.props.text}),this.props.onChange&&this.props.onChange(this.elems[i].props.val,this.props,{source:"suggest",itemIndex:i}))}}},_onKeyPress:function(e){e.which===f.default.ENTER&&this.state.currentItem>-1&&(e.preventDefault(),this._onSelectItem(this.elems[this.state.currentItem],!0))},_buildPopupContent:function(e,t){var n=this;return e.map(function(e,t){var i="text",r=e;return Array.isArray(e)&&(i=e[0],r=e[1]),s.default.createElement(g.default,{key:"item"+t,type:i,pos:t,val:r,hovered:n.state.currentItem===t,onMouseEnter:n._onItemMouseEnter,onMouseLeave:n._onItemMouseLeave,onMouseDown:n._onItemMouseDown},r)})}},{propTypes:{dataprovider:u.default.func,suggestUrl:u.default.string,showListOnFocus:u.default.bool,updateOnEnter:u.default.bool,zIndexGroupLevel:u.default.number},defaultProps:{showListOnFocus:!0,updateOnEnter:!0}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(230),s=i(o),a=n(231),u=(n(260),(n(244).default||n(244)).applyDecls()),l=i(u);t.default=(0,a.decl)(l.default,{block:"textinput",elem:"suggest-item",willInit:function(){this.__base.apply(this,arguments),this.state.hovered=!1,this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this)},mods:function(e){var t=e.type;return r({},this.__base.apply(this,arguments),{type:t,hovered:(0,a.bool2string)(this.props.hovered||this.state.hovered)})},onMouseDown:function(e){this.props.onMouseDown&&this.props.onMouseDown(e,this)}},{propTypes:{type:s.default.string,val:s.default.string,pos:s.default.number,hovered:s.default.bool,onMouseDown:s.default.func,onMouseEnter:s.default.func},defaultProps:{type:"text",pos:-1}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(231);(n(343).default||n(343)).applyDecls(),t.default=(0,r.declMod)({theme:"websearch"},{block:"textinput",mods:function(){return i({},this.__base.apply(this,arguments),{"has-clear":"yes"})}})},function(e,t){},function(e,t,n){"use strict";var i=n(1805);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";function i(e){return o("div",{className:"mail-IconsBox"},void 0,e.children)}t.a=i;var r=n(1806),o=(n.n(r),function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}())},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return p});var u,l,c=n(234),d=n(254),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=(u=function(e){function t(e,n,o,a,u,c){i(this,t);var d=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return e.isFolded},function(){return d._foldingReaction()}));return d._animationTimer=null,s(d,"_animationEnded",l,d),d.searchState=e,d.searchStore=n,d.searchService=o,d.searchLogService=a,d.blur=u,d.headTabsRecalculate=c,d}return o(t,e),f(t,[{key:"destroy",value:function(){this.searchState=null,this.searchStore=null,this.searchService=null,this.searchLogService=null,this.blur=null,this.headTabsRecalculate=null}},{key:"_foldingReaction",value:function(){var e=this.searchState,t=this.searchStore,n=this.searchLogService,i=this.blur,r=this.headTabsRecalculate;e.isFolded?(i(),e.currentShowText="",t.searchQuery.currentSuggestText="",t.dropSearchSession(),r()):n.countSearchActivation(),this._animationPlayed()}},{key:"_animationPlayed",value:function(){var e=this.searchState;this._animationTimer&&window.clearTimeout(this._animationTimer),e.isAnimated=!0,this._animationTimer=window.setTimeout(this._animationEnded,450)}}]),t}(d.a),a(u.prototype,"_foldingReaction",[c.action],Object.getOwnPropertyDescriptor(u.prototype,"_foldingReaction"),u.prototype),a(u.prototype,"_animationPlayed",[c.action],Object.getOwnPropertyDescriptor(u.prototype,"_animationPlayed"),u.prototype),l=a(u.prototype,"_animationEnded",[c.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.searchState,n=e.headTabsRecalculate;e._animationTimer=null,t.isAnimated=!1,t.isFolded&&(n(),setTimeout(n,10))}}}),u)},function(e,t,n){"use strict";t.a={ENTER:13,ESC:27,UP:38,DOWN:40}},function(e,t){},function(e,t,n){"use strict";var i=n(1811);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i,r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function l(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return x});var c,d,f,p,h,m,g=n(234),v=n(238),_=(n.n(v),n(345)),b=n(293),y=n(305),w=n(307),S=n(271),k=n(414),C=n(1822),M=n(1836),D=(n.n(M),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),O=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),x=(c=Object(v.inject)("searchStore","searchService","searchState"))(d=Object(v.observer)((m=h=function(t){function n(){var t,r,a,l;o(this,n);for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];return r=a=s(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(d))),a.state={canBeVisible:!1},a._alignWidth=function(){if(a.isVisible){var e=a.props.anchorElement,t=e?i.findDOMNode(e):null,n=t.getBoundingClientRect(),r=a._popupElement.domElementPopup;r.style.left=n.left+"px",r.style.width=n.width+"px"}},u(a,"onOutsideClick",p,a),a._renderSuggestItem=function(t,n){var i=a.props,r=i.searchState,o=i.onItemClick,s=r.getHighlightedSuggestItemIndex();return e.createElement(k.a.Item,{key:t.data.target+":"+t.data.search_text,title:t.data.show_text,onClick:function(){o(t)},onMouseEnter:a._onItemMouseEnter.bind(a,n),ref:function(e){return a._onItemMounted(e,n===s)}},O(C.a,{itemData:t.data}))},l=r,s(a,l)}return a(n,t),D(n,[{key:"componentDidMount",value:function(){Object(_.a)(this._alignWidth),this._alignWidth(),this.setState({canBeVisible:!0})}},{key:"componentDidUpdate",value:function(){this._alignWidth()}},{key:"componentWillUnmount",value:function(){Object(_.b)(this._alignWidth)}},{key:"_onItemMounted",value:function(e,t){e&&e.setState({hovered:t})}},{key:"_onItemMouseEnter",value:function(e){var t=this.props.searchState;t.resetCurrentSuggestItem(),t.setHighlightedSuggestItemIndex(e)}},{key:"render",value:function(){var t=this;if(!this.isVisible)return null;var n=this.props,i=n.searchStore,r=n.searchState,o=n.anchorElement;return e.createElement(S.a,{theme:"normal",anchor:o,visible:this.isVisible,directions:["bottom-left"],mainOffset:-1,ref:function(e){return t._popupElement=e},autoclosable:!0,onOutsideClick:this.onOutsideClick,cls:"mail-SearchSuggest-Container "+(r.hasLeftGap?"has-left-gap":"")},O(k.a,{theme:"normal",size:"m",cls:"mail-SearchSuggest"},void 0,i.suggestItems.map(this._renderSuggestItem)))}},{key:"isVisible",get:function(){var e=this.props,t=e.searchStore,n=e.searchState;return this.state.canBeVisible&&Boolean(this.props.anchorElement)&&n.showSuggest&&t.suggestItems.length>0}}]),n}(e.Component),h.propTypes={searchStore:r.instanceOf(y.a).isRequired,searchService:r.instanceOf(w.b).isRequired,searchState:r.instanceOf(b.a).isRequired,anchorElement:r.object,onItemClick:r.func.isRequired},f=m,p=l(f.prototype,"onOutsideClick",[g.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.props.searchState.showSuggest=!1}}}),l(f.prototype,"_onItemMouseEnter",[g.action],Object.getOwnPropertyDescriptor(f.prototype,"_onItemMouseEnter"),f.prototype),d=f))||d)||d}).call(t,n(232),n(237),n(230))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return f});var s=n(230),a=n.n(s),u=n(1813),l=n.n(u),c=n(1817),d=(n.n(c),n(1818)),f=(n.n(d),function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(l.a));f.propTypes=Object.assign(l.a.propTypes,{theme:a.a.oneOf(["normal","clear","mail-promo"])})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(269),n(272),n(1814),n(1816),n(270),n(413),(n(261).default||n(261)).applyDecls()),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(230),s=i(o),a=n(237),u=n(231),l=n(1815),c=i(l);(n(270).default||n(270)).applyDecls(),t.default=(0,u.declMod)({hiding:!0,target:"anchor"},{block:"popup2",willInit:function(){this._anchorParents=[],this._onAnchorParentsScroll=this._onAnchorParentsScroll.bind(this),this._updateIsAnchorVisible=(0,c.default)(this._updateIsAnchorVisible,this.__self.UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL),this.__base.apply(this,arguments)},mods:function(e){var t=e.hiding;return r({},this.__base.apply(this,arguments),{hiding:(0,u.bool2string)(t)})},willReceiveProps:function(e){var t=e.visible,n=e.anchor;this.__base.apply(this,arguments),t&&!this.props.visible?this._bindToAnchorParents(n):this.props.visible&&!t&&this._unbindFromAnchorParents()},didMount:function(){this.__base.apply(this,arguments),this.props.visible&&this.props.anchor&&this._bindToAnchorParents(this.props.anchor)},willUnmount:function(){this.__base.apply(this,arguments),this._unbindFromAnchorParents()},_bindToAnchorParents:function(e){var t=this;this._anchorParents=this._getAnchorParents(e),this._anchorParents.forEach(function(e,n){e.addEventListener("scroll",t._onAnchorParentsScroll)})},_unbindFromAnchorParents:function(){var e=this;this._anchorParents.forEach(function(t,n){t.removeEventListener("scroll",e._onAnchorParentsScroll)})},_getAnchorParents:function(e){for(var t=[],n={anchor:e},i=this.context.parentPopup;i&&i.anchor;)n=i,i=n.instance.context.parentPopup;for(var r=this._getAnchorDomNode(n.anchor),o=(0,a.findDOMNode)(r);o.parentNode&&"BODY"!==o.parentNode.tagName;)t.push(o.parentNode),o=o.parentNode;return t},_calcBestDrawingParams:function(e){var t=e.anchor,n=this.__base.apply(this,arguments);return void 0===this._isAnchorVisible&&(this._isAnchorVisible=this._calcIsAnchorVisible(t,n.direction)),this._style.popup.display=this._isAnchorVisible?"":"none",n},_checkDirection:function(e,t){return e.indexOf(t)>=0},_onAnchorParentsScroll:function(){this._updateIsAnchorVisible(),this.redraw(this.props)},_updateIsAnchorVisible:function(){var e=this._calcIsAnchorVisible(this.props.anchor,this._direction);e!==this._isAnchorVisible&&(this._isAnchorVisible=e,this.domElementPopup.style.display=this._isAnchorVisible?"":"none")},_calcIsAnchorVisible:function(e,t){for(var n=(0,a.findDOMNode)(this._getAnchorDomNode(e)),i=n.getBoundingClientRect(),r=i.left,o=i.top,s=r+n.offsetWidth,u=o+n.offsetHeight,l=Math.floor(this._checkDirection(t,"top")?o:u),c=Math.floor(this._checkDirection(t,"left")?r:s),d=!0,f=0;f<this._anchorParents.length;f++){var p=this._anchorParents[f],h=window.getComputedStyle(p),m=/scroll|hidden|auto/,g=m.test(h["overflow-y"]),v=m.test(h["overflow-x"]);if(g||v){var _=p.getBoundingClientRect(),b=Math.floor(_.top);if(l<b||b+p.offsetHeight<l)return d=!1;var y=Math.floor(_.left);return d=c>=y&&y+p.offsetWidth>=c}}return d}},{propTypes:{anchor:s.default.oneOfType([s.default.func,s.default.object]),hiding:s.default.bool}})},function(e,t){function n(e,t,n){function i(t){var n=m,i=g;return m=g=void 0,C=t,_=e.apply(i,n)}function o(e){return C=e,b=setTimeout(c,t),M?i(e):_}function s(e){var n=e-y,i=e-C,r=t-n;return D?S(r,v-i):r}function l(e){var n=e-y,i=e-C;return void 0===y||n>=t||n<0||D&&i>=v}function c(){var e=k();if(l(e))return d(e);b=setTimeout(c,s(e))}function d(e){return b=void 0,O&&m?i(e):(m=g=void 0,_)}function f(){void 0!==b&&clearTimeout(b),C=0,m=y=g=b=void 0}function p(){return void 0===b?_:d(k())}function h(){var e=k(),n=l(e);if(m=arguments,g=this,y=e,n){if(void 0===b)return o(y);if(D)return b=setTimeout(c,t),i(y)}return void 0===b&&(b=setTimeout(c,t)),_}var m,g,v,_,b,y,C=0,M=!1,D=!1,O=!0;if("function"!=typeof e)throw new TypeError(u);return t=a(t)||0,r(n)&&(M=!!n.leading,D="maxWait"in n,v=D?w(a(n.maxWait)||0,t):v,O="trailing"in n?!!n.trailing:O),h.cancel=f,h.flush=p,h}function i(e,t,i){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError(u);return r(i)&&(o="leading"in i?!!i.leading:o,s="trailing"in i?!!i.trailing:s),n(e,t,{leading:o,maxWait:t,trailing:s})}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){return!!e&&"object"==typeof e}function s(e){return"symbol"==typeof e||o(e)&&y.call(e)==c}function a(e){if("number"==typeof e)return e;if(s(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=p.test(e);return n||h.test(e)?m(e.slice(2),n?2:8):f.test(e)?l:+e}var u="Expected a function",l=NaN,c="[object Symbol]",d=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,h=/^0o[0-7]+$/i,m=parseInt,g="object"==typeof global&&global&&global.Object===Object&&global,v="object"==typeof self&&self&&self.Object===Object&&self,_=g||v||Function("return this")(),b=Object.prototype,y=b.toString,w=Math.max,S=Math.min,k=function(){return _.Date.now()};e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.declMod)({motionless:!0},{block:"popup2",_onWinScrollAndResize:function(){}})},function(e,t){},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(346),n(311),n(422),n(1820),n(423),n(424),(n(312).default||n(312)).applyDecls()),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.declMod)({type:"navigation"},{block:"menu",tag:"ul"})},function(e,t){},function(e,t,n){"use strict";var i=n(1823);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return O});var a,u,l,c,d=n(238),f=(n.n(d),n(274)),p=n(303),h=n(304),m=n(1824),g=n(1825),v=n(1826),_=n(1827),b=n(1828),y=n(1829),w=n(1830),S=n(1831),k=n(1834),C=n(1835),M=(n.n(C),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),D=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),O=(a=Object(d.inject)("labelsStore"))(u=Object(d.observer)((c=l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),M(t,[{key:"render",value:function(){var e=this.props,n=e.itemData,i=e.labelsStore;switch(n.target){case"history":return D(m.a,{itemData:n});case"subject":return D(g.a,{itemData:n});case"important":return D(_.a,{itemData:n});case"unread":return D(b.a,{itemData:n});case"folder":return D(y.a,{itemData:n});case"ql":return D(w.a,{itemData:n});case"contact":return D(S.a,{itemData:n});case"mail":return D(k.a,{itemData:n});case"label":return D(v.a,{itemData:n,labelColorCode:t._getLabelColor(n,i)});default:return Object(f.b)({errorType:"search-suggest-unsupported-target",target:n.target,suggestItemData:n}),null}}}],[{key:"_getLabelColor",value:function(e,t){var n=t.getLabelById(e.lid);return n?"#"+n.data.color:(Object(f.b)({errorType:"search-suggest-unknown-label",lid:e.lid,suggestItemData:e}),p.c)}}]),t}(e.PureComponent),l.propTypes={labelsStore:i.instanceOf(h.a).isRequired,itemData:i.object.isRequired},u=c))||u)||u}).call(t,n(232),n(230))},function(e,t,n){"use strict";(function(e){var i=n(262),r=n(250),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=o(r.a,{id:"mail--SearchSuggest-History",cls:"mail-IconContainer"}),a=function(e){var t=e.itemData;return o("div",{className:"mail-SuggestItem"},void 0,s,o(i.a,{text:t.show_text_highlighted}))};a.propTypes={itemData:e.object.isRequired},t.a=a}).call(t,n(230))},function(e,t,n){"use strict";(function(e){var i=n(262),r=n(250),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=o(r.a,{id:"mail--SearchSuggest-Subject",cls:"mail-IconContainer"}),a=function(e){var t=e.itemData;return o("div",{className:"mail-SuggestItem"},void 0,s,o(i.a,{text:t.show_text_highlighted}))};a.propTypes={itemData:e.object.isRequired},t.a=a}).call(t,n(230))},function(e,t,n){"use strict";(function(e){var i=n(262),r=n(250),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=function(e){var t=e.itemData,n=e.labelColorCode;return o("div",{className:"mail-SuggestItem"},void 0,o(r.a,{id:"mail--SearchSuggest-Label",color:n,cls:"mail-IconContainer"}),o(i.a,{text:t.show_text_highlighted}))};s.propTypes={itemData:e.object.isRequired,labelColorCode:e.string.isRequired},t.a=s}).call(t,n(230))},function(e,t,n){"use strict";(function(e){var i=n(262),r=n(250),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=o(r.a,{id:"mail--SearchSuggest-Important",cls:"mail-IconContainer"}),a=function(e){var t=e.itemData;return o("div",{className:"mail-SuggestItem"},void 0,s,o(i.a,{text:t.show_text_highlighted}))};a.propTypes={itemData:e.object.isRequired},t.a=a}).call(t,n(230))},function(e,t,n){"use strict";(function(e){var i=n(262),r=n(250),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=o(r.a,{id:"mail--SearchSuggest-Unread",cls:"mail-IconContainer"}),a=function(e){var t=e.itemData;return o("div",{className:"mail-SuggestItem"},void 0,s,o(i.a,{text:t.show_text_highlighted}))};a.propTypes={itemData:e.object.isRequired},t.a=a}).call(t,n(230))},function(e,t,n){"use strict";(function(e){var i=n(262),r=n(250),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=o(r.a,{id:"mail--SearchSuggest-Folder",cls:"mail-IconContainer"}),a=function(e){var t=e.itemData;return o("div",{className:"mail-SuggestItem"},void 0,s,o(i.a,{text:t.show_text_highlighted}))};a.propTypes={itemData:e.object.isRequired},t.a=a}).call(t,n(230))},function(e,t,n){"use strict";(function(e){var i=n(262),r=n(250),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=o(r.a,{id:"mail--SearchSuggest-Ql",cls:"mail-IconContainer"}),a=function(e){var t=e.itemData;return o("div",{className:"mail-SuggestItem"},void 0,s,o(i.a,{text:t.show_text}))};a.propTypes={itemData:e.object.isRequired},t.a=a}).call(t,n(230))},function(e,t,n){"use strict";(function(e){var i=n(262),r=n(348),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=function(e){var t=e.itemData;return o("div",{className:"mail-SuggestItem"},void 0,o(r.a,{email:t.email,name:t.display_name,avatarRef:t.avatarRef,cls:"mail-IconContainer"}),o(i.a,{text:t.display_name_highlighted,cls:"mail-SuggestItem-Contact-Name"}),o(i.a,{text:t.email_highlighted,cls:"mail-SuggestItem-Contact-Email"}))};s.propTypes={itemData:e.object.isRequired},t.a=s}).call(t,n(230))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return f});var a,u,l=n(1833),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),f=(u=a=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.avatarRef,n=e.cls,i=e.email,r=e.name,o={email:i,name:r||i,ref:t,size:30},s=Object(l.a)(o);return d("span",{className:n,dangerouslySetInnerHTML:{__html:s}})}}]),t}(e.PureComponent),a.propTypes={email:i.string.isRequired,avatarRef:i.string.isRequired,name:i.string,cls:i.string},u)}).call(t,n(232),n(230))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(425),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(e){return Object(i.a)(r({},e,{href:!1,mode:"MessageSnippet-Item_userpic"}))}},function(e,t,n){"use strict";(function(e){var i=n(262),r=n(250),o=n(348),s=n(426),a=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),u=a(r.a,{id:"mail--SearchSuggest-Attach",cls:"mail-IconContainer mail-SuggestItem-Mail-AttachIcon"}),l=function(e){var t=e.itemData,n=Object(s.b)(t.received_date);return a("div",{className:"mail-SuggestItem"},void 0,a(o.a,{email:t.email,name:t.display_name,avatarRef:t.avatarRef,cls:"mail-IconContainer"}),a(i.a,{text:t.display_name_highlighted||t.display_name,cls:"mail-SuggestItem-Mail-From"}),a(i.a,{text:t.show_text_highlighted,cls:"mail-SuggestItem-Mail-Subject"}),t.has_attachments?u:null,a("span",{className:"mail-SuggestItem-Mail-Date",dangerouslySetInnerHTML:{__html:n}}))};l.propTypes={itemData:e.object.isRequired},t.a=l}).call(t,n(230))},function(e,t){},function(e,t){},function(e,t,n){"use strict";var i=n(1838);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function u(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return L});var l,c,d,f,p,h,m,g=n(1839),v=n(234),_=n(238),b=(n.n(_),n(268)),y=n(293),w=n(271),S=n(427),k=n(1843),C=n(1854),M=n(1857),D=n(1859),O=n(345),x=n(1878),T=(n.n(x),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),P=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),E=i18n("%Search_Options_With_Attachments"),I=P("div",{className:"mail-AdvancedParams-Row"},void 0,P(k.a,{})),A=P("div",{className:"mail-AdvancedParams-Row"},void 0,P(C.a,{})),j=P("div",{className:"mail-AdvancedParams-Row"},void 0,P(M.a,{})),R=P(D.a,{rowClass:"mail-AdvancedParams-Row"}),L=(l=Object(_.inject)("searchQuery","searchState"))(c=Object(_.observer)((m=h=function(t){function n(){var e,t,i,s;r(this,n);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return t=i=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),i.state={canBeVisible:!1},i._alignPopup=function(){i._popup&&i._popup.forceUpdate()},a(i,"onWithAttachmentsChange",f,i),a(i,"onOutsideClick",p,i),s=t,o(i,s)}return s(n,t),T(n,[{key:"componentDidMount",value:function(){Object(O.a)(this._alignPopup),this.setState({canBeVisible:!0})}},{key:"componentWillUnmount",value:function(){Object(O.b)(this._alignPopup)}},{key:"render",value:function(){var t=this;if(!this.isVisible)return null;var n=this.props,i=n.searchQuery,r=n.anchorElement;return e.createElement(w.a,{theme:"normal",anchor:r,visible:this.isVisible,directions:["bottom-right"],mainOffset:-1,ref:function(e){return t._popup=e},autoclosable:!0,onOutsideClick:this.onOutsideClick,cls:"mail-AdvancedParams"},I,A,j,P("div",{className:"mail-AdvancedParams-Row"},void 0,P(S.a,{theme:"normal",size:"s",checked:i.getAdvanced("attaches"),onChange:this.onWithAttachmentsChange},void 0,E)),R)}},{key:"isVisible",get:function(){return this.state.canBeVisible&&Boolean(this.props.anchorElement)}}]),n}(e.Component),h.propTypes={searchQuery:i.instanceOf(b.a).isRequired,searchState:i.instanceOf(y.a).isRequired,anchorElement:i.object},d=m,f=u(d.prototype,"onWithAttachmentsChange",[v.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props.searchQuery;t.setAdvanced("attaches",!t.getAdvanced("attaches"))}}}),p=u(d.prototype,"onOutsideClick",[v.action],{enumerable:!0,initializer:function(){var e=this;return function(t){if(t&&t.target){var n=t.target.classList.contains("react-datepicker__navigation"),i=Boolean(Object(g.a)(t.target,"js-prevent-popup-close"));if(n||i)return}e.props.searchState.showAdvanced=!1}}}),c=d))||c)||c}).call(t,n(232),n(230))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e,t){for(var n=e;n&&!n.classList.contains(t);)n=n.parentElement;return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(1841),(n(433).default||n(433)).applyDecls()),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(237),u=i(a),l=n(230),c=i(l),d=(n(248).default||n(248)).applyDecls(),f=i(d),p=n(231),h=(n(260),(n(244).default||n(244)).applyDecls()),m=i(h),g=(n(428).default||n(428)).applyDecls(),v=i(g),_=(n(429).default||n(429)).applyDecls(),b=i(_),y=(n(430).default||n(430)).applyDecls(),w=i(y),S=(n(432).default||n(432)).applyDecls(),k=i(S);t.default=(0,p.decl)(m.default,{block:"checkbox",tag:"span",willInit:function(){this.__base.apply(this,arguments),this.onChange=this.onChange.bind(this)},didMount:function(){this.DOMNode=u.default.findDOMNode(this),this.inputElement=u.default.findDOMNode(this.inputRef)},attrs:function(e){var t=e.title,n=e.attrs;return r({},this.__base.apply(this,arguments),n,{title:t})},_getControlAttrs:function(){return{}},mods:function(e){var t=e.view,n=e.theme,i=e.size,o=e.checked,s=e.lines;return void 0===s&&(s="multi"),r({},this.__base.apply(this,arguments),{view:t,theme:n,size:i,lines:s,checked:(0,p.bool2string)(o)})},content:function(e){var t=this,n=e.children,i=e.text,o=e.id,a=void 0===o?this.generateId():o,u=e.name,l=e.view,c=e.size,d=e.value,f=e.checked,p=e.controlAttrs,h=e.disabled,m=e.tabIndex,g="label"+a,_=n||i;return[s.default.createElement(v.default,{key:"box"},s.default.createElement(b.default,r({id:a,name:u,value:d,checked:f,disabled:h,labeledBy:g,tabIndex:m,onChange:h?void 0:this.onChange,onKeyDown:h?void 0:this.onKeyDown,onKeyUp:h?void 0:this.onKeyUp,attrs:p},{ref:function(e){return t.inputRef=e}})),s.default.createElement(w.default,{view:l,size:c})),_&&s.default.createElement(k.default,{key:"label",id:g,htmlFor:a},_)]},onChange:function(e){this.props.onChange&&this.props.onChange(e)},onClick:function(e){e.target===this.DOMNode&&this.inputElement.click()},onKeyDown:function(e){e.which===f.default.SPACE&&this.setState({pressed:!0}),this.__base.apply(this,arguments)},onKeyUp:function(e){e.which===f.default.SPACE&&this.setState({pressed:!1}),this.__base.apply(this,arguments)}},{propTypes:{view:c.default.oneOf(["classic","default"]),tone:c.default.string,theme:c.default.string,size:c.default.oneOf(["s","m","n"]),name:c.default.string,title:c.default.string,children:c.default.oneOfType([c.default.string,c.default.array,c.default.element]),lines:c.default.oneOf([!1,"one","multi"]),onChange:c.default.func,onKeyUp:c.default.func,onKeyDown:c.default.func},defaultProps:{view:"classic",onChange:function(){}}})},function(e,t){},function(e,t,n){"use strict";var i=n(1844);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,"a",function(){return k});var u,l,c,d,f,p,h=n(234),m=n(238),g=(n.n(m),n(268)),v=n(349),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),y=i18n("%Search_Options_All_Scopes"),w=[{text:i18n("%Search_Precise_Scope_From"),value:"hdr_from"},{text:i18n("%Search_Precise_Scope_To"),value:"hdr_to"},{text:i18n("%Search_Precise_Scope_Subject"),value:"hdr_subject"},{text:i18n("%Search_Precise_Scope_Body"),value:"body_text"}],S=b(v.a.Item,{val:"",cls:"js-prevent-popup-close"},void 0,y),k=(u=Object(m.inject)("searchQuery"))(l=Object(m.observer)((p=f=function(e){function t(){var e,n,i,s;r(this,t);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a(i,"onChange",d,i),s=n,o(i,s)}return s(t,e),_(t,[{key:"_getCurrentValue",value:function(){var e=this.props.searchQuery,t=e.getAdvanced("scope");return"rpopinfo"===t?"":t}},{key:"render",value:function(){return b(v.a,{theme:"normal",size:"s",type:"radio",width:"max",val:this._getCurrentValue(),onChange:this.onChange},void 0,S,b(v.a.Group,{},void 0,w.map(function(e){return b(v.a.Item,{val:e.value,cls:"js-prevent-popup-close"},e.value,e.text)})))}}]),t}(e.PureComponent),f.propTypes={searchQuery:i.instanceOf(g.a).isRequired},c=p,d=function(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(c.prototype,"onChange",[h.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=1===t.length?t[0]:"";e.props.searchQuery.setAdvanced("scope",n)}}}),l=c))||l)||l}).call(t,n(232),n(230))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(1846),n(1848),n(1849),n(1850),n(1851),n(1852),(n(439).default||n(439)).applyDecls()),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(231),c=(n(434).default||n(434)).applyDecls(),d=i(c),f=(n(436).default||n(436)).applyDecls(),p=i(f),h=(n(438).default||n(438)).applyDecls(),m=i(h),g=(n(346),(n(311).default||n(311)).applyDecls()),v=i(g),_=(n(415),n(420),(n(347).default||n(347)).applyDecls()),b=i(_),y=(n(310).default||n(310)).applyDecls(),w=i(y);t.default=(0,l.decl)({block:"select2",tag:"span",willInit:function(e){var t=e.val;this._initialVal=t,this.state={val:t=this._prepareVal(t),opened:!1},this._setAnchor=this._setAnchor.bind(this),this._getAnchorWidth=this._getAnchorWidth.bind(this),this._onButtonClick=this._onButtonClick.bind(this),this._onButtonBlur=this._onButtonBlur.bind(this),this._onOutsideClick=this._onOutsideClick.bind(this),this._onMenuClick=this._onMenuClick.bind(this),this._onMenuMouseUp=this._onMenuMouseUp.bind(this),this._onMenuMouseDown=this._onMenuMouseDown.bind(this),this._onChange=this._onChange.bind(this),this._onWinRotateAndResize=this._onWinRotateAndResize.bind(this),this._preventBlur=null,this._getMenu=this._getMenu.bind(this)},willReceiveProps:function(e){var t=e.val;this.__base.apply(this,arguments),this.setState({val:this._prepareVal(t)})},willUpdate:function(e,t){!0===t.opened?(window.addEventListener("resize",this._onWinRotateAndResize),window.addEventListener("orientationchange",this._onWinRotateAndResize)):(window.removeEventListener("resize",this._onWinRotateAndResize),window.removeEventListener("orientationchange",this._onWinRotateAndResize))},willUnmount:function(){window.removeEventListener("resize",this._onWinRotateAndResize),window.removeEventListener("orientationchange",this._onWinRotateAndResize)},getChildContext:function(){return{getMenu:this._getMenu}},mods:function(e){var t=e.theme,n=e.size,i=e.width,r=e.disabled,o=e.type,s=e.text,a=e.view,u=this.state.opened;return{theme:t,size:n,view:a,width:i,disabled:r,type:o,opened:(0,l.bool2string)(u),text:void 0===s&&"fixed"!==i?"vary":s}},content:function(e){var t=e.theme,n=e.size,i=e.type,a=e.text,u=e.view,l=e.tone,c=e.placeholder,f=e.name,h=e.maxHeight,g=e.optionsMaxHeight,_=e.control,y=e.width,S=e.disabled,k=e.itemIconHidden,C=e.items,M=e.children,D=e.zIndexGroupLevel,O=e.button,x=void 0===O?{}:O,T=e.menu,P=void 0===T?{}:T,E=e.popup,I=void 0===E?{}:E,A=this.state,j=A.val,R=A.opened,L=[],N=[];h=g||h,C&&(M=C.map(v.default.normalizeItem)),o.Children.forEach(M,function e(t){w.default.isGroup(t)&&t.props.children?[].concat(t.props.children).forEach(e):b.default.isItem(t)&&(N.push(t),L.push(t.props.val))}),j=void 0===j?[]:[].concat(j).filter(function(e){return-1!==L.indexOf(e)}),-1!==["radio","radiocheck"].indexOf(i)&&j.length>1&&(j=j.slice(-1)),void 0===a&&"fixed"!==y&&(a="vary"),c="vary"===a&&j.length?N.reduce(function(e,t){return-1!==j.indexOf(t.props.val)&&e.push(t.props.children),e},[]).join(", "):c;var F=Boolean(j.length&&-1!==["check","radiocheck"].indexOf(i));return[s.default.createElement(d.default,r({key:"button"},{val:j,tone:l,view:u,opened:R,placeholder:c,items:N,setAnchor:this._setAnchor,multiselectable:"check"===i,buttonProps:this._getButtonProps(x,{theme:t,size:n,disabled:S,checked:F,onClick:this._onButtonClick,onBlur:this._onButtonBlur})})),_&&s.default.createElement(m.default,{val:j,name:f,disabled:S,key:"control",items:N,multiple:"radio"!==i}),s.default.createElement(p.default,r({key:"popup"},{maxHeight:h,items:M,itemIconHidden:k,setAnchor:this._setAnchor,getAnchorWidth:this._getAnchorWidth,zIndexGroupLevel:D,menuProps:this._getMenuProps(P,{theme:"normal",size:n,type:i,view:u,tone:l,disabled:S,val:j,onClick:this._onMenuClick,onMouseUp:this._onMenuMouseUp,onMouseDown:this._onMenuMouseDown}),popupProps:this._getPopupProps(I,{tone:l,view:u,theme:"normal",visible:R,onOutsideClick:this._onOutsideClick})}))]},reset:function(){this.setState({val:this._prepareVal(this._initialVal)})},_setAnchor:function(e){if(void 0===e)return this._anchorDom;this._anchorDom=e},_getAnchorRect:function(){return this._anchorDom.getBoundingClientRect()},_getAnchorWidth:function(){return Math.round(this._getAnchorRect().width)},_getMenu:function(e){if(void 0===e)return this._menu;this._menu=e},_onMenuClick:function(){},_onMenuMouseUp:function(e){this._anchorDom.focus()},_onMenuMouseDown:function(e){this._preventBlur=!0},_onButtonBlur:function(){if(this._preventBlur)return void(this._preventBlur=null);this.setState({opened:!1})},_onButtonClick:function(e){this.setState({opened:!this.state.opened})},_onOutsideClick:function(e){this.setState({opened:!1})},_onChange:function(e){this.props.onChange&&this.props.onChange(e)},_overridableProps:function(e,t){return r({},e,t)},_getButtonProps:function(){return this._overridableProps.apply(this,arguments)},_getPopupProps:function(){var e={};return!0===this.state.opened&&(e.minWidth=this._getAnchorWidth()+"px"),r({style:e},this._overridableProps.apply(this,arguments))},_getMenuProps:function(){return this._overridableProps.apply(this,arguments)},_prepareVal:function(e){return void 0===e?[]:[].concat(e)},_onWinRotateAndResize:function(){this.setState({opened:!1})}},{propTypes:{theme:u.default.string.isRequired,tone:u.default.string,view:u.default.oneOf(["classic","default"]),text:u.default.string,name:u.default.string,control:u.default.bool,type:u.default.oneOf(["radio","check","radiocheck"]),size:u.default.oneOf(["xs","s","m","n"]),width:u.default.oneOf(["fixed","max"]),zIndexGroupLevel:u.default.number,onChange:u.default.func},defaultProps:{view:"classic",placeholder:"—",maxHeight:Number.POSITIVE_INFINITY},childContextTypes:{getMenu:u.default.func},Item:b.default,Group:w.default})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(237),c=n(231),d=(n(346),n(311),n(422),n(423),n(424),(n(312).default||n(312)).applyDecls()),f=i(d);t.default=(0,c.decl)({block:"select2",elem:"menu",willInit:function(){this.state={}},willReceiveProps:function(e){var t=e.getDrawingParams();if(t){var n=(0,l.findDOMNode)(this._menu),i=n.getBoundingClientRect().width,r=0;t.forEach(function(e){e.width>=i&&e.height>r&&(r=e.height)}),r>0&&this.setState({maxHeight:Math.min(e.maxHeight,r)})}},didMount:function(){this.__base.apply(this,arguments),this.context.getMenu(this._menu)},render:function(){var e=this,t=this.block,n=this.elem,i=this.props,o=i.itemIconHidden,a=i.menuProps,u=i.items,l=i.view,d=i.tone,p={"item-icon-hidden":(0,c.bool2string)(o)};return s.default.createElement(f.default,r({view:l,tone:d,ref:function(t){return e._menu=t},mix:{block:t,elem:n,mods:p},width:"max",style:{maxHeight:this.state.maxHeight},tabIndex:null},a),u)}},{contextTypes:{getMenu:u.default.func}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(230),s=i(o),a=n(231),u=(n(248).default||n(248)).applyDecls(),l=i(u);t.default=(0,a.decl)({block:"select2",tag:"span",willInit:function(e){e.val;this.__base.apply(this,arguments),this._onButtonKeyDown=this._onButtonKeyDown.bind(this),this._onButtonKeyUp=this._onButtonKeyUp.bind(this),this._onButtonKeyPress=this._onButtonKeyPress.bind(this)},willUpdate:function(e,t){if(t.opened&&(this._preventToToggleOpened=!1,this._keysToMenu=!1),!t.opened||this.state.opened||!this._menu)return void(this._wasOpened=!1);this._wasOpened=!0},getChildContext:function(){return r({},this.__base(),{wasOpened:this._wasOpened,isIE:Boolean("undefined"!=typeof document&&document.documentMode)})},_onButtonKeyDown:function(e){var t=e.keyCode;this.state.opened?(this._menu&&this._menu.onKeyDown(e),this._keysToMenu=!0,this._preventToToggleOpened=!0):l.default.is(t,"UP","DOWN")?(e.preventDefault(),this._keysToMenu=!1,this._preventToToggleOpened=!1,this.setState({opened:!0})):this._preventToToggleOpened=!1},_onButtonKeyUp:function(e){this.state.opened&&this._keysToMenu&&(this._menu&&this._menu.onKeyUp(e),this._keysToMenu=!1,this._preventToToggleOpened=!0)},_onButtonClick:function(){this._preventToToggleOpened||this._preventToToggleOpenedForce?(this._preventToToggleOpened=!1,this._preventToToggleOpenedForce=!1):this.__base.apply(this,arguments)},_onButtonBlur:function(){this._preventToToggleOpened=!1,this._preventToToggleOpenedForce=!1,this.__base.apply(this,arguments)},_onButtonKeyPress:function(e){var t=e.charCode;if(l.default.is(t,"UP","DOWN","ENTER","SPACE"))this._menu.onKeyPress(e);else{if(this._menu.onKeyPress(e),this.state.opened)return;if(this._menu._hoveredItem){var n=this._menu._hoveredItem.props.val;this.setState({val:this._prepareVal(n)})}}},_getButtonProps:function(){return r({},this.__base.apply(this,arguments),{onKeyDown:this._onButtonKeyDown,onKeyUp:this._onButtonKeyUp,onKeyPress:this._onButtonKeyPress})}},{childContextTypes:{getMenu:s.default.func,wasOpened:s.default.bool,isIE:s.default.bool}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.declMod)({type:"check"},{block:"select2",_onMenuClick:function(e,t){e.keyCode&&(this._preventToToggleOpenedForce=!0);var n=this.state.val,i=n.indexOf(t);-1!==i?n.splice(i,1):n.push(t),this.setState({val:n}),this._onChange(n)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.declMod)({type:"radio"},{block:"select2",_onMenuClick:function(e,t){var n=[t];this.setState({val:n,opened:!1}),this._onChange(n)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);t.default=(0,i.declMod)({type:"radiocheck"},{block:"select2",_onMenuClick:function(e,t){var n=t===this.state.val[0]?[]:[t];this.setState({val:n,opened:!1}),this._onChange(n)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(230),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(231);t.default=(0,s.declMod)({view:"default"},{block:"select2",mods:function(e){var t=e.tone;return i({},this.__base.apply(this,arguments),{tone:t})},attrs:function(){return i({},this.__base.apply(this,arguments),{ref:this._setAnchor})}},{propTypes:{tone:o.default.string},defaultProps:{tone:"default",size:"n"}})},function(e,t){},function(e,t,n){"use strict";var i=n(1855);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,"a",function(){return D});var u,l,c,d,f,p,h=n(234),m=n(238),g=(n.n(m),n(265)),v=n.n(g),_=n(264),b=n(268),y=n(349),w=n(1856),S=(n.n(w),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),k=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),C=i18n("%Search_Options_All_Folders"),M=k(y.a.Item,{val:"",cls:"js-prevent-popup-close"},void 0,C),D=(u=Object(m.inject)("foldersStore","searchQuery"))(l=Object(m.observer)((p=f=function(e){function t(){var e,n,i,s;r(this,t);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a(i,"onChange",d,i),s=n,o(i,s)}return s(t,e),S(t,[{key:"_renderFolderItem",value:function(e){var t=e.data.fid,n=e.data.name+" ("+e.data.count+")",i=e.data.user,r=v()({"js-prevent-popup-close":!0,"mail-AdvancedParams-Folder_UserFolder":i});return k(y.a.Item,{val:t,cls:r},t,n)}},{key:"render",value:function(){var e=this.props,t=e.foldersStore,n=e.searchQuery;return k(y.a,{theme:"normal",size:"s",type:"radio",width:"max",val:n.getAdvanced("fid"),onChange:this.onChange},void 0,M,k(y.a.Group,{},void 0,t.foldersForSearch.map(this._renderFolderItem)))}}]),t}(e.PureComponent),f.propTypes={searchQuery:i.instanceOf(b.a).isRequired,foldersStore:i.instanceOf(_.a).isRequired},c=p,d=function(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(c.prototype,"onChange",[h.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=1===t.length?t[0]:"";e.props.searchQuery.setAdvanced("fid",n)}}}),l=c))||l)||l}).call(t,n(232),n(230))},function(e,t){},function(e,t,n){"use strict";var i=n(1858);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,"a",function(){return k});var u,l,c,d,f,p,h=n(234),m=n(238),g=(n.n(m),n(304)),v=n(268),_=n(349),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),w=i18n("%Search_Options_All_Labels"),S=y(_.a.Item,{val:"",cls:"js-prevent-popup-close"},void 0,w),k=(u=Object(m.inject)("labelsStore","searchQuery"))(l=Object(m.observer)((p=f=function(e){function t(){var e,n,i,s;r(this,t);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a(i,"onChange",d,i),s=n,o(i,s)}return s(t,e),b(t,[{key:"_renderLabelItem",value:function(e){return y(_.a.Item,{val:e.value,cls:"js-prevent-popup-close"},e.value,e.text)}},{key:"render",value:function(){var e=this.props,t=e.labelsStore,n=e.searchQuery;return y(_.a,{theme:"normal",size:"s",type:"radio",width:"max",val:n.getAdvanced("lid"),onChange:this.onChange},void 0,S,y(_.a.Group,{},void 0,t.labelItemsForSearch.map(this._renderLabelItem)))}}]),t}(e.PureComponent),f.propTypes={searchQuery:i.instanceOf(v.a).isRequired,labelsStore:i.instanceOf(g.a).isRequired},c=p,d=function(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(c.prototype,"onChange",[h.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var n=e.props.searchQuery,i=1===t.length?t[0]:"";n.setAdvanced("lid",i)}}}),l=c))||l)||l}).call(t,n(232),n(230))},function(e,t,n){"use strict";var i=n(1860);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function l(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function c(e){return e?e.format("YYYYMMDD"):null}function d(e){return e||null}n.d(t,"a",function(){return j});var f,p,h,m,g,v,_,b=n(246),y=n(1861),w=n.n(y),S=n(234),k=n(238),C=(n.n(k),n(265)),M=n.n(C),D=n(1862),O=n(283),x=n(268),T=n(1877),P=(n.n(T),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},I=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),A=I("div",{className:"mail-AdvancedParamsDates-Separator"}),j=(f=Object(k.inject)("searchQuery"))(p=Object(k.observer)((_=v=function(t){function n(e){o(this,n);var t=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));u(t,"onClickDatesToggle",m,t),u(t,"onDateFieldChange",g,t);var i=e.searchQuery;return t.state={isExpanded:Boolean(i.getAdvanced("from")||i.getAdvanced("to"))},t}return a(n,t),P(n,[{key:"_getOptions",value:function(){var e=this.props.searchQuery,t=new Date("1982","08","13"),n=Date.now(),i=d(e.getAdvanced("from")),r=d(e.getAdvanced("to"));return{from:{minDate:t,maxDate:r||n,selected:i},to:{minDate:i||t,maxDate:n,selected:r}}}},{key:"render",value:function(){var t=this;if(!this.state.isExpanded)return I("div",{className:this.props.rowClass},void 0,I(O.a,{theme:"normal",onClick:this.onClickDatesToggle},void 0,i18n("%Search_Options_Enter_Dates")));var n={locale:w.a[Object(b.b)()],dateFormat:"DD.MM.YYYY",placeholderText:"01.01.2000",size:"m",width:"available",fixedHeight:!0,calendarClassName:"js-prevent-popup-close"},i=this._getOptions(),o=M()(r({"mail-AdvancedParamsDates":!0},this.props.rowClass,!0));return I("div",{},void 0,I("div",{className:o},void 0,e.createElement(D.a,E({},n,i.from,{onChange:function(e,n){return t.onDateFieldChange("from",e,n)}})),A,e.createElement(D.a,E({},n,i.to,{onChange:function(e,n){return t.onDateFieldChange("to",e,n)}}))),I("div",{className:this.props.rowClass},void 0,I(O.a,{theme:"normal",onClick:this.onClickDatesToggle},void 0,i18n("%Search_Options_By_Months"))))}}]),n}(e.PureComponent),v.propTypes={searchQuery:i.instanceOf(x.a).isRequired,rowClass:i.string.isRequired},h=_,m=l(h.prototype,"onClickDatesToggle",[S.action],{enumerable:!0,initializer:function(){var e=this;return function(t){t.stopPropagation();var n=e.props.searchQuery,i=!e.state.isExpanded;i||(n.setAdvanced("from",null),n.setAdvanced("to",null)),e.setState({isExpanded:i})}}}),g=l(h.prototype,"onDateFieldChange",[S.action],{enumerable:!0,initializer:function(){var e=this;return function(t,n,i){i.stopPropagation(),e.props.searchQuery.setAdvanced(t,c(n))}}}),p=h))||p)||p}).call(t,n(232),n(230))},function(e,t,n){"use strict";e.exports={az:"az",be:"be",en:"en-gb",hy:"hy-am",ka:"ka",kk:"kk",ro:"ro",ru:"ru",tr:"tr",tt:"en-gb",uk:"uk"}},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return m});var s,a,u=n(350),l=n(1866),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),p=function(){return n.e(45).then(n.bind(null,1868))},h=f("div",{},void 0,f(u.a,{size:"m"})),m=(a=s=function(t){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),d(n,[{key:"_renderPlaceholder",value:function(){return h}},{key:"render",value:function(){return e.createElement(l.a,c({},this.props,{loader:p,renderPlaceholder:this._renderPlaceholder}))}}]),n}(e.Component),s.displayName="DatePicker",a)}).call(t,n(232))},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i,r,o=n(232),s=n.n(o),a=n(1864),u=n.n(a),l=n(1865),c=(n.n(l),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),d=(r=i=function(){function e(e){return s.a.createElement(u.a,c({},e,{progress:!0}))}return e}(),i.displayName="Spin",i.defaultProps={theme:"normal"},r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(440).default||n(440)).applyDecls(),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t){},function(e,t,n){"use strict";var i=n(1867);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return p});var s,a,u=n(232),l=n.n(u),c=n(230),d=n.n(c),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=(a=s=function(e){function t(){var e,n,o,s;i(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.state={component:null},s=n,r(o,s)}return o(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this;this.props.loader().then(function(t){e.setState({component:t.default})})}},{key:"render",value:function(){return this.state.component?l.a.createElement(this.state.component,this.props):this.props.renderPlaceholder()}}]),t}(l.a.Component),s.propTypes={loader:d.a.func.isRequired,renderPlaceholder:d.a.func},s.defaultProps={renderPlaceholder:function(){return null}},a)},,,,,,,function(e,t,n){"use strict";(function(e){var i=n(313),r=n.n(i),o=n(558),s=(n.n(o),n(1876));n.n(s);t.a=r.a,r.a.propTypes=Object.assign(r.a.propTypes,{theme:e.oneOf(["black","ghost","normal","outer","pseudo","strong","transparent-black","transparent-white","yellow"])})}).call(t,n(230))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(231),c=(n(256).default||n(256)).applyDecls(),d=i(c),f=(n(260),(n(244).default||n(244)).applyDecls()),p=i(f),h=(n(314).default||n(314)).applyDecls(),m=i(h),g=(n(556).default||n(556)).applyDecls(),v=i(g);t.default=(0,l.decl)(p.default,{block:"link",tag:function(e){return e.url?"a":"span"},mods:function(e){var t=e.size,n=e.theme,i=e.nonvisual,o=e.inner;return r({},this.__base.apply(this,arguments),{size:t,theme:n,inner:(0,l.bool2string)(o),nonvisual:(0,l.bool2string)(i)})},attrs:function(e){var t=e.id,n=e.name,i=e.title,o=e.target,s=e.rel,a=e.tabIndex,u=e.style,l=e.url,c=e.attrs,d=this.state.disabled;return"_blank"===o&&s&&-1===s.indexOf("noopener")&&(s+=" noopener"),r({},this.__base.apply(this,arguments),{id:t,name:n,title:i,style:u,target:o,rel:s,href:l,role:l?void 0:"button",tabIndex:d?l?-1:void 0:a,"aria-disabled":d?"true":void 0},c)},content:function(e){var t=e.size,n=e.text,i=e.icon,r=e.iconLeft,a=e.iconRight,u=e.children,l=[],c=[],f=this._hasIconFromContent(this.props);if(o.Children.forEach(u,function(e,n){1===o.Children.count(u)&&d.default.isIcon(e)?l.unshift(s.default.createElement(v.default,{key:"only-icon",size:t,children:e})):d.default.isIcon(e)&&0===n?l.unshift(s.default.createElement(v.default,{key:"icon-left",side:"left",size:t,children:e})):d.default.isIcon(e)&&l.length?l.unshift(s.default.createElement(v.default,{key:"icon-right",side:"right",size:t,children:e})):e&&(c.length||l.push(f?s.default.createElement(m.default,{key:"inner"},c):c),c.push(e))}),l.length)return l;if(n){if(!c.length){var p=this._hasIconFromFields(this.props);l.push(p?s.default.createElement(m.default,{key:"inner"},c):c)}c.push(n)}return i&&l.unshift(s.default.createElement(v.default,{key:"only-icon",size:t,children:d.default.isIcon(i)?i:s.default.createElement(d.default,i)})),r&&l.unshift(s.default.createElement(v.default,{key:"icon-left",side:"left",size:t,children:d.default.isIcon(r)?r:s.default.createElement(d.default,r)})),a&&l.unshift(s.default.createElement(v.default,{key:"icon-right",side:"right",size:t,children:d.default.isIcon(a)?a:s.default.createElement(d.default,a)})),l},_hasIconFromContent:function(e){var t=e.children;return o.Children.toArray(t).some(function(e){return d.default.isIcon(e)})},_hasIconFromFields:function(e){var t=e.icon,n=e.iconLeft,i=e.iconRight;return t||n||i}},{propTypes:{theme:u.default.string.isRequired,pseudo:u.default.bool,nonvisual:u.default.bool,id:u.default.string,url:u.default.string,target:u.default.string,title:u.default.string,name:u.default.string,tabIndex:u.default.string,text:u.default.string,icon:u.default.object,iconLeft:u.default.object,iconRight:u.default.object,onClick:u.default.func,rel:u.default.string},defaultProps:{onClick:function(){},tabIndex:"0"}})},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return _});var r=n(96),o=n.n(r),s=n(238),a=(n.n(s),n(234)),u=n(264),l=n(306),c=n(263),d=n(1881),f=n(252),p=n(352),h=n(1900),m=n(284),g=n(257),v=n(1901),_={isMaster:!1,getUnsubscribePopupState:function(e){return new f.a(e)},getStores:function(){return{getUnsubscribePopupStore:function(){return new c.a},getFoldersStore:function(){return new u.a},getSettingsStore:function(){return new l.a}}},getServices:function(){var e=new h.a({},{}),t=new p.a({foldersStore:Daria.React.UnsubscribePopup.getStores().getFoldersStore()},{});return{settingsService:e,unsubscribeFiltersService:new m.f({unsubscribePopupStore:Daria.React.UnsubscribePopup.getStores().getUnsubscribePopupStore(),settingsStore:Daria.React.UnsubscribePopup.getStores().getSettingsStore(),foldersStore:Daria.React.UnsubscribePopup.getStores().getFoldersStore()},{foldersService:t,settingsService:e}),foldersService:t,unsubscribeFiltersLogService:new g.a({},{})}},renderUnsubscribePopupContainerBox:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Daria.React.UnsubscribePopup.getStores().getUnsubscribePopupStore(),o={unsubscribePopupState:Daria.React.UnsubscribePopup.getUnsubscribePopupState(r),unsubscribePopupStore:r,foldersStore:Daria.React.UnsubscribePopup.getStores().getFoldersStore(),foldersService:Daria.React.UnsubscribePopup.getServices().foldersService,unsubscribeFiltersService:Daria.React.UnsubscribePopup.getServices().unsubscribeFiltersService,unsubscribeFiltersLogService:Daria.React.UnsubscribePopup.getServices().unsubscribeFiltersLogService};e.render(i.createElement(s.Provider,o,i.createElement(d.a,n)),t)},openPopup:Object(a.action)(function(){Daria.React.UnsubscribePopup.getUnsubscribePopupState().openPopup()}),closePopup:Object(a.action)(function(){Daria.React.UnsubscribePopup.getUnsubscribePopupState().closePopup(),ns.events.trigger("daria:unsubscribe-popup:hide")}),disposeUnsubscribeContainer:function(){Daria.React.UnsubscribePopup.getStores().getUnsubscribePopupStore().dispose(),Daria.React.UnsubscribePopup.getUnsubscribePopupState().dispose()},addUnsubscribeNotification:function(e){ns.Model.get("notifications").addNotification(o.a.extend({vip:!1,type:"unsubscribe"},e))},renderUnsubscribePopupPromoBox:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={unsubscribePopupState:Daria.React.UnsubscribePopup.getUnsubscribePopupState(),unsubscribeFiltersLogService:Daria.React.UnsubscribePopup.getServices().unsubscribeFiltersLogService};e.render(i.createElement(s.Provider,r,i.createElement(v.a,n)),t)},showPromoFolderTooltip:function(){Daria.React.UnsubscribePopup.getUnsubscribePopupState().showPromoFolderTooltip(),Jane.c("Управление рассылками","Промо","показ промо в левой колонке")}}}).call(t,n(237),n(232))},function(e,t,n){"use strict";var i=n(1882);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return S});var a,u,l,c,d=n(238),f=(n.n(d),n(252)),p=n(1883),h=n(263),m=n(264),g=n(352),v=n(284),_=n(257),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),w=(u=a=function(t){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,t),b(n,[{key:"_maybeRenderUnsubscribePopup",value:function(){var t=this;return this.props.unsubscribePopupState.isPopupVisible?e.createElement(p.a,{ref:function(e){return t._ref=e},anchorElement:this._ref}):null}},{key:"render",value:function(){return y("div",{className:"mail-UnsubscribePopup_Container"},void 0,this._maybeRenderUnsubscribePopup())}}]),n}(e.Component),a.propTypes={unsubscribePopupState:i.instanceOf(f.a).isRequired,unsubscribePopupStore:i.instanceOf(h.a).isRequired,foldersStore:i.instanceOf(m.a).isRequired,foldersService:i.instanceOf(g.a).isRequired,unsubscribeFiltersService:i.instanceOf(v.f).isRequired,unsubscribeFiltersLogService:i.instanceOf(_.a).isRequired},u),S=(l=Object(d.inject)("unsubscribePopupState","unsubscribePopupStore","foldersStore","foldersService","unsubscribeFiltersService","unsubscribeFiltersLogService"))(c=Object(d.observer)(c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(w))||c)||c}).call(t,n(232),n(230))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function u(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return ne});var l,c,d,f,p,h,m,g,v,_=n(255),b=n(1884),y=n(414),w=n(271),S=n(350),k=n(250),C=n(252),M=n(1889),D=n(1890),O=n(1891),x=n(1892),T=n(1893),P=n(263),E=n(264),I=n(352),A=n(284),j=n(257),R=n(1897),L=n(1898),N=n(351),F=n(234),B=n(238),U=(n.n(B),n(265)),$=n.n(U),z=n(1899),V=(n.n(z),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),H=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),q=H(M.a,{}),W=H(D.a,{}),G=H(O.a,{}),K=H(x.a,{}),J=H(k.a,{id:"mail--Help"}),Y=H(k.a,{id:"mail--Close16"}),X=H("span",{className:"mail-ui-Arrow"}),Q=H("div",{className:"mail-UnsubscribePopup_loader"},void 0,H(S.a,{size:"l",progress:!0})),Z=H(k.a,{id:"mail--Arrow-Left"}),ee=H(k.a,{id:"mail--Close16"}),te=H(k.a,{id:"mail--UnsubscribePopup-Done-big",cls:"mail-UnsubscribePopup_dialog-icon"}),ne=(l=Object(B.inject)("unsubscribePopupState","unsubscribePopupStore","foldersStore","foldersService","unsubscribeFiltersService","unsubscribeFiltersLogService"))(c=Object(B.observer)((v=g=function(t){function n(){var e,t,i,s;r(this,n);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return t=i=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),i.state={sortDropdownVisible:!1},i.TABS={newsletters:{text:i18n("%UnsubscribePopup_Tabs_active"),metrics:'клик во "Входящие"',_clickHandler:function(){return i.onTabNewslettersClick()}},filters:{text:i18n("%UnsubscribePopup_Tabs_useless"),metrics:'клик в "Скрыты"',_clickHandler:function(){return i.onTabFiltersClick()}}},a(i,"isVisible",f,i),i.onPopupClose=function(){i.props.unsubscribeFiltersLogService.sendMetrics("popup",["закрытие по крестику"]),i._closePopup()},i.onPopupDoneModeClose=function(){i.props.unsubscribeFiltersLogService.sendMetrics("popup",["Попап: правило создано","крестик"]),i._closePopup()},i.onPopupOutsideClick=function(){i.props.unsubscribeFiltersLogService.sendMetrics("popup",["закрытие"]),i._closePopup()},i.onClickButtonApply=function(){i.props.unsubscribeFiltersLogService.sendMetrics("popup",["Попап: правило создано","оставить"]),i._closePopup()},a(i,"onClickButtonReload",p,i),a(i,"setSortOption",h,i),a(i,"applyUnsubscribeFilters",m,i),i.onSortLinkClick=function(){i.setState(function(e){return{sortDropdownVisible:!e.sortDropdownVisible}})},i.onSortDropdownOutsideClick=function(){i.setState({sortDropdownVisible:!1})},i.returnToPopup=function(){var e=i.props,t=e.unsubscribePopupState;e.unsubscribeFiltersLogService.sendMetrics("popup",["Попап: правило создано",'клик на "Назад"']),t.popupModeToDefault()},i.onTabNewslettersClick=function(e){e.preventDefault(),i.props.unsubscribeFiltersLogService.sendMetrics("popup",[i.TABS.newsletters.metrics]),i.changeCurrentTab("newsletters")},i.onTabFiltersClick=function(e){e.preventDefault(),i.props.unsubscribeFiltersLogService.sendMetrics("popup",[i.TABS.filters.metrics]),i.changeCurrentTab("filters")},s=t,o(i,s)}return s(n,t),V(n,[{key:"setVisible",value:function(){this.isVisible=!0}},{key:"_closePopup",value:function(){Daria.React.UnsubscribePopup.closePopup(),this.props.unsubscribePopupStore.clearSortOption()}},{key:"componentWillMount",value:function(){this._cleanTabsToDefaultReaction=new R.a(this.props.unsubscribePopupStore),this._notificationsReaction=new L.a(this.props.unsubscribePopupState,{})}},{key:"componentWillUnmount",value:function(){this._cleanTabsToDefaultReaction.cancel(),this._notificationsReaction.cancel()}},{key:"componentDidMount",value:function(){this.setVisible(),this.props.unsubscribePopupState.openPopup()}},{key:"_maybeRenderUnsubscribePopupCancelButton",value:function(){var e=this.props,t=e.unsubscribePopupState,n=e.unsubscribePopupStore,i=t.currentTab;return n.hasCheckedItems(i)?q:null}},{key:"_maybeRenderUnsubscribeChooseUselessButton",value:function(){var e=this.props,t=e.unsubscribePopupState,n=e.unsubscribePopupStore,i=t.currentTab;return"newsletters"===i&&n.allNotReadableNewsletters.length>0&&!n.hasCheckedItems(i)?W:null}},{key:"_maybeRenderUnsubscribeFilterButton",value:function(){var e=this.props,t=e.unsubscribePopupStore,n=e.unsubscribePopupState,i=n.currentTab;return"newsletters"===i&&t.hasCheckedItems(i)?G:null}},{key:"_maybeRenderUnsubscribeFilterRemoveButton",value:function(){var e=this.props,t=e.unsubscribePopupStore,n=e.unsubscribePopupState,i=n.currentTab;return"filters"===i&&t.hasCheckedItems(i)?K:null}},{key:"renderUnsubscribeTabName",value:function(e,t){var n=this.props.unsubscribePopupState,i=n.currentTab,r=$()("mail-UnsubscribePopup_tabName-link",{"is-active":e===i}),o=void 0;switch(e){case"newsletters":o=this.onTabNewslettersClick;break;case"filters":o=this.onTabFiltersClick;break;default:o=function(){}}return H("span",{className:"mail-UnsubscribePopup_tabName-item"},t,H("a",{href:"#",className:r,onClick:o},void 0,this.TABS[e].text),this._maybeRenderUnsubscribeTabCounters(e))}},{key:"_maybeRenderUnsubscribeTabCounters",value:function(e){var t=this.props.unsubscribePopupStore,n=t.getTabCounter(e);return n?H("span",{className:"mail-UnsubscribePopup_tabName-counter"},void 0,n):null}},{key:"_maybeRenderHeader",value:function(){var t=this,n=this.props,i=n.unsubscribePopupState.popupMode,r=n.unsubscribePopupStore,o=this.state.sortDropdownVisible,s=r.getSortOptions(),a=r.getSortOption()||s[0];return"createDone"===i?null:H("div",{className:"mail-UnsubscribePopup_header"},void 0,H("div",{className:"mail-UnsubscribePopup_header_controls"},void 0,H("div",{className:"mail-UnsubscribePopup_help"},void 0,H("a",{href:Daria.Config["help-url"]+"/web/preferences/manage-subscriptions.html",target:"_blank"},void 0,J)),H("div",{className:"mail-UnsubscribePopup_close",onClick:this.onPopupClose},void 0,Y)),H("div",{className:"mail-UnsubscribePopup_title"},void 0,i18n("%UnsubscribePopup_name")),H("div",{className:"mail-UnsubscribePopup_toolbar"},void 0,H("div",{className:"mail-UnsubscribePopup_tabs"},void 0,Object.keys(this.TABS).map(function(e,n){return t.renderUnsubscribeTabName(e,n)})),H("div",{className:"mail-UnsubscribePopup_sort"},void 0,e.createElement("div",{ref:function(e){return t._sortLink=e},onClick:this.onSortLinkClick},a.name+" ",X),H(w.a,{autoclosable:!0,theme:"normal",target:"anchor",directions:["bottom-right"],visible:o,anchor:this._sortLink,onOutsideClick:this.onSortDropdownOutsideClick},void 0,H(y.a,{theme:"normal",size:"n",type:"radio",val:a.field},void 0,s.map(function(e){return H(y.a.Item,{val:e.field,onClick:function(){return t.setSortOption(e.field)}},e.field,e.name)}))))))}},{key:"_maybeRenderContent",value:function(){var e=this.props.unsubscribePopupState,t=e.popupMode,n=e.currentTab;if("createDone"===t)return null;var i=$()("mail-UnsubscribePopup_content",{"with-newsletters":"newsletters"===n});return H("div",{className:i},void 0,this._maybeRenderLoader(),this._maybeRenderReload(),this._maybeRenderUnsubscribeList())}},{key:"_maybeRenderUnsubscribeList",value:function(){var e=this.props,t=e.unsubscribePopupState,n=e.unsubscribePopupStore,i=e.foldersStore;return(0,t.shouldRenderUnsubscribeList)()?H(T.a,{unsubscribePopupState:t,unsubscribePopupStore:n,foldersStore:i}):null}},{key:"_maybeRenderLoader",value:function(){return(0,this.props.unsubscribePopupState.shouldRenderLoader)()?Q:null}},{key:"_maybeRenderReload",value:function(){return(0,this.props.unsubscribePopupState.shouldRenderReload)()?H("div",{className:"mail-UnsubscribePopup_reload"},void 0,H("div",{className:"mail-UnsubscribePopup_reload_message"},void 0,i18n("%UnsubscribePopup_furitaError")),H(_.a,{theme:"normal",tone:"default",size:"m",view:"classic",cls:"mail-UnsubscribePopup_button mail-UnsubscribePopup_button-cancel",onClick:this.onClickButtonReload},void 0,i18n("%UnsubscribePopup_retry"))):null}},{key:"_maybeRenderFooter",value:function(){var e=this.props,t=e.unsubscribePopupState,n=e.unsubscribePopupStore;if("createDone"===t.popupMode)return null;var i=t.currentTab;if(!n.hasCheckedItems(i)){if("newsletters"!==i)return null;if(0===n.allNotReadableNewsletters.length)return null}return H("div",{className:"mail-UnsubscribePopup_footer"},void 0,this._maybeRenderUnsubscribePopupCancelButton(),this._maybeRenderUnsubscribeChooseUselessButton(),this._maybeRenderUnsubscribeFilterButton(),this._maybeRenderUnsubscribeFilterRemoveButton())}},{key:"_maybeRenderCreateDoneMode",value:function(){var e=this.props.unsubscribePopupState,t=e.popupMode,n=i18n("%UnsubscribePopup_applyPopup",i18n("%UnsubscribePopup_Folder_useless"));return"createDone"!==t?null:H("div",{className:"mail-UnsubscribePopup_dialog-container"},void 0,H("div",{className:"mail-UnsubscribePopup_dialog-background"},void 0,H("div",{className:"mail-UnsubscribePopup_dialog-back",onClick:this.returnToPopup},void 0,Z,H("span",{},void 0,i18n("%UnsubscribePopup_returnToPopup"))),H("div",{className:"mail-UnsubscribePopup_dialog-close",onClick:this.onPopupDoneModeClose},void 0,ee),H("div",{className:"mail-UnsubscribePopup_dialog-done"},void 0,te,H("div",{className:"mail-UnsubscribePopup_dialog-doneMessage"},void 0,i18n("%UnsubscribePopup_filterDone")))),H("div",{className:"mail-UnsubscribePopup_dialog-applyContainer"},void 0,H("div",{className:"mail-UnsubscribePopup_dialog-applyMessageContainer"},void 0,H("div",{className:"mail-UnsubscribePopup_dialog-applyMessage"},void 0,H("div",{dangerouslySetInnerHTML:{__html:n}},void 0),H("div",{},void 0,H(_.a,{theme:"normal",tone:"default",size:"m",view:"classic",cls:"mail-UnsubscribePopup_button mail-UnsubscribePopup_button-cancel",onClick:this.onClickButtonApply},void 0,i18n("%UnsubscribePopup_applyPopup-notmove")),H(_.a,{theme:"action",tone:"default",size:"m",view:"classic",cls:"mail-UnsubscribePopup_button",onClick:this.applyUnsubscribeFilters},void 0,i18n("%UnsubscribePopup_applyPopup-move")))))))}},{key:"changeCurrentTab",value:function(e){this.props.unsubscribePopupState.changeCurrentTab(e)}},{key:"render",value:function(){return H(b.a,{autoclosable:!0,cls:"mail-UnsubscribePopup",theme:"normal",visible:this.isVisible,target:!1,onOutsideClick:this.onPopupOutsideClick},void 0,this._maybeRenderHeader(),this._maybeRenderContent(),this._maybeRenderFooter(),this._maybeRenderCreateDoneMode())}}]),n}(e.Component),g.propTypes={anchorElement:i.object,unsubscribePopupState:i.instanceOf(C.a).isRequired,unsubscribePopupStore:i.instanceOf(P.a).isRequired,foldersStore:i.instanceOf(E.a).isRequired,foldersService:i.instanceOf(I.a).isRequired,unsubscribeFiltersService:i.instanceOf(A.f).isRequired,unsubscribeFiltersLogService:i.instanceOf(j.a).isRequired},d=v,f=u(d.prototype,"isVisible",[F.observable],{enumerable:!0,initializer:function(){return!1}}),u(d.prototype,"setVisible",[F.action],Object.getOwnPropertyDescriptor(d.prototype,"setVisible"),d.prototype),p=u(d.prototype,"onClickButtonReload",[F.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props,n=t.unsubscribePopupState,i=t.unsubscribeFiltersService,r=new N.e;n.currentAction=r,i.runAction(r)}}}),h=u(d.prototype,"setSortOption",[F.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.props.unsubscribePopupStore.setSortOption(t)}}}),m=u(d.prototype,"applyUnsubscribeFilters",[F.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props,n=t.unsubscribePopupState,i=t.unsubscribeFiltersService,r=t.unsubscribeFiltersLogService,o=new N.a,s=new N.e({requestMaster:!0});r.sendMetrics("popup",["Попап: правило создано","перенести письма"]),n.currentAction=o,i.runAction(o).then(Object(F.action)(function(){n.currentAction=s,i.runAction(s),e._closePopup()}))}}}),u(d.prototype,"changeCurrentTab",[F.action],Object.getOwnPropertyDescriptor(d.prototype,"changeCurrentTab"),d.prototype),c=d))||c)||c}).call(t,n(232),n(230))},function(e,t,n){"use strict";var i=n(1885),r=n.n(i),o=n(1888);n.n(o);t.a=r.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(1886),n(1887),(n(559).default||n(559)).applyDecls()),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ZINDEX_GROUP_LEVEL=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(237),u=n(231),l=i(u),c=(n(269),(n(261).default||n(261)).applyDecls()),d=i(c),f=n(269),p=t.ZINDEX_GROUP_LEVEL=20;t.default=(0,u.decl)(d.default,{block:"modal",willInit:function(e){var t=e.zIndexGroupLevel;this.__base.apply(this,arguments),this._zIndexGroupLevel=t||p},attrs:function(e){var t=e.style,n=this._style.popup.zIndex;return r({},this.__base.apply(this,arguments),{style:r({zIndex:n},t)})},mods:function(e){var t=e.autoclosable,n=e.theme,i=e.visible;return{autoclosable:(0,u.bool2string)(t),visible:(0,u.bool2string)(i),theme:n}},content:function(e){var t=this,n=e.children,i=e.verticalAlign;return s.default.createElement(l.default,{block:"modal",elem:"table"},s.default.createElement(l.default,{block:"modal",elem:"cell",attrs:{style:{verticalAlign:i}}},s.default.createElement(l.default,{block:"modal",elem:"content",attrs:{ref:function(e){return t._contentElement=(0,a.findDOMNode)(e)}}},n)))}},{defaultProps:{target:"position",position:{left:0,top:0},theme:"normal",directions:f.AVAILABLE_DIRECTIONS,mainOffset:0,secondaryOffset:0,viewportOffset:0,zIndexGroupLevel:0}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(231);n(269),(n(272).default||n(272)).applyDecls(),t.default=(0,i.declMod)(function(e){var t=e.autoclosable,n=e.onOutsideClick;return t||n},{block:"modal",_isElementOutside:function(e){return this.domElementPopup.contains(e)&&!this._contentElement.contains(e)}})},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,"a",function(){return S});var u,l,c,d,f,p,h=n(234),m=n(238),g=(n.n(m),n(255)),v=n(252),_=n(263),b=n(257),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),S=(u=Object(m.inject)("unsubscribePopupState","unsubscribePopupStore","unsubscribeFiltersLogService"))(l=Object(m.observer)((p=f=function(e){function t(){var e,n,i,s;r(this,t);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a(i,"onClick",d,i),s=n,o(i,s)}return s(t,e),y(t,[{key:"render",value:function(){return w("div",{className:"mail-UnsubscribePopup_button-cancelContainer"},void 0,w(g.a,{theme:"normal",tone:"default",size:"m",view:"classic",cls:"mail-UnsubscribePopup_button mail-UnsubscribePopup_button-cancel",onClick:this.onClick},void 0,i18n("%UnsubscribePopup_Button_cancel")))}}]),t}(e.PureComponent),f.propTypes={unsubscribePopupState:i.instanceOf(v.a).isRequired,unsubscribePopupStore:i.instanceOf(_.a).isRequired,unsubscribeFiltersLogService:i.instanceOf(b.a).isRequired},c=p,d=function(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(c.prototype,"onClick",[h.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props,n=t.unsubscribePopupState,i=t.unsubscribePopupStore,r=t.unsubscribeFiltersLogService,o=n.currentTab;r.sendMetrics("popup",["отмена"]),i.uncheckAllItems(o)}}}),l=c))||l)||l}).call(t,n(232),n(230))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,"a",function(){return S});var u,l,c,d,f,p,h=n(234),m=n(238),g=(n.n(m),n(255)),v=n(252),_=n(263),b=n(257),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),S=(u=Object(m.inject)("unsubscribePopupState","unsubscribePopupStore","unsubscribeFiltersLogService"))(l=Object(m.observer)((p=f=function(e){function t(){var e,n,i,s;r(this,t);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a(i,"onClick",d,i),s=n,o(i,s)}return s(t,e),y(t,[{key:"render",value:function(){return w(g.a,{theme:"action",tone:"default",size:"m",view:"classic",cls:"mail-UnsubscribePopup_button",onClick:this.onClick},void 0,i18n("%UnsubscribePopup_Button_choose_useless"))}}]),t}(e.PureComponent),f.propTypes={unsubscribePopupState:i.instanceOf(v.a).isRequired,unsubscribePopupStore:i.instanceOf(_.a).isRequired,unsubscribeFiltersLogService:i.instanceOf(b.a).isRequired},c=p,d=function(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(c.prototype,"onClick",[h.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props,n=t.unsubscribePopupStore;t.unsubscribeFiltersLogService.sendMetrics("popup",["выбор всех, что не читаю"]),n.allNotReadableNewsletters.forEach(Object(h.action)(function(e){n.hasItemChecked(e.index,"newsletters")||n.checkItem(e.index,"newsletters")}))}}}),l=c))||l)||l}).call(t,n(232),n(230))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function u(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return D});var l,c,d,f,p,h,m,g=n(234),v=n(238),_=(n.n(v),n(255)),b=n(252),y=n(263),w=n(284),S=n(257),k=n(351),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),M=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),D=(l=Object(v.inject)("unsubscribePopupState","unsubscribeFiltersService","unsubscribePopupStore","unsubscribeFiltersLogService"))(c=Object(v.observer)((m=h=function(e){function t(){var e,n,i,s;r(this,t);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a(i,"updateUnsubscribeInformation",f,i),a(i,"createUnsubscribeFilters",p,i),i.stopShowPromo=function(){var e=Jane.Promo.findPromo("promo-unsubscribe-popup");e.getShownSetting().stopShow||e.setStopShowSetting()},s=n,o(i,s)}return s(t,e),C(t,[{key:"render",value:function(){var e=this.props.unsubscribePopupStore;return M("div",{className:"mail-UnsubscribePopup_button-filterContainer"},void 0,M(_.a,{theme:"action",tone:"default",size:"m",view:"classic",cls:"mail-UnsubscribePopup_button",onClick:this.createUnsubscribeFilters},void 0,i18n("%N_рассылок",e.allCheckedNewsletters.length)))}}]),t}(e.PureComponent),h.propTypes={unsubscribePopupState:i.instanceOf(b.a).isRequired,unsubscribePopupStore:i.instanceOf(y.a).isRequired,unsubscribeFiltersService:i.instanceOf(w.f).isRequired,unsubscribeFiltersLogService:i.instanceOf(S.a).isRequired},d=m,f=u(d.prototype,"updateUnsubscribeInformation",[g.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props,n=t.unsubscribePopupState,i=t.unsubscribeFiltersService,r=new k.e({requestMaster:!0});n.currentAction=r,i.runAction(r)}}}),p=u(d.prototype,"createUnsubscribeFilters",[g.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props,n=t.unsubscribePopupState,i=t.unsubscribeFiltersService;t.unsubscribeFiltersLogService.sendMetrics("popup",["создать фильтр"]);var r=new k.c,o=new k.b;e.stopShowPromo(),n.currentAction=r,i.runAction(r).then(Object(g.action)(function(){n.currentAction=o,i.runAction(o).then(Object(g.action)(function(){n.popupModeToCreateDone(),e.updateUnsubscribeInformation()}))}))}}}),c=d))||c)||c}).call(t,n(232),n(230))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,"a",function(){return C});var u,l,c,d,f,p,h=n(234),m=n(238),g=(n.n(m),n(255)),v=n(252),_=n(263),b=n(284),y=n(257),w=n(351),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),C=(u=Object(m.inject)("unsubscribePopupState","unsubscribeFiltersService","unsubscribeFiltersLogService","unsubscribePopupStore"))(l=Object(m.observer)((p=f=function(e){function t(){var e,n,i,s;r(this,t);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a(i,"removeUnsubscribeFilters",d,i),s=n,o(i,s)}return s(t,e),S(t,[{key:"render",value:function(){return k("div",{className:"mail-UnsubscribePopup_button-filterContainer"},void 0,k(g.a,{theme:"action",tone:"default",size:"m",view:"classic",cls:"mail-UnsubscribePopup_button",onClick:this.removeUnsubscribeFilters,title:i18n("%UnsubscribePopup_Button_restore_title")},void 0,i18n("%UnsubscribePopup_Button_restore")))}}]),t}(e.PureComponent),f.propTypes={unsubscribePopupState:i.instanceOf(v.a).isRequired,unsubscribePopupStore:i.instanceOf(_.a).isRequired,unsubscribeFiltersService:i.instanceOf(b.f).isRequired,unsubscribeFiltersLogService:i.instanceOf(y.a).isRequired},c=p,d=function(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(c.prototype,"removeUnsubscribeFilters",[h.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.props,n=t.unsubscribePopupState,i=t.unsubscribePopupStore,r=t.unsubscribeFiltersService,o=t.unsubscribeFiltersLogService,s=i.allCheckedUnsubscribeFilters.map(Object(h.action)(function(e){return e.id})),a=new w.d({filterIds:s});o.sendMetrics("popup",["удалить правило"]),n.currentAction=a,r.runAction(a).then(Object(h.action)(function(){var e=new w.e({requestMaster:!0});n.currentAction=e,r.runAction(e)}))}}}),l=c))||l)||l}).call(t,n(232),n(230))},function(e,t,n){"use strict";var i=n(1894);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return b});var a,u,l,c,d=n(238),f=(n.n(d),n(252)),p=n(1895),h=n(263),m=n(264),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),_={newsletters:i18n("%UnsubscribePopup_tabNewslettersEmpty"),filters:i18n("%UnsubscribePopup_tabFiltersEmpty")},b=(a=Object(d.inject)("unsubscribePopupState","unsubscribePopupStore","foldersStore"))(u=Object(d.observer)((c=l=function(e){function t(){var e,n,i,s;r(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i._renderListItem=function(e,t){var n=i.props,r=n.unsubscribePopupStore,o=n.foldersStore;return v(p.a,{unsubscribePopupStore:r,itemData:e,foldersStore:o},t)},i.getItems=function(){var e=i.props,t=e.unsubscribePopupStore,n=e.unsubscribePopupState,r=n.currentTab,o=t.getItems(r);return t.sortItems(o)},i._renderListItems=function(e){return v("div",{},void 0,e.map(i._renderListItem))},i._renderEmptyTabInfo=function(){var e=i.props.unsubscribePopupState,t=e.currentTab;return v("div",{className:"mail-UnsubscribePopup-tab_empty"},void 0,_[t])},s=n,o(i,s)}return s(t,e),g(t,[{key:"render",value:function(){var e=this.getItems();switch(!0){case e.length>0:return this._renderListItems(e);case 0===e.length:return this._renderEmptyTabInfo()}}}]),t}(e.Component),l.propTypes={unsubscribePopupState:i.instanceOf(f.a).isRequired,unsubscribePopupStore:i.instanceOf(h.a).isRequired,foldersStore:i.instanceOf(m.a).isRequired},u=c))||u)||u}).call(t,n(232),n(230))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return w});var a,u,l,c,d=n(427),f=n(238),p=(n.n(f),n(252)),h=n(263),m=n(348),g=n(1896),v=(n.n(g),n(264)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),y=(u=a=function(e){function t(){var e,n,i,s;r(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.onChange=function(){var e=i.props,t=e.itemData,n=e.unsubscribePopupState,r=e.unsubscribePopupStore,o=n.currentTab;r.hasItemChecked(t.index,o)?r.uncheckItem(t.index,o):r.checkItem(t.index,o)},i.readFrequencyToText=function(e,t){var n="noRead"===e?i18n("%UnsubscribePopup_noRead"):"rareRead"===e?i18n("%UnsubscribePopup_rareRead"):i18n("%UnsubscribePopup_alwaysRead");return b("span",{className:t+"_"+e},void 0,n)},i.maillistTypeToText=function(e){var t=e;switch(e){case"7":t=i18n("%UnsubscribePopup_notifications");break;case"13":t=i18n("%UnsubscribePopup_news")}return t},i.maillistTypeToTitle=function(e){var t=e;switch(e){case"7":t=i18n("%UnsubscribePopup_notifications_title");break;case"13":t=i18n("%UnsubscribePopup_news_title")}return t},i._maybeRenderReadFrequency=function(){var e=i.props,t=e.itemData,n=e.unsubscribePopupState,r=e.unsubscribePopupStore;return"newsletters"!==n.currentTab?null:b("div",{className:"mail-UnsubscribeListItem-item"},void 0,i.readFrequencyToText(r.getReadFrequencySuffix(t.readFrequency),"mail-UnsubscribeListItem-item"))},i.linkToMaillistsMessages=function(){var e=i.props,t=e.itemData,n=e.unsubscribePopupState,r=e.foldersStore;if("newsletters"===n.currentTab)return ns.router.generateUrl("messages",{search:"search",request:"subscription-email:"+t.email+" AND type:"+t.type,fid:r.getFolderBySymbol("inbox").data.fid})},s=n,o(i,s)}return s(t,e),_(t,[{key:"render",value:function(){var e=this.props,t=e.itemData,n=e.unsubscribePopupStore,i=e.unsubscribePopupState,r=i.currentTab;return b("div",{className:"mail-UnsubscribeListItem-content"},void 0,b(d.a,{cls:"mail-UnsubscribeListItem-checkbox",theme:"normal",size:"m",onChange:this.onChange,checked:n.hasItemChecked(t.index,r)}),b("a",{className:"mail-UnsubscribeListItem-item\n                mail-UnsubscribeListItem-item_link",href:this.linkToMaillistsMessages(),target:"_blank",rel:"noopener noreferrer"},void 0,b(m.a,{email:t.email,name:t.displayName,avatarRef:"",cls:"mail-UnsubscribeListItem-item_avatar"}),b("div",{className:"mail-UnsubscribeListItem-item"},void 0,b("span",{className:"mail-UnsubscribeListItem-item_displayName",title:t.displayName},void 0,t.displayName),b("span",{className:"mail-UnsubscribeListItem-item_email",title:t.email},void 0,t.email))),b("div",{className:"mail-UnsubscribeListItem-item",title:this.maillistTypeToTitle(t.type)},void 0,this.maillistTypeToText(t.type)),this._maybeRenderReadFrequency())}}]),t}(e.Component),a.propTypes={unsubscribePopupState:i.instanceOf(p.a).isRequired,unsubscribePopupStore:i.instanceOf(h.a).isRequired,itemData:i.instanceOf(Object).isRequired,foldersStore:i.instanceOf(v.a).isRequired},u),w=(l=Object(f.inject)("unsubscribePopupState"))(c=Object(f.observer)(c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(y))||c)||c}).call(t,n(232),n(230))},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return a});var s=n(254),a=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return{newsletters:e.newsletters,filters:e.filters}},function(){e.uncheckAllItems("newsletters"),e.uncheckAllItems("filters")},{fireImmediately:!0}))}return o(t,e),t}(s.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return u});var s=n(254),a=n(234),u=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return{isPopupVisible:e.isPopupVisible,currentActionStatus:e.currentAction&&e.currentAction.status||null}},function(){if(!1===e.isPopupVisible&&(e.clearAction(),e.popupModeToDefault()),e.currentAction){var t=e.currentAction,n=t.name,i=t.status;switch(n){case"DeleteFiltersAction":switch(i){case"done":Object(a.autorunAsync)(function(){Daria.React.UnsubscribePopup.addUnsubscribeNotification({msg:i18n("%UnsubscribePopup_deleteFilterSuccess")})},500)}break;case"CreateUnsubscribeFolderAction":case"CreateFiltersAction":switch(i){case"error":Daria.React.UnsubscribePopup.addUnsubscribeNotification({error:!0,msg:i18n("%UnsubscribePopup_createFilterError")})}break;case"ApplyFiltersAction":switch(i){case"done":Daria.React.UnsubscribePopup.addUnsubscribeNotification({msg:i18n("%UnsubscribePopup_applyFilterDone")})}}"done"===e.currentAction.status&&(e.currentAction=null)}},{fireImmediately:!0}))}return o(t,e),t}(s.a)},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return o});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n){i(this,e),this._stores=t,this._services=n}return r(e,[{key:"setSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};ns.Model.get("settings").setSettings(e,t,n)}}]),e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var i,r,o=n(252),s=n(1902),a=n(257),u=n(238),l=(n.n(u),function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}()),c=(i=Object(u.inject)("unsubscribePopupState","unsubscribeFiltersLogService"))(r=Object(u.observer)(r=function(){function t(e){var t=e.unsubscribePopupState,n=void 0===t?{}:t,i=e.unsubscribeFiltersLogService;return n.promoFolderVisible?l(s.a,{unsubscribePopupState:n,unsubscribeFiltersLogService:i}):null}return t.propTypes={unsubscribePopupState:e.instanceOf(o.a).isRequired,unsubscribeFiltersLogService:e.instanceOf(a.a).isRequired},t}())||r)||r}).call(t,n(230))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function u(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",function(){return C});var l,c,d,f,p,h=n(252),m=n(257),g=n(238),v=(n.n(g),n(234)),_=n(271),b=n(250),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),S=w(b.a,{id:"mail--Clear-16"}),k=(f=d=function(e){function t(){var e,n,i,s;r(this,t);for(var u=arguments.length,l=Array(u),d=0;d<u;d++)l[d]=arguments[d];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.onPopupFolderClose=function(){i.props.unsubscribeFiltersLogService.sendMetrics("promo-folder",["закрытие по крестику"]),i._closePopup()},i.onOutsideClick=function(){i.props.unsubscribeFiltersLogService.sendMetrics("promo-folder",["закрытие"]),i._closePopup()},a(i,"isVisible",c,i),s=n,o(i,s)}return s(t,e),y(t,[{key:"_closePopup",value:function(){this.isVisible=!1,this.props.unsubscribePopupState.closePromoFolderTooltip()}},{key:"setVisible",value:function(){this.isVisible=!0}},{key:"componentDidMount",value:function(){this.setVisible()}},{key:"render",value:function(){return w(_.a,{autoclosable:!0,theme:"mail-promo",directions:["top-center"],visible:this.isVisible,hasTail:!0,anchor:$(".js-unsubscribe-folder-setup")[0],onOutsideClick:this.onOutsideClick},void 0,i18n("%UnsubscribePopup_promoFolders"),w("div",{className:"mail-promo-close",onClick:this.onPopupFolderClose},void 0,S))}}]),t}(e.PureComponent),d.propTypes={unsubscribePopupState:i.instanceOf(h.a).isRequired,unsubscribeFiltersLogService:i.instanceOf(m.a).isRequired},l=f,u(l.prototype,"_closePopup",[v.action],Object.getOwnPropertyDescriptor(l.prototype,"_closePopup"),l.prototype),c=u(l.prototype,"isVisible",[v.observable],{enumerable:!0,initializer:function(){return!1}}),u(l.prototype,"setVisible",[v.action],Object.getOwnPropertyDescriptor(l.prototype,"setVisible"),l.prototype),l),C=Object(g.observer)(p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(k))||p}).call(t,n(232),n(230))},function(e,t,n){"use strict";(function(e){function i(e,t){var n={reason:u,stars:e,comment:t};o.a.forcedRequest("do-client-log",{messages:JSON.stringify([n])})}function r(t){var n=document.createElement("div");document.body.appendChild(n);var r=function(i){e.unmountComponentAtNode(n),document.body.removeChild(n),t(i)};e.render(a(s.a,{onClose:r,onSend:i}),n),l.create=function(){}}var o=n(282),s=n(1904),a=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),u="promo-nps",l={create:r};t.a=l}).call(t,n(237))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return m});var a,u,l=n(271),c=n(1905),d=n(1913),f=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),h={left:0,top:0},m=(u=a=function(t){function n(){var e,t,i,s;r(this,n);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return t=i=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(u))),i.state={popupVisible:!0},i.onClose=function(e){i.setState({popupVisible:!1}),setTimeout(function(){return i.props.onClose(e)},150)},i.ref=function(e){i._node=e&&e.domElementPopup},s=t,o(i,s)}return s(n,t),f(n,[{key:"render",value:function(){var t=this,n={cls:"promo-nps",theme:"normal",target:"position",position:h,autoclosable:!0,motionless:!0,onOutsideClick:function(){return t.onClose(!1)},visible:this.state.popupVisible,ref:this.ref};return e.createElement(l.a,n,p(c.a,{onClose:this.onClose,onSend:this.props.onSend}))}}]),n}(e.PureComponent),a.propTypes={onClose:i.func.isRequired,onSend:i.func.isRequired},u)}).call(t,n(232),n(230))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return v});var a,u,l=n(255),c=n(1906),d=n(1910),f=n(1912),p=(n.n(f),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),g=-1,v=(u=a=function(t){function n(){var e,t,i,s;r(this,n);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return t=i=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(u))),i.state={stars:g,text:"",sent:!1},i.setStars=function(e){i.setState({stars:e})},i.setText=function(e){i.setState({text:e})},i.onLater=function(){i.props.onClose(!0)},i.onClose=function(){i.props.onClose(!1)},i.onSubmit=function(e){e.preventDefault();var t=i.state,n=t.stars,r=t.text;i.props.onSend(n,r),i.setState({sent:!0})},s=t,o(i,s)}return s(n,t),h(n,[{key:"render",value:function(){var e=this.state,t=e.stars,n=e.sent,i="promo-nps__content";return n?i+=" promo-nps__content_sent":t!==g&&(i+=" promo-nps__content_show-comments"),m("form",{className:i,onSubmit:this.onSubmit},void 0,m("div",{className:"promo-nps__text"},void 0,this.text),m("div",{className:"promo-nps__stars"},void 0,m(d.a,{stars:t,onChange:this.setStars})),this.textarea,m("div",{className:"promo-nps__buttons"},void 0,this.buttons))}},{key:"text",get:function(){return this.state.sent?"Спасибо, вы помогаете делать Яндекс.Почту лучше.":"Оцените с какой вероятностью вы бы порекомендовали Яндекс.Почту?"}},{key:"textarea",get:function(){return this.state.sent?null:m(c.a,{theme:"clear",cls:"promo-nps__comment",size:"s",placeholder:"Что бы вам хотелось улучшить?",text:this.state.text,onChange:this.setText,controlAttrs:{maxLength:1e3}})}},{key:"buttons",get:function(){var t={cls:"promo-nps__button",theme:"clear",size:"s"};return this.state.sent?e.createElement(l.a,p({},t,{onClick:this.onClose}),"Закрыть"):this.state.stars!==g?[e.createElement(l.a,p({},t,{onClick:this.onClose,key:"cancel"}),"Отмена"),e.createElement(l.a,p({},t,{type:"submit",key:"send"}),"Отправить")]:e.createElement(l.a,p({},t,{onClick:this.onLater}),"Не сейчас")}}]),n}(e.PureComponent),a.propTypes={onClose:i.func.isRequired,onSend:i.func.isRequired},u)}).call(t,n(232),n(230))},function(e,t,n){"use strict";var i=n(1907),r=n.n(i),o=n(1909);n.n(o);t.a=r.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(1908),(n(564).default||n(564)).applyDecls()),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(237),c=i(l),d=n(231),f=(n(260),(n(244).default||n(244)).applyDecls()),p=i(f),h=(n(561).default||n(561)).applyDecls(),m=i(h),g=(n(562).default||n(562)).applyDecls(),v=i(g),_=(n(563).default||n(563)).applyDecls(),b=i(_);t.default=(0,d.decl)(p.default,{block:"textarea",tag:"span",willInit:function(){this.__base.apply(this,arguments),this._onChange=this._onChange.bind(this)},attrs:function(e){var t=e.style,n=e.attrs;return r({},this.__base.apply(this,arguments),n,{style:t})},_getControlAttrs:function(){return{}},mods:function(e){var t=(e.type,e.theme),n=e.size;e.pin,e.iconLeft,e.iconRight;return r({},this.__base.apply(this,arguments),{theme:t,size:n})},content:function(e){var t=this,n=this.state.disabled;return[s.default.createElement(m.default,{key:"wrap"},s.default.createElement(v.default,r({id:e.id,name:e.name,value:e.text||"",tabIndex:e.tabIndex,cols:e.cols,rows:e.rows,disabled:n,ref:function(e){return t._control=c.default.findDOMNode(e)},placeholder:e.placeholder,autoComplete:!1===e.autocomplete?"off":void 0,onChange:n?void 0:this._onChange},e.controlAttrs))),s.default.createElement(b.default,{key:"box"})]},_onChange:function(e){this.props.onChange&&this.props.onChange(e.target.value,this.props)}},{propTypes:{theme:u.default.string.isRequired,size:u.default.oneOf(["xs","s","m"]),id:u.default.string,name:u.default.string,tabIndex:u.default.string,text:u.default.string,placeholder:u.default.string,autocomplete:u.default.bool,onChange:u.default.func,cols:u.default.number,rows:u.default.number},defaultProps:{cols:10,rows:10}})},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return f});var a,u,l=n(1911),c=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),f=(u=a=function(e){function t(){var e,n,i,s;r(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.state={stars:i.props.stars},i.onClick=function(e){var t=e.target.dataset.value;t&&i.props.onChange(Number(t))},i.onMouseOver=function(e){var t=Number(e.target.dataset.value||i.props.stars);i.setState({stars:t})},i.onMouseLeave=function(){i.setState({stars:i.props.stars})},s=n,o(i,s)}return s(t,e),c(t,[{key:"star",value:function(e){var t="promo-nps-star";return e<=this.state.stars&&(t+=" "+t+"_active"),d("span",{className:t,"data-value":e},e)}},{key:"render",value:function(){for(var e=[],t=0;t<=10;t++)e.push(this.star(t));return d("div",{className:"promo-nps-stars",onClick:this.onClick,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave},void 0,e)}}]),t}(e.PureComponent),a.propTypes={stars:i.number.isRequired,onChange:i.func.isRequired},u)}).call(t,n(232),n(230))},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(t){function n(e){p!==e&&(p=e,d(!0),c("показ бабла"))}function r(){d(!1),window.removeEventListener("mousedown",a),setTimeout(function(){e.unmountComponentAtNode(f),document.body.removeChild(f),t()},200)}function a(e){var t=e.target;t&&(c(t.dataset.promoPopularContactsMetrika||"клик вне зоны бабла"),r())}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Jane.c(["Популярные контакты",e])}function d(t){var n={cls:"promo-popular-contacts",theme:"normal",target:"anchor",anchor:p,visible:t,hasTail:!0};e.render(i.createElement(o.a,n,u("div",{className:"promo-popular-contacts-message","data-promo-popular-contacts-metrika":"клик в бабл"},void 0,u(s.a,{id:"mail--Close16",cls:"promo-popular-contacts-close",data:{"data-promo-popular-contacts-metrika":"клик на крестик бабла"}}),i18n("%Compose_promo_popular_contacts"))),f)}l.create=function(){};var f=document.createElement("div");document.body.appendChild(f),function(){window.addEventListener("mousedown",a)}();var p=null;return{setAnchor:n,close:r}}var o=n(271),s=n(250),a=n(1915),u=(n.n(a),function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}()),l={create:r};t.a=l}).call(t,n(237),n(232))},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(){var t=document.getElementsByClassName("js-header-settings")[0],n=document.createElement("div"),r=Jane.Promo.findPromo("promo-unsubscribe-popup");document.body.appendChild(n);var a=function(){e.unmountComponentAtNode(n),document.body.removeChild(n)},u={onClose:a,anchorNode:t,promo:r};e.render(i.createElement(o.a,u),n),s.create=function(){}}var o=n(1917),s={create:r};t.a=s}).call(t,n(237),n(232))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return m});var a,u,l=n(271),c=n(255),d=n(257),f=n(1918),p=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),h=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),m=(u=a=function(t){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.state={popupVisible:!0},e.onClose=function(){e.setState({popupVisible:!1}),setTimeout(function(){return e.props.onClose()},150)},e.onOutsideClick=function(){e.props.promo.setShownSettingDelay(),e.onClose()},e.onCancelClick=function(){var t=e.props.promo,n=t.getShownSetting().shownCount;t.setShownSettingDelay(),e.unsubscribeFiltersLogService.sendMetrics("promo-settings",[n?"второй показ":"первый показ",'клик в "Не сейчас"']),e.onClose()},e.onFilterClick=function(){var t=e.props.promo,n=t.getShownSetting().shownCount;Daria.React.UnsubscribePopup.openPopup(),t.setStopShowSetting(),e.unsubscribeFiltersLogService.sendMetrics("promo-settings",[n?"второй показ":"первый показ",'клик в "Отфильтровать"']),e.onClose()},e.unsubscribeFiltersLogService=new d.a({},{}),e}return s(n,t),p(n,[{key:"render",value:function(){var t=this.props,n=t.anchorNode,i=t.promo,r=i.getCurrentMessage(),o={cls:"promo-unsubscribe-popup",theme:"normal",target:"anchor",anchor:n,autoclosable:!0,onOutsideClick:this.onOutsideClick,visible:this.state.popupVisible,hasTail:!0};return e.createElement(l.a,o,h("div",{className:"promo-unsubscribe-popup-message"},void 0,r),h("div",{className:"promo-unsubscribe-popup-controls"},void 0,h(c.a,{theme:"action",tone:"default",size:"m",view:"classic",cls:"promo-unsubscribe-popup-controls-item",onClick:this.onFilterClick},void 0,i18n("%Common.UnsubscribeFilter")),h(c.a,{theme:"clear",tone:"default",size:"m",view:"classic",cls:"promo-unsubscribe-popup-controls-item promo-unsubscribe-popup-controls-item_theme_default",onClick:this.onCancelClick},void 0,i18n("%Common.NotNow"))))}}]),n}(e.PureComponent),a.propTypes={onClose:i.func.isRequired,anchorNode:i.object.isRequired,promo:i.object.isRequired},u)}).call(t,n(232),n(230))},function(e,t){},function(e,t,n){"use strict";(function(e,i){var r=n(1920);t.a={render:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.render(i.createElement(r.a,n),t)},unmount:function(t){return e.unmountComponentAtNode(t)}}}).call(t,n(237),n(232))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=t+","+e;"yaplus"===t&&(n+=","+(Daria.Config.haveYandexPlus?"on":"off"));var i=S[n];i&&Jane.c(w.concat(i))}function u(e,t){var n="click"===e,i=["yaplus-tooltip-close","yaplus-tooltip-action"].indexOf(t)>-1;n&&i&&Daria.yCookie.yp(y,"1",Daria.yCookie.getExpirationDate(36500))}function l(e,t){if("show"===e&&"yaplus-tooltip"===t){var n=ns.Model.get("settings");n.getSetting("yandex-plus-toolti_s")||n.setSettingOn("yandex-plus-toolti_s")}}function c(e,t){a(e,t),u(e,t),l(e,t)}function d(e){!Daria.yCookie.ypHas(y)&&e&&Daria.yCookie.yp(y,"1",Daria.yCookie.getExpirationDate(1))}n.d(t,"a",function(){return k});var f,p,h=n(558),m=(n.n(h),n(404)),g=(n.n(m),n(566)),v=(n.n(g),n(1921)),_=(n.n(v),n(1950)),b=(n.n(_),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),y="yaplustooltip",w=["Залогиновая шапка. Правая часть","Промо ЯПлюс"],S={"yaplus,show,off":["Кнопка Я.Плюс(выключен)","Показ"],"yaplus,show,on":["Кнопка Я.Плюс(включен)","Показ"],"yaplus,click,off":["Кнопка Я.Плюс(выключен)","Клик"],"yaplus,click,on":["Кнопка Я.Плюс(включен)","Клик"],"yaplus-tooltip,show":["Поясняющий поп-ап","Показ"],"yaplus-tooltip-action,click":["Поясняющий поп-ап",'Клик в кнопку "Интересно"'],"yaplus-tooltip-close,click":["Поясняющий поп-ап",'Клик в кнопку "Не сейчас"']},k=(p=f=function(t){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,t),b(n,[{key:"componentWillReceiveProps",value:function(e){d(e.tooltipAutoShow)}},{key:"componentDidMount",value:function(){d(this.props.tooltipAutoShow)}},{key:"render",value:function(){var t={available:!Daria.Config.haveYandexPlus,visible:Boolean(this.props.tooltipAutoShow),cls:"mail-YandexPlus",enableText:"  ",eventsHandler:c};return t.available&&(t.plusLinkParams="?from=header_mail&utm_campaign=plus&utm_medium=header_mail&utm_source=yandex&source=header_mail"),e.createElement(v.Yaplus,t)}}]),n}(e.PureComponent),f.propTypes={tooltipAutoShow:i.bool},p)}).call(t,n(232),n(230))},function(e,t,n){"use strict";e.exports={Yaplus:n(1922).default}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(1923),n(1924),n(1925),n(1928),(n(569).default||n(569)).applyDecls());Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(r).default}})},function(e,t){},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(567),u=i(a),l=n(315),c=i(l),d=n(313),f=i(d),p=(n(353),(n(285).default||n(285)).applyDecls()),h=i(p);n(568),n(354),t.default=(0,l.decl)({block:"yaplus",willInit:function(){this._callCustomEventsHandler=this._callCustomEventsHandler.bind(this),this._onLinkClick=this._onLinkClick.bind(this)},didMount:function(){this._callCustomEventsHandler("show","yaplus")},content:function(){return[s.default.createElement(f.default,{key:"yaplus-link",target:"_blank",url:"https://passport.yandex.ru/profile/services",theme:"normal",mix:{block:"yaplus",elem:"link"},onClick:this._onLinkClick},s.default.createElement(h.default,null,s.default.createElement(c.default,{block:"yaplus",elem:"badge-main",tag:"span"})))]},_callCustomEventsHandler:function(e,t){var n=this.props;"function"==typeof n.eventsHandler&&n.eventsHandler(e,t,r({},n))},_onLinkClick:function(){this._callCustomEventsHandler("click","yaplus")}},{propTypes:{available:u.default.bool,tooltip:u.default.oneOfType([u.default.bool,u.default.element]),headerText:u.default.string,mainDescription:u.default.string,leftButtonText:u.default.string,rightButtonText:u.default.string,plusLinkParams:u.default.string,eventsHandler:u.default.func}})},function(e,t,n){"use strict";var i=n(249),r=n(233),o=n(1927);e.exports=function(){function e(e,t,n,i,s,a){a!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(315),u=i(a),l=n(313),c=i(l),d=(n(353),(n(285).default||n(285)).applyDecls()),f=i(d);n(354),t.default=(0,a.declMod)({available:!0},{block:"yaplus",mods:function(e){var t=e.available;return r({},this.__base.apply(this,arguments),{available:(0,a.bool2string)(t)})},content:function(e){var t=e.plusLinkParams;return t="string"==typeof t?t:"",[s.default.createElement(c.default,{key:"yaplus-link",target:"_blank",url:"https://plus.yandex.ru"+t,theme:"normal",mix:{block:"yaplus",elem:"link"}},s.default.createElement(f.default,null,s.default.createElement(u.default,{block:"yaplus",elem:"badge-main",tag:"span"})))]}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(232),s=i(o),a=n(230),u=i(a),l=n(231),c=i(l),d=(n(269),n(261),n(270),n(413),(n(272).default||n(272)).applyDecls()),f=i(d),p=(n(571).default||n(571)).applyDecls(),h=i(p),m=(n(572).default||n(572)).applyDecls(),g=i(m),v=(n(573).default||n(573)).applyDecls(),_=i(v),b=(n(574).default||n(574)).applyDecls(),y=i(b);t.default=(0,l.decl)({block:"tooltip",willInit:function(){this.state={hovered:!1},this.onMouseOver=this.onMouseOver.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this)},mods:function(e){var t=e.size,n=e.theme,i=e.view,o=e.tone,s=e.autoclosable;return r({},this.__base.apply(this,arguments),{size:t,view:i,tone:o,theme:n,autoclosable:s,hovered:(0,l.bool2string)(this.state.hovered)})},render:function(){var e=this.block,t=this.props,n=t.anchor,i=t.autoclosable,r=t.visible,o=t.view,a=t.tone,u=t.theme,l=t.children,d=t.secondaryOffset,p=t.tailOffset,h=t.scope,m=t.tail,g=t.cls,v=t.onOutsideClick,_=t.zIndexGroupLevel,b=void 0===this.props.mainOffset?this.props.offset:this.props.mainOffset,y=[].concat(this.props.to).map(function(e){return e.indexOf("-")<0&&(e+="-center"),e});return s.default.createElement(f.default,{view:o,tone:a,mix:[].concat({block:e,mods:this.mods(this.props)},this.mix(this.props)||[]),cls:g,onMouseOver:this.onMouseOver,onMouseLeave:this.state.hovered?this.onMouseLeave:void 0,theme:"normal",target:"anchor",hasTail:m,onOutsideClick:v,visible:r,mainOffset:b,secondaryOffset:"promo"===u?-30:d,tailOffset:"promo"===u?30:p,directions:y,autoclosable:i,anchor:n,scope:h,zIndexGroupLevel:_},s.default.createElement(c.default,{block:"tooltip",elem:"content"},l))},onMouseOver:function(e){this.setState({hovered:!0}),this.props.onMouseOver&&this.props.onMouseOver(e)},onMouseLeave:function(e){this.setState({hovered:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)}},{Corner:h.default,Description:g.default,Buttons:_.default,Close:y.default,propTypes:{anchor:u.default.oneOfType([u.default.func,u.default.object]),autoclosable:u.default.bool,visible:u.default.bool,view:u.default.oneOf(["classic","default"]),tone:u.default.string,to:u.default.oneOfType([u.default.array,u.default.string]),offset:u.default.number,mainOffset:u.default.number,secondaryOffset:u.default.number,tailOffset:u.default.number,size:u.default.oneOf(["xs","s","m","l","n"]),theme:u.default.oneOf(["normal","error","success","white","promo"]),tail:u.default.bool,zIndexGroupLevel:u.default.number,onMouseOver:u.default.func,onMouseLeave:u.default.func,onOutsideClick:u.default.func,cls:u.default.string},defaultProps:{to:["right-center","bottom-center","top-center","left-center"],tail:!0,view:"classic"}})},function(e,t,n){"use strict";e.exports={tooltip__close:{close:"Закрыть"}}},function(e,t,n){"use strict";e.exports={tooltip__close:{close:"Close"}}},function(e,t,n){"use strict";e.exports={tooltip__close:{close:"Зачыніць"}}},function(e,t,n){"use strict";e.exports={tooltip__close:{close:"Tutup"}}},function(e,t,n){"use strict";e.exports={tooltip__close:{close:"Жабу"}}},function(e,t,n){"use strict";e.exports={tooltip__close:{close:"Kapat"}}},function(e,t,n){"use strict";e.exports={tooltip__close:{close:"Ябу"}}},function(e,t,n){"use strict";e.exports={tooltip__close:{close:"Закрити"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t,n){"use strict";e.exports={yaplus:{enable:"Включить",tooltip_header:"Подписка Яндекс.Плюс",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",btn_left:"Не сейчас",btn_right:"Интересно"}}},function(e,t){},function(e,t,n){"use strict";(function(e,i,r){function o(t){e.render(l(i,{lang:Object(a.b)()},void 0,r.createElement(s.Provider,t,d)),c)}var s=n(238),a=(n.n(s),n(246)),u=n(1953),l=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),c=document.querySelector(".js-statusline"),d=l(u.a,{anchor:c});t.a=o}).call(t,n(237),n(1952),n(232))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(232),u=n(230),l=n(286).getKey,c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){return this.props.children}},{key:"getChildContext",value:function(){return{lang:this.props.lang,t:l.bind(null,this.props.lang)}}}]),t}(a.Component);c.childContextTypes={lang:u.string,t:u.func},c.propTypes={children:u.element.isRequired,lang:u.string},e.exports=c},function(e,t,n){"use strict";var i=n(1954);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return k});var a,u,l,c,d=n(238),f=(n.n(d),n(1955)),p=n.n(f),h=n(239),m=n(394),g=n(578),v=n(1991),_=n(2019),b=(n.n(_),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},w=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),S=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=Jane).c.apply(e,["Нотификации","Функциональные нотификации"].concat(n))},k=(a=Object(d.inject)("statuslineState","themeStore"))(u=Object(d.observer)((c=l=function(t){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,t),b(n,[{key:"render",value:function(){var t=this.props,n=t.anchor,i=t.statuslineState,r=t.themeStore,o=i.isVisible,s=i.onClick,a=i.onClose,u=i.status,l=i.startAutoClose,c=i.stopAutoClose,d=r.isContentDark,f=d?"normal":"yellow",p=d?"transparent-black":"transparent-white",m={anchor:n,autoclosable:!1,cls:"mail-Statusline",mainOffset:30,onClick:s,onClose:a,onMouseOver:c,onMouseLeave:l,size:u.size,tail:!1,theme:"promo",tone:d?"dark":"default",to:"top",visible:o};return e.createElement(h.a,m,u.isCloseButtonVisible&&w(h.a.Close,{onClick:a}),w("div",{onClick:s},void 0,this.getContent({isTooltipDark:d,linkTheme:f,progressLinkTheme:p,sendMetric:S.bind(null,u.name)})))}},{key:"getContent",value:function(t){var n=this.props.statuslineState,i=n.status,r=v[this.toClassName(i.name)];return r?e.createElement(r,y({},i.params,t)):i.build?i.build(t):i.body?w(h.a.Description,{},void 0,i.body):null}},{key:"toClassName",value:function(e){var t=p()(e);return t.charAt(0).toUpperCase()+t.slice(1)}}]),n}(e.Component),l.propTypes={anchor:i.instanceOf(Element).isRequired,statuslineState:i.instanceOf(g.a).isRequired,themeStore:i.instanceOf(m.a).isRequired},u=c))||u)||u}).call(t,n(232),n(230))},function(e,t,n){var i=n(1956),r=n(1974),o=r(function(e,t,n){return t=t.toLowerCase(),e+(n?i(t):t)});e.exports=o},function(e,t,n){function i(e){return o(r(e).toLowerCase())}var r=n(316),o=n(1967);e.exports=i},function(e,t,n){function i(e){if("string"==typeof e)return e;if(s(e))return o(e,i)+"";if(a(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}var r=n(355),o=n(1960),s=n(1961),a=n(1962),u=1/0,l=r?r.prototype:void 0,c=l?l.toString:void 0;e.exports=i},function(e,t,n){var i=n(1959),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},function(e,t){var n="object"==typeof global&&global&&global.Object===Object&&global;e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){function i(e){return"symbol"==typeof e||o(e)&&r(e)==s}var r=n(1963),o=n(1966),s="[object Symbol]";e.exports=i},function(e,t,n){function i(e){return null==e?void 0===e?u:a:l&&l in Object(e)?o(e):s(e)}var r=n(355),o=n(1964),s=n(1965),a="[object Null]",u="[object Undefined]",l=r?r.toStringTag:void 0;e.exports=i},function(e,t,n){function i(e){var t=s.call(e,u),n=e[u];try{e[u]=void 0;var i=!0}catch(e){}var r=a.call(e);return i&&(t?e[u]=n:delete e[u]),r}var r=n(355),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;e.exports=i},function(e,t){function n(e){return r.call(e)}var i=Object.prototype,r=i.toString;e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){var i=n(1968),r=i("toUpperCase");e.exports=r},function(e,t,n){function i(e){return function(t){t=a(t);var n=o(t)?s(t):void 0,i=n?n[0]:t.charAt(0),u=n?r(n,1).join(""):t.slice(1);return i[e]()+u}}var r=n(1969),o=n(577),s=n(1971),a=n(316);e.exports=i},function(e,t,n){function i(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}var r=n(1970);e.exports=i},function(e,t){function n(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}e.exports=n},function(e,t,n){function i(e){return o(e)?s(e):r(e)}var r=n(1972),o=n(577),s=n(1973);e.exports=i},function(e,t){function n(e){return e.split("")}e.exports=n},function(e,t){function n(e){return e.match(d)||[]}var i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",u="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",o,s].join("|")+")[\\ufe0e\\ufe0f]?"+a+")*",l="[\\ufe0e\\ufe0f]?"+a+u,c="(?:"+["[^\\ud800-\\udfff]"+i+"?",i,o,s,"[\\ud800-\\udfff]"].join("|")+")",d=RegExp(r+"(?="+r+")|"+c+l,"g");e.exports=n},function(e,t,n){function i(e){return function(t){return r(s(o(t).replace(a,"")),e,"")}}var r=n(1975),o=n(1976),s=n(1979),a=RegExp("['’]","g");e.exports=i},function(e,t){function n(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}e.exports=n},function(e,t,n){function i(e){return(e=o(e))&&e.replace(s,r).replace(a,"")}var r=n(1977),o=n(316),s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=i},function(e,t,n){var i=n(1978),r={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},o=i(r);e.exports=o},function(e,t){function n(e){return function(t){return null==e?void 0:e[t]}}e.exports=n},function(e,t,n){function i(e,t,n){return e=s(e),t=n?void 0:t,void 0===t?o(e)?a(e):r(e):e.match(t)||[]}var r=n(1980),o=n(1981),s=n(316),a=n(1982);e.exports=i},function(e,t){function n(e){return e.match(i)||[]}var i=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=n},function(e,t){function n(e){return i.test(e)}var i=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=n},function(e,t){function n(e){return e.match(m)||[]}var i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+i+"]",o="[a-z\\xdf-\\xf6\\xf8-\\xff]",s="[^\\ud800-\\udfff"+i+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",l="[A-Z\\xc0-\\xd6\\xd8-\\xde]",c="(?:"+o+"|"+s+")",d="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",f="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",a,u].join("|")+")[\\ufe0e\\ufe0f]?"+d+")*",p="[\\ufe0e\\ufe0f]?"+d+f,h="(?:"+["[\\u2700-\\u27bf]",a,u].join("|")+")"+p,m=RegExp([l+"?"+o+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[r,l,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[r,l+c,"$"].join("|")+")",l+"?"+c+"+(?:['’](?:d|ll|m|re|s|t|ve))?",l+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",h].join("|"),"g");e.exports=n},function(e,t,n){"use strict";var i=n(570),r=n.n(i),o=n(566),s=(n.n(o),n(1984)),a=(n.n(s),n(1985)),u=n(1988),l=n(1989);r.a.DescriptionWithIcon=a.a,r.a.Buttons.Action=u.a,r.a.Buttons.Clear=l.a,t.a=r.a},function(e,t){},function(e,t,n){"use strict";var i=n(1986);n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=n(239),r=n(1987),o=(n.n(r),function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}()),s=function(){function t(e){var t=e.icon,n=e.children;return o(i.a.Description,{},void 0,o("div",{className:"mail-DescriptionWithIcon"},void 0,o("div",{className:"mail-DescriptionWithIcon_Icon mail-DescriptionWithIcon_"+t}),o("div",{className:"mail-DescriptionWithIcon_Text"},void 0,n)))}return t.propTypes={icon:e.string.isRequired},t}()}).call(t,n(230))},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return l});var s,a,u=n(255),l=(a=s=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.a),s.defaultProps={view:"classic",tone:"default",size:"m",theme:"action"},a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return l});var s,a,u=n(255),l=(a=s=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.a),s.defaultProps={view:"classic",tone:"default",size:"m",theme:"clear"},a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return s});var r,o,s=(o=r=function e(t){i(this,e),Object.assign(this,e.defaults,t)},r.defaults={hideOnTimeout:!0,hideOnClick:!0,isCloseButtonVisible:!0,params:{},size:"s",timeout:6e3},o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1992);n.d(t,"ApplyFilter",function(){return i.a});var r=n(1993);n.d(t,"CantLoadData",function(){return r.a});var o=n(1995);n.d(t,"EmailAddedToBlacklist",function(){return o.a});var s=n(1996);n.d(t,"CreateFilter",function(){return s.a});var a=n(1997);n.d(t,"ConfirmMops",function(){return a.a});var u=n(1998);n.d(t,"FilterCreated",function(){return u.a});var l=n(1999);n.d(t,"MaxSignatureCountLimitExceeded",function(){return l.a});var c=n(2e3);n.d(t,"MaxSignatureLengthLimitExceeded",function(){return c.a});var d=n(2001);n.d(t,"MessageSent",function(){return d.a});var f=n(2008);n.d(t,"MessageSentDelayed",function(){return f.a});var p=n(2009);n.d(t,"RecipientsLimitExceeded",function(){return p.a});var h=n(2010);n.d(t,"SendingMessage",function(){return h.a});var m=n(2011);n.d(t,"SendingMessageProgress",function(){return m.a});var g=n(2012);n.d(t,"SettingsSaved",function(){return g.a});var v=n(2013);n.d(t,"SignatureAdded",function(){return v.a});var _=n(2014);n.d(t,"SignatureDeleted",function(){return _.a});var b=n(2015);n.d(t,"TemplateNotFound",function(){return b.a});var y=n(2016);n.d(t,"TimelineLoadingFailed",function(){return y.a});var w=n(2017);n.d(t,"TooBigAttachment",function(){return w.a});var S=n(2018);n.d(t,"BeforeSendingMessage",function(){return S.a})},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return f});var a,u,l=n(239),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),f=(u=a=function(e){function t(){var e,n,i,s;r(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.onEditButtonClick=function(){var e=i.props.filid;ns.action.run("message.filter-move.edit",{filid:e})},i.onMoveButtonClick=function(){var e=i.props.filid;ns.action.run("message.filter-move.apply",{filid:e})},s=n,o(i,s)}return s(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.moveButtonText,i=e.editButtonText;return d("div",{},void 0,d(l.a.Description,{},"description",t),d(l.a.Buttons,{},"buttons",d(l.a.Buttons.Clear,{onClick:this.onEditButtonClick},void 0,i),d(l.a.Buttons.Action,{onClick:this.onMoveButtonClick},void 0,n)))}}]),t}(e.Component),a.propTypes={message:i.string.isRequired,filid:i.string.isRequired,moveButtonText:i.string.isRequired,editButtonText:i.string.isRequired},u)}).call(t,n(232),n(230))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=n(239),r=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),o=r(i.a.DescriptionWithIcon,{icon:"error"},void 0,r(e,{loc:"statusline/cant_load_data"},void 0,r("b",{"data-ref":"bold"}))),s=function(){function e(e){return o}return e}()}).call(t,n(245))},function(e,t,n){"use strict";function i(e,t,n){var i="string"==typeof e?o.createElement:o.cloneElement;return n?i(e,t,n):i(e,t)}function r(e,t,n){for(var o=/<(x-([\w-]+)|br)(?:(?:\/>)|>(.*?)<\/\1>)/g,s=[],a=void 0,u=0;a=o.exec(n);){a.index>u&&s.push(n.slice(u,a.index)),u=o.lastIndex;var l=a[1],c=a[2],d=a[3],f=c?t[c]:l;if(!f)throw console.error("LOC keyset `%s` key `%s` child `%s` not found",e.keyset,e.loc,c),"LOC child "+c+" not found";var p=d?r(e,t,d):null;s.push(i(f,{key:u},p))}return u<n.length&&s.push(n.slice(u)),s}var o=n(232),s=n(286),a=function(e){var t=s.getKey(e.lang,e.keyset,e.loc,e),n={};o.Children.forEach(e.children,function(e){var t=e.props["data-ref"]||e.ref;"string"==typeof t&&(n[t]=e)});var i=r(e,n,t);if(!e.tag&&1===i.length&&o.isValidElement(i[0]))return i[0];var a=e.tag||"span",u=e.className?{className:e.className}:null;return o.createElement(a,u,i)};e.exports=a},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return a});var r=n(283),o=n(239),s=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),a=function(){function t(t){var n=t.email,i=t.linkTheme;return s(o.a.Description,{},void 0,s(e,{loc:"statusline/email_added_to_blacklist",params:{email:n}},void 0,s(r.a,{theme:i,"data-ref":"link",url:"#setup/filters"})))}return t.propTypes={email:i.string.isRequired,linkTheme:i.string.isRequired},t}()}).call(t,n(245),n(230))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return f});var a,u,l=n(239),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),f=(u=a=function(e){function t(){var e,n,i,s;r(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.onCancelButtonClick=function(){ns.action.run("message.filter-move.disable")},i.onMoveButtonClick=function(){var e=i.props,t=e.mid,n=e.fid;ns.action.run("message.filter-move.create",{mid:t,fid:n})},s=n,o(i,s)}return s(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.moveButtonText,i=e.cancelButtonText;return d("div",{},void 0,d(l.a.Description,{},"description",t),d(l.a.Buttons,{},"buttons",d(l.a.Buttons.Clear,{onClick:this.onCancelButtonClick},void 0,i),d(l.a.Buttons.Action,{onClick:this.onMoveButtonClick},void 0,n)))}}]),t}(e.Component),a.propTypes={message:i.string.isRequired,mid:i.string.isRequired,fid:i.string.isRequired,moveButtonText:i.string.isRequired,cancelButtonText:i.string.isRequired},u)}).call(t,n(232),n(230))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(239),r=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),o=function(){function t(e){var t=e.title,n=e.message,o=e.actionButtonText,s=e.cancelButtonText;return r("div",{},void 0,r(i.a.Description,{},"description",r("b",{},void 0,t)," ",n),r(i.a.Buttons,{},"buttons",r(i.a.Buttons.Clear,{cls:"js-cancel-mops"},void 0,s),r(i.a.Buttons.Action,{cls:"js-confirm-mops"},void 0,o)))}return t.propTypes={title:e.string.isRequired,message:e.string.isRequired,actionButtonText:e.string.isRequired,cancelButtonText:e.string.isRequired},t}()}).call(t,n(230))},function(e,t,n){"use strict";(function(e,i,r){n.d(t,"a",function(){return l});var o=n(283),s=n(239),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),l=function(){function t(t){var n=t.linkTheme,r=t.url;return u(s.a.Description,{},void 0,u(e,{loc:"statusline/filter_created"},void 0,i.createElement(o.a,a({"data-ref":"link"},{theme:n,url:r}))))}return t.propTypes={linkTheme:r.string.isRequired,url:r.string.isRequired},t}()}).call(t,n(245),n(232),n(230))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=n(239),r=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),o=r(i.a.Description,{},void 0,r(e,{loc:"statusline/max_signature_count_limit_exceeded"})),s=function(){function e(e){return o}return e}()}).call(t,n(245))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var i=n(239),r=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),o=r(i.a.Description,{},void 0,r(e,{loc:"statusline/max_signature_length_limit_exceeded"})),s=function(){function e(e){return o}return e}()}).call(t,n(245))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=n(239),r=n(266),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=o(i.a.Description,{},void 0,o(r.a,{name:"MessageSending",status:"active"},void 0,o(r.a.Message,{},void 0,o(e,{loc:"statusline/sending_message"}))),o(r.a,{name:"MessageSent",status:"done"},void 0,o(r.a.Message,{},void 0,o(e,{loc:"statusline/message_sent"})))),a=function(){function e(e){return s}return e}()}).call(t,n(245))},function(e,t,n){"use strict";(function(e){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return m});var r=n(265),o=n.n(r),s=n(350),a=n(2003),u=n(2004),l=n(2005),c=n(2007),d=(n.n(c),function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}()),f=d(l.a,{}),p=d(s.a,{cls:"mail-StatuslineProgress_Active",size:"xxs",progress:!0}),h=d("span",{className:"mail-StatuslineProgress_Done"}),m=function(){function t(e){var t,n=e.name,r=e.status,s=e.withBar,a=void 0!==s&&s,u=e.children,l=o()((t={"mail-StatuslineProgress":!0},i(t,"mail-StatuslineProgress_"+n,Boolean(n)),i(t,"mail-StatuslineProgress_withBar",a),t));return d("div",{className:l},void 0,a&&f,"active"===r&&p,"done"===r&&h,u)}return t.propTypes={status:e.string,name:e.string,withBar:e.bool},t}();m.Message=a.a,m.Action=u.a}).call(t,n(230))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),r=function(){function e(e){return i("div",{className:"mail-StatuslineProgress_Message"},void 0,e.children)}return e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var i=n(283),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function t(t){return e.createElement(i.a,r({cls:"mail-StatuslineProgress_Action"},t),t.children)}return t}()}).call(t,n(232))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(303),r=n(2006),o=(n.n(r),function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}()),s=function(){function e(e){return o("div",{className:"mail-StatuslineProgress-Bar"},void 0,o("span",{className:"mail-StatuslineProgress-Bar_Inner",style:{animationDuration:i.b+"ms"}}))}return e}()},function(e,t){},function(e,t){},function(e,t,n){"use strict";(function(e,i,r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return v});var u,l,c=n(239),d=n(266),f=n(426),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),m=h(d.a,{name:"MessageSending",status:"active"},void 0,h(d.a.Message,{},void 0,h(e,{loc:"statusline/sending_message"}))),g=h(e,{loc:"statusline/action_cancel"}),v=(l=u=function(t){function n(){var e,t,i,r;o(this,n);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return t=i=s(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(u))),i.onCancel=function(){var e=i.props,t=e.onCancel;(0,e.sendMetric)("Клик","Отменить"),t&&t()},r=t,s(i,r)}return a(n,t),p(n,[{key:"render",value:function(){var t=this.props,n=t.progressLinkTheme,i=t.sendTime,r={date:Object(f.a)(i),time:Object(f.c)(i)};return h(c.a.Description,{},void 0,m,h(d.a,{name:"MessageSent",status:"done"},void 0,h(d.a.Message,{},void 0,h(e,{loc:"statusline/message_sent_delayed",params:r})),h(d.a.Action,{theme:n,onClick:this.onCancel},void 0,g)))}}]),n}(i.Component),u.propTypes={progressLinkTheme:r.string.isRequired,sendTime:r.instanceOf(Date).isRequired,sendMetric:r.func.isRequired,onCancel:r.func},l)}).call(t,n(245),n(232),n(230))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return s});var r=n(239),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=function(){function t(t){var n=t.maxCount;return o(r.a.Description,{},void 0,o(e,{loc:"statusline/recipients_limit_exceeded",params:{maxCount:n}}))}return t.propTypes={maxCount:i.number.isRequired},t}()}).call(t,n(245),n(230))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=n(239),r=n(266),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=o(i.a.Description,{},void 0,o(r.a,{status:"active"},void 0,o(r.a.Message,{},void 0,o(e,{loc:"statusline/sending_message"})))),a=function(){function e(e){return s}return e}()}).call(t,n(245))},function(e,t,n){"use strict";(function(e,i,r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return g});var u,l,c=n(239),d=n(266),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),h=p(d.a.Message,{},void 0,p(e,{loc:"statusline/sending_message"})),m=p(e,{loc:"statusline/action_cancel"}),g=(l=u=function(e){function t(){var e,n,i,r;o(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.onCancel=function(){var e=i.props,t=e.onCancel;(0,e.sendMetric)("Клик","Отменить"),t&&t()},r=n,s(i,r)}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props.progressLinkTheme;return p(c.a.Description,{},void 0,p(d.a,{status:"active",withBar:!0},void 0,h,p(d.a.Action,{theme:e,onClick:this.onCancel},void 0,m)))}}]),t}(i.Component),u.propTypes={progressLinkTheme:r.string.isRequired,sendMetric:r.func.isRequired,onCancel:r.func},l)}).call(t,n(245),n(232),n(230))},function(e,t,n){"use strict";(function(e,i,r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return g});var u,l,c=n(239),d=n(266),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),h=p(d.a.Message,{},void 0,p(e,{loc:"statusline/settings_saved"})),m=p(e,{loc:"statusline/go_to_inbox"}),g=(l=u=function(e){function t(){var e,n,i,r;o(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.onLinkClick=function(){i.props.sendMetric("Клик",'Клик в "Перейти во входящие"')},r=n,s(i,r)}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props.progressLinkTheme;return p(c.a.Description,{},void 0,p(d.a,{status:"done"},void 0,h,p(d.a.Action,{theme:e,url:"#inbox",onClick:this.onLinkClick},void 0,m)))}}]),t}(i.Component),u.propTypes={progressLinkTheme:r.string.isRequired,sendMetric:r.func.isRequired},l)}).call(t,n(245),n(232),n(230))},function(e,t,n){"use strict";(function(e,i,r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return g});var u,l,c=n(239),d=n(266),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),h=p(d.a.Message,{},void 0,p(e,{loc:"statusline/signature_added"})),m=p(e,{loc:"statusline/go_to_inbox"}),g=(l=u=function(e){function t(){var e,n,i,r;o(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.onLinkClick=function(){i.props.sendMetric("Клик",'Клик в "Перейти во входящие"')},r=n,s(i,r)}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props.progressLinkTheme;return p(c.a.Description,{},void 0,p(d.a,{status:"done"},void 0,h,p(d.a.Action,{theme:e,url:"#inbox",onClick:this.onLinkClick},void 0,m)))}}]),t}(i.Component),u.propTypes={progressLinkTheme:r.string.isRequired,sendMetric:r.func.isRequired},l)}).call(t,n(245),n(232),n(230))},function(e,t,n){"use strict";(function(e,i,r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return g});var u,l,c=n(239),d=n(266),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),h=p(d.a.Message,{},void 0,p(e,{loc:"statusline/signature_deleted"})),m=p(e,{loc:"statusline/go_to_inbox"}),g=(l=u=function(e){function t(){var e,n,i,r;o(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.onLinkClick=function(){i.props.sendMetric("Клик",'Клик в "Перейти во входящие"')},r=n,s(i,r)}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props.progressLinkTheme;return p(c.a.Description,{},void 0,p(d.a,{status:"done"},void 0,h,p(d.a.Action,{theme:e,url:"#inbox",onClick:this.onLinkClick},void 0,m)))}}]),t}(i.Component),u.propTypes={progressLinkTheme:r.string.isRequired,sendMetric:r.func.isRequired},l)}).call(t,n(245),n(232),n(230))},function(e,t,n){"use strict";(function(e,i,r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var u,l,c=n(283),d=n(239),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),h=(l=u=function(e){function t(){var e,n,i,r;o(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.onRemoveButtonClick=function(){ns.action.run("toolbar.settings.button.remove",{button:"template"}),i.props.sendMetric("Клик",'Клик в "Удалите кнопку"')},i.onCreateButtonClick=function(){var e=i.props.template;ns.action.run("compose.go",{save_symbol:"template",old_tmpl:e}),i.props.sendMetric("Клик",'Клик в "Создайте новый шаблон"')},r=n,s(i,r)}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props.linkTheme;return p(d.a.Description,{},void 0,p(i,{loc:"statusline/template_not_found"},void 0,p(c.a,{"data-ref":"remove",theme:e,url:"#",onClick:this.onRemoveButtonClick}),p(c.a,{"data-ref":"create",theme:e,url:"#",onClick:this.onCreateButtonClick})))}}]),t}(e.Component),u.propTypes={linkTheme:r.string.isRequired,template:r.string.isRequired,sendMetric:r.func.isRequired},l)}).call(t,n(232),n(245),n(230))},function(e,t,n){"use strict";(function(e,i,r){n.d(t,"a",function(){return l});var o=n(283),s=n(239),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),l=function(){function t(t){var n=t.linkTheme,r=t.url;return u(s.a.Description,{},void 0,u(e,{loc:"statusline/timeline_loading_failed"},void 0,i.createElement(o.a,a({"data-ref":"link"},{theme:n,url:r}))))}return t.propTypes={linkTheme:r.string.isRequired,url:r.string.isRequired},t}()}).call(t,n(245),n(232),n(230))},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return s});var r=n(239),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=function(){function t(t){var n=t.maxCount,i=t.maxSize;return o(r.a.Description,{},void 0,o(e,{loc:"statusline/too_big_attachment",params:{maxCount:n,maxSize:i}}))}return t.propTypes={maxCount:i.number.isRequired,maxSize:i.number.isRequired},t}()}).call(t,n(245),n(230))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=n(239),r=n(266),o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),s=o(i.a.Description,{},void 0,o(r.a,{status:"active"},void 0,o(r.a.Message,{},void 0,o(e,{loc:"statusline/before_sending_message"})))),a=function(){function e(e){return s}return e}()}).call(t,n(245))},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(){var t=document.getElementsByClassName("js-header-themes-selector")[0],n=document.createElement("div"),r=Jane.Promo.findPromo("promo-close-old-themes");document.body.appendChild(n);var s=function(){r.off(),e.unmountComponentAtNode(n),document.body.removeChild(n)},a={onClose:s,anchorNode:t,promo:r};e.render(i.createElement(o.a,a),n)}var o=n(2021),s={create:r};t.a=s}).call(t,n(237),n(232))},function(e,t,n){"use strict";(function(e,i){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return m});var a,u,l=n(239),c=n(2022),d=n(345),f=n(2023),p=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),h=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&o)for(var a in o)void 0===n[a]&&(n[a]=o[a]);else n||(n=o||{});if(1===s)n.children=r;else if(s>1){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+3];n.children=u}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),m=(u=a=function(t){function n(){var e,t,i,s;r(this,n);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return t=i=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(u))),i.state={tooltipVisible:!0},i.onCrossClose=function(){var e=i.props.onClose;i.setState({tooltipVisible:!1}),Jane.c("Закрытие тем","закрытие по крестику"),e()},i._alignPopup=function(){i._popup&&i._popup.forceUpdate()},s=t,o(i,s)}return s(n,t),p(n,[{key:"componentDidMount",value:function(){Object(c.a)(this._alignPopup,"liza_minified_header"),Object(d.a)(this._alignPopup),ns.events.on("daria:vThemesSelector:new-schema",this.props.onClose,!0)}},{key:"componentWillUnmount",value:function(){Object(c.b)(this._alignPopup,"liza_minified_header"),Object(d.b)(this._alignPopup),ns.events.off("daria:vThemesSelector:new-schema",this.props.onClose,!0)}},{key:"render",value:function(){var t=this,n={autoclosable:!1,cls:"mail-PromoCloseOldThemes",theme:"promo",anchor:this.props.anchorNode,to:"bottom",size:"m",visible:this.state.tooltipVisible,tone:"default",ref:function(e){return t._popup=e}},i=this.props.promo,r={mods:{star:"yes",side:"bottom-left"}};return e.createElement(l.a,n,h(l.a.Close,{onClick:this.onCrossClose}),h(l.a.Description,{},void 0,i.getPromoText()),e.createElement(l.a.Corner,r))}}]),n}(e.PureComponent),a.propTypes={anchorNode:i.object.isRequired,onClose:i.func.isRequired,promo:i.object.isRequired},u)}).call(t,n(232),n(230))},function(e,t,n){"use strict";function i(e,t){var n=t?"ns-model-changed."+t:"ns-model-changed";s().on(n,e)}function r(e,t){var n=t?"ns-model-changed."+t:"ns-model-changed";s().off(n,e)}t.a=i,t.b=r;var o=void 0,s=function(){return o||(o=ns.Model.get("settings"))}},function(e,t){},function(e,t){!function(e){var t=null,n=!1,i=!1;ns.events.on("toolbar.fixed",function(e,t){i=t}),e.Statusline={_inited:!1,timeout:5e3,init:function(){if(n){var e=$(".js-mail-Logo");if(e.length){this.$node=$(Jane.tt("mail:statusline",{})).hide().prependTo(".js-mail-App"),this.$remove=this.$node.find(".js-mail-Notification-Close"),this.$content=this.$node.find(".js-mail-Notification-Content"),this.$flag=this.$node.find(".js-mail-Notification-Flag");var i=e.position().left+e.width()+20;this.$node.css({left:i});var r=this;this.$node.hover(function(){clearTimeout(r.timeoutId)},function(){r.hideOnTimeout&&(r.timeoutId=setTimeout(function(){r.hide()},r.timeout))}),this.$remove.on("click.statuslineRemove",function(e){e.stopPropagation(),e.preventDefault(),r.hide(null,null,!0),r.sendMetric("Клик","Закрыть")}),this.$node.on("click.statuslineClick",function(){r.hide()}),$(window).scroll(function(){r.top&&r.updatePosition()}),this._inited=!0,t&&this[t.method].apply(this,t.params)}}},show:function(n){if(this._inited||this.init(),!this._inited)return void(t={method:"show",params:[n]});var i=n.data?e.supplant(n.body,n.data):n.body,r=this,o=n.blocker||!1;this.name=n.name,this.hideOnTimeout=void 0===n.hideOnTimeout||n.hideOnTimeout,this.blocker=o,this.onClose=n.onClose||null,this.blockerCanBeClosed=n.blockerCanBeClosed||!1,n.flag&&this.$flag.html(n.flag),n.href&&this.$node.attr({href:n.href}),this.$content.html(i),this.$node.addClass(n.class),this.$remove.toggleClass("g-hidden",o),this.$remove.toggleClass("g-hidden",o&&!this.blockerCanBeClosed),this.$node.show(),this.top||(this.top=parseInt(this.$node.css("top"),10),this.updatePosition()),clearTimeout(this.timeoutId),this.hideOnTimeout&&(this.timeoutId=setTimeout(function(){r.hide(r.name,n.speed)},n.timeout||this.timeout)),r.sendMetric("Показ")},hide:function(n,i,r){if(this._inited||this.init(),!this._inited)return void(t={method:"hide",params:[n,i]});if(!n&&!this.blocker||this.name===n||this.blockerCanBeClosed){clearTimeout(this.timeoutId),i?this.$node.fadeOut(i):this.$node.hide(),this.$node.removeClass("b-statusline_fixed"),this.top=null,r&&$.isFunction(this.onClose)&&this.onClose(),this.$flag.html("");var o=this;this.$node.attr("href")&&e.setZeroTimeout(function(){o.$node.removeAttr("href")})}},updatePosition:function(){this._inited&&(this.top<$(document).scrollTop()?this.$node.addClass("b-statusline_fixed").toggleClass("b-statusline_with-toolbar",i):this.$node.removeClass("b-statusline_fixed b-statusline_with-toolbar"))},sendMetric:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=Jane).c.apply(e,["Нотификации","Функциональные нотификации",this.name].concat(n))}},ns.events.on("pageinit",function(){n=!0,e.Statusline.init()}),ns.events.on("ns-page-before-changed",function(){!1===e.Statusline.hideOnTimeout&&e.Statusline.hide()})}(Daria)}]));