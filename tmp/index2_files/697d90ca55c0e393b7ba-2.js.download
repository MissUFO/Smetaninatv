webpackJsonp([2,46],[function(e,t,n){var r=n(36)("wks"),i=n(15),o=n(2).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},,function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(6),i=n(41),o=n(35),a=Object.defineProperty;t.f=n(4)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(8);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},,function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},,,,function(e,t,n){var r=n(5),i=n(21);e.exports=n(4)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(58),i=n(33);e.exports=function(e){return r(i(e))}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(44);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},,,function(e,t,n){var r=n(2),i=n(12),o=n(3),a=n(15)("src"),s=Function.toString,u=(""+s).split("toString");n(20).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},,,function(e,t,n){var r=n(5).f,i=n(3),o=n(0)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t){e.exports={}},function(e,t,n){var r=n(2),i=n(20),o=n(12),a=n(19),s=n(16),u=function(e,t,n){var c,l,f,d,h=e&u.F,p=e&u.G,g=e&u.S,m=e&u.P,v=e&u.B,_=p?r:g?r[t]||(r[t]={}):(r[t]||{}).prototype,y=p?i:i[t]||(i[t]={}),b=y.prototype||(y.prototype={});p&&(n=t);for(c in n)l=!h&&_&&void 0!==_[c],f=(l?_:n)[c],d=v&&l?s(f,r):m&&"function"==typeof f?s(Function.call,f):f,_&&a(_,c,f,e&u.U),y[c]!=f&&o(y,c,d),m&&b[c]!=f&&(b[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},,function(e,t,n){var r=n(36)("keys"),i=n(15);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(57),i=n(38);e.exports=Object.keys||function(e){return r(e,i)}},,,function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(8),i=n(2).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(2),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(42),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports=!1},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){e.exports=!n(4)&&!n(14)(function(){return 7!=Object.defineProperty(n(34)("div"),"a",{get:function(){return 7}}).a})},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(6),i=n(72),o=n(38),a=n(29)("IE_PROTO"),s=function(){},u=function(){var e,t=n(34)("iframe"),r=o.length;for(t.style.display="none",n(59).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(33);e.exports=function(e){return Object(r(e))}},,,,,,,,function(e,t,n){var r=n(15)("meta"),i=n(8),o=n(3),a=n(5).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(14)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(16),i=n(60),o=n(61),a=n(6),s=n(37),u=n(62),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,g,m,v=d?function(){return e}:u(e),_=r(n,f,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(h=s(e.length);h>y;y++)if((m=t?_(a(p=e[y])[0],p[1]):_(e[y]))===c||m===l)return m}else for(g=v.call(e);!(p=g.next()).done;)if((m=i(g,_,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(19);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(3),i=n(13),o=n(70)(!1),a=n(29)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(27);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){e.exports=n(2).document&&document.documentElement},function(e,t,n){var r=n(6);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(25),i=n(0)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(63),i=n(0)("iterator"),o=n(25);e.exports=n(20).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(27),i=n(0)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(0)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},,,,,,function(e,t,n){var r=n(13),i=n(37),o=n(71);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(42),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(5),i=n(6),o=n(30);e.exports=n(4)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(40),i=n(21),o=n(13),a=n(35),s=n(3),u=n(41),c=Object.getOwnPropertyDescriptor;t.f=n(4)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(39),i=n(26),o=n(19),a=n(12),s=n(3),u=n(25),c=n(76),l=n(24),f=n(77),d=n(0)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,g,m,v,_){c(n,t,g);var y,b,w,D=function(e){if(!h&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",T="values"==m,A=!1,E=e.prototype,S=E[d]||E["@@iterator"]||m&&E[m],x=S||D(m),k=m?T?D("entries"):x:void 0,M="Array"==t?E.entries||S:S;if(M&&(w=f(M.call(new e)))!==Object.prototype&&(l(w,C,!0),r||s(w,d)||a(w,d,p)),T&&S&&"values"!==S.name&&(A=!0,x=function(){return S.call(this)}),r&&!_||!h&&!A&&E[d]||a(E,d,x),u[t]=x,u[C]=p,m)if(y={values:T?x:D("values"),keys:v?x:D("keys"),entries:k},_)for(b in y)b in E||o(E,b,y[b]);else i(i.P+i.F*(h||A),t,y);return y}},function(e,t,n){"use strict";var r=n(43),i=n(21),o=n(24),a={};n(12)(a,n(0)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(3),i=n(45),o=n(29)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";var r=n(2),i=n(5),o=n(4),a=n(0)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},,,,,,,,,,function(e,t,n){"use strict";var r=n(5).f,i=n(43),o=n(56),a=n(16),s=n(54),u=n(33),c=n(55),l=n(75),f=n(74),d=n(78),h=n(4),p=n(53).fastKey,g=h?"_s":"size",m=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var f=e(function(e,r){s(e,f,t,"_i"),e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=r&&c(r,n,e[l],e)});return o(f.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var t=this,n=m(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[g]--}return!!n},forEach:function(e){s(this,f,"forEach");for(var t,n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!m(this,e)}}),h&&r(f.prototype,"size",{get:function(){return u(this[g])}}),f},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[g]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){l(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?f(0,n.k):"values"==t?f(0,n.v):f(0,[n.k,n.v]):(e._t=void 0,f(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(2),i=n(26),o=n(19),a=n(56),s=n(53),u=n(55),c=n(54),l=n(8),f=n(14),d=n(64),h=n(24),p=n(100);e.exports=function(e,t,n,g,m,v){var _=r[e],y=_,b=m?"set":"add",w=y&&y.prototype,D={},C=function(e){var t=w[e];o(w,e,"delete"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(v||w.forEach&&!f(function(){(new y).entries().next()}))){var T=new y,A=T[b](v?{}:-0,1)!=T,E=f(function(){T.has(1)}),S=d(function(e){new y(e)}),x=!v&&f(function(){for(var e=new y,t=5;t--;)e[b](t,t);return!e.has(-0)});S||(y=t(function(t,n){c(t,y,e);var r=p(new _,t,y);return void 0!=n&&u(n,m,r[b],r),r}),y.prototype=w,w.constructor=y),(E||x)&&(C("delete"),C("has"),m&&C("get")),(x||A)&&C(b),v&&w.clear&&delete w.clear}else y=g.getConstructor(t,e,m,b),a(y.prototype,n),s.NEED=!0;return h(y,e),D[e]=y,i(i.G+i.W+i.F*(y!=_),D),v||g.setStrong(y,e,m),y}},,,,,,,,function(e,t,n){"use strict";function r(e,t){Jane.ErrorLog.send({errorType:"polifill-error",name:e},t.message,t.stack)}try{n(98)}catch(e){r("babel-regenerator-runtime",e)}try{n(99)}catch(e){r("core-js/modules/es6.map.js",e)}try{n(102)}catch(e){r("core-js/modules/es6.set.js",e)}try{n(103)}catch(e){r("classlist-polyfill",e)}try{n(104)}catch(e){r("whatwg-fetch",e)}},function(e,t){!function(t){"use strict";function n(e,t,n,r){var o=Object.create((t||i).prototype),a=new h(r||[]);return o._invoke=l(e,n,a),o}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){this.arg=e}function c(e){function t(t,n){var r=e[t](n),a=r.value;return a instanceof u?Promise.resolve(a.arg).then(i,o):Promise.resolve(a).then(function(e){return r.value=e,r})}function n(e,n){function i(){return t(e,n)}return r=r?r.then(i,i):new Promise(function(e){e(i())})}"object"==typeof process&&process.domain&&(t=process.domain.bind(t));var r,i=t.bind(e,"next"),o=t.bind(e,"throw");t.bind(e,"return");this._invoke=n}function l(e,t,n){var i=w;return function(o,a){if(i===C)throw new Error("Generator is already running");if(i===T){if("throw"===o)throw a;return g()}for(;;){var s=n.delegate;if(s){if("return"===o||"throw"===o&&s.iterator[o]===m){n.delegate=null;var u=s.iterator.return;if(u){var c=r(u,s.iterator,a);if("throw"===c.type){o="throw",a=c.arg;continue}}if("return"===o)continue}var c=r(s.iterator[o],s.iterator,a);if("throw"===c.type){n.delegate=null,o="throw",a=c.arg;continue}o="next",a=m;var l=c.arg;if(!l.done)return i=D,l;n[s.resultName]=l.value,n.next=s.nextLoc,n.delegate=null}if("next"===o)n._sent=a,n.sent=i===D?a:m;else if("throw"===o){if(i===w)throw i=T,a;n.dispatchException(a)&&(o="next",a=m)}else"return"===o&&n.abrupt("return",a);i=C;var c=r(e,t,n);if("normal"===c.type){i=n.done?T:D;var l={value:c.arg,done:n.done};if(c.arg!==A)return l;n.delegate&&"next"===o&&(a=m)}else"throw"===c.type&&(i=T,o="throw",a=c.arg)}}}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(v.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=m,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:m,done:!0}}var m,v=Object.prototype.hasOwnProperty,_="function"==typeof Symbol&&Symbol.iterator||"@@iterator",y="object"==typeof e,b=t.regeneratorRuntime;if(b)return void(y&&(e.exports=b));b=t.regeneratorRuntime=y?e.exports:{},b.wrap=n;var w="suspendedStart",D="suspendedYield",C="executing",T="completed",A={},E=a.prototype=i.prototype;o.prototype=E.constructor=a,a.constructor=o,o.displayName="GeneratorFunction",b.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},b.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a,e.prototype=Object.create(E),e},b.awrap=function(e){return new u(e)},s(c.prototype),b.async=function(e,t,r,i){var o=new c(n(e,t,r,i));return b.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(E),E[_]=function(){return this},E.toString=function(){return"[object Generator]"},b.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},b.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=m,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),s=v.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&v.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),A},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;d(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},A}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this)},function(e,t,n){"use strict";var r=n(88);e.exports=n(89)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(8),i=n(101).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){var r=n(8),i=n(6),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(16)(Function.call,n(73).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){"use strict";var r=n(88);e.exports=n(89)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},function(e,t){"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,r=arguments.length;for(n=0;n<r;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():function(e){"use strict";if("Element"in e){var t=e.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},i=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(""===t)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return i.call(e,t)},s=function(e){for(var t=r.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,o=n.length;i<o;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=s.prototype=[],c=function(){return new s(this)};if(o.prototype=Error.prototype,u.item=function(e){return this[e]||null},u.contains=function(e){return e+="",-1!==a(this,e)},u.add=function(){var e,t=arguments,n=0,r=t.length,i=!1;do{e=t[n]+"",-1===a(this,e)&&(this.push(e),i=!0)}while(++n<r);i&&this._updateClassName()},u.remove=function(){var e,t,n=arguments,r=0,i=n.length,o=!1;do{for(e=n[r]+"",t=a(this,e);-1!==t;)this.splice(t,1),o=!0,t=a(this,e)}while(++r<i);o&&this._updateClassName()},u.toggle=function(e,t){e+="";var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},u.toString=function(){return this.join(" ")},n.defineProperty){var l={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",l)}catch(e){-2146823252===e.number&&(l.enumerable=!1,n.defineProperty(t,"classList",l))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",c)}}(window.self))},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function u(e){var t=new FileReader;return t.readAsText(e),a(t)}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob?(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=o(this);return e||Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function h(e){var t=new i;return(e.getAllResponseHeaders()||"").trim().split("\n").forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();t.append(r,i)}),t}function p(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof i?t.headers:new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];i||(i=[],this.map[e]=i),i.push(r)},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},i.prototype.getAll=function(e){return this.map[t(e)]||[]},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},i.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},g.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},c.call(f.prototype),c.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];p.redirect=function(e,t){if(-1===v.indexOf(t))throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=f,e.Response=p,e.fetch=function(e,t){return new Promise(function(n,r){function i(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var o;o=f.prototype.isPrototypeOf(e)&&!t?e:new f(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:h(a),url:i()},t="response"in a?a.response:a.responseText;n(new p(t,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&g.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t){var n={en:function(e,t){return t=Number(t),1===t?e[0]:4===e.length?e[2]:e[1]},ru:function(e,t){t=Number(t);var n=e.length;if(4===n&&1===t)return e[0];var r=t%100,i=t%10,o=2;return r>10&&r<=20?o=2:1===i?o=0:i>1&&i<5&&(o=1),4===n&&o++,e[o]}};Jane.i18n.refreshConvertFunction=function(e){Jane.i18n.convert=n[e]||n.ru},Jane.i18n.refreshConvertFunction(Daria.Config.locale)},function(e,t){Jane.i18n=Jane.i18n||{},Jane.i18n.if=function(e,t,n){return e?t:n},Jane.i18n.plural=function(e,t,n){return e>1?t:n},Jane.i18n.index=function(e,t){return e[Number(t)]},Jane.i18n.camelize=function(e){if(e&&e.length)return e.charAt(0).toUpperCase()+e.substr(1)}},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(684);n.n(r);n(97),Jane.module("common.js",function(){Jane.i18n=Jane.i18n||{},n(685),n(105),n(686),n(688),n(798),n(805)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r="",i={},o=function(e){return r=e},a=function(e,t,n,r){return i[e][t][n](r)},s=function(e,t){return i[e]=t[r]};e.exports={setTankerProjectId:o,getKey:a,addTranslation:s}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=console.assert.bind(console),s=Symbol("default"),u=function(){function e(){r(this,e),this._scopes={}}return o(e,[{key:"add",value:function(e,t,n){a(t,"Unexpected empty key"),a(n,"Unexpected empty link");var r=this.scope(e);if(r[t])throw new Error("");r[t]=n}},{key:"get",value:function(e,t){a(t,"Unexpected empty key");var n=this.scope(e),r=n[t];if(r)return r;var i=n[s]||this.scope(s)[s];if(i)return i(e,t);throw new Error("Undefined key '"+t+"' in scope '"+e+"'")}},{key:"default",value:function(e,t){"function"==typeof e&&(t=e,e=null),void 0==e&&(e=s),a(t,"Unexpected empty callback"),this.scope(e)[s]=t}},{key:"scope",value:function(e,t){return a(e,"Unexpected empty scope"),"object"===(void 0===t?"undefined":i(t))&&a(!this._scopes[e],"Override of existing links scope"),this._scopes[e]||(this._scopes[e]=t||{}),this._scopes[e]}}]),e}();e.exports=new u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return function(){return h.compatible?e.apply(void 0,arguments):vow.Promise.resolve()}}function a(e,t){var n=e.scope===t.scope,r=Object.keys(h.ROLE).some(function(e){return h.ROLE[e]===t.type});return n&&r}function s(e,t){var n=Daria.getUrlParams();n.uid=n.uid||Daria.Config.uid;var r="?"+Daria.getParamsHash(n);return navigator.serviceWorker.register(t+r,{scope:e})}function u(e){return function(){return Promise.reject("Unknown command: "+e)}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return h});var c,l,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=(l=c=function(){function e(t){var n=this;i(this,e),this._handleMessages=o(function(){navigator.serviceWorker.addEventListener("message",function(e){return n._registration().then(function(t){return a(t,e.data)?n.rpc.handle(e.data).then(function(t){e.ports[0].postMessage(t)}).catch(function(t){e.ports[0].postMessage({error:t})}):void e.ports[0].postMessage(null)})})}),this._registration=o(function(){return navigator.serviceWorker.getRegistrations().then(function(e){return e.filter(function(e){var t=_.endsWith(e.scope,n._scope),r=e.active&&_.startsWith(e.active.scriptURL,location.origin+n._url);return t&&r})[0]||null})}),this._start=function(){return s(n._scope,n._url)},this.stop=o(function(){return n._registration().then(function(e){if(e)return e.unregister()})}),this.update=o(function(){return n._update||(n._update=n._registration().then(function(e){return e?(e.update(),e):n._start()})),n._update}),this.settings=function(e){return n.rpc.message({command:"settings",data:e}).catch(function(){})},this.debug=function(){return n.rpc.settings({debug:!0})},this._role=t,this._config=e.CONFIGS[t]||e.CONFIGS.default,this._scope=this._config.scope,this._url=this._config.url,this._rpc=null,this._update=null,this._handleMessages()}return d(e,[{key:"_reregister",value:function(e){return(e&&e.unregister()||vow.Promise.resolve()).then(this._start)}},{key:"rpc",get:function(){if(!this._rpc){var t=e.COMMANDS[this._role]||{};this._rpc=new e.RPC(this,t)}return this._rpc}}]),e}(),c.ROLE={PUSH_MANAGER:"push-manager",UA_PROXY:"ua-proxy"},c.compatible=Boolean(navigator.serviceWorker&&navigator.serviceWorker.addEventListener&&navigator.serviceWorker.getRegistrations),l);h.RPC=function e(t,n){var r=this;i(this,e),this.handle=function(e){return Promise.resolve(e.data).then(r._commands[e.command]||u(e.command))},this.message=function(e,t){var n=Boolean(t);return t=n?Promise.resolve(t):r._worker.update(),t.then(function(t){if(!t)throw new Error("Can`t send message. Service Worker does not exists.");return t.active?new vow.Promise(function(n,r){var i=new MessageChannel;i.port1.onmessage=function(e){e.data&&e.data.error?r(e.data.error):n(e.data)},t.active.postMessage(e,[i.port2]),setTimeout(function(){r(new Error("Hanged postMessage"))},3e3)}):vow.Promise.resolve()}).catch(function(e){return ns.forcedRequest("do-service-worker-log",{params:JSON.stringify({type:"error",reason:"message-error",message:e&&e.message||e,pageFocused:Jane.watcher.get("pageVisible"),registrationUpdate:!n,source:"u2709-push"})}),vow.Promise.reject(e)})},this._worker=t,this._commands=n||{}},h.CONFIGS=(f={},r(f,h.ROLE.PUSH_MANAGER,{url:Daria.api["service-worker"],scope:function(){return"/?uid="+Daria.Config.uid}()}),r(f,"default",{url:Daria.api["service-worker"],scope:"/"}),f),h.COMMANDS=r({},h.ROLE.PUSH_MANAGER,{navigate:function(e){var t=/#(compose|setup|contacts)/,n=!t.test(location.hash);return n&&_.delay(function(){return window.location=e},50),n}}),Daria.ServiceWorker=h},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){window.i18n=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();t=t.substr(1);var n=Jane.i18n._dict[t];return n||alert("Не определена локализационная строка с id = "+t),"function"==typeof n?n.apply(null,e):n}},function(e,t,n){"use strict";var r=Daria.Config.locale,i=n(687)["project-id"],o=n(286);o.setTankerProjectId(i),o.addTranslation(r,Daria.tanker[r])},function(e,t){e.exports={"project-id":"mail-liza",outputDir:"./locales/js","keyset-id":"statusline"}},function(e,t,n){n(689),n(690),n(691),_.mixin({filterValuesContainingPropValue:function(e,t,n){var r=_.partial(_.contains,n),i=function(e){return e[t]},o=_.compose(r,i);return _.filter(e,o)}}),n(692),n(693),n(694),n(695),n(696),n(697),n(698),n(699),n(701),n(702),n(703),n(704),n(705),n(706),n(707),n(708),n(709),n(711),n(712),n(716),n(717),n(718),n(719),n(720),n(721),n(722),n(723),n(724),n(725),n(726),n(727),n(728),n(729),n(730),n(731),n(106),n(732),n(733),n(734),n(738),n(739),n(740),n(750),n(751),n(752),n(357),n(753),n(754),n(755),n(757),n(758),n(759),n(760),n(761),n(762),n(763),n(764),n(795),n(796),n(797),ns.page.lazyRefresh=_.debounce(function(){ns.page.go()},Daria.Constants.TIMINGS.LAZY_UPDATE_DELAY)},function(e,t){!function(e,t,n,r){"use strict";function i(e,t){for(var n=0,r=e.length;n<r;n++)g(e[n],t)}function o(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],D(t,L[s(t)])}function a(e){return function(t){ee(t)&&(g(t,e),i(t.querySelectorAll($),e))}}function s(e){var t=e.getAttribute("is"),n=e.nodeName.toUpperCase(),r=B.call(P,t?F+t.toUpperCase():O+n);return t&&-1<r&&!u(n,t)?-1:r}function u(e,t){return-1<$.indexOf(e+'[is="'+t+'"]')}function c(e){var t=e.currentTarget,n=e.attrChange,r=e.prevValue,i=e.newValue;de&&t.attributeChangedCallback&&"style"!==e.attrName&&t.attributeChangedCallback(e.attrName,n===e[E]?null:r,n===e[S]?null:i)}function l(e){var t=a(e);return function(e){m.push(t,e.target)}}function f(e){fe&&(fe=!1,e.currentTarget.removeEventListener(k,f)),i((e.target||t).querySelectorAll($),e.detail===A?A:T),Z&&p()}function d(e,t){var n=this;re.call(n,e,t),v.call(n,{target:n})}function h(e,t){K(e,t),b?b.observe(e,ae):(le&&(e.setAttribute=d,e[C]=y(e),e.addEventListener(M,v)),e.addEventListener(x,c)),e.createdCallback&&de&&(e.created=!0,e.createdCallback(),e.created=!1)}function p(){for(var e,t=0,n=te.length;t<n;t++)e=te[t],R.contains(e)||(te.splice(t,1),g(e,A))}function g(e,t){var n,r=s(e);-1<r&&(w(e,L[r]),r=0,t!==T||e[T]?t!==A||e[A]||(e[T]=!1,e[A]=!0,r=1):(e[A]=!1,e[T]=!0,r=1,Z&&B.call(te,e)<0&&te.push(e)),r&&(n=e[t+"Callback"])&&n.call(e))}if(!("registerElement"in t)){var m,v,_,y,b,w,D,C="__registerElement"+(1e5*Math.random()>>0),T="attached",A="detached",E="ADDITION",S="REMOVAL",x="DOMAttrModified",k="DOMContentLoaded",M="DOMSubtreeModified",O="<",F="=",N=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,I=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],P=[],L=[],$="",R=t.documentElement,B=P.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},j=n.prototype,U=j.hasOwnProperty,z=j.isPrototypeOf,H=n.defineProperty,W=n.getOwnPropertyDescriptor,J=n.getOwnPropertyNames,V=n.getPrototypeOf,Y=n.setPrototypeOf,G=!!n.__proto__,q=n.create||function e(t){return t?(e.prototype=t,new e):this},K=Y||(G?function(e,t){return e.__proto__=t,e}:J&&W?function(){function e(e,t){for(var n,r=J(t),i=0,o=r.length;i<o;i++)n=r[i],U.call(e,n)||H(e,n,W(t,n))}return function(t,n){do{e(t,n)}while((n=V(n))&&!z.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),X=e.MutationObserver||e.WebKitMutationObserver,Q=(e.HTMLElement||e.Element||e.Node).prototype,Z=!z.call(Q,R),ee=Z?function(e){return 1===e.nodeType}:function(e){return z.call(Q,e)},te=Z&&[],ne=Q.cloneNode,re=Q.setAttribute,ie=Q.removeAttribute,oe=t.createElement,ae=X&&{attributes:!0,characterData:!0,attributeOldValue:!0},se=X||function(e){le=!1,R.removeEventListener(x,se)},ue=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,10)},ce=!1,le=!0,fe=!0,de=!0;Y||G?(w=function(e,t){z.call(t,e)||h(e,t)},D=h):(w=function(e,t){e[C]||(e[C]=n(!0),h(e,t))},D=w),Z?(le=!1,function(){var e=W(Q,"addEventListener"),t=e.value,n=function(e){var t=new CustomEvent(x,{bubbles:!0});t.attrName=e,t.prevValue=this.getAttribute(e),t.newValue=null,t[S]=t.attrChange=2,ie.call(this,e),this.dispatchEvent(t)},r=function(e,t){var n=this.hasAttribute(e),r=n&&this.getAttribute(e),i=new CustomEvent(x,{bubbles:!0});re.call(this,e,t),i.attrName=e,i.prevValue=n?r:null,i.newValue=t,n?i.MODIFICATION=i.attrChange=1:i[E]=i.attrChange=0,this.dispatchEvent(i)},i=function(e){var t,n=e.currentTarget,r=n[C],i=e.propertyName;r.hasOwnProperty(i)&&(r=r[i],t=new CustomEvent(x,{bubbles:!0}),t.attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[i]||null,null==t.prevValue?t[E]=t.attrChange=0:t.MODIFICATION=t.attrChange=1,n.dispatchEvent(t))};e.value=function(e,o,a){e===x&&this.attributeChangedCallback&&this.setAttribute!==r&&(this[C]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",i)),t.call(this,e,o,a)},H(Q,"addEventListener",e)}()):X||(R.addEventListener(x,se),R.setAttribute(C,1),R.removeAttribute(C),le&&(v=function(e){var t,n,r,i=this;if(i===e.target){t=i[C],i[C]=n=y(i);for(r in n){if(!(r in t))return _(0,i,r,t[r],n[r],E);if(n[r]!==t[r])return _(1,i,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return _(2,i,r,t[r],n[r],S)}},_=function(e,t,n,r,i,o){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:i};a[o]=e,c(a)},y=function(e){for(var t,n,r={},i=e.attributes,o=0,a=i.length;o<a;o++)t=i[o],"setAttribute"!==(n=t.name)&&(r[n]=t.value);return r})),t.registerElement=function(e,n){if(r=e.toUpperCase(),ce||(ce=!0,X?(b=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new X(function(r){for(var i,o,a=0,s=r.length;a<s;a++)i=r[a],"childList"===i.type?(n(i.addedNodes,e),n(i.removedNodes,t)):(o=i.target,de&&o.attributeChangedCallback&&"style"!==i.attributeName&&o.attributeChangedCallback(i.attributeName,i.oldValue,o.getAttribute(i.attributeName)))})}(a(T),a(A)),b.observe(t,{childList:!0,subtree:!0})):(m=[],ue(function e(){for(;m.length;)m.shift().call(null,m.shift());ue(e)}),t.addEventListener("DOMNodeInserted",l(T)),t.addEventListener("DOMNodeRemoved",l(A))),t.addEventListener(k,f),t.addEventListener("readystatechange",f),t.createElement=function(e,n){var r=oe.apply(t,arguments),i=""+e,o=B.call(P,(n?F:O)+(n||i).toUpperCase()),a=-1<o;return n&&(r.setAttribute("is",n=n.toLowerCase()),a&&(a=u(i.toUpperCase(),n))),de=!t.createElement.innerHTMLHelper,a&&D(r,L[o]),r},Q.cloneNode=function(e){var t=ne.call(this,!!e),n=s(t);return-1<n&&D(t,L[n]),e&&o(t.querySelectorAll($)),t}),-2<B.call(P,F+r)+B.call(P,O+r))throw new Error("A "+e+" type is already registered");if(!N.test(r)||-1<B.call(I,r))throw new Error("The type "+e+" is invalid");var r,c=function(){return h?t.createElement(p,r):t.createElement(p)},d=n||j,h=U.call(d,"extends"),p=h?n.extends.toUpperCase():r,g=P.push((h?F:O)+r)-1;return $=$.concat($.length?",":"",h?p+'[is="'+e.toLowerCase()+'"]':p),c.prototype=L[g]=U.call(d,"prototype")?d.prototype:q(Q),i(t.querySelectorAll($),T),c}}}(window,document,Object)},function(e,t,n){(function(e){var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){function o(e,t){if(e!==t){var n=null===e,r=e===S,i=e===e,o=null===t,a=t===S,s=t===t;if(e>t&&!o||!i||n&&!a&&s||r&&s)return 1;if(e<t&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function a(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function s(e,t,n){if(t!==t)return _(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function u(e){return"function"==typeof e||!1}function c(e){return null==e?"":e+""}function l(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function f(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function d(e,t){return o(e.criteria,t.criteria)||e.index-t.index}function h(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,s=i.length,u=n.length;++r<s;){var c=o(i[r],a[r]);if(c){if(r>=u)return c;var l=n[r];return c*("asc"===l||!0===l?1:-1)}}return e.index-t.index}function p(e){return He[e]}function g(e){return We[e]}function m(e,t,n){return t?e=Ye[e]:n&&(e=Ge[e]),"\\"+e}function v(e){return"\\"+Ge[e]}function _(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!==o)return i}return-1}function y(e){return!!e&&"object"==(void 0===e?"undefined":i(e))}function b(e){return e<=160&&e>=9&&e<=13||32==e||160==e||5760==e||6158==e||e>=8192&&(e<=8202||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function w(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;)e[n]===t&&(e[n]=V,o[++i]=n);return o}function D(e,t){for(var n,r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r],u=t?t(s,r,e):s;r&&n===u||(n=u,a[++o]=s)}return a}function C(e){for(var t=-1,n=e.length;++t<n&&b(e.charCodeAt(t)););return t}function T(e){for(var t=e.length;t--&&b(e.charCodeAt(t)););return t}function A(e){return Je[e]}function E(e){function t(e){if(y(e)&&!Ms(e)&&!(e instanceof b)){if(e instanceof r)return e;if(na.call(e,"__chain__")&&na.call(e,"__wrapped__"))return pr(e)}return new r(e)}function n(){}function r(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function b(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ka,this.__views__=[]}function He(){var e=new b(this.__wrapped__);return e.__actions__=rt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rt(this.__views__),e}function We(){if(this.__filtered__){var e=new b(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Je(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ms(e),r=t<0,i=n?e.length:0,o=Yn(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,d=0,h=Ta(u,this.__takeCount__);if(!n||i<z||i==u&&h==u)return rn(e,this.__actions__);var p=[];e:for(;u--&&d<h;){c+=t;for(var g=-1,m=e[c];++g<f;){var v=l[g],_=v.iteratee,y=v.type,b=_(m);if(y==W)m=b;else if(!b){if(y==H)continue e;break e}}p[d++]=m}return p}function Ve(){this.__data__={}}function Ye(e){return this.has(e)&&delete this.__data__[e]}function Ge(e){return"__proto__"==e?S:this.__data__[e]}function qe(e){return"__proto__"!=e&&na.call(this.__data__,e)}function Ke(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Xe(e){var t=e?e.length:0;for(this.data={hash:_a(null),set:new da};t--;)this.push(e[t])}function Qe(e,t){var n=e.data;return("string"==typeof t||Pi(t)?n.set.has(t):n.hash[t])?0:-1}function Ze(e){var t=this.data;"string"==typeof e||Pi(e)?t.set.add(e):t.hash[e]=!0}function et(e,t){for(var n=-1,r=e.length,i=-1,o=t.length,a=zo(r+o);++n<r;)a[n]=e[n];for(;++i<o;)a[n++]=t[i];return a}function rt(e,t){var n=-1,r=e.length;for(t||(t=zo(r));++n<r;)t[n]=e[n];return t}function it(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function ot(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e}function at(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function st(e,t,n,r){for(var i=-1,o=e.length,a=r,s=a;++i<o;){var u=e[i],c=+t(u);n(c,a)&&(a=c,s=u)}return s}function ut(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[++i]=a)}return o}function ct(e,t){for(var n=-1,r=e.length,i=zo(r);++n<r;)i[n]=t(e[n],n,e);return i}function lt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function ft(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function dt(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function ht(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function pt(e,t){for(var n=e.length,r=0;n--;)r+=+t(e[n])||0;return r}function gt(e,t){return e===S?t:e}function mt(e,t,n,r){return e!==S&&na.call(r,n)?e:t}function vt(e,t,n){for(var r=-1,i=Us(t),o=i.length;++r<o;){var a=i[r],s=e[a],u=n(s,t[a],a,e,t);(u===u?u===s:s!==s)&&(s!==S||a in e)||(e[a]=u)}return e}function _t(e,t){return null==t?e:bt(t,Us(t),e)}function yt(e,t){for(var n=-1,r=null==e,i=!r&&Qn(e),o=i?e.length:0,a=t.length,s=zo(a);++n<a;){var u=t[n];s[n]=i?Zn(u,o)?e[u]:S:r?S:e[u]}return s}function bt(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}function wt(e,t,n){var r=void 0===e?"undefined":i(e);return"function"==r?t===S?e:sn(e,t,n):null==e?ko:"object"==r?jt(e):t===S?Po(e):Ut(e,t)}function Dt(e,t,n,r,i,o,a){var s;if(n&&(s=i?n(e,r,i):n(e)),s!==S)return s;if(!Pi(e))return e;var u=Ms(e);if(u){if(s=Gn(e),!t)return rt(e,s)}else{var c=ia.call(e),l=c==Q;if(c!=ee&&c!=Y&&(!l||i))return ze[c]?Kn(e,c,t):i?e:{};if(s=qn(l?{}:e),!t)return _t(s,e)}o||(o=[]),a||(a=[]);for(var f=o.length;f--;)if(o[f]==e)return a[f];return o.push(e),a.push(s),(u?it:Ft)(e,function(r,i){s[i]=Dt(r,t,n,i,e,o,a)}),s}function Ct(e,t,n){if("function"!=typeof e)throw new Xo(J);return ha(function(){e.apply(S,n)},t)}function Tt(e,t){var n=e?e.length:0,r=[];if(!n)return r;var i=-1,o=Wn(),a=o===s,u=a&&t.length>=z?mn(t):null,c=t.length;u&&(o=Qe,a=!1,t=u);e:for(;++i<n;){var l=e[i];if(a&&l===l){for(var f=c;f--;)if(t[f]===l)continue e;r.push(l)}else o(t,l,0)<0&&r.push(l)}return r}function At(e,t){var n=!0;return $a(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Et(e,t,n,r){var i=r,o=i;return $a(e,function(e,a,s){var u=+t(e,a,s);(n(u,i)||u===r&&u===o)&&(i=u,o=e)}),o}function St(e,t,n,r){var i=e.length;for(n=null==n?0:+n||0,n<0&&(n=-n>i?0:i+n),r=r===S||r>i?i:+r||0,r<0&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)e[n++]=t;return e}function xt(e,t){var n=[];return $a(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function kt(e,t,n,r){var i;return n(e,function(e,n,o){if(t(e,n,o))return i=r?n:e,!1}),i}function Mt(e,t,n,r){r||(r=[]);for(var i=-1,o=e.length;++i<o;){var a=e[i];y(a)&&Qn(a)&&(n||Ms(a)||Ei(a))?t?Mt(a,t,n,r):lt(r,a):n||(r[r.length]=a)}return r}function Ot(e,t){return Ba(e,t,to)}function Ft(e,t){return Ba(e,t,Us)}function Nt(e,t){return ja(e,t,Us)}function It(e,t){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];Ii(e[a])&&(o[++i]=a)}return o}function Pt(e,t,n){if(null!=e){n!==S&&n in dr(e)&&(t=[n]);for(var r=0,i=t.length;null!=e&&r<i;)e=e[t[r++]];return r&&r==i?e:S}}function Lt(e,t,n,r,i,o){return e===t||(null==e||null==t||!Pi(e)&&!y(t)?e!==e&&t!==t:$t(e,t,Lt,n,r,i,o))}function $t(e,t,n,r,i,o,a){var s=Ms(e),u=Ms(t),c=G,l=G;s||(c=ia.call(e),c==Y?c=ee:c!=ee&&(s=Wi(e))),u||(l=ia.call(t),l==Y?l=ee:l!=ee&&(u=Wi(t)));var f=c==ee,d=l==ee,h=c==l;if(h&&!s&&!f)return jn(e,t,c);if(!i){var p=f&&na.call(e,"__wrapped__"),g=d&&na.call(t,"__wrapped__");if(p||g)return n(p?e.value():e,g?t.value():t,r,i,o,a)}if(!h)return!1;o||(o=[]),a||(a=[]);for(var m=o.length;m--;)if(o[m]==e)return a[m]==t;o.push(e),a.push(t);var v=(s?Bn:Un)(e,t,n,r,i,o,a);return o.pop(),a.pop(),v}function Rt(e,t,n){var r=t.length,i=r,o=!n;if(null==e)return!i;for(e=dr(e);r--;){var a=t[r];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<i;){a=t[r];var s=a[0],u=e[s],c=a[1];if(o&&a[2]){if(u===S&&!(s in e))return!1}else{var l=n?n(u,c,s):S;if(!(l===S?Lt(c,u,n,!0):l))return!1}}return!0}function Bt(e,t){var n=-1,r=Qn(e)?zo(e.length):[];return $a(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function jt(e){var t=Jn(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&(e[n]===r&&(r!==S||n in dr(e)))}}return function(e){return Rt(e,t)}}function Ut(e,t){var n=Ms(e),r=tr(e)&&ir(t),i=e+"";return e=hr(e),function(o){if(null==o)return!1;var a=i;if(o=dr(o),(n||!r)&&!(a in o)){if(null==(o=1==e.length?o:Pt(o,qt(e,0,-1))))return!1;a=Sr(e),o=dr(o)}return o[a]===t?t!==S||a in o:Lt(t,o[a],S,!0)}}function zt(e,t,n,r,i){if(!Pi(e))return e;var o=Qn(t)&&(Ms(t)||Wi(t)),a=o?S:Us(t);return it(a||t,function(s,u){if(a&&(u=s,s=t[u]),y(s))r||(r=[]),i||(i=[]),Ht(e,t,u,zt,n,r,i);else{var c=e[u],l=n?n(c,s,u,e,t):S,f=l===S;f&&(l=s),l===S&&(!o||u in e)||!f&&(l===l?l===c:c!==c)||(e[u]=l)}}),e}function Ht(e,t,n,r,i,o,a){for(var s=o.length,u=t[n];s--;)if(o[s]==u)return void(e[n]=a[s]);var c=e[n],l=i?i(c,u,n,e,t):S,f=l===S;f&&(l=u,Qn(u)&&(Ms(u)||Wi(u))?l=Ms(c)?c:Qn(c)?rt(c):[]:Ui(u)||Ei(u)?l=Ei(c)?qi(c):Ui(c)?c:{}:f=!1),o.push(u),a.push(l),f?e[n]=r(l,u,i,o,a):(l===l?l!==c:c===c)&&(e[n]=l)}function Wt(e){return function(t){return null==t?S:t[e]}}function Jt(e){var t=e+"";return e=hr(e),function(n){return Pt(n,e,t)}}function Vt(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=i&&Zn(r)){var i=r;pa.call(e,r,1)}}return e}function Yt(e,t){return e+ya(Sa()*(t-e+1))}function Gt(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function qt(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,t<0&&(t=-t>i?0:i+t),n=n===S||n>i?i:+n||0,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=zo(i);++r<i;)o[r]=e[r+t];return o}function Kt(e,t){var n;return $a(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function Xt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Qt(e,t,n){var r=zn(),i=-1;return t=ct(t,function(e){return r(e)}),Xt(Bt(e,function(e){return{criteria:ct(t,function(t){return t(e)}),index:++i,value:e}}),function(e,t){return h(e,t,n)})}function Zt(e,t){var n=0;return $a(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function en(e,t){var n=-1,r=Wn(),i=e.length,o=r===s,a=o&&i>=z,u=a?mn():null,c=[];u?(r=Qe,o=!1):(a=!1,u=t?[]:c);e:for(;++n<i;){var l=e[n],f=t?t(l,n,e):l;if(o&&l===l){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),c.push(l)}else r(u,f,0)<0&&((t||a)&&u.push(f),c.push(l))}return c}function tn(e,t){for(var n=-1,r=t.length,i=zo(r);++n<r;)i[n]=e[t[n]];return i}function nn(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?qt(e,r?0:o,r?o+1:i):qt(e,r?o+1:0,r?i:o)}function rn(e,t){var n=e;n instanceof b&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var o=t[r];n=o.func.apply(o.thisArg,lt([n],o.args))}return n}function on(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&i<=Fa){for(;r<i;){var o=r+i>>>1,a=e[o];(n?a<=t:a<t)&&null!==a?r=o+1:i=o}return i}return an(e,t,ko,n)}function an(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,a=t!==t,s=null===t,u=t===S;i<o;){var c=ya((i+o)/2),l=n(e[c]),f=l!==S,d=l===l;if(a)var h=d||r;else h=s?d&&f&&(r||null!=l):u?d&&(r||f):null!=l&&(r?l<=t:l<t);h?i=c+1:o=c}return Ta(o,Oa)}function sn(e,t,n){if("function"!=typeof e)return ko;if(t===S)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function un(e){var t=new sa(e.byteLength);return new ga(t).set(new ga(e)),t}function cn(e,t,n){for(var r=n.length,i=-1,o=Ca(e.length-r,0),a=-1,s=t.length,u=zo(s+o);++a<s;)u[a]=t[a];for(;++i<r;)u[n[i]]=e[i];for(;o--;)u[a++]=e[i++];return u}function ln(e,t,n){for(var r=-1,i=n.length,o=-1,a=Ca(e.length-i,0),s=-1,u=t.length,c=zo(a+u);++o<a;)c[o]=e[o];for(var l=o;++s<u;)c[l+s]=t[s];for(;++r<i;)c[l+n[r]]=e[o++];return c}function fn(e,t){return function(n,r,i){var o=t?t():{};if(r=zn(r,i,3),Ms(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];e(o,u,r(u,a,n),n)}else $a(n,function(t,n,i){e(o,t,r(t,n,i),i)});return o}}function dn(e){return _i(function(t,n){var r=-1,i=null==t?0:n.length,o=i>2?n[i-2]:S,a=i>2?n[2]:S,s=i>1?n[i-1]:S;for("function"==typeof o?(o=sn(o,s,5),i-=2):(o="function"==typeof s?s:S,i-=o?1:0),a&&er(n[0],n[1],a)&&(o=i<3?S:o,i=1);++r<i;){var u=n[r];u&&e(t,u,o)}return t})}function hn(e,t){return function(n,r){var i=n?Ha(n):0;if(!rr(i))return e(n,r);for(var o=t?i:-1,a=dr(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function pn(e){return function(t,n,r){for(var i=dr(t),o=r(t),a=o.length,s=e?a:-1;e?s--:++s<a;){var u=o[s];if(!1===n(i[u],u,i))break}return t}}function gn(e,t){function n(){return(this&&this!==tt&&this instanceof n?r:e).apply(t,arguments)}var r=_n(e);return n}function mn(e){return _a&&da?new Xe(e):null}function vn(e){return function(t){for(var n=-1,r=Eo(fo(t)),i=r.length,o="";++n<i;)o=e(o,r[n],n);return o}}function _n(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=La(e.prototype),r=e.apply(n,t);return Pi(r)?r:n}}function yn(e){function t(n,r,i){i&&er(n,r,i)&&(r=S);var o=Rn(n,e,S,S,S,S,S,r);return o.placeholder=t.placeholder,o}return t}function bn(e,t){return _i(function(n){var r=n[0];return null==r?r:(n.push(t),e.apply(S,n))})}function wn(e,t){return function(n,r,i){if(i&&er(n,r,i)&&(r=S),r=zn(r,i,3),1==r.length){n=Ms(n)?n:fr(n);var o=st(n,r,e,t);if(!n.length||o!==t)return o}return Et(n,r,e,t)}}function Dn(e,t){return function(n,r,i){if(r=zn(r,i,3),Ms(n)){var o=a(n,r,t);return o>-1?n[o]:S}return kt(n,r,e)}}function Cn(e){return function(t,n,r){return t&&t.length?(n=zn(n,r,3),a(t,n,e)):-1}}function Tn(e){return function(t,n,r){return n=zn(n,r,3),kt(t,n,e,!0)}}function An(e){return function(){for(var t,n=arguments.length,i=e?n:-1,o=0,a=zo(n);e?i--:++i<n;){var s=a[o++]=arguments[i];if("function"!=typeof s)throw new Xo(J);!t&&r.prototype.thru&&"wrapper"==Hn(s)&&(t=new r([],!0))}for(i=t?-1:n;++i<n;){s=a[i];var u=Hn(s),c="wrapper"==u?za(s):S;t=c&&nr(c[0])&&c[1]==(L|F|I|$)&&!c[4].length&&1==c[9]?t[Hn(c[0])].apply(t,c[3]):1==s.length&&nr(s)?t[u]():t.thru(s)}return function(){var e=arguments,r=e[0];if(t&&1==e.length&&Ms(r)&&r.length>=z)return t.plant(r).value();for(var i=0,o=n?a[i].apply(this,e):r;++i<n;)o=a[i].call(this,o);return o}}}function En(e,t){return function(n,r,i){return"function"==typeof r&&i===S&&Ms(n)?e(n,r):t(n,sn(r,i,3))}}function Sn(e){return function(t,n,r){return"function"==typeof n&&r===S||(n=sn(n,r,3)),e(t,n,to)}}function xn(e){return function(t,n,r){return"function"==typeof n&&r===S||(n=sn(n,r,3)),e(t,n)}}function kn(e){return function(t,n,r){var i={};return n=zn(n,r,3),Ft(t,function(t,r,o){var a=n(t,r,o);r=e?a:r,t=e?t:a,i[r]=t}),i}}function Mn(e){return function(t,n,r){return t=c(t),(e?t:"")+In(t,n,r)+(e?"":t)}}function On(e){var t=_i(function(n,r){var i=w(r,t.placeholder);return Rn(n,e,S,r,i)});return t}function Fn(e,t){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===S&&Ms(n)?e(n,r,i,a):Gt(n,zn(r,o,4),i,a,t)}}function Nn(e,t,n,r,i,o,a,s,u,c){function l(){for(var _=arguments.length,y=_,b=zo(_);y--;)b[y]=arguments[y];if(r&&(b=cn(b,r,i)),o&&(b=ln(b,o,a)),p||m){var D=l.placeholder,C=w(b,D);if((_-=C.length)<c){var T=s?rt(s):S,A=Ca(c-_,0),E=p?C:S,x=p?S:C,O=p?b:S,F=p?S:b;t|=p?I:P,t&=~(p?P:I),g||(t&=~(k|M));var N=[e,t,n,O,E,F,x,T,u,A],L=Nn.apply(S,N);return nr(e)&&Wa(L,N),L.placeholder=D,L}}var $=d?n:this,R=h?$[e]:e;return s&&(b=cr(b,s)),f&&u<b.length&&(b.length=u),this&&this!==tt&&this instanceof l&&(R=v||_n(e)),R.apply($,b)}var f=t&L,d=t&k,h=t&M,p=t&F,g=t&O,m=t&N,v=h?S:_n(e);return l}function In(e,t,n){var r=e.length;if(t=+t,r>=t||!wa(t))return"";var i=t-r;return n=null==n?" ":n+"",_o(n,va(i/n.length)).slice(0,i)}function Pn(e,t,n,r){function i(){for(var t=-1,s=arguments.length,u=-1,c=r.length,l=zo(c+s);++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++t];return(this&&this!==tt&&this instanceof i?a:e).apply(o?n:this,l)}var o=t&k,a=_n(e);return i}function Ln(e){var t=Vo[e];return function(e,n){return n=n===S?0:+n||0,n?(n=la(10,n),t(e*n)/n):t(e)}}function $n(e){return function(t,n,r,i){var o=zn(r);return null==r&&o===wt?on(t,n,e):an(t,n,o(r,i,1),e)}}function Rn(e,t,n,r,i,o,a,s){var u=t&M;if(!u&&"function"!=typeof e)throw new Xo(J);var c=r?r.length:0;if(c||(t&=~(I|P),r=i=S),c-=i?i.length:0,t&P){var l=r,f=i;r=i=S}var d=u?S:za(e),h=[e,t,n,r,i,l,f,o,a,s];if(d&&(or(h,d),t=h[1],s=h[9]),h[9]=null==s?u?0:e.length:Ca(s-c,0)||0,t==k)var p=gn(h[0],h[2]);else p=t!=I&&t!=(k|I)||h[4].length?Nn.apply(S,h):Pn.apply(S,h);return(d?Ua:Wa)(p,h)}function Bn(e,t,n,r,i,o,a){var s=-1,u=e.length,c=t.length;if(u!=c&&!(i&&c>u))return!1;for(;++s<u;){var l=e[s],f=t[s],d=r?r(i?f:l,i?l:f,s):S;if(d!==S){if(d)continue;return!1}if(i){if(!ht(t,function(e){return l===e||n(l,e,r,i,o,a)}))return!1}else if(l!==f&&!n(l,f,r,i,o,a))return!1}return!0}function jn(e,t,n){switch(n){case q:case K:return+e==+t;case X:return e.name==t.name&&e.message==t.message;case Z:return e!=+e?t!=+t:e==+t;case te:case ne:return e==t+""}return!1}function Un(e,t,n,r,i,o,a){var s=Us(e),u=s.length;if(u!=Us(t).length&&!i)return!1;for(var c=u;c--;){var l=s[c];if(!(i?l in t:na.call(t,l)))return!1}for(var f=i;++c<u;){l=s[c];var d=e[l],h=t[l],p=r?r(i?h:d,i?d:h,l):S;if(!(p===S?n(d,h,r,i,o,a):p))return!1;f||(f="constructor"==l)}if(!f){var g=e.constructor,m=t.constructor;if(g!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m))return!1}return!0}function zn(e,n,r){var i=t.callback||So;return i=i===So?wt:i,r?i(e,n,r):i}function Hn(e){for(var t=e.name+"",n=Pa[t],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Wn(e,n,r){var i=t.indexOf||Ar;return i=i===Ar?s:i,e?i(e,n,r):i}function Jn(e){for(var t=no(e),n=t.length;n--;)t[n][2]=ir(t[n][1]);return t}function Vn(e,t){var n=null==e?S:e[t];return Ri(n)?n:S}function Yn(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Ta(t,e+a);break;case"takeRight":e=Ca(e,t-a)}}return{start:e,end:t}}function Gn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&na.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function qn(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Go),new t}function Kn(e,t,n){var r=e.constructor;switch(t){case re:return un(e);case q:case K:return new r(+e);case ie:case oe:case ae:case se:case ue:case ce:case le:case fe:case de:var i=e.buffer;return new r(n?un(i):i,e.byteOffset,e.length);case Z:case ne:return new r(e);case te:var o=new r(e.source,Oe.exec(e));o.lastIndex=e.lastIndex}return o}function Xn(e,t,n){null==e||tr(t,e)||(t=hr(t),e=1==t.length?e:Pt(e,qt(t,0,-1)),t=Sr(t));var r=null==e?e:e[t];return null==r?S:r.apply(e,n)}function Qn(e){return null!=e&&rr(Ha(e))}function Zn(e,t){return e="number"==typeof e||Ie.test(e)?+e:-1,t=null==t?Na:t,e>-1&&e%1==0&&e<t}function er(e,t,n){if(!Pi(n))return!1;var r=void 0===t?"undefined":i(t);if("number"==r?Qn(n)&&Zn(t,n.length):"string"==r&&t in n){var o=n[t];return e===e?e===o:o!==o}return!1}function tr(e,t){var n=void 0===e?"undefined":i(e);return!!("string"==n&&Te.test(e)||"number"==n)||!Ms(e)&&(!Ce.test(e)||null!=t&&e in dr(t))}function nr(e){var n=Hn(e),r=t[n];if("function"!=typeof r||!(n in b.prototype))return!1;if(e===r)return!0;var i=za(r);return!!i&&e===i[0]}function rr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Na}function ir(e){return e===e&&!Pi(e)}function or(e,t){var n=e[1],r=t[1],i=n|r,o=i<L,a=r==L&&n==F||r==L&&n==$&&e[7].length<=t[8]||r==(L|$)&&n==F;if(!o&&!a)return e;r&k&&(e[2]=t[2],i|=n&k?0:O);var s=t[3];if(s){var u=e[3];e[3]=u?cn(u,s,t[4]):rt(s),e[4]=u?w(e[3],V):rt(t[4])}return s=t[5],s&&(u=e[5],e[5]=u?ln(u,s,t[6]):rt(s),e[6]=u?w(e[5],V):rt(t[6])),s=t[7],s&&(e[7]=rt(s)),r&L&&(e[8]=null==e[8]?t[8]:Ta(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function ar(e,t){return e===S?t:Os(e,t,ar)}function sr(e,t){e=dr(e);for(var n=-1,r=t.length,i={};++n<r;){var o=t[n];o in e&&(i[o]=e[o])}return i}function ur(e,t){var n={};return Ot(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function cr(e,t){for(var n=e.length,r=Ta(t.length,n),i=rt(e);r--;){var o=t[r];e[r]=Zn(o,n)?i[o]:S}return e}function lr(e){for(var t=to(e),n=t.length,r=n&&e.length,i=!!r&&rr(r)&&(Ms(e)||Ei(e)),o=-1,a=[];++o<n;){var s=t[o];(i&&Zn(s,r)||na.call(e,s))&&a.push(s)}return a}function fr(e){return null==e?[]:Qn(e)?Pi(e)?e:Go(e):ao(e)}function dr(e){return Pi(e)?e:Go(e)}function hr(e){if(Ms(e))return e;var t=[];return c(e).replace(Ae,function(e,n,r,i){t.push(r?i.replace(ke,"$1"):n||e)}),t}function pr(e){return e instanceof b?e.clone():new r(e.__wrapped__,e.__chain__,rt(e.__actions__))}function gr(e,t,n){t=(n?er(e,t,n):null==t)?1:Ca(ya(t)||1,1);for(var r=0,i=e?e.length:0,o=-1,a=zo(va(i/t));r<i;)a[++o]=qt(e,r,r+=t);return a}function mr(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var o=e[t];o&&(i[++r]=o)}return i}function vr(e,t,n){return(e?e.length:0)?((n?er(e,t,n):null==t)&&(t=1),qt(e,t<0?0:t)):[]}function _r(e,t,n){var r=e?e.length:0;return r?((n?er(e,t,n):null==t)&&(t=1),t=r-(+t||0),qt(e,0,t<0?0:t)):[]}function yr(e,t,n){return e&&e.length?nn(e,zn(t,n,3),!0,!0):[]}function br(e,t,n){return e&&e.length?nn(e,zn(t,n,3),!0):[]}function wr(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&er(e,t,n)&&(n=0,r=i),St(e,t,n,r)):[]}function Dr(e){return e?e[0]:S}function Cr(e,t,n){var r=e?e.length:0;return n&&er(e,t,n)&&(t=!1),r?Mt(e,t):[]}function Tr(e){return(e?e.length:0)?Mt(e,!0):[]}function Ar(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?Ca(r+n,0):n;else if(n){var i=on(e,t);return i<r&&(t===t?t===e[i]:e[i]!==e[i])?i:-1}return s(e,t,n||0)}function Er(e){return _r(e,1)}function Sr(e){var t=e?e.length:0;return t?e[t-1]:S}function xr(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?Ca(r+n,0):Ta(n||0,r-1))+1;else if(n){i=on(e,t,!0)-1;var o=e[i];return(t===t?t===o:o!==o)?i:-1}if(t!==t)return _(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function kr(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=Wn(),i=e.length;++n<i;)for(var o=0,a=e[n];(o=r(t,a,o))>-1;)pa.call(t,o,1);return t}function Mr(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,o=[],a=e.length;for(t=zn(t,n,3);++i<a;){var s=e[i];t(s,i,e)&&(r.push(s),o.push(i))}return Vt(e,o),r}function Or(e){return vr(e,1)}function Fr(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&er(e,t,n)&&(t=0,n=r),qt(e,t,n)):[]}function Nr(e,t,n){return(e?e.length:0)?((n?er(e,t,n):null==t)&&(t=1),qt(e,0,t<0?0:t)):[]}function Ir(e,t,n){var r=e?e.length:0;return r?((n?er(e,t,n):null==t)&&(t=1),t=r-(+t||0),qt(e,t<0?0:t)):[]}function Pr(e,t,n){return e&&e.length?nn(e,zn(t,n,3),!1,!0):[]}function Lr(e,t,n){return e&&e.length?nn(e,zn(t,n,3)):[]}function $r(e,t,n,r){if(!(e?e.length:0))return[];null!=t&&"boolean"!=typeof t&&(r=n,n=er(e,t,r)?S:t,t=!1);var i=zn();return null==n&&i===wt||(n=i(n,r,3)),t&&Wn()===s?D(e,n):en(e,n)}function Rr(e){if(!e||!e.length)return[];var t=-1,n=0;e=ut(e,function(e){if(Qn(e))return n=Ca(e.length,n),!0});for(var r=zo(n);++t<n;)r[t]=ct(e,Wt(t));return r}function Br(e,t,n){if(!(e?e.length:0))return[];var r=Rr(e);return null==t?r:(t=sn(t,n,4),ct(r,function(e){return ft(e,t,S,!0)}))}function jr(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Qn(n))var r=r?lt(Tt(r,n),Tt(n,r)):n}return r?en(r):[]}function Ur(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Ms(e[0])||(t=[]);++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function zr(e){var n=t(e);return n.__chain__=!0,n}function Hr(e,t,n){return t.call(n,e),e}function Wr(e,t,n){return t.call(n,e)}function Jr(){return zr(this)}function Vr(){return new r(this.value(),this.__chain__)}function Yr(e){for(var t,r=this;r instanceof n;){var i=pr(r);t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t}function Gr(){var e=this.__wrapped__,t=function(e){return e.reverse()};if(e instanceof b){var n=e;return this.__actions__.length&&(n=new b(this)),n=n.reverse(),n.__actions__.push({func:Wr,args:[t],thisArg:S}),new r(n,this.__chain__)}return this.thru(t)}function qr(){return this.value()+""}function Kr(){return rn(this.__wrapped__,this.__actions__)}function Xr(e,t,n){var r=Ms(e)?at:At;return n&&er(e,t,n)&&(t=S),"function"==typeof t&&n===S||(t=zn(t,n,3)),r(e,t)}function Qr(e,t,n){var r=Ms(e)?ut:xt;return t=zn(t,n,3),r(e,t)}function Zr(e,t){return os(e,jt(t))}function ei(e,t,n,r){var i=e?Ha(e):0;return rr(i)||(e=ao(e),i=e.length),n="number"!=typeof n||r&&er(t,n,r)?0:n<0?Ca(i+n,0):n||0,"string"==typeof e||!Ms(e)&&Hi(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Wn(e,t,n)>-1}function ti(e,t,n){var r=Ms(e)?ct:Bt;return t=zn(t,n,3),r(e,t)}function ni(e,t){return ti(e,Po(t))}function ri(e,t,n){var r=Ms(e)?ut:xt;return t=zn(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function ii(e,t,n){if(n?er(e,t,n):null==t){e=fr(e);var r=e.length;return r>0?e[Yt(0,r-1)]:S}var i=-1,o=Gi(e),r=o.length,a=r-1;for(t=Ta(t<0?0:+t||0,r);++i<t;){var s=Yt(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=t,o}function oi(e){return ii(e,ka)}function ai(e){var t=e?Ha(e):0;return rr(t)?t:Us(e).length}function si(e,t,n){var r=Ms(e)?ht:Kt;return n&&er(e,t,n)&&(t=S),"function"==typeof t&&n===S||(t=zn(t,n,3)),r(e,t)}function ui(e,t,n){if(null==e)return[];n&&er(e,t,n)&&(t=S);var r=-1;return t=zn(t,n,3),Xt(Bt(e,function(e,n,i){return{criteria:t(e,n,i),index:++r,value:e}}),d)}function ci(e,t,n,r){return null==e?[]:(r&&er(t,n,r)&&(n=S),Ms(t)||(t=null==t?[]:[t]),Ms(n)||(n=null==n?[]:[n]),Qt(e,t,n))}function li(e,t){return Qr(e,jt(t))}function fi(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Xo(J);var n=e;e=t,t=n}return e=wa(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}}function di(e,t,n){return n&&er(e,t,n)&&(t=S),t=e&&null==t?e.length:Ca(+t||0,0),Rn(e,L,S,S,S,S,t)}function hi(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Xo(J);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=S),n}}function pi(e,t,n){function r(){h&&ua(h),c&&ua(c),g=0,c=h=p=S}function i(t,n){n&&ua(n),c=h=p=S,t&&(g=ms(),l=e.apply(d,u),h||c||(u=d=S))}function o(){var e=t-(ms()-f);e<=0||e>t?i(p,c):h=ha(o,e)}function a(){i(v,h)}function s(){if(u=arguments,f=ms(),d=this,p=v&&(h||!_),!1===m)var n=_&&!h;else{c||_||(g=f);var r=m-(f-g),i=r<=0||r>m;i?(c&&(c=ua(c)),g=f,l=e.apply(d,u)):c||(c=ha(a,r))}return i&&h?h=ua(h):h||t===m||(h=ha(o,t)),n&&(i=!0,l=e.apply(d,u)),!i||h||c||(u=d=S),l}var u,c,l,f,d,h,p,g=0,m=!1,v=!0;if("function"!=typeof e)throw new Xo(J);if(t=t<0?0:+t||0,!0===n){var _=!0;v=!1}else Pi(n)&&(_=!!n.leading,m="maxWait"in n&&Ca(+n.maxWait||0,t),v="trailing"in n?!!n.trailing:v);return s.cancel=r,s}function gi(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Xo(J);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new gi.Cache,n}function mi(e){if("function"!=typeof e)throw new Xo(J);return function(){return!e.apply(this,arguments)}}function vi(e){return hi(2,e)}function _i(e,t){if("function"!=typeof e)throw new Xo(J);return t=Ca(t===S?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=Ca(n.length-t,0),o=zo(i);++r<i;)o[r]=n[t+r];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=zo(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=o,e.apply(this,a)}}function yi(e){if("function"!=typeof e)throw new Xo(J);return function(t){return e.apply(this,t)}}function bi(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Xo(J);return!1===n?r=!1:Pi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),pi(e,t,{leading:r,maxWait:+t,trailing:i})}function wi(e,t){return t=null==t?ko:t,Rn(t,I,S,[e],[])}function Di(e,t,n,r){return t&&"boolean"!=typeof t&&er(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?Dt(e,t,sn(n,r,3)):Dt(e,t)}function Ci(e,t,n){return"function"==typeof t?Dt(e,!0,sn(t,n,3)):Dt(e,!0)}function Ti(e,t){return e>t}function Ai(e,t){return e>=t}function Ei(e){return y(e)&&Qn(e)&&na.call(e,"callee")&&!fa.call(e,"callee")}function Si(e){return!0===e||!1===e||y(e)&&ia.call(e)==q}function xi(e){return y(e)&&ia.call(e)==K}function ki(e){return!!e&&1===e.nodeType&&y(e)&&!Ui(e)}function Mi(e){return null==e||(Qn(e)&&(Ms(e)||Hi(e)||Ei(e)||y(e)&&Ii(e.splice))?!e.length:!Us(e).length)}function Oi(e,t,n,r){n="function"==typeof n?sn(n,r,3):S;var i=n?n(e,t):S;return i===S?Lt(e,t,n):!!i}function Fi(e){return y(e)&&"string"==typeof e.message&&ia.call(e)==X}function Ni(e){return"number"==typeof e&&wa(e)}function Ii(e){return Pi(e)&&ia.call(e)==Q}function Pi(e){var t=void 0===e?"undefined":i(e);return!!e&&("object"==t||"function"==t)}function Li(e,t,n,r){return n="function"==typeof n?sn(n,r,3):S,Rt(e,Jn(t),n)}function $i(e){return ji(e)&&e!=+e}function Ri(e){return null!=e&&(Ii(e)?aa.test(ta.call(e)):y(e)&&Ne.test(e))}function Bi(e){return null===e}function ji(e){return"number"==typeof e||y(e)&&ia.call(e)==Z}function Ui(e){var t;if(!y(e)||ia.call(e)!=ee||Ei(e)||!na.call(e,"constructor")&&"function"==typeof(t=e.constructor)&&!(t instanceof t))return!1;var n;return Ot(e,function(e,t){n=t}),n===S||na.call(e,n)}function zi(e){return Pi(e)&&ia.call(e)==te}function Hi(e){return"string"==typeof e||y(e)&&ia.call(e)==ne}function Wi(e){return y(e)&&rr(e.length)&&!!Ue[ia.call(e)]}function Ji(e){return e===S}function Vi(e,t){return e<t}function Yi(e,t){return e<=t}function Gi(e){var t=e?Ha(e):0;return rr(t)?t?rt(e):[]:ao(e)}function qi(e){return bt(e,to(e))}function Ki(e,t,n){var r=La(e);return n&&er(e,t,n)&&(t=S),t?_t(r,t):r}function Xi(e){return It(e,to(e))}function Qi(e,t,n){var r=null==e?S:Pt(e,hr(t),t+"");return r===S?n:r}function Zi(e,t){if(null==e)return!1;var n=na.call(e,t);if(!n&&!tr(t)){if(t=hr(t),null==(e=1==t.length?e:Pt(e,qt(t,0,-1))))return!1;t=Sr(t),n=na.call(e,t)}return n||rr(e.length)&&Zn(t,e.length)&&(Ms(e)||Ei(e))}function eo(e,t,n){n&&er(e,t,n)&&(t=S);for(var r=-1,i=Us(e),o=i.length,a={};++r<o;){var s=i[r],u=e[s];t?na.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function to(e){if(null==e)return[];Pi(e)||(e=Go(e));var t=e.length;t=t&&rr(t)&&(Ms(e)||Ei(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,o=zo(t),a=t>0;++r<t;)o[r]=r+"";for(var s in e)a&&Zn(s,t)||"constructor"==s&&(i||!na.call(e,s))||o.push(s);return o}function no(e){e=dr(e);for(var t=-1,n=Us(e),r=n.length,i=zo(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}function ro(e,t,n){var r=null==e?S:e[t];return r===S&&(null==e||tr(t,e)||(t=hr(t),e=1==t.length?e:Pt(e,qt(t,0,-1)),r=null==e?S:e[Sr(t)]),r=r===S?n:r),Ii(r)?r.call(e):r}function io(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||tr(t,e)?[r]:hr(t);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var u=t[i];Pi(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Zn(t[i+1])?[]:{})),s=s[u]}return e}function oo(e,t,n,r){var i=Ms(e)||Wi(e);if(t=zn(t,r,4),null==n)if(i||Pi(e)){var o=e.constructor;n=i?Ms(e)?new o:[]:La(Ii(o)?o.prototype:S)}else n={};return(i?it:Ft)(e,function(e,r,i){return t(n,e,r,i)}),n}function ao(e){return tn(e,Us(e))}function so(e){return tn(e,to(e))}function uo(e,t,n){return t=+t||0,n===S?(n=t,t=0):n=+n||0,e>=Ta(t,n)&&e<Ca(t,n)}function co(e,t,n){n&&er(e,t,n)&&(t=n=S);var r=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=Sa();return Ta(e+o*(t-e+ca("1e-"+((o+"").length-1))),t)}return Yt(e,t)}function lo(e){return(e=c(e))&&e.charAt(0).toUpperCase()+e.slice(1)}function fo(e){return(e=c(e))&&e.replace(Pe,p).replace(xe,"")}function ho(e,t,n){e=c(e),t+="";var r=e.length;return n=n===S?r:Ta(n<0?0:+n||0,r),(n-=t.length)>=0&&e.indexOf(t,n)==n}function po(e){return e=c(e),e&&ye.test(e)?e.replace(ve,g):e}function go(e){return e=c(e),e&&Se.test(e)?e.replace(Ee,m):e||"(?:)"}function mo(e,t,n){e=c(e),t=+t;var r=e.length;if(r>=t||!wa(t))return e;var i=(t-r)/2,o=ya(i);return n=In("",va(i),n),n.slice(0,o)+e+n}function vo(e,t,n){return(n?er(e,t,n):null==t)?t=0:t&&(t=+t),e=wo(e),Ea(e,t||(Fe.test(e)?16:10))}function _o(e,t){var n="";if(e=c(e),(t=+t)<1||!e||!wa(t))return n;do{t%2&&(n+=e),t=ya(t/2),e+=e}while(t);return n}function yo(e,t,n){return e=c(e),n=null==n?0:Ta(n<0?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function bo(e,n,r){var i=t.templateSettings;r&&er(e,n,r)&&(n=r=S),e=c(e),n=vt(_t({},r||n),i,mt);var o,a,s=vt(_t({},n.imports),i.imports,mt),u=Us(s),l=tn(s,u),f=0,d=n.interpolate||Le,h="__p += '",p=qo((n.escape||Le).source+"|"+d.source+"|"+(d===De?Me:Le).source+"|"+(n.evaluate||Le).source+"|$","g"),g="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++je+"]")+"\n";e.replace(p,function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(f,u).replace($e,v),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+t.length,t}),h+="';\n";var m=n.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(he,""):h).replace(pe,"$1").replace(ge,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var _=Qs(function(){return Jo(u,g+"return "+h).apply(S,l)});if(_.source=h,Fi(_))throw _;return _}function wo(e,t,n){var r=e;return(e=c(e))?(n?er(r,t,n):null==t)?e.slice(C(e),T(e)+1):(t+="",e.slice(l(e,t),f(e,t)+1)):e}function Do(e,t,n){var r=e;return e=c(e),e?(n?er(r,t,n):null==t)?e.slice(C(e)):e.slice(l(e,t+"")):e}function Co(e,t,n){var r=e;return e=c(e),e?(n?er(r,t,n):null==t)?e.slice(0,T(e)+1):e.slice(0,f(e,t+"")+1):e}function To(e,t,n){n&&er(e,t,n)&&(t=S);var r=R,i=B;if(null!=t)if(Pi(t)){var o="separator"in t?t.separator:o;r="length"in t?+t.length||0:r,i="omission"in t?c(t.omission):i}else r=+t||0;if(e=c(e),r>=e.length)return e;var a=r-i.length;if(a<1)return i;var s=e.slice(0,a);if(null==o)return s+i;if(zi(o)){if(e.slice(a).search(o)){var u,l,f=e.slice(0,a);for(o.global||(o=qo(o.source,(Oe.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(f);)l=u.index;s=s.slice(0,null==l?a:l)}}else if(e.indexOf(o,a)!=a){var d=s.lastIndexOf(o);d>-1&&(s=s.slice(0,d))}return s+i}function Ao(e){return e=c(e),e&&_e.test(e)?e.replace(me,A):e}function Eo(e,t,n){return n&&er(e,t,n)&&(t=S),e=c(e),e.match(t||Re)||[]}function So(e,t,n){return n&&er(e,t,n)&&(t=S),y(e)?Mo(e):wt(e,t)}function xo(e){return function(){return e}}function ko(e){return e}function Mo(e){return jt(Dt(e,!0))}function Oo(e,t){return Ut(e,Dt(t,!0))}function Fo(e,t,n){if(null==n){var r=Pi(t),i=r?Us(t):S,o=i&&i.length?It(t,i):S;(o?o.length:r)||(o=!1,n=t,t=e,e=this)}o||(o=It(t,Us(t)));var a=!0,s=-1,u=Ii(e),c=o.length;!1===n?a=!1:Pi(n)&&"chain"in n&&(a=n.chain);for(;++s<c;){var l=o[s],f=t[l];e[l]=f,u&&(e.prototype[l]=function(t){return function(){var n=this.__chain__;if(a||n){var r=e(this.__wrapped__);return(r.__actions__=rt(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return t.apply(e,lt([this.value()],arguments))}}(f))}return e}function No(){return tt._=oa,this}function Io(){}function Po(e){return tr(e)?Wt(e):Jt(e)}function Lo(e){return function(t){return Pt(e,hr(t),t+"")}}function $o(e,t,n){n&&er(e,t,n)&&(t=n=S),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,i=Ca(va((t-e)/(n||1)),0),o=zo(i);++r<i;)o[r]=e,e+=n;return o}function Ro(e,t,n){if((e=ya(e))<1||!wa(e))return[];var r=-1,i=zo(Ta(e,Ma));for(t=sn(t,n,1);++r<e;)r<Ma?i[r]=t(r):t(r);return i}function Bo(e){var t=++ra;return c(e)+t}function jo(e,t){return(+e||0)+(+t||0)}function Uo(e,t,n){return n&&er(e,t,n)&&(t=S),t=zn(t,n,3),1==t.length?pt(Ms(e)?e:fr(e),t):Zt(e,t)}e=e?nt.defaults(tt.Object(),e,nt.pick(tt,Be)):tt;var zo=e.Array,Ho=e.Date,Wo=e.Error,Jo=e.Function,Vo=e.Math,Yo=e.Number,Go=e.Object,qo=e.RegExp,Ko=e.String,Xo=e.TypeError,Qo=zo.prototype,Zo=Go.prototype,ea=Ko.prototype,ta=Jo.prototype.toString,na=Zo.hasOwnProperty,ra=0,ia=Zo.toString,oa=tt._,aa=qo("^"+ta.call(na).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sa=e.ArrayBuffer,ua=e.clearTimeout,ca=e.parseFloat,la=Vo.pow,fa=Zo.propertyIsEnumerable,da=Vn(e,"Set"),ha=e.setTimeout,pa=Qo.splice,ga=e.Uint8Array,ma=Vn(e,"WeakMap"),va=Vo.ceil,_a=Vn(Go,"create"),ya=Vo.floor,ba=Vn(zo,"isArray"),wa=e.isFinite,Da=Vn(Go,"keys"),Ca=Vo.max,Ta=Vo.min,Aa=Vn(Ho,"now"),Ea=e.parseInt,Sa=Vo.random,xa=Yo.NEGATIVE_INFINITY,ka=Yo.POSITIVE_INFINITY,Ma=4294967295,Oa=Ma-1,Fa=Ma>>>1,Na=9007199254740991,Ia=ma&&new ma,Pa={};t.support={};t.templateSettings={escape:be,evaluate:we,interpolate:De,variable:"",imports:{_:t}};var La=function(){function e(){}return function(t){if(Pi(t)){e.prototype=t;var n=new e;e.prototype=S}return n||{}}}(),$a=hn(Ft),Ra=hn(Nt,!0),Ba=pn(),ja=pn(!0),Ua=Ia?function(e,t){return Ia.set(e,t),e}:ko,za=Ia?function(e){return Ia.get(e)}:Io,Ha=Wt("length"),Wa=function(){var e=0,t=0;return function(n,r){var i=ms(),o=U-(i-t);if(t=i,o>0){if(++e>=j)return n}else e=0;return Ua(n,r)}}(),Ja=_i(function(e,t){return y(e)&&Qn(e)?Tt(e,Mt(t,!1,!0)):[]}),Va=Cn(),Ya=Cn(!0),Ga=_i(function(e){for(var t=e.length,n=t,r=zo(f),i=Wn(),o=i===s,a=[];n--;){var u=e[n]=Qn(u=e[n])?u:[];r[n]=o&&u.length>=120?mn(n&&u):null}var c=e[0],l=-1,f=c?c.length:0,d=r[0];e:for(;++l<f;)if(u=c[l],(d?Qe(d,u):i(a,u,0))<0){for(var n=t;--n;){var h=r[n];if((h?Qe(h,u):i(e[n],u,0))<0)continue e}d&&d.push(u),a.push(u)}return a}),qa=_i(function(e,t){t=Mt(t);var n=yt(e,t);return Vt(e,t.sort(o)),n}),Ka=$n(),Xa=$n(!0),Qa=_i(function(e){return en(Mt(e,!1,!0))}),Za=_i(function(e,t){return Qn(e)?Tt(e,t):[]}),es=_i(Rr),ts=_i(function(e){var t=e.length,n=t>2?e[t-2]:S,r=t>1?e[t-1]:S;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):S,r=S),e.length=t,Br(e,n,r)}),ns=_i(function(e){return e=Mt(e),this.thru(function(t){return et(Ms(t)?t:[dr(t)],e)})}),rs=_i(function(e,t){return yt(e,Mt(t))}),is=fn(function(e,t,n){na.call(e,n)?++e[n]:e[n]=1}),os=Dn($a),as=Dn(Ra,!0),ss=En(it,$a),us=En(ot,Ra),cs=fn(function(e,t,n){na.call(e,n)?e[n].push(t):e[n]=[t]}),ls=fn(function(e,t,n){e[n]=t}),fs=_i(function(e,t,n){var r=-1,i="function"==typeof t,o=tr(t),a=Qn(e)?zo(e.length):[];return $a(e,function(e){var s=i?t:o&&null!=e?e[t]:S;a[++r]=s?s.apply(e,n):Xn(e,t,n)}),a}),ds=fn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),hs=Fn(ft,$a),ps=Fn(dt,Ra),gs=_i(function(e,t){if(null==e)return[];var n=t[2];return n&&er(t[0],t[1],n)&&(t.length=1),Qt(e,Mt(t),[])}),ms=Aa||function(){return(new Ho).getTime()},vs=_i(function(e,t,n){var r=k;if(n.length){var i=w(n,vs.placeholder);r|=I}return Rn(e,r,t,n,i)}),_s=_i(function(e,t){t=t.length?Mt(t):Xi(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=Rn(e[i],k,e)}return e}),ys=_i(function(e,t,n){var r=k|M;if(n.length){var i=w(n,ys.placeholder);r|=I}return Rn(t,r,e,n,i)}),bs=yn(F),ws=yn(N),Ds=_i(function(e,t){return Ct(e,1,t)}),Cs=_i(function(e,t,n){return Ct(e,t,n)}),Ts=An(),As=An(!0),Es=_i(function(e,t){if(t=Mt(t),"function"!=typeof e||!at(t,u))throw new Xo(J);var n=t.length;return _i(function(r){for(var i=Ta(r.length,n);i--;)r[i]=t[i](r[i]);return e.apply(this,r)})}),Ss=On(I),xs=On(P),ks=_i(function(e,t){return Rn(e,$,S,S,S,Mt(t))}),Ms=ba||function(e){return y(e)&&rr(e.length)&&ia.call(e)==G},Os=dn(zt),Fs=dn(function(e,t,n){return n?vt(e,t,n):_t(e,t)}),Ns=bn(Fs,gt),Is=bn(Os,ar),Ps=Tn(Ft),Ls=Tn(Nt),$s=Sn(Ba),Rs=Sn(ja),Bs=xn(Ft),js=xn(Nt),Us=Da?function(e){var t=null==e?S:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Qn(e)?lr(e):Pi(e)?Da(e):[]}:lr,zs=kn(!0),Hs=kn(),Ws=_i(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=ct(Mt(t),Ko);return sr(e,Tt(to(e),t))}var n=sn(t[0],t[1],3);return ur(e,function(e,t,r){return!n(e,t,r)})}),Js=_i(function(e,t){return null==e?{}:"function"==typeof t[0]?ur(e,sn(t[0],t[1],3)):sr(e,Mt(t))}),Vs=vn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ys=vn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Gs=Mn(),qs=Mn(!0),Ks=vn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Xs=vn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Qs=_i(function(e,t){try{return e.apply(S,t)}catch(e){return Fi(e)?e:new Wo(e)}}),Zs=_i(function(e,t){return function(n){return Xn(n,e,t)}}),eu=_i(function(e,t){return function(n){return Xn(e,n,t)}}),tu=Ln("ceil"),nu=Ln("floor"),ru=wn(Ti,xa),iu=wn(Vi,ka),ou=Ln("round");return t.prototype=n.prototype,r.prototype=La(n.prototype),r.prototype.constructor=r,b.prototype=La(n.prototype),b.prototype.constructor=b,Ve.prototype.delete=Ye,Ve.prototype.get=Ge,Ve.prototype.has=qe,Ve.prototype.set=Ke,Xe.prototype.push=Ze,gi.Cache=Ve,t.after=fi,t.ary=di,t.assign=Fs,t.at=rs,t.before=hi,t.bind=vs,t.bindAll=_s,t.bindKey=ys,t.callback=So,t.chain=zr,t.chunk=gr,t.compact=mr,t.constant=xo,t.countBy=is,t.create=Ki,t.curry=bs,t.curryRight=ws,t.debounce=pi,t.defaults=Ns,t.defaultsDeep=Is,t.defer=Ds,t.delay=Cs,t.difference=Ja,t.drop=vr,t.dropRight=_r,t.dropRightWhile=yr,t.dropWhile=br,t.fill=wr,t.filter=Qr,t.flatten=Cr,t.flattenDeep=Tr,t.flow=Ts,t.flowRight=As,t.forEach=ss,t.forEachRight=us,t.forIn=$s,t.forInRight=Rs,t.forOwn=Bs,t.forOwnRight=js,t.functions=Xi,t.groupBy=cs,t.indexBy=ls,t.initial=Er,t.intersection=Ga,t.invert=eo,t.invoke=fs,t.keys=Us,t.keysIn=to,t.map=ti,t.mapKeys=zs,t.mapValues=Hs,t.matches=Mo,t.matchesProperty=Oo,t.memoize=gi,t.merge=Os,t.method=Zs,t.methodOf=eu,t.mixin=Fo,t.modArgs=Es,t.negate=mi,t.omit=Ws,t.once=vi,t.pairs=no,t.partial=Ss,t.partialRight=xs,t.partition=ds,t.pick=Js,t.pluck=ni,t.property=Po,t.propertyOf=Lo,t.pull=kr,t.pullAt=qa,t.range=$o,t.rearg=ks,t.reject=ri,t.remove=Mr,t.rest=Or,t.restParam=_i,t.set=io,t.shuffle=oi,t.slice=Fr,t.sortBy=ui,t.sortByAll=gs,t.sortByOrder=ci,t.spread=yi,t.take=Nr,t.takeRight=Ir,t.takeRightWhile=Pr,t.takeWhile=Lr,t.tap=Hr,t.throttle=bi,t.thru=Wr,t.times=Ro,t.toArray=Gi,t.toPlainObject=qi,t.transform=oo,t.union=Qa,t.uniq=$r,t.unzip=Rr,t.unzipWith=Br,t.values=ao,t.valuesIn=so,t.where=li,t.without=Za,t.wrap=wi,t.xor=jr,t.zip=es,t.zipObject=Ur,t.zipWith=ts,t.backflow=As,t.collect=ti,t.compose=As,t.each=ss,t.eachRight=us,t.extend=Fs,t.iteratee=So,t.methods=Xi,t.object=Ur,t.select=Qr,t.tail=Or,t.unique=$r,Fo(t,t),t.add=jo,t.attempt=Qs,t.camelCase=Vs,t.capitalize=lo,t.ceil=tu,t.clone=Di,t.cloneDeep=Ci,t.deburr=fo,t.endsWith=ho,t.escape=po,t.escapeRegExp=go,t.every=Xr,t.find=os,t.findIndex=Va,t.findKey=Ps,t.findLast=as,t.findLastIndex=Ya,t.findLastKey=Ls,t.findWhere=Zr,t.first=Dr,t.floor=nu,t.get=Qi,t.gt=Ti,t.gte=Ai,t.has=Zi,t.identity=ko,t.includes=ei,t.indexOf=Ar,t.inRange=uo,t.isArguments=Ei,t.isArray=Ms,t.isBoolean=Si,t.isDate=xi,t.isElement=ki,t.isEmpty=Mi,t.isEqual=Oi,t.isError=Fi,t.isFinite=Ni,t.isFunction=Ii,t.isMatch=Li,t.isNaN=$i,t.isNative=Ri,t.isNull=Bi,t.isNumber=ji,t.isObject=Pi,t.isPlainObject=Ui,t.isRegExp=zi,t.isString=Hi,t.isTypedArray=Wi,t.isUndefined=Ji,t.kebabCase=Ys,t.last=Sr,t.lastIndexOf=xr,t.lt=Vi,t.lte=Yi,t.max=ru,t.min=iu,t.noConflict=No,t.noop=Io,t.now=ms,t.pad=mo,t.padLeft=Gs,t.padRight=qs,t.parseInt=vo,t.random=co,t.reduce=hs,t.reduceRight=ps,t.repeat=_o,t.result=ro,t.round=ou,t.runInContext=E,t.size=ai,t.snakeCase=Ks,t.some=si,t.sortedIndex=Ka,t.sortedLastIndex=Xa,t.startCase=Xs,t.startsWith=yo,t.sum=Uo,t.template=bo,t.trim=wo,t.trimLeft=Do,t.trimRight=Co,t.trunc=To,t.unescape=Ao,t.uniqueId=Bo,t.words=Eo,t.all=Xr,t.any=si,t.contains=ei,t.eq=Oi,t.detect=os,t.foldl=hs,t.foldr=ps,t.head=Dr,t.include=ei,t.inject=hs,Fo(t,function(){var e={};return Ft(t,function(n,r){t.prototype[r]||(e[r]=n)}),e}(),!1),t.sample=ii,t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ii(t,e)}):ii(this.value())},t.VERSION=x,it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),it(["drop","take"],function(e,t){b.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new b(this);n=null==n?1:Ca(ya(n)||0,0);var i=this.clone();return r?i.__takeCount__=Ta(i.__takeCount__,n):i.__views__.push({size:n,type:e+(i.__dir__<0?"Right":"")}),i},b.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),it(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n!=W;b.prototype[e]=function(e,t){var i=this.clone();return i.__iteratees__.push({iteratee:zn(e,t,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),it(["first","last"],function(e,t){var n="take"+(t?"Right":"");b.prototype[e]=function(){return this[n](1).value()[0]}}),it(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");b.prototype[e]=function(){return this.__filtered__?new b(this):this[n](1)}}),it(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?jt:Po;b.prototype[e]=function(e){return this[n](r(e))}}),b.prototype.compact=function(){return this.filter(ko)},b.prototype.reject=function(e,t){return e=zn(e,t,1),this.filter(function(t){return!e(t)})},b.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||t<0)?new b(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==S&&(t=+t||0,n=t<0?n.dropRight(-t):n.take(t-e)),n)},b.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},b.prototype.toArray=function(){return this.take(ka)},Ft(b.prototype,function(e,n){var i=/^(?:filter|map|reject)|While$/.test(n),o=/^(?:first|last)$/.test(n),a=t[o?"take"+("last"==n?"Right":""):n];a&&(t.prototype[n]=function(){var t=o?[1]:arguments,n=this.__chain__,s=this.__wrapped__,u=!!this.__actions__.length,c=s instanceof b,l=t[0],f=c||Ms(s);f&&i&&"function"==typeof l&&1!=l.length&&(c=f=!1);var d=function(e){return o&&n?a(e,1)[0]:a.apply(S,lt([e],t))},h={func:Wr,args:[d],thisArg:S},p=c&&!u;if(o&&!n)return p?(s=s.clone(),s.__actions__.push(h),e.call(s)):a.call(S,this.value())[0];if(!o&&f){s=p?s:new b(this);var g=e.apply(s,t);return g.__actions__.push(h),new r(g,n)}return this.thru(d)})}),it(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?ea:Qo)[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),Ft(b.prototype,function(e,n){var r=t[n];if(r){var i=r.name+"";(Pa[i]||(Pa[i]=[])).push({name:n,func:r})}}),Pa[Nn(S,M).name]=[{name:"wrapper",func:S}],b.prototype.clone=He,b.prototype.reverse=We,b.prototype.value=Je,t.prototype.chain=Jr,t.prototype.commit=Vr,t.prototype.concat=ns,t.prototype.plant=Yr,t.prototype.reverse=Gr,t.prototype.toString=qr,t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Kr,t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var S,x="3.10.1",k=1,M=2,O=4,F=8,N=16,I=32,P=64,L=128,$=256,R=30,B="...",j=150,U=16,z=200,H=1,W=2,J="Expected a function",V="__lodash_placeholder__",Y="[object Arguments]",G="[object Array]",q="[object Boolean]",K="[object Date]",X="[object Error]",Q="[object Function]",Z="[object Number]",ee="[object Object]",te="[object RegExp]",ne="[object String]",re="[object ArrayBuffer]",ie="[object Float32Array]",oe="[object Float64Array]",ae="[object Int8Array]",se="[object Int16Array]",ue="[object Int32Array]",ce="[object Uint8Array]",le="[object Uint8ClampedArray]",fe="[object Uint16Array]",de="[object Uint32Array]",he=/\b__p \+= '';/g,pe=/\b(__p \+=) '' \+/g,ge=/(__e\(.*?\)|\b__t\)) \+\n'';/g,me=/&(?:amp|lt|gt|quot|#39|#96);/g,ve=/[&<>"'`]/g,_e=RegExp(me.source),ye=RegExp(ve.source),be=/<%-([\s\S]+?)%>/g,we=/<%([\s\S]+?)%>/g,De=/<%=([\s\S]+?)%>/g,Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Te=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ee=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Se=RegExp(Ee.source),xe=/[\u0300-\u036f\ufe20-\ufe23]/g,ke=/\\(\\)?/g,Me=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oe=/\w*$/,Fe=/^0[xX]/,Ne=/^\[object .+?Constructor\]$/,Ie=/^\d+$/,Pe=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Le=/($^)/,$e=/['\n\r\u2028\u2029\\]/g,Re=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Be=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],je=-1,Ue={};Ue[ie]=Ue[oe]=Ue[ae]=Ue[se]=Ue[ue]=Ue[ce]=Ue[le]=Ue[fe]=Ue[de]=!0,Ue[Y]=Ue[G]=Ue[re]=Ue[q]=Ue[K]=Ue[X]=Ue[Q]=Ue["[object Map]"]=Ue[Z]=Ue[ee]=Ue[te]=Ue["[object Set]"]=Ue[ne]=Ue["[object WeakMap]"]=!1;var ze={};ze[Y]=ze[G]=ze[re]=ze[q]=ze[K]=ze[ie]=ze[oe]=ze[ae]=ze[se]=ze[ue]=ze[Z]=ze[ee]=ze[te]=ze[ne]=ze[ce]=ze[le]=ze[fe]=ze[de]=!0,ze[X]=ze[Q]=ze["[object Map]"]=ze["[object Set]"]=ze["[object WeakMap]"]=!1;var He={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},We={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Je={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ve={function:!0,object:!0},Ye={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qe=Ve[i(t)]&&t&&!t.nodeType&&t,Ke=Ve[i(e)]&&e&&!e.nodeType&&e,Xe=qe&&Ke&&"object"==("undefined"==typeof global?"undefined":i(global))&&global&&global.Object&&global,Qe=Ve["undefined"==typeof self?"undefined":i(self)]&&self&&self.Object&&self,Ze=Ve["undefined"==typeof window?"undefined":i(window)]&&window&&window.Object&&window,et=Ke&&Ke.exports===qe&&qe,tt=Xe||Ze!==(this&&this.window)&&Ze||Qe||this,nt=E();"object"==i(n(356))&&n(356)?(tt._=nt,(r=function(){return nt}.call(t,n,t,e))!==S&&(e.exports=r)):qe&&Ke?et?(Ke.exports=nt)._=nt:qe._=nt:tt._=nt}).call(this)}).call(t,n(317)(e))},function(e,t){!function(){"use strict";function e(e){e=e||{};var t=r.v4().source,n=["(?:(?:(?:[a-z]+:)?//)|www\\.)(?:\\S+(?::\\S*)?@)?","(?:localhost|"+t+"|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))","(?::\\d{2,5})?",'(?:[/?#][^\\s"]*)?'].join("");return e.exact?new RegExp("(?:^"+n+"$)","i"):new RegExp(n,"ig")}var t="(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}",n="(?:(?:[0-9a-fA-F:]){1,4}(?:(?::(?:[0-9a-fA-F]){1,4}|:)){2,7})+",r=function(e){return e=e||{},e.exact?new RegExp("(?:^"+t+"$)|(?:^"+n+"$)"):new RegExp("(?:"+t+")|(?:"+n+")","g")};r.v4=function(e){return e=e||{},e.exact?new RegExp("^"+t+"$"):new RegExp(t,"g")},r.v6=function(e){return e=e||{},e.exact?new RegExp("^"+n+"$"):new RegExp(n,"g")},window.Daria.urlRegex=e}()},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,r){function i(e,t){return(void 0===e?"undefined":n(e))===t}function o(e){var t=T.className,n=D._config.classPrefix||"";if(A&&(t=t.baseVal),D._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}D._config.enableClasses&&(t+=" "+n+e.join(" "+n),A?T.className.baseVal=t:T.className=t)}function a(e,t){if("object"==(void 0===e?"undefined":n(e)))for(var r in e)x(e,r)&&a(r,e[r]);else{e=e.toLowerCase();var i=e.split("."),s=D[i[0]];if(2==i.length&&(s=s[i[1]]),void 0!==s)return D;t="function"==typeof t?t():t,1==i.length?D[i[0]]=t:(!D[i[0]]||D[i[0]]instanceof Boolean||(D[i[0]]=new Boolean(D[i[0]])),D[i[0]][i[1]]=t),o([(t&&0!=t?"":"no-")+i.join("-")]),D._trigger(e,t)}return D}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):A?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function u(e,t){return!!~(""+e).indexOf(t)}function c(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function l(e,t){return function(){return e.apply(t,arguments)}}function f(e,t,n){var r;for(var o in e)if(e[o]in t)return!1===n?e[o]:(r=t[e[o]],i(r,"function")?l(r,n||t):r);return!1}function d(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function h(){var e=t.body;return e||(e=s(A?"svg":"body"),e.fake=!0),e}function p(e,n,r,i){var o,a,u,c,l="modernizr",f=s("div"),d=h();if(parseInt(r,10))for(;r--;)u=s("div"),u.id=i?i[r]:l+(r+1),f.appendChild(u);return o=s("style"),o.type="text/css",o.id="s"+l,(d.fake?d:f).appendChild(o),d.appendChild(f),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),f.id=l,d.fake&&(d.style.background="",d.style.overflow="hidden",c=T.style.overflow,T.style.overflow="hidden",T.appendChild(d)),a=n(f,e),d.fake?(d.parentNode.removeChild(d),T.style.overflow=c,T.offsetHeight):f.parentNode.removeChild(f),!!a}function g(t,n){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(d(t[i]),n))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];i--;)o.push("("+d(t[i])+":"+n+")");return o=o.join(" or "),p("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return r}function m(e,t,n,o){function a(){f&&(delete $.style,delete $.modElem)}if(o=!i(o,"undefined")&&o,!i(n,"undefined")){var l=g(e,n);if(!i(l,"undefined"))return l}for(var f,d,h,p,m,v=["modernizr","tspan","samp"];!$.style&&v.length;)f=!0,$.modElem=s(v.shift()),$.style=$.modElem.style;for(h=e.length,d=0;d<h;d++)if(p=e[d],m=$.style[p],u(p,"-")&&(p=c(p)),$.style[p]!==r){if(o||i(n,"undefined"))return a(),"pfx"!=t||p;try{$.style[p]=n}catch(e){}if($.style[p]!=m)return a(),"pfx"!=t||p}return a(),!1}function v(e,t,n,r,o){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+P.join(a+" ")+a).split(" ");return i(t,"string")||i(t,"undefined")?m(s,t,r,o):(s=(e+" "+S.join(a+" ")+a).split(" "),f(s,t,n))}function _(e,t,n){return v(e,r,r,t,n)}var y=[],b=[],w={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){b.push({name:e,fn:t,options:n})},addAsyncTest:function(e){b.push({name:null,fn:e})}},D=function(){};D.prototype=w,D=new D,D.addTest("blobconstructor",function(){try{return!!new Blob}catch(e){return!1}},{aliases:["blob-constructor"]}),D.addTest("geolocation","geolocation"in navigator),D.addTest("filereader",!!(e.File&&e.FileList&&e.FileReader));var C=w._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];w._prefixes=C;var T=t.documentElement,A="svg"===T.nodeName.toLowerCase(),E="Moz O ms Webkit",S=w._config.usePrefixes?E.toLowerCase().split(" "):[];w._domPrefixes=S;var x;!function(){var e={}.hasOwnProperty;x=i(e,"undefined")||i(e.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),w._l={},w.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),D.hasOwnProperty(e)&&setTimeout(function(){D._trigger(e,D[e])},0)},w._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)},0),delete this._l[e]}},D._q.push(function(){w.addTest=a});var k=function(){function e(e,t){var i;return!!e&&(t&&"string"!=typeof t||(t=s(t||"div")),e="on"+e,i=e in t,!i&&n&&(t.setAttribute||(t=s("div")),t.setAttribute(e,""),i="function"==typeof t[e],t[e]!==r&&(t[e]=r),t.removeAttribute(e)),i)}var n=!("onblur"in t.documentElement);return e}();w.hasEvent=k,D.addTest("cssgradients",function(){for(var e,t="background-image:",n="",r=0,i=C.length-1;r<i;r++)e=0===r?"to ":"",n+=t+C[r]+"linear-gradient("+e+"left top, #9f9, white);";D._config.usePrefixes&&(n+=t+"-webkit-gradient(linear,left top,right bottom,from(#9f9),to(white));");var o=s("a"),a=o.style;return a.cssText=n,(""+a.backgroundImage).indexOf("gradient")>-1});var M=s("input"),O="autocomplete autofocus list placeholder max min multiple pattern required step".split(" "),F={};D.input=function(t){for(var n=0,r=t.length;n<r;n++)F[t[n]]=!!(t[n]in M);return F.list&&(F.list=!(!s("datalist")||!e.HTMLDataListElement)),F}(O);var N="CSS"in e&&"supports"in e.CSS,I="supportsCSS"in e;D.addTest("supports",N||I);var P=w._config.usePrefixes?E.split(" "):[];w._cssomPrefixes=P;var L={elem:s("modernizr")};D._q.push(function(){delete L.elem});var $={style:L.elem.style};D._q.unshift(function(){delete $.style});var R=w.testStyles=p;w.testProp=function(e,t,n){return m([e],r,t,n)};w.testAllProps=v,w.testAllProps=_,D.addTest("cssanimations",_("animationName","a",!0)),D.addTest("borderimage",_("borderImage","url() 1",!0)),D.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&_("transform","scale(1)",!0)}),D.addTest("csstransforms3d",function(){var e=!!_("perspective","1px",!0),t=D._config.usePrefixes;if(e&&(!t||"webkitPerspective"in T.style)){var n;D.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",t&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",R("#modernizr{width:0;height:0}"+n,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),D.addTest("csstransitions",_("transition","all",!0)),D.addTest("classlist","classList"in T),function(){var e,t,n,r,o,a,s;for(var u in b)if(b.hasOwnProperty(u)){if(e=[],t=b[u],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=i(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)a=e[o],s=a.split("."),1===s.length?D[s[0]]=r:(!D[s[0]]||D[s[0]]instanceof Boolean||(D[s[0]]=new Boolean(D[s[0]])),D[s[0]][s[1]]=r),y.push((r?"":"no-")+s.join("-"))}}(),o(y),delete w.addTest,delete w.addAsyncTest;for(var B=0;B<D._q.length;B++)D._q[B]();e.Modernizr=D}(window,document)},function(e,t){Modernizr.addTest("highresdisplay",function(){if(window.matchMedia){var e=window.matchMedia("only screen and (-moz-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");if(e&&e.matches||window.screen.deviceXDPI/window.screen.logicalXDPI>=1.3)return!0}})},function(e,t){Modernizr.addTest("is-pdd",function(){return!!Daria.Config.pddDomain}),Modernizr.addTest("draganddrop",function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}),Modernizr.addTest("draganddrop-files",function(){return Boolean(Modernizr.draganddrop&&window.FormData&&Modernizr.filereader)}),Modernizr.addTest("input-multiple",function(){return Boolean(Modernizr.input.multiple&&window.FormData&&Modernizr.filereader)}),Modernizr.addTest("classlist-second-arg",function(){if(!Modernizr.classlist)return!1;var e=document.createElement("div");return e.classList.add("cl1","cl2"),"cl1"!==e.className})},function(e,t){Modernizr.addTest("msie",function(){return"MSIE"===Daria.UA.BrowserName&&document.documentMode}),Modernizr.addTest("webkit",function(){return"WebKit"===Daria.UA.BrowserEngine&&Daria.UA.BrowserEngineVersion}),Modernizr.addTest("opera",function(){return"Opera"===Daria.UA.BrowserName&&Daria.UA.BrowserVersion}),Modernizr.addTest("mozilla",function(){return"Gecko"===Daria.UA.BrowserEngine&&Daria.UA.BrowserEngineVersion}),Modernizr.addTest("edge",function(){return"Edge"===Daria.UA.BrowserEngine&&Daria.UA.BrowserEngineVersion}),Modernizr.addTest("ie9",function(){return"MSIE"===Daria.UA.BrowserName&&9===document.documentMode}),Modernizr.addTest("ie10",function(){return"MSIE"===Daria.UA.BrowserName&&10===document.documentMode}),Modernizr.addTest("ie11",function(){return"MSIE"===Daria.UA.BrowserName&&11===document.documentMode}),Modernizr.addTest("ielt11",function(){return"MSIE"===Daria.UA.BrowserName&&document.documentMode<11}),Modernizr.addTest("ios",function(){return"iOS"===Daria.UA.OSFamily}),Modernizr.addTest("mac",function(){return"MacOS"===Daria.UA.OSFamily})},function(e,t){!function(e){e.atob=e.atob||function(e){e=String(e);var t,n=0,r=[],i=0,o=0;if(e=e.replace(/\s/g,""),e.length%4==0&&(e=e.replace(/=+$/,"")),e.length%4==1)throw new Error("InvalidCharacterError");if(/[^+\/0-9A-Za-z]/.test(e))throw new Error("InvalidCharacterError");for(;n<e.length;)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(n)),i=i<<6|t,o+=6,24===o&&(r.push(String.fromCharCode(i>>16&255)),r.push(String.fromCharCode(i>>8&255)),r.push(String.fromCharCode(255&i)),o=0,i=0),n+=1;return 12===o?(i>>=4,r.push(String.fromCharCode(255&i))):18===o&&(i>>=2,r.push(String.fromCharCode(i>>8&255)),r.push(String.fromCharCode(255&i))),r.join("")}}(this)},function(e,t){(function(e){"use strict";e.Transitions={_names:{transition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend"},_parseTimes:function(e){for(var t,n=e.split(/,\s*/),r=0;r<n.length;r++)t=n[r],n[r]=parseFloat(t),t.match(/\ds/)&&(n[r]=1e3*n[r]);return n},getEvent:function(){var e=!1;for(var t in this._names)if(void 0!==document.body.style[t]){e=this._names[t];break}return this.getEvent=function(){return e},e},animFrame:function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;return this.animFrame=t?function(e){return t.call(window,e)}:function(e){return setTimeout(e,10)},this.animFrame(e)},isSupported:function(){return!1!==this.getEvent()}},e.extend(e.fn,{afterTransition:function(t,n){if(void 0===n&&(n=t,t=1),!e.Transitions.isSupported()){for(var r=0;r<this.length;r++)n.call(this[r],{type:"aftertransition",elapsedTime:0,propertyName:"",currentTarget:this[r]});return this}for(var r=0;r<this.length;r++){var i=e(this[r]),o=i.css("transition-property").split(/,\s*/),a=i.css("transition-duration"),s=i.css("transition-delay");a=e.Transitions._parseTimes(a),s=e.Transitions._parseTimes(s);for(var u,c,l,f,d,h=0;h<o.length;h++)u=o[h],c=a[1==a.length?0:h],l=s[1==s.length?0:h],f=l+c*t,d=c*t/1e3,function(t,r,i,o){setTimeout(function(){e.Transitions.animFrame(function(){n.call(t[0],{type:"aftertransition",elapsedTime:o,propertyName:r,currentTarget:t[0]})})},i)}(i,u,f,d)}return this},transitionEnd:function(t){for(var n=0;n<this.length;n++)this[n].addEventListener(e.Transitions.getEvent(),function(e){t.call(this,e)});return this}})}).call(this,jQuery)},function(e,t){vow.Queue=function(){function e(e){this._pendingTasks=[],this._params=n(r,e),this._curWeight=0,this._isRunScheduled=!1,this._isStopped=!0,this._processedBuffer=[],this._stats={pendingTasksCount:0,processingTasksCount:0,processedTasksCount:0}}var t=_.defer,n=function(){for(var e={},t=0,n=arguments.length;t<n;t++){var r=arguments[t];if(r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e},r={weightLimit:100},i={weight:1,priority:1};return e.prototype={enqueue:function(e,t){var n=this._buildTask(e,t);if(n.params.weight>this._params.weightLimit)throw Error("task with weight of "+n.params.weight+" can't be performed in queue with limit of "+this._params.weightLimit);return this._enqueueTask(n),this._isStopped||this._scheduleRun(),n.defer.promise().always(function(){this._stats.processingTasksCount--,this._stats.processedTasksCount++},this),n.defer.promise()},start:function(){if(this._isStopped){this._isStopped=!1;var e=this._processedBuffer;e.length&&(this._processedBuffer=[],t(function(){for(;e.length;)e.shift()()})),this._hasPendingTasks()&&this._scheduleRun()}},stop:function(){this._isStopped=!0},isStarted:function(){return!this._isStopped},setParams:function(e){void 0!==e.weightLimit&&(this._params.weightLimit=e.weightLimit,this._scheduleRun())},getStats:function(){return this._stats},_buildTask:function(e,t){return{fn:e,params:n(i,t),defer:vow.defer()}},_enqueueTask:function(e){var t=this._pendingTasks,n=t.length;for(this._stats.pendingTasksCount++;n;){if(t[n-1].params.priority>=e.params.priority)return void(n===t.length?t.push(e):t.splice(n,0,e));n--}t.unshift(e)},_scheduleRun:function(){this._isRunScheduled||(this._isRunScheduled=!0,t(this._run.bind(this)))},_run:function(){for(this._isRunScheduled=!1;this._hasPendingTasks()&&this._allowRunTask(this._pendingTasks[0]);)this._runTask(this._pendingTasks.shift())},_hasPendingTasks:function(){return!!this._pendingTasks.length},_allowRunTask:function(e){return this._curWeight+e.params.weight<=this._params.weightLimit},_runTask:function(e){this._curWeight+=e.params.weight,this._stats.pendingTasksCount--,this._stats.processingTasksCount++;var t=vow.invoke(e.fn);t.progress(e.defer.notify,e.defer).always(function(){this._curWeight-=e.params.weight,this._isStopped?this._processedBuffer.push(function(){e.defer.resolve(t)}):(e.defer.resolve(t),this._scheduleRun())},this)}},e}()},function(e,t,n){window.Lego={messages:{},block:{},params:{id:"mail","passport-host":Daria.Config["passport-host"],"social-host":Daria.Config["social-host"]}},n(700)},function(e,t){Lego.block["i-social"]=function(e){function t(e){function t(){var e;if(!o.yaWindow)return!0;try{e=o.yaWindow.closed}catch(t){e=!0}return e}function n(){t()&&(o.wTimer=clearInterval(o.wTimer),o.onFailure({status:"error"}))}function r(e){var t,r=o.popupName,i=Math.round((screen.availWidth-500)/2),a=Math.round((screen.availHeight-280)/2),s="scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0, left="+i+", top="+a+", width=500, height=280",u={};for(t in o.paramsDefault)u[t]=o.paramsDefault[t];for(t in e)u[t]=e[t];var c=["ddom="+(u.ddom||(location.hostname===document.domain?"":document.domain))];u.retpath+=(u.retpath.match("#")?"&":"#")+c.join("&");var l=o.url,f=[];for(var d in u)f.push(encodeURIComponent(d)+"="+encodeURIComponent(u[d]));l+=f.join("&"),o.yaWindow=window.open(l,r,s),o.yaWindow.focus(),o.yaWindow&&(o.wTimer=setInterval(n,500))}function i(){this.handlers={onSuccess:null,onFailure:null},o.wTimer=clearInterval(o.wTimer),t()||o.yaWindow.close(),o.yaWindow=!1}var o=this;this.url=e.startUrl+"?",delete e.startUrl,this.popupName=e.popupName,this.yaWindow=null,this.wTimer=null,this.paramsDefault=e,this.start=function(e,t,n){i(),o.handlers={onSuccess:e,onFailure:t},r(n)},this.onSuccess=function(){i();var e=o.handlers.onSuccess;e&&e()},this.onFailure=function(){i();var e=o.handlers.onFailure;e&&e()}}Lego.block["i-social"].Broker=t;var n=Lego.block["i-social"].defaultParams={startUrl:Lego.params["social-startUrl"]||(Lego.params["social-host"]||Daria.Config["social-url"]||"https://social.yandex.ru")+"/broker/start",retpath:Lego.params["social-retpath"]||location.protocol+"//"+location.host+Lego.params["lego-path"]+"/blocks/i-social/closer/i-social__closer.html",consumer:Lego.params.id||"morda",popupName:"social_"+(Lego.params.id||"morda"),application:"",action_if_anonymous:"authorize",result_location:"fragment"};return Lego.block["i-social"].broker=new t($.extend(n,e)),Lego.block["i-social"].broker}},function(e,t){!function(){function e(t,n){var r=this;$.extend(this,e.DEFAULT_OPTS,n),nb&&t instanceof nb.Block?(this.nbInput=t,this.input=t.$control):this.input=$(t),["show","hide","hideIfClickOutside","keydownHandler","selectDate"].forEach(function(e){"function"==typeof r[e]&&(r[e]=r[e].bind(r))}),this.selectDateLazy=_.throttle(function(){r.visible&&r.selectDate()},50,{trailing:!0}),$(document).on("hide-calendar",this.hide),this.build(),this.selectDate(),this.hide()}e.DEFAULT_OPTS={usePosition:!1,container:"body",start_of_week:1,hideOnScroll:!1,autoOrientation:!1,visible:!1},e.prototype={build:function(){var e=this;this.$popup=$(Jane.tt("common:calendar")),this.$nav=this.$popup.find(".js-navigation"),this.tbody=this.$popup.find(".js-table-body"),this.yearNameSpan=this.$nav.find(".b-mail-calendar__controls__year-name"),this.monthNameSpan=this.$nav.find(".b-mail-calendar__controls__month-name");for(var t="",n=0;n<7;n++){t+="<th class='b-mail-calendar__table__cell"+(0==n?" b-mail-calendar__table__cell_first":6==n?" b-mail-calendar__table__cell_last":"")+"'>"+this.dayName((n+e.start_of_week)%7)+"</th>"}this.$popup.find(".js-row-h").html(t),$(this.container).append(this.$popup),this.$popup.on("click",".prev:not(.b-link_disabled)",function(){e.moveMonthBy(-1)}).on("click",".next:not(.b-link_disabled)",function(){e.moveMonthBy(1)}).on("click",".b-mail-calendar__table__cell:not(.b-mail-calendar__table__cell_disabled)",function(t){e.changeInput($(t.currentTarget).attr("date"))}).on("mousedown click",function(e){e.preventDefault(),e.stopPropagation()}),this.input.on("keydown keyup change",function(){e.selectDateLazy()}),this.hideOnScroll&&$(document).on("scroll",this.hide)},updateOptions:function(e){$.extend(this,e),this._needRepaint=!0},selectMonth:function(e){var t=new Date(e.getFullYear(),e.getMonth(),1);if(this._needRepaint||!this.currentMonth||this.currentMonth.getFullYear()!==t.getFullYear()||this.currentMonth.getMonth()!==t.getMonth()){this._needRepaint=!1,this.currentMonth=t;for(var n=this.rangeStart(e),r=this.rangeEnd(e),i=this.daysBetween(n,r),o="",a=this.getRangeDate(this.minDate),s=this.getRangeDate(this.maxDate),u=0;u<=i;u++){var c=new Date(n.getFullYear(),n.getMonth(),n.getDate()+u,12,0),l=this.isDayOff(c)?" b-mail-calendar__table__cell_day-off":"";this.isFirstDayOfWeek(c)&&(o+="<tr class='b-mail-calendar__table__row'>"),a&&c<a||s&&c>s?o+='<td class="b-mail-calendar__table__cell b-mail-calendar__table__cell_disabled"><a class="b-mail-calendar__table__i">'+c.getDate()+"</a></td>":c.getMonth()==e.getMonth()?o+='<td class="b-mail-calendar__table__cell'+l+'" date="'+this.dateToString(c)+'"><a class="b-mail-calendar__table__i">'+c.getDate()+"</a></td>":o+='<td class="b-mail-calendar__table__cell b-mail-calendar__table__cell_inactive" date="'+this.dateToString(c)+'"><a class="b-mail-calendar__table__i">'+c.getDate()+"</a></td>",this.isLastDayOfWeek(c)&&(o+="</tr>")}this.tbody.empty().append(o),this.$popup.removeClass("UNUSED"),this.monthNameSpan.empty().append(this.monthName(e.getMonth())),this.yearNameSpan.empty().append(this.currentMonth.getFullYear());var f;a&&(f=this.currentMonth>(a&&a.setDate(1)&&a.setHours(0)),this.$nav.find(".prev").toggleClass("b-link_disabled",!f)),s&&(f=this.currentMonth<(s&&s.setDate(1)&&s.setHours(0)),this.$nav.find(".next").toggleClass("b-link_disabled",!f)),$('td[date="'+this.dateToString(new Date)+'"]',this.tbody).addClass("b-mail-calendar__table__cell_today")}$(".b-mail-calendar__table__cell_selected",this.tbody).removeClass("b-mail-calendar__table__cell_selected"),$('td[date^="'+this.selectedDateString.substr(0,10)+'"]',this.tbody).addClass("b-mail-calendar__table__cell_selected")},getRangeDate:function(e){var t,n,r;if(e instanceof Date)return t=e.getFullYear()||!1,n=e.getMonth()||!1,r=e.getDate()||!1,new Date(t,n,r,12,0)},selectDate:function(e){void 0===e&&(e=this.stringToDate(this.getInputVal())),e||(e=new Date),this.selectedDate=e,this.selectedDateString=this.dateToString(this.selectedDate),this.selectMonth(this.selectedDate)},changeInput:function(e){this.setInputVal(e),this.selectDate(),this.onSelect(e),this.hide()},setInputVal:function(e){this.nbInput?this.nbInput.setValue(e):this.input.val(e),this.onSelect&&this.onSelect(e)},getInputVal:function(){return this.nbInput?this.nbInput.getValue():this.input.val()},show:function(){ns.events.trigger("date-input:close-calendar"),ns.events.on("date-input:close-calendar",this.hide),this.visible=!0,this.$popup.css("display","block"),$([window,document.body]).click(this.hideIfClickOutside),this.input.off(".date-input"),$(document.body).keydown(this.keydownHandler),this.selectDate(),this.setPosition()},hide:function(){this.visible=!1,this.$popup.css("display","none"),$([window,document.body]).off("click",this.hideIfClickOutside),this.input.on("focus.date-input click.date-input",this.show),$(document.body).off("keydown",this.keydownHandler),ns.events.off("date-input:close-calendar",this.hide)},hideIfClickOutside:function(e){var t=this.nbInput?this.nbInput.$control[0]:this.input[0],n=this.$popup[0];t===e.target||$.contains(t,e.target)||n===e.target||$.contains(n,e.target)||this.hide()},keydownHandler:function(e){var t=Jane.Common.keyCode,n=e.keyCode;if(n===t.TAB)this.hide();else if(n===t.ESC)this.hide(),e.stopPropagation();else if(this.useKeyboard){switch(n){case t.ENTER:this.changeInput(this.selectedDateString);break;case t.PAGEUP:this.moveDateMonthBy(e.ctrlKey?-12:-1);break;case t.PAGEDOWN:this.moveDateMonthBy(e.ctrlKey?12:1);break;case t.UP:this.moveDateBy(-7);break;case t.DOWN:this.moveDateBy(7);break;case t.LEFT:this.moveDateBy(-1);break;case t.RIGHT:this.moveDateBy(1)}e.preventDefault()}},stringToDate:function(e){var t;if(this.isSimpleDateFormat){if(t=e.trim().match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})$/))return new Date(t[3],Number(t[2])-1,t[1],12)}else if(t=e.match(/^(\d{1,2}) ([^\s]+) (\d{4})$/))return new Date(t[3],this.monthName(t[2]),t[1],12);return null},dateToString:function(e){if(this.isSimpleDateFormat){var t=Jane.Common.n;return t(e.getDate())+"."+t(e.getMonth()+1)+"."+e.getFullYear()}return e.getDate()+" "+this.shortMonthName(e.getMonth())+" "+e.getFullYear()},setPosition:function(){var e=0,t=0,n=Boolean(this.nbInput);n&&(e=7,t=1);var r,i=n?this.nbInput.$node:this.input;r=this.usePosition?i.position():i.offset();var o=r.left+t,a=r.top+i.outerHeight()+e,s=$(window),u=s.width();if(this.autoOrientation){var c=s.scrollTop(),l=c+s.height(),f=this.$popup.outerHeight();i.offset().top+f+6>l&&(a=r.top-f-e)}var d=this.$popup.outerWidth();o+d>u&&(o=u-d-15),this.$popup.css($.extend({},this.addStyle,{top:a,left:o})),this.ieframe&&this.ieframe.css({width:this.$popup.outerWidth(),height:this.$popup.outerHeight()})},moveDateBy:function(e){var t=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()+e);this.selectDate(t)},moveDateMonthBy:function(e){var t=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+e,this.selectedDate.getDate());t.getMonth()==this.selectedDate.getMonth()+e+1&&t.setDate(0),this.selectDate(t)},moveMonthBy:function(e){var t=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+e,this.currentMonth.getDate());this.selectMonth(t)},monthName:function(e){return Jane.Date.monthName(e)},shortMonthName:function(e){return Jane.Date.shortMonthName(e)},dayName:function(e){return Jane.Date.weekDay(e)},indexFor:function(e,t){for(var n=0;n<e.length;n++)if(t==e[n])return n},daysBetween:function(e,t){return e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),((t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))-e)/864e5},changeDayTo:function(e,t,n){var r=n*(Math.abs(t.getDay()-e-7*n)%7);return new Date(t.getFullYear(),t.getMonth(),t.getDate()+r)},rangeStart:function(e){return this.changeDayTo(this.start_of_week,new Date(e.getFullYear(),e.getMonth()),-1)},rangeEnd:function(e){return this.changeDayTo((this.start_of_week-1)%7,new Date(e.getFullYear(),e.getMonth()+1,0),1)},isFirstDayOfWeek:function(e){return e.getDay()==this.start_of_week},isLastDayOfWeek:function(e){return e.getDay()==(this.start_of_week-1)%7},isDayOff:function(e){return 6==e.getDay()||0==e.getDay()},onSelect:function(){}},$.fn.date_input=function(t){return this.each(function(){new e(this,t)})},Jane.DateInput=e}()},function(e,t){$.fn.frameSubmit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=$.Deferred(),r=n.promise();if(1!==t.length||!t.is("form"))return n.reject({}),r;var i=_.uniqueId("frame-submit-"),o=$("<iframe>").css("display","none").attr("name",i).appendTo("body").on("load",function(e){try{var t=JSON.parse(e.target.contentDocument.body.textContent);n.resolve(t)}catch(e){n.reject({})}o.remove()});if(t.attr("target",i),e.data)for(var a in e.data)$("<input>").attr({type:"hidden",name:a,value:e.data[a]}).appendTo(t);return t.submit(),r}},function(e,t){!function(e){var t={comma:188,backspace:8,tab:9,cmd:Modernizr.opera?17:Modernizr.mozilla?224:[91,93],enter:13,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"?":191,minus:Modernizr.opera?[109,45]:Modernizr.mozilla?109:[189,109],plus:Modernizr.opera?[61,43,107,187]:Modernizr.mozilla?[61,107]:[187,107]},n={},r={},i=null,o={},a={},s=!1,u=function(t,n){var r=t;n.ctrl&&(r+="_ctrl"),n.meta&&!Modernizr.msie&&(r+="_meta"),n.alt&&(r+="_alt"),n.shift&&(r+="_shift");var i=function(e,t){return t&&16!==t&&17!==t&&18!==t&&91!==t&&(e+="_"+t),e};if(e.isArray(n.which)){var o=[];return e.each(n.which,function(e,t){o.push(i(r,t))}),o}return i(r,n.which)},c=function(n){var r={},i=n.split("+");return e.each(i,function(e,n){"ctrl"===n||"meta"===n||"alt"===n||"shift"===n?r[n]=!0:r.which=t[n]||n.toUpperCase().charCodeAt()}),r},l=function(t){var n=t.tagName.toLowerCase(),r=t.type,i=["button","reset","submit","radio","checkbox"];return"input"===n&&e.inArray(r,i)<0||"textarea"===n},f=function(e,t){return void 0===t||-1!==e.className.indexOf(t)},d=function(e,t){if(void 0===t||!t instanceof Array)return!0;for(var n=0;n<t.length;n++)if(e.className.indexOf(t[n])>-1)return!1;return!0},h=function(e){for(var t in r)if(r[t].hasOwnProperty(e))return r[t][e]},p=function(t,n){if(r){var i={ctrl:n.ctrlKey,meta:n.metaKey,alt:n.altKey,shift:n.shiftKey,which:n.which},o=u(t,i),a=h(o),t=ns.page.current.page;if(a&&!nb.isAnySelectOpened()&&!nb.isAnyModalOpened()){var s=l(n.target),c=!1;e.each(a,function(r,i){if(e.isArray(i.disableAt))for(var o=i.disableAt,r=0,a=o.length;r<a;r++)if(o[r]==t)return;if(!s||i.enableInInput&&f(n.target,i.namedInput)&&d(n.target,i.filterInput)){var u=i.action,l=null;l=u?ns.action.run(u,{}):i.handler(n),!0===l||c||(n.preventDefault(),c=!0);var h=document.activeElement;return!s&&h&&"A"===h.nodeName&&e(h).blur(),l}})}}};e.Shortcuts={},e.Shortcuts.switchList=function(t){var a=r;null!==i&&(a=i);for(var s in a)o.hasOwnProperty(s)||s===t||delete a[s];if(!n[t])return!1;e.Shortcuts.enableList(t)},e.Shortcuts.modalListOn=function(e){if(!n[e])return!1;null===i&&(i=r),r={},r[e]=n[e]},e.Shortcuts.modalListOff=function(t){null!==i&&(r=i,i=null,e.Shortcuts.refresh(t))},e.Shortcuts.disableList=function(e){if(!n[e])return!1;r.hasOwnProperty(e)&&delete r[e]},e.Shortcuts.enableList=function(e){if(!n[e])return!1;null!==i&&(i[e]=n[e]),r[e]=n[e]},e.Shortcuts.loadList=function(t,n){var r=t.global||!1,i=t.shortcuts||{},a=t.name||"default";for(var s in i){var u=i[s];u.list=a,u.type=u.type||"down",n&&void 0!==u.altMask&&(u.mask=u.altMask),e.Shortcuts.add(u)}r&&(o[a]=1,e.Shortcuts.enableList(a))},e.Shortcuts.start=function(t){if(!s)return e(document).on("keydown.shortcuts",function(e){"true"===e.target.getAttribute("contenteditable")&&e.target===document.activeElement&&27!==e.which||("keypress"===e.type&&e.which>=97&&e.which<=122&&(e.which=e.which-32),a[e.which]||p("down",e),a[e.which]=!0,p("hold",e),65===e.which&&(e.metaKey||e.ctrlKey)&&(a[e.which]=!1))}),e(document).on("keyup.shortcuts",function(e){"true"===e.target.getAttribute("contenteditable")||(a[e.which]=!1,p("up",e))}),s=!0,this},e.Shortcuts.stop=function(){return e(document).off("keypress.shortcuts keydown.shortcuts keyup.shortcuts"),s=!1,this},e.Shortcuts.refresh=function(t){e.Shortcuts.stop(),e.Shortcuts.start(t)},e.Shortcuts.add=function(t){if(!t.mask)throw new Error("$.Shortcuts.add: required parameter 'params.mask' is undefined.");if(!t.handler&&!t.action)throw new Error("$.Shortcuts.add: required parameter 'params.handler' or 'params.action' is undefined.");var r=t.type||"down",i=t.list?t.list.replace(/\s+/g,"").split(","):["default"];return e.each(i,function(i,o){n[o]||(n[o]={});var a=n[o],s=t.mask.toLowerCase().replace(/\s+/g,"").split(",");e.each(s,function(n,i){var o=c(i),s=u(r,o);e.isArray(s)||(s=[s]),e.each(s,function(e,n){a[n]||(a[n]=[]),a[n].push(t)})})}),this},e.Shortcuts.remove=function(t){if(!t.mask)throw new Error("$.Shortcuts.remove: required parameter 'params.mask' is undefined.");var r=t.type||"down",i=t.list?t.list.replace(/\s+/g,"").split(","):["default"];return e.each(i,function(i,o){if(!n[o])return!0;var a=t.mask.toLowerCase().replace(/\s+/g,"").split(",");e.each(a,function(t,i){var a=c(i),s=u(r,a);e.isArray(s)||(s=[s]),e.each(s,function(e,t){delete n[o][t]})})}),this}}(jQuery)},function(e,t){!function(e){var t=/select|textarea/i,n=/text|password|checkbox|hidden|number/i,r=/checkbox/i,i=/radio/i;e.fn.serializeObject=function(){var o={};return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(t.test(this.nodeName)||n.test(this.type)||i.test(this.type)&&this.checked)}).each(function(){var t=r.test(this.type)&&!this.checked?"":e(this).val(),n=this.name;void 0!==o[n]?e.isArray(o[n])?o[n].push(t):o[n]=[o[n],t]:o[n]=t}),o}}(jQuery)},function(e,t){!function(e,t,n){var r={client:{},full:{},scroll:{}},i=function(){if("onmousewheel"in n)return"mw";try{var e=t.createEvent("MouseScrollEvents");e.initMouseEvent("DOMMouseScroll",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);var i=e.HORIZONTAL_AXIS,o=e.VERTICAL_AXIS;return r.client[i]="clientWidht",r.client[o]="clientHeight",r.full[i]="scrollWidth",r.full[o]="scrollHeight",r.scroll[i]="scrollLeft",r.scroll[o]="scrollTop",r.x=i,r.y=o,e=null,"mpx"}catch(e){if(t.addEventListener)return"dms"}return"none"}(),o={mpx:function(e,t,n){this.addEventListener("DOMMouseScroll",function(e){var t=e.axis,n=this[r.full[t]],i=this[r.client[t]],o=this[r.scroll[t]]+e.detail;o>0&&o<n-i&&e.preventDefault()},!1),this.addEventListener("MozMousePixelScroll",function(e){var t=e.detail,i=e.axis;this[r.scroll[i]]=this[r.scroll[i]]+t,n.call(this,u(e))},!1)},dms:function(e,t,n){this.addEventListener("DOMMouseScroll",function(e){n.call(this,u(e))},!1)}},a={};a.mw=a.mpx=a.dms=function(e){e.handler=s(e.handler)},e.event.special.mousewheel={setup:o[i],add:a[i]};var s=function(e){return function(t){var n="wheelDeltaX"in t?t.wheelDeltaX:t.originalEvent.wheelDeltaX,r="wheelDeltaY"in t?t.wheelDeltaY:t.originalEvent.wheelDeltaY;e.call(this,t,t.wheelDelta,n,r)}},u=function(t){var n=0-t.detail,i=t.axis,t=e.event.fix(t);return t.type="mousewheel",t.wheelDelta=n,t.wheelDeltaX=i===r.x?n:0,t.wheelDeltaY=i===r.y?n:0,t}}(jQuery,document,window)},function(e,t){!function(){function e(e){var t="focus"===e.type?"focusin":"focusout",n=new window.CustomEvent(t,{bubbles:!0,cancelable:!1});n.c1Generated=!0,e.target.dispatchEvent(n)}function t(n){n.c1Generated||(r.removeEventListener("focus",e,!0),r.removeEventListener("blur",e,!0),r.removeEventListener("focusin",t,!0),r.removeEventListener("focusout",t,!0)),setTimeout(function(){r.removeEventListener("focusin",t,!0),r.removeEventListener("focusout",t,!0)})}var n=window,r=n.document;void 0!==n.onfocusin&&null!==n.onfocusin||(r.addEventListener("focus",e,!0),r.addEventListener("blur",e,!0),r.addEventListener("focusin",t,!0),r.addEventListener("focusout",t,!0))}()},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.swfobject=function(){function e(){if(!j){for(var e=P.length,t=0;t<e;t++)P[t]();j=!0}}function t(e){j?e():P[P.length]=e}function r(){I?i():o()}function i(){var e,t=navigator.plugins["Shockwave Flash"]||window.ActiveXObject;try{e=t.description||function(){return new t("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}()}catch(t){e="Unavailable"}e=e.split(" ")[2],e?(e=e.split(/\.|,/g),H.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]):H.pv=[0,0,0],o()}function o(){var e=L.length;if(e>0)for(var t=0;t<e;t++){var r=L[t].id,i=L[t].callbackFn,o={success:!1,id:r};if(H.pv[0]>0){var l=g(r);if(l)if(!v(L[t].swfVersion)||H.wk&&H.wk<312)if(L[t].expressInstall&&s()){var f={};f.data=L[t].expressInstall,f.width=l.getAttribute("width")||"0",f.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(f.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(f.align=l.getAttribute("align"));for(var d={},h=l.getElementsByTagName("param"),p=h.length,m=0;m<p;m++)"movie"!=h[m].getAttribute("name").toLowerCase()&&(d[h[m].getAttribute("name")]=h[m].getAttribute("value"));u(f,d,r,i)}else c(l),i&&i(o);else y(r,!0),i&&(o.success=!0,o.ref=a(r),i(o))}else if(y(r,!0),i){var _=a(r);_&&n(_.SetVariable)!=S&&(o.success=!0,o.ref=_),i(o)}}}function a(e){var t=null,r=g(e);if(r&&"OBJECT"==r.nodeName)if(n(r.SetVariable)!=S)t=r;else{var i=r.getElementsByTagName(x)[0];i&&(t=i)}return t}function s(){return!U&&v("6.0.65")&&(H.win||H.mac)&&!(H.wk&&H.wk<312)}function u(e,t,r,i){U=!0,C=i||null,T={success:!1,id:r};var o=g(r);if(o){"OBJECT"==o.nodeName?(w=l(o),D=null):(w=o,D=r),e.id=M,(n(e.width)==S||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(n(e.height)==S||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var a=H.ie&&H.win?"ActiveX":"PlugIn",s="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+F.title;if(n(t.flashvars)!=S?t.flashvars+="&"+s:t.flashvars=s,H.ie&&H.win&&4!=o.readyState){var u=m("div");r+="SWFObjectNew",u.setAttribute("id",r),o.parentNode.insertBefore(u,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}f(e,t,r)}}function c(e){if(H.ie&&H.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(l(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(l(e),e)}function l(e){var t=m("div");if(H.win&&H.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(x)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,o=0;o<i;o++)1==r[o].nodeType&&"PARAM"==r[o].nodeName||8==r[o].nodeType||t.appendChild(r[o].cloneNode(!0))}}return t}function f(e,t,r){var i,o=g(r);if(H.wk&&H.wk<312)return i;if(o)if(n(e.id)==S&&(e.id=r),H.ie&&H.win){var a="";for(var s in e)e[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?t.movie=e[s]:"styleclass"==s.toLowerCase()?a+=' class="'+e[s]+'"':"classid"!=s.toLowerCase()&&(a+=" "+s+'="'+e[s]+'"'));var u="";for(var c in t)t[c]!=Object.prototype[c]&&(u+='<param name="'+c+'" value="'+t[c]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+u+"</object>",R[R.length]=e.id,i=g(e.id)}else{var l=m(x);l.setAttribute("type",k);for(var f in e)e[f]!=Object.prototype[f]&&("styleclass"==f.toLowerCase()?l.setAttribute("class",e[f]):"classid"!=f.toLowerCase()&&l.setAttribute(f,e[f]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&d(l,h,t[h]);o.parentNode.replaceChild(l,o),i=l}return i}function d(e,t,n){var r=m("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function h(e){var t=g(e);t&&"OBJECT"==t.nodeName&&(H.ie&&H.win?(t.style.display="none",function(){4==t.readyState?p(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function p(e){var t=g(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function g(e){var t=null;try{t=F.getElementById(e)}catch(e){}return t}function m(e){return F.createElement(e)}function v(e){var t=H.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function _(e,t,r,i){if(!H.ie||!H.mac){var o=F.getElementsByTagName("head")[0];if(o){var a=r&&"string"==typeof r?r:"screen";if(i&&(A=null,E=null),!A||E!=a){var s=m("style");s.setAttribute("type","text/css"),s.setAttribute("media",a),A=o.appendChild(s),H.ie&&H.win&&n(F.styleSheets)!=S&&F.styleSheets.length>0&&(A=F.styleSheets[F.styleSheets.length-1]),E=a}H.ie&&H.win?A&&n(A.addRule)==x&&A.addRule(e,t):A&&n(F.createTextNode)!=S&&A.appendChild(F.createTextNode(e+" {"+t+"}"))}}}function y(e,t){if(z){var n=t?"visible":"hidden",r=g(e);j&&r&&r.style?r.style.visibility=n:_("#"+e,"visibility:"+n)}}function b(e){return null!=/[\\\"<>\.;]/.exec(e)&&("undefined"==typeof encodeURIComponent?"undefined":n(encodeURIComponent))!=S?encodeURIComponent(e):e}var w,D,C,T,A,E,S="undefined",x="object",k="application/x-shockwave-flash",M="SWFObjectExprInst",O=window,F=document,N=navigator,I=!1,P=[r],L=[],R=[],B=[],j=!1,U=!1,z=!0,H=function(){var e=n(F.getElementById)!=S&&n(F.getElementsByTagName)!=S&&n(F.createElement)!=S,t=N.userAgent.toLowerCase(),r=N.platform.toLowerCase(),i=/win/.test(r?r:t),o=/mac/.test(r?r:t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),s=!1,u=[0,0,0],c=null;if(n(N.plugins)!=S&&n(N.plugins["Shockwave Flash"])==x)!(c=N.plugins["Shockwave Flash"].description)||n(N.mimeTypes)!=S&&N.mimeTypes[k]&&!N.mimeTypes[k].enabledPlugin||(I=!0,s=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(c)?parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(n(O.ActiveXObject)!=S)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");l&&(c=l.GetVariable("$version"))&&(s=!0,c=c.split(" ")[1].split(","),u=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(e){}return{w3:e,pv:u,wk:a,ie:s,win:i,mac:o}}();(function(){$(e)})(),function(){H.ie&&H.win&&window.attachEvent("onunload",function(){for(var e=B.length,t=0;t<e;t++)B[t][0].detachEvent(B[t][1],B[t][2]);for(var n=R.length,r=0;r<n;r++)h(R[r]);for(var i in H)H[i]=null;H=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(H.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,L[L.length]=i,y(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(H.w3)return a(e)},embedSWF:function(e,r,i,o,a,c,l,d,h,p){var g={success:!1,id:r};H.w3&&!(H.wk&&H.wk<312)&&e&&r&&i&&o&&a?(y(r,!1),t(function(){i+="",o+="";var t={};if(h&&(void 0===h?"undefined":n(h))===x)for(var m in h)t[m]=h[m];t.data=e,t.width=i,t.height=o;var _={};if(d&&(void 0===d?"undefined":n(d))===x)for(var b in d)_[b]=d[b];if(l&&(void 0===l?"undefined":n(l))===x)for(var w in l)n(_.flashvars)!=S?_.flashvars+="&"+w+"="+l[w]:_.flashvars=w+"="+l[w];if(v(a)){var D=f(t,_,r);t.id==r&&y(r,!0),g.success=!0,g.ref=D}else{if(c&&s())return t.data=c,void u(t,_,r,p);y(r,!0)}p&&p(g)})):p&&p(g)},switchOffAutoHideShow:function(){z=!1},ua:H,getFlashPlayerVersion:function(){return{major:H.pv[0],minor:H.pv[1],release:H.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(e,t,n){return H.w3?f(e,t,n):void 0},showExpressInstall:function(e,t,n,r){H.w3&&s()&&u(e,t,n,r)},removeSWF:function(e){H.w3&&h(e)},createCSS:function(e,t,n,r){H.w3&&_(e,t,n,r)},addDomLoadEvent:t,getQueryParamValue:function(e){var t=F.location.search||F.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return b(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return b(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var e=g(M);e&&w&&(e.parentNode.replaceChild(w,e),D&&(y(D,!0),H.ie&&H.win&&(w.style.display="block")),C&&C(T)),U=!1}}}}()},function(e,t){Jane.Common={},Jane.Common.n=function(e){return e<10?"0"+Number(e):String(e)},Jane.Common.nop=function(){},Jane.Common._true=function(){return!0},Jane.Common._false=function(){return!1},Jane.Common.keyCode={ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,SEMI:Modernizr.msie?186:59,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8,SHIFT:16,CTRL:17,ALT:18,META:91,COMMA_CHAR:44,SEMI_CHAR:59,SPACE_CHAR:32,L_CHAR:76}},function(e,t,n){!function(){"use strict";Jane.String={},n(710),Jane.String.countLines=function(e){return e?String(e).split("\n").length:0},Jane.String.countActualLines=function(e){return e?String(e).split("\n").filter(function(e){return!Jane.String.REG.NON_PRINTERED_CHARS.test(e)}).length:0},Jane.String.rtrim=function(e){return e.replace(Jane.String.REG.RTRIM,"")},Jane.String.ltrim=function(e){return e.replace(Jane.String.REG.LTRIM,"")},Jane.String.removeNonLetterString=function(e){return e.replace(Jane.String.REG.MULTILINE,Jane.String._removeNonLetterStringTrim).replace(Jane.String.REG.NEWLINE_DUPLICATE,"\n")},Jane.String._removeNonLetterStringTrim=function(e){return e.trim()},Jane.String.substrWord=function(e,t,n){if(e.length<=t+n)return e;var r=e.lastIndexOf(" ",t+n);return-1!==r?e.substring(t,r):e.substr(t,n)}}()},function(e,t){!function(){Jane.String.REG={},Jane.String.REG.NONLETTER_STR=new RegExp("^[^\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC0-9]+$","i"),Jane.String.REG.NON_PRINTERED_CHARS=/^[\s\uFEFF\xA0]*$/,Jane.String.REG.NON_EMPTY_STRING=/[^\n\r\t\x20]+/,Jane.String.REG.RTRIM=/[ \s\xA0]+$/g,Jane.String.REG.LTRIM=/^[ \s\xA0]+/g,Jane.String.REG.MULTILINE=/.*/gm,Jane.String.REG.NEWLINE_DUPLICATE=/[\r\n]+/gm,Jane.String.REG.CLASS_SEP=/[\t\r\n\f]/g}()},function(e,t){Jane.Array={remove:function(e,t){var n=e.indexOf(t);return n>-1&&e.splice(n,1),n}}},function(e,t,n){!function(e){function t(e,t,n){for(void 0===n&&(n=10),void 0===t&&(t=0);n>parseInt(e,10)&&n>1;n/=10)e=t.toString()+e;return e.toString()}var r=/^%(Date_[a-zA-Z0-9_]+|[#\^]?[v]|[cDFrRTxXGnpPtuUwYzZs%]|[#\^!~]{0,2}[aAbBfh]|[0\-_]?[CdegHIjmMSVWyl])$/,i=n(713);e.Date={},n(715),e.Date.SECOND=1e3,e.Date.MINUTE=60*e.Date.SECOND,e.Date.HOUR=60*e.Date.MINUTE,e.Date.DAY=24*e.Date.HOUR,e.Date.WEEK=7*e.Date.DAY,e.Date.MONTH=30*e.Date.DAY,e.Date.YEAR=365*e.Date.DAY,e.Date.format=function(e,t,n){if(!r.test(e))throw new Error("Не следует самому писать форматы даты, потому что в разных локалях числа могут меняться местами");return"string"==typeof t&&(t=/^\d+$/.test(t)?Number(t):new Date(t)),i(e,t,n)},e.Date.monthName=function(e){return i18n("%Months_2",e)},e.Date.shortMonthName=function(e){return i18n("%Months_3",e)},e.Date.weekDay=function(e){return i18n("%Week_Day_Capital",e)},e.Date.monthName=function(e){return i18n("%Months_2",e)},e.Date.shortMonthName=function(e){return i18n("%Months_3",e)},e.Date.weekDay=function(e){return i18n("%Week_Day_Capital",e)},e.Date.humanDate=function(n){var r=new Date;r.setHours(0),r.setMinutes(0),r.setSeconds(0);var i=new Date(r.getTime()+864e5);return n>r&&n<i?i18n("%Today_At_Time",n.getHours(),t(n.getMinutes())):e.Date.format("%Date_dmY__dot",n)},e.Date.getInterval=function(e){"string"==typeof e&&(e=Number(e)),"number"==typeof e&&(e=new Date(e));var t=new Date(Daria.now()),n=t.getDate(),r=t.getMonth(),i=t.getFullYear(),o=e.getDate(),a=e.getMonth(),s=e.getFullYear(),u=i-s,c=r-a;c<0&&(u--,c=12+c);var l=n-o;l<0&&(c--,l=new Date(i,r,0).getDate()+l);var f=[];return u>0&&f.push(i18n("%N_years",u)),c>0&&f.push(i18n("%N_months",c)),l>0&&f.push(i18n("%N_days",l)),f.join(", ")};var o=[["янв","фев","мар","апр","ма","июн","июл","авг","сен","окт","ноя","дек"],["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],["january","frbruary","march","april","may","june","july","august","september","october","november","december"],["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],["Студзень","Люты","Сакавік","Красавік","Травень","Чэрвень","Ліпень","Жнівень","Верасень","Кастрычнік","Лістапад","Снежань"],["січень","лютий","березень","квітень","травень","червень","липень","серпень","вересень","жовтень","листопад","грудень"],["гыйнвар","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],["қаңтар","ақпан","наурыз","сәуір","мамыр","маусым","шілде","тамыз","қыркүйек","қазан","қараша","желтоқсан"],["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომბერი","ნოემბერი","დეკემბერი"],["հունվար","փետրվար","մարտ","ապրիլ","մայիս","հունիս","հուլիս","օգոստոս","սեպտեմբեր","հոկտեմբեր","նոյեմբեր","դեկտեմբեր"]].map(function(e){return e.map(function(e){return e.toLowerCase()})});e.Date.getMonthByName=function(e){e=e.replace(/\.$/,"").toLowerCase();for(var t=-1,n=0,r=o.length;n<r&&-1===(t=o[n].indexOf(e));n++);return t},e.Date.daysIntervalLocalization=function(e,t){var n={weeks:function(e){return t?i18n("%N_weeks_genitive",e):i18n("%N_weeks",e)},days:function(e){return t?i18n("%N_days_genitive",e):i18n("%N_days",e)},hours:function(e){return t?i18n("%N_hours_genitive",e):i18n("%N_hours",e)},minutes:function(e){return t?i18n("%N_minutes_genitive",e):i18n("%N_minutes",e)}};return _(n).keys().map(function(t){return e[t]?n[t](e[t]):null}).compact().value().join(" ")},e.Date.getDaysInterval=function(t,n){var r=n.getTime()-t.getTime(),i=Math.floor(r/e.Date.DAY);r-=i*e.Date.DAY;var o=Math.floor(r/e.Date.HOUR);r-=o*e.Date.HOUR;var a=Math.round(r/e.Date.MINUTE),s={days:i,hours:o,minutes:a};return this.daysIntervalLocalization(s)},e.Date.dateWithCustomTimeZone=function(t,n){var r=n*e.Date.HOUR,i=function(){return-new Date(t).getTimezoneOffset()*e.Date.MINUTE},o=t+r-i(),a=new Date(o);return _.extend(a,{isCustomTimezone:!0,timezoneHours:n,timezoneMs:r,getTimezoneOffset:function(){return-this.timezoneMs/e.Date.MINUTE},getTime:function(){return this._getTime()+(this._getUserTimezone()-this.timezoneMs)},_getUserTimezone:i,_getTime:a.getTime}),a},e.Date.clone=function(t){return t instanceof Date?t.isCustomTimezone?e.Date.dateWithCustomTimeZone(t.getTime(),t.timezoneHours):t instanceof e.Date.LocalDate?e.Date.LocalDate.convertDate(t):new Date(t.getTime()):_.clone(t)},e.Date.toCalendarISODate=function(t){return"string"!=typeof t&&(t instanceof Date&&(t=t.getTime()),t+=60*Daria.tz_offset*1e3,t=e.Date.format("%Date_iso",t)+"Z"),t},e.Date.isDateTheDayBeforeNow=function(e){var t=new Date(Daria.now());return e=new Date(e),t.getTime()-e.getTime()>=864e5},e.Date.dateToDay=function(e){return e instanceof Date||(e=new Date(e)),new Date(e.getFullYear(),e.getMonth(),e.getDate())},e.Date.isSameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},e.Date.daysBetween=function(e,t){return e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),((t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))-e)/864e5},e.Date.parseCalendarDate=function(e){var t=String(e||"").match(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/);return t&&7===t.length?new Date(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10)):null},e.Date.getHours=function(e){return e.getHours()+e.getMinutes()/60},e.Date.toHumanFormat=function(t){var n=new Date(Daria.passportNow()),r=t.getFullYear(),i=t.getMonth(),o=t.getDate();return r===n.getFullYear()&&i===n.getMonth()&&o===n.getDate()?i18n("%Compose_сегодня"):e.Date.format("%Date_dBY_year",t)}}(Jane)},function(e,t,n){"use strict";function r(e,t,n){var r=t;if(void 0===r&&(r=new Date),"number"==typeof r&&(r=new Date(r)),!(r instanceof Date)||"Invalid Date"===String(r))return null;n&&(r=new Date(r.getTime()+6e4*r.getTimezoneOffset())),i.date=r;for(var o=5;e.match(c)&&o;)e=e.replace(u,i),o--;return e.replace(l,i)}function i(e,t,n,r,o,a){t=String(t),n=String(n),t=t.replace(/^[#_0\^\-!~]+/,"");var s=f[t];if(!s)return e;var u=!1;return-1===n.indexOf("!")&&1===t.length&&(n.indexOf("~")>-1||"bBf".indexOf(t)>-1&&/%[0\-_]?d[\s]+$/.test(a.substr(0,o)))&&(u=!0),s(i.date,n,r,u)}function o(e,t,n,r){if("-"===t)return e;for("_"===t&&(t=" "),void 0===n&&(n=0),void 0===r&&(r=10),void 0!==t&&""!==t||(t=n);r>e|0&&r>1;r/=10)e=t.toString()+e;return e.toString()}function a(e,t){return e=String(e),t=String(t),t.indexOf("#")>-1?e.toLowerCase():t.indexOf("^")>-1?e.toUpperCase():e.substr(0,1).toUpperCase()+e.substr(1)}var s=n(714),u=/%(Date_[a-zA-Z0-9_]+|([#\^]?)[v]|[cDFrRTxX])/g,c=/%(Date_[a-zA-Z0-9_]+|[#\^]?[v]|[cDFrRTxX])/,l=/%(([#\^!~]{0,2})[aAbBfh]|([0\-_]?)[CdegHIjmMSVWyl]|[GnpPtuUwYzZs%])/g,f={a:function(e,t){return a(s.a[e.getDay()],t)},A:function(e,t){return a(s.A[e.getDay()],t)},b:function(e,t,n,r){return a(s[r?"bg":"b"][e.getMonth()],t)},h:function(e,t,n,r){return f.b(e,t,n,r)},f:function(e,t,n,r){return a(s[r?"fg":"f"][e.getMonth()],t)},B:function(e,t,n,r){return a(s[r?"Bg":"B"][e.getMonth()],t)},c:function(){return s.c},C:function(e,t,n){return o(e.getFullYear()/100|0,n,0)},d:function(e,t,n){return o(e.getDate(),n,0)},D:function(){return"%m/%d/%y"},e:function(e,t,n){return o(e.getDate(),n," ")},F:function(){return"%Y-%m-%d"},g:function(e,t,n){return o(f.G(e)%100,n,0)},G:function(e){var t=0|e.getFullYear(),n=0|f.V(e),r=0|f.W(e);return r>n?t++:0===r&&n>=52&&t--,t},H:function(e,t,n){return o(e.getHours(),n,0)},I:function(e,t,n){var r=e.getHours()%12;return o(0===r?12:r,n,0)},j:function(e,t,n){return o(1+(e-new Date(e.getFullYear(),0,1))/6e4/60/24|0,n,0,100)},m:function(e,t,n){return o(e.getMonth()+1,n,0)},M:function(e,t,n){return o(e.getMinutes(),n,0)},n:function(){return"\n"},p:function(e){var t=e.getHours()>=12?1:0;return String(s.P[t]).toUpperCase()},P:function(e){var t=e.getHours()>=12?1:0;return String(s.P[t])},r:function(){return s.r},R:function(){return"%H:%M"},S:function(e,t,n){return o(e.getSeconds(),n,0)},t:function(){return"\t"},T:function(){return"%H:%M:%S"},u:function(e){var t=e.getDay();return 0===t?7:t},U:function(e){return o(((0|f.j(e))+(6-e.getDay()))/7|0,0)},V:function(e,t,n){var r=0|f.W(e),i=new Date(String(e.getFullYear())+"/1/1").getDay(),a=r+(i>4||i<=1?0:1);return 53===a&&new Date(String(e.getFullYear())+"/12/31").getDay()<4?a=1:0===a&&(a=f.V(new Date(String(e.getFullYear()-1)+"/12/31"))),o(a,n,0)},w:function(e){return e.getDay()},W:function(e,t,n){return o(((0|f.j(e))+(7-f.u(e)|0))/7|0,n,0,10)},x:function(){return s.x},X:function(){return s.X},y:function(e,t,n){return o(e.getFullYear()%100,n,0)},Y:function(e){return e.getFullYear()},z:function(e){var t=e.getTimezoneOffset(),n=o(0|Math.abs(t/60),0),r=o(t%60,0);return(t>0?"-":"+")+n+r},l:function(e,t,n){var r=e.getHours()%12;return o(0===r?12:r,n," ")},s:function(e){return e.getTime()/1e3|0},"%":function(){return"%"},v:function(e,t){var n=new Date,r=e.getTime()+6e4*e.getTimezoneOffset(),i=n.getTime()+6e4*n.getTimezoneOffset(),o=Math.ceil((r-i)/6e4/60/24)+1;return s.day[o]?a(s.day[o],t):"%d %"+t+"B"},Date_iso:function(){return"%Y-%m-%dT%H:%M:%S"},Date_dBY_year_in_HM:function(){return s.Date_dBY_year_in_HM},Date_dBY_year:function(){return s.Date_dBY_year},Date_dBY:function(){return s.Date_dBY},Date_dBA:function(){return s.Date_dBA},Date_AdBY:function(){return s.Date_AdBY},Date_df_in_HM:function(){return s.Date_df_in_HM},Date_dfY:function(){return s.Date_dfY},Date_dB_in_HM:function(){return s.Date_dB_in_HM},Date_dmY__dot:function(){return"%d.%m.%Y"},Date_dB:function(){return s.Date_dB},Date_df:function(){return s.Date_df},Date_FT:function(){return"%F %T"},Date_dmY__minus:function(){return"%d-%m-%Y"},Date_dm__dot:function(){return s.Date_dm__dot},Date_HM__colon:function(){return s.Date_HM__colon},Date_today_at_HM:function(){return s.Date_today_at_HM},Date_dmy_at_HM:function(){return s.Date_dmy_at_HM},Date_db_in_HM:function(){return s.Date_db_in_HM},Date_db:function(){return"%-d %#b"},Date_dmy__dot:function(){return s.Date_dmy__dot}};e.exports=r},function(e,t){e.exports={a:i18n("%@wd_short_capital"),A:i18n("%@wd"),b:i18n("%@months_short_capital"),B:i18n("%@months_nominative"),f:i18n("%@months_short"),c:"%Y-%m-%d %H:%M:%S",P:i18n("%@date_semiday"),r:"%I:%M:%S %p",x:"%m/%d/%y",X:"%H:%M:%S",day:i18n("%@date_user_day"),Bg:i18n("%@months_genitive"),bg:i18n("%@months_short_capital_genitive"),fg:i18n("%@months_short_genitive"),Date_dBY_year_in_HM:i18n("%Date_Format_dBY_year_in_HM"),Date_dBY_year:i18n("%Date_Format_dBY_year"),Date_dBY:i18n("%Date_Format_dBY"),Date_AdBY:i18n("%Date_Format_AdBY"),Date_dBA:i18n("%Date_Format_dBA"),Date_df_in_HM:i18n("%Date_Format_df_in_HM"),Date_dfY:i18n("%Date_Format_dfY"),Date_dB_in_HM:i18n("%Date_Format_dB_in_HM"),Date_dB:i18n("%Date_Format_dB"),Date_df:i18n("%Date_Format_df"),Date_dm__dot:i18n("%Date_Format_dm__dot"),Date_HM__colon:i18n("%Date_Format_HM__colon"),Date_today_at_HM:i18n("%Date_Format_today_at_HM"),Date_dmy_at_HM:i18n("%Date_Format_dmy_at_HM"),Date_db_in_HM:i18n("%Date_Format_db_in_HM"),Date_dmy__dot:i18n("%Date_Format_dmy__dot")}},function(e,t){!function(){var e=function(){var e=Date.UTC.apply(this,arguments);this._utcDate=new Date(e)},t=function(){};t.prototype=Date.prototype,e.prototype=new t,e.prototype.constructor=e,e.parseISOTime=function(t){var n=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/,r=t.match(n);return new e(r[1],r[2]-1,r[3],r[4]||0,r[5]||0,r[6]||0,r[7]||0)},e.parseDate=function(t){var n=/^(\d{4})-(\d{2})-(\d{2})$/,r=String(t).match(n);return new e(r[1],r[2]-1,r[3],0,0,0,0)},e.completeDigit=function(e){if(Math.abs(e)<10){return(e<0?"-":"")+"0"+e}return String(e)},e.convertDate=function(t){return new e(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())};var n=function(t){var n,r=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],i=r.length;for(n=0;n<i;n++){var o=r[n],a=t+o,s=t+"UTC"+o;!function(t){e.prototype[a]=function(){return this._utcDate[t].apply(this._utcDate,arguments)}}(s)}};n("get"),n("set"),e.prototype.getTime=function(){return this._utcDate.getTime()},e.prototype.toString=function(){return this.toISOString()},e.prototype.toISOString=function(){return this.getFullYear()+"-"+e.completeDigit(this.getMonth()+1)+"-"+e.completeDigit(this.getDate())+"T"+e.completeDigit(this.getHours())+":"+e.completeDigit(this.getMinutes())+":"+e.completeDigit(this.getSeconds())},Jane.Date.LocalDate=e}()},function(e,t){!function(){"use strict";Jane.DOM={};var e=Jane.DOM;e.BLOCK_NODES=["ADDRESS","BLOCKQUOTE","CENTER","DIV","FIELDSET","FORM","H1","H2","H3","H4","H5","H6","HR","ISINDEX","MENU","OL","P","PRE","TABLE","UL"],e.classRemove=function(e,t){if(1===e.nodeType){var n=Array.prototype.slice.call(arguments);if(n.shift(),!Modernizr.classlist||n.length>1&&!Modernizr["classlist-second-arg"]){for(var r,i=e.className?(" "+e.className+" ").replace(Jane.String.REG.CLASS_SEP," "):"",o=!1,a=0;r=n[a++];)for(;-1!==i.indexOf(" "+r+" ");)i=i.replace(" "+r+" "," "),o=!0;o&&(e.className=i.trim())}else e.classList.remove.apply(e.classList,n)}},e.classAdd=function(e,t){if(1===e.nodeType){var n=Array.prototype.slice.call(arguments);if(n.shift(),!Modernizr.classlist||n.length>1&&!Modernizr["classlist-second-arg"]){for(var r,i=e.className?(" "+e.className+" ").replace(Jane.String.REG.CLASS_SEP," "):" ",o=!1,a=0;r=n[a++];)-1===i.indexOf(" "+r+" ")&&(i+=r+" ",o=!0);o&&(e.className=i.trim())}else e.classList.add.apply(e.classList,n)}},e.classToggle=function(t,n){1===t.nodeType&&(t.classList&&t.classList.toggle?t.classList.toggle(n):e.classContains(t,n)?e.classRemove(t,n):e.classAdd(t,n))},e.classContains=function(e,t){return 1===e.nodeType&&(e.classList?e.classList.contains(t):-1!==(" "+e.className+" ").replace(Jane.String.REG.CLASS_SEP," ").indexOf(" "+t+" "))},e.hasAttribute=function(e,t){var n=e.nodeType;return 3!==n&&8!==n&&2!==n&&e.hasAttribute(t)},e.isEmptyText=function(e){return Jane.String.REG.NON_PRINTERED_CHARS.test(e)},e.isEmptyTextNode=function(t){return 3===t.nodeType&&e.isEmptyText(t.nodeValue)},e.isEmptyPreNode=function(t){var n=t.childNodes.length;return 1===t.nodeType&&"PRE"===t.nodeName&&(0===n||1===n&&e.isEmptyTextNode(t.firstChild))},e.isBr=function(e){return 1===e.nodeType&&"BR"===e.nodeName},e.isDiv=function(e){return 1===e.nodeType&&"DIV"===e.nodeName},e.isBlockquote=function(e){return 1===e.nodeType&&"BLOCKQUOTE"===e.nodeName},e.isBlockNode=function(t){return 1===t.nodeType&&-1!==e.BLOCK_NODES.indexOf(t.nodeName)},e.isNewlineNode=function(t){return 1===t.nodeType&&(-1!==["BR","HR","IMG"].indexOf(t.nodeName)||e.isBlockNode(t))},e.isParent=$.contains,e.insertBefore=function(e,t){return e.parentNode.insertBefore(t,e)},e.insertAfter=function(e,t){return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)},e.removeNode=function(e){if(e.parentNode)return e.parentNode.removeChild(e)},e.replaceNode=function(e,t){return!(!e||!e.parentNode)&&(e.parentNode.replaceChild(t,e),!0)},e.passByParents=function(t,n,r){r=r||t.ownerDocument;for(var i=t.parentNode;i&&i!==r&&e.isParent(r,i);){if(!n(i))return!1;i=i.parentNode}return!0},e._preventEventHandler=function(e){e.preventDefault(),e.stopPropagation()},e.preventClicks=function(t){t.addEventListener("click",e._preventEventHandler),t.addEventListener("contextmenu",e._preventEventHandler)},e._urlClickHandler=function(t,n){window.open(t,"_blank"),e._preventEventHandler(n)},e.setUrlClickHandler=function(t,n){t.addEventListener("click",e._urlClickHandler.bind(null,n))},e._testTextWrap=function(t,n){return 3===t.nodeType?!!Jane.String.REG.NON_EMPTY_STRING.test(t.nodeValue)||void 0!==n&&(n&&t.previousSibling?e._testTextWrap(t.previousSibling):!(n||!t.nextSibling)&&e._testTextWrap(t.nextSibling)):!e.isNewlineNode(t)},e.bubblingDivContent=function(t,n){if(!t.hasChildNodes())return t;n=n||function(){return!0};for(var r,i,o,a,s,u,c,l,f,d=[t.firstChild],h=t.ownerDocument.createElement("br");r=d.shift();){if(s=[],i=r.nextSibling,u=r.parentNode,e.isDiv(r))if(l=n(r),f=r.hasChildNodes(),l&&u){if(o=r.previousSibling,o&&o!==a&&e._testTextWrap(o,!0)&&(a=o,u.insertBefore(h.cloneNode(!1),r)),f)for(;r.firstChild;)c=i?u.insertBefore(r.firstChild,i):u.appendChild(r.firstChild),e.isDiv(c)&&s.push(c);i&&e._testTextWrap(i,!1)&&u.insertBefore(h.cloneNode(!1),i),u.removeChild(r)}else if(f){c=r.firstChild;do{e.isDiv(c)&&s.push(c)}while(c=c.nextSibling)}i&&-1===d.indexOf(i)&&s.push(i),d=s.concat(d)}return h=null,t},e.eachBefore=function(t,n,r){var i,o;do{if(r&&!e.isParent(r,t))return;for(i=t;i=i.previousSibling;)if(void 0!==(o=e.eachInnerPrevious(i,n))&&!o)return!1}while(t=t.parentNode)},e.eachBeforeText=function(t,n,r){var i="",o=/[\n\r]+/g;e.eachBefore(t,function(t){return 3===t.nodeType?i=t.nodeValue.replace(o," ")+i:e.isNewlineNode(t)&&(i="\n"+i),!n||n(t,i)},r)},e.eachAfter=function(t,n,r){var i,o;do{if(r&&!e.isParent(r,t))return;for(i=t;i=i.nextSibling;)if(void 0!==(o=e.eachInnerFollowing(i,n))&&!o)return!1}while(t=t.parentNode)},e.eachInnerFollowing=function(e,t){for(var n,r,i,o=[e];n=o.pop();){if(void 0!==(r=t&&t(n,o))&&!r)return!1;if("next"!==r&&(1===n.nodeType&&n.hasChildNodes()))for(i=n.childNodes.length;i--;)o.push(n.childNodes[i])}return!0},e.eachInnerFollowingText=function(t,n){var r="",i=/[\n\r]+/g,o=t.ownerDocument.createElement("br");e.eachInnerFollowing(t,function(a,s){return a===t||(3===a.nodeType?r+=a.nodeValue.replace(i," "):e.isNewlineNode(a)&&(a.hasChildNodes()?(a.previousSibling&&e._testTextWrap(a.previousSibling,!0)&&(r+="\n"),a.nextSibling&&s.push(o.cloneNode(!1))):r+="\n"),!n||n(a,r))}),o=null},e.eachInnerPrevious=function(e,t){for(var n,r,i,o,a=[e];n=a.pop();){if(void 0!==(r=t&&t(n,a))&&!r)return!1;if("next"!==r&&(1===n.nodeType&&n.hasChildNodes()))for(o=n.childNodes.length,i=0;i<o;i++)a.push(n.childNodes[i])}return!0},e.removeEmptyNodeBefore=function(t,n,r){for(var i,o,a,s,u,c;t;){if(r&&!e.isParent(r,t))return!0;for(i=t.previousSibling,t=t.parentNode;i;)for(o=[i],i=i.previousSibling;u=o.pop();)if(3!==u.nodeType){if(void 0!==(c=n&&n(u))&&!c)return!1;if("next"!==c)if(u.hasChildNodes())for(s=u.childNodes.length,o.push(u),a=0;a<s;a++)o.push(u.childNodes[a]);else u.parentNode.removeChild(u)}else{if(!e.isEmptyTextNode(u))return;u.parentNode.removeChild(u)}}return!0},e.removeEmptyNodeAfter=function(t,n,r){for(var i,o,a,s,u;t;){if(r&&!e.isParent(r,t))return!0;for(i=t.nextSibling,t=t.parentNode;i;)for(o=[i],i=i.nextSibling;s=o.pop();)if(3!==s.nodeType){if(void 0!==(u=n&&n(s))&&!u)return!1;if("next"!==u)if(s.hasChildNodes())for(a=s.childNodes.length,o.push(s);a--;)o.push(s.childNodes[a]);else s.parentNode.removeChild(s)}else{if(!e.isEmptyTextNode(s))return;s.parentNode.removeChild(s)}}return!0},e.refineNode=function(e,t){for(var n,r,i=[e];i.length;){if(n=i.pop(),n.hasChildNodes())for(r=n.childNodes.length;r--;)i.push(n.childNodes[r]);n.nodeType===n.ELEMENT_NODE?Array.isArray(t)&&function(e,t){t.forEach(function(t){e.removeAttribute(t)})}(n,t):Jane.DOM.removeNode(n)}},e.createRefinedNode=function(e,t){var n=e.cloneNode(!0);return this.refineNode(n,t),n},e.deleteRangeContents=function(t,n){if(t.compareDocumentPosition){var r=t.compareDocumentPosition(n);if(r&&r!==Node.DOCUMENT_POSITION_FOLLOWING)return!1}else if(e.isParent(t,n)||e.isParent(n,t))return!1;if(t===n)return t.parentNode.removeChild(t),!0;var i=function(){for(var r,i,o,a=t;a;)for(i=a,r=a.nextSibling,a=a.parentNode,i.childNodes.length&&i!==t||i.parentNode.removeChild(i);r;){if(i=r,r=r.nextSibling,i===n)return i.parentNode.removeChild(i),!0;if(e.isParent(i,n)){o=i;break}i.parentNode.removeChild(i)}return o}();if(!i)return!1;if(!0===i)return!0;for(var o,a,s,u=n;(o=u.parentNode)&&(s=u.previousSibling,u!==i);)for(u.childNodes.length&&u!==n||u.parentNode.removeChild(u),u=o;s;)a=s.previousSibling,s.parentNode.removeChild(s),s=a;return!0},e.scrollIntoView=function(e,t){t=t||{},Modernizr.mozilla>=36?e.scrollIntoView(t):e.scrollIntoView("start"===t.block)},e.placeInViewport=function(e,t,n,r){var i=$(e);t=t||{},n=n||{nodePositionBelow:"bottom",nodePositionAbove:"top"},r=r||window;var o=$(r),a=i.offset().top,s=a+i.outerHeight(),u=o.scrollTop();s>u+o.height()?this._scrollToViewportEdge(e,t,n.nodePositionBelow,r):a<u&&this._scrollToViewportEdge(e,t,n.nodePositionAbove,r)},e._scrollToViewportEdge=function(e,t,n,r){"top"===n?this._scrollToViewPortTop(e,t,r):"bottom"===n&&this._scrollToViewPortBottom(e,t,r)},e._scrollToViewPortTop=function(e,t,n){var r=$(n||window);e.scrollIntoView(),t&&t.top&&r.scrollTop(r.scrollTop()-t.top)},e._scrollToViewPortBottom=function(e){e.scrollIntoView(!1)}}()},function(e,t){Jane.watcher={_watches:{},_checking:{}},ns.events.on("watcher.check",function(e,t){Jane.watcher.set(t),delete Jane.watcher._checking[t]}),Jane.watcher.$=function(e){var t=this._watches[e];return t||(t=this._watches[e]={checklist:{},deps:[]}),t},Jane.watcher.watch=function(e,t){t=$.extend(this.$(e),t);var n=this;return $.each(t.deps,function(t,r){n.$(r).checklist[e]=1}),t.debug&&(ns.events.off(e+".change",Jane.watcher._debug),ns.events.on(e+".change",Jane.watcher._debug)),t},Jane.watcher._debug=function(e,t){console.log(e,": ",t.oldValue," -> ",t.value)},Jane.watcher.set=function(e,t,n){var r=this.$(e);n=n||{};var i=n.lock,o=n.force;if(!r.locked||void 0!==i){void 0!==i&&(r.locked=i);var a=r.value;void 0===t&&r.get&&(t=r.get()),void 0===t&&(t=r.value),r.value=t,n.silent||this._compare(e,t,a,o)}},Jane.watcher._compare=function(e,t,n,r){var i=this.$(e);if(i.strict&&t!==n||t!=n||r){var o={value:t,oldValue:n};ns.events.trigger(e+".change",o,!0);var a=this;$.each(i.checklist,function(e){a.check(e)})}},Jane.watcher.check=function(e){var t=this._checking;t[e]||(t[e]=!0,ns.events.trigger("watcher.check",e,!0))},Jane.watcher.get=function(e){return this.$(e).value}},function(e,t){Jane.watcher.watch("pageKey"),Jane.watcher.watch("selectedCount"),Jane.watcher.watch("selected",{get:function(){return Daria.is3pane()&&ns.page.current.params.ids||"message"===ns.page.current.page||"compose"===ns.page.current.page||Jane.watcher.get("selectedCount")>0},deps:["selectedCount","pageKey"],value:!1})},function(e,t){!function(){function e(e){var n=e.target;if(e.target&&"IMG"===e.target.tagName){for(var r=[t(n)],i=15,o=n.src;n.parentNode&&i;)n=n.parentNode,r.unshift(t(n)),i--;r=r.join(" "),Jane.ErrorLog.send({errorType:"imgError",selector:r,src:o})}}function t(e){var t=e.tagName||"";return e.id&&(t+="#"+e.id),e.className&&(t+="."+e.className.replace(/\s+/g,".")),t}document.addEventListener&&document.addEventListener("error",e,!0)}()},function(e,t){Jane.Services.__needUpdate=!1,Jane.Services.__updateTimer=null,Jane.Services.hasNewVersion=function(){return this.__needUpdate},Jane.Services.setActualVersion=function(e){if(e&&e!==Daria.Config.version)return this.__updateTimer||(this.__updateTimer=window.setTimeout(function(){this.__needUpdate=!0}.bind(this),12e4)),!0}},function(e,t){window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)}},function(e,t){!function(){Daria.createDelayedIdleCallback=function(e,t){var n,r,i,o=function(){return window.requestIdleCallback(function(n){r=null;var o;if(n.didTimeout)o=e();else if("once"===t.runMode)o=e();else if("max"===t.runMode)for(o=!0;n.timeRemaining()>0&&o;)o=e();o&&i()},{timeout:t.idleTimeout})};return i=function(){n||r||(n=setTimeout(function(){n=null,r=o()},t.delay))},i.cancel=function(){r&&(window.cancelIdleCallback(r),r=null),n&&(clearTimeout(n),n=null)},i.forceExecute=function(){var n=t.forcedExecutionLoopLimit||100;this.cancel();for(var r=!0;r&&n--;)r=e();r&&Jane.ErrorLog.send({errorType:"Daria.createDelayedIdleCallback.forceExecute.loopLimitExceeded",callbackName:t.logName})},i}}()},function(e,t){$(window).on("beforeunload",function(){var e=Daria.addUnloadText._texts=[];if(ns.events.trigger("beforeunload"),e.length)return e.join("\n")}),Daria.addUnloadText=function(e){var t=Daria.addUnloadText._texts;e&&$.isArray(t)&&t.push(e)}},function(e,t){!function(e,t){function n(t){var n=null;return t&&(n=t.getBoundingClientRect(),null==n.width&&(n=e.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}))),n}function r(){var e=t.urlParams.debugClientPromoDate;if("string"!=typeof e)return null;if(e=e.replace(" ","+"),!i.test(e))return null;var n=Date.parse(e);return n||null}var i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})([+\-](\d{2}):(\d{2}))?$/;e.fn.rect=function(){return n(this[0])},t.Dimensions={rect:n},t._getModelsJsonView=function(t,n,r){return e.isPlainObject(r.models)||(r.models={}),t=Array.isArray(n)?t.map(function(t,r){return e.isPlainObject(n[r])?{model:t,params:n[r]}:{model:t}}):t.map(function(e){return{model:e,params:n}}),t.forEach(function(e){r.models[e.model]={status:"ok"},r.models[e.model][e.model]=ns.Model.get(e.model,e.params).getData()}),r},Jane.tt=function(e,n,r,i){i=i||{},n=n||{};var o,a,s=e.split(":");1===s.length?(o=e,a="common"):(a=s[0]||"common",o=s.slice(1).join(":")||""),Array.isArray(r)&&r.length&&(n=t._getModelsJsonView(r,i,n)),t.DEBUG&&console.log("Jane.tt:",'mode="'+e+'"','-> module="'+a+'"','mode="'+o+'"',"data=",n);var u=document.createElement("div");try{return u.innerHTML=yr.run(a,n,o),u.firstChild}catch(e){return Jane.ErrorLog.sendException("yate.run",e,{"yate-mode":o,"yate-module":a}),t.loaded||""!==o||Jane.onFatalError("yate.run"),u}},Jane.extend=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superClass=t.prototype,t.prototype.constructor===Object.prototype.constructor&&(t.prototype.constructor=t)},t.extend=Jane.extend,Jane.extendClass=function(e){var t=function(){e.apply(this,arguments)};return Jane.extend(t,e),t},t.augment=function(e,t){for(var n in t)e[n]||(e[n]=t[n])},t._timestampDelta=0,t._debugClientPromoTimestamp=0,t.now=function(n){var r=e.now()-t._timestampDelta;return n?new Date(r):r},t.passportNow=function(){var e=t.timify({minutes:(new Date).getTimezoneOffset()-t.tz_offset});return t.now()+e},t.promoNow=function(){return 0===t._debugClientPromoTimestamp&&(t._debugClientPromoTimestamp=r()),t._debugClientPromoTimestamp||t.now()},t.array2obj=function(t,n){n=!(arguments.length>1)||n;var r={};return e.each(t,function(e,t){r[t]=n}),r},t.lowerifyObjectKeys=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);return t},t.parseKeys=function(e){for(var t,n=String(e).split(","),r={},i=0;i<n.length;i++)t=n[i].split("="),r[t[0]]=t[1];return r},t.parseQuery=function(t){t=t||"";for(var n=t.split("&"),r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.shift();if(a){var s=o.join("=");try{s=decodeURIComponent(s)}catch(e){s=/%\D/.test(s)?s:""}a in r?e.isArray(r[a])?r[a].push(s):r[a]=[r[a],s]:r[a]=s}}return r},t.post=function(t,n){var r=e("<form/>").attr({action:t,method:"post"});e.each(n,function(t,n){var i=e('<input type="hidden" name="'+t+'" value="'+n+'"/>');r.append(i)}),e("body").append(r),r[0].submit()},t.numInflict=function(t,n){var r,i=t%10,o=t%100;return r=o>=5&&o<=20?"many":1===i?"one":i>=2&&i<=4?"two":"many",r=n[r],e.isFunction(r)?r(t,r):r},t.setSelection=function(e,t,n){if(t=t||0,n=n||t,e.setSelectionRange)e.setSelectionRange(t,n);else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}},t.getSelection=function(e){var t,n,r,i,o,a=0,s=0;try{e.selectionStart&&e.selectionEnd?(a=e.selectionStart,s=e.selectionEnd):(n=document.selection.createRange())&&n.parentElement()===e&&(i=e.value.length,t=e.value.replace(/\r\n/g,"\n"),r=e.createTextRange(),r.moveToBookmark(n.getBookmark()),o=e.createTextRange(),o.collapse(!1),r.compareEndPoints("StartToEnd",o)>-1?a=s=i:(a=-r.moveStart("character",-i),a+=t.slice(0,a).split("\n").length-1,r.compareEndPoints("EndToEnd",o)>-1?s=i:(s=-r.moveEnd("character",-i),s+=t.slice(0,s).split("\n").length-1)))}catch(e){return{start:0,end:0}}return{start:a,end:s}},t.supplant=function(e,t,n){return e.replace(/{([^{}]*)}/g,function(e,r){var i;if(r.indexOf(":")>=0){var o=r.split(/:|\|/),a=o[0];if(!a)return e;if("number"!=typeof(i=t[a]))return e;var s=i%10,u=i%100;return 1===s&&11!==u?o[1]:s>1&&s<5&&(u<10||u>20)?o[2]:o[3]}return i=t[r],"string"==typeof i||"number"==typeof i?n?String(i):_.escape(String(i)):e})},t.getRandomNumber=function(){return Math.round(1e6*Math.random())},t.randomInteger=function(e,t,n){var r=e+Math.random()*(t+1-e);return r=Math.floor(r),r===n&&(r=r+1>=t?r-1:r+1),r},t.getRandomString=function(){return Math.random().toString(36).substr(2)},t.capitalize=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},t.click=function(e,t){if(e.attr("data-click-action")||e.attr("action")){var n=jQuery.Event("click");return t&&t.keyCode&&(n.keyCode=t.keyCode),e.trigger(n),!0}var r=e.attr("href");return!!r&&(window.location.href=r,!0)},Jane.doLogin=function(n,r){Jane.ErrorLog.send({event:"doLogin",from:n||""}),ns.events.trigger("noauth",r),t.Dialog.close(),e(document).trigger("b-mail-dropdown-closeall"),t.Config["social-host"]?e.ajax({timeout:2e3,dataType:"jsonp",url:t.Config["social-host"]+"/providers.jsonp",success:function(e){t.AuthDialog(e,r)},error:function(){t.AuthDialog(null,r)}}):t.AuthDialog(null,r)},t.removeDropdowns=function(t){e(t).find(".b-mail-dropdown").each(function(){var t=e(this),n=t.data("dropdown-content");n&&e(n).remove(),t.removeData("dropdown-content")})},t.invalidateMailHandlers=function(e,n){t.DEBUG&&console.log("[Daria]","invalidateMailHandlers by",n);var r=["filter-search","message-thread-nearest","message-nearest","messages-pager"];ns.Model.invalidateAll(r),e&&ns.Model.traverse("messages-checked",function(e){e.resetChecked()});var i=ns.Model.get("messages",ns.page.current.params);i.isFakeMessages()&&(i=ns.Model.get("messages",_.extend({allow_empty:!0},ns.page.current.params)));var o=[];"yes"===i.params.threaded&&(o=i.models.map(function(e){return e.getThreadId()})),ns.Model.invalidate("messages",function(e){return e.params.thread_id?!_.includes(o,e.params.thread_id):e!==i}),ns.forcedRequest(["folders","labels"],ns.page.current.params),!i.isUnreadMessagesCollection()||"xiva.invalid_lcn"!==n&&"xiva.lcn_changed_after_offline"!==n?i.refresh():i.loadMore(!0)},t.regexpEscape=function(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}}(jQuery,Daria),function(){function e(e){e.source===window&&e.data===n&&(e.stopPropagation(),t.length&&t.shift()())}var t=[],n='{ "message": "zero-timeout" }';Daria.setZeroTimeout=function(e){t.push(e),window.postMessage(n,"*")},window.addEventListener("message",e,!0)}(),Daria.isRegion=function(e){var t=e;_.isArray(e)||(t=[e]),t=_.map(t,function(e){return String(e)});var n=Daria.Config.region_parents;return Daria.getCookie("yandex_gid")&&(n=n.concat(Daria.getCookie("yandex_gid"))),_.intersection(n,t).length>0},Jane.getHumanSize=function(e){var t=parseInt(e,10);if(isNaN(t))return"";var n,r,i=i18n("%File_size");return t<128?(n=t,r=i[0]):t<1048576?(n=t/1024,r=i[1]):t<1073741824?(n=t/1048576,r=i[2]):(n=t/1073741824,r=i[3]),n=n<10?Math.round(10*n)/10:Math.round(n),(n=n.toString().replace(".",","))+" "+r},Jane.getAbsoluteUrl=function(e,t){if(/^(?:https?:)?\/\//.test(e))return e;if(/^\//.test(e)&&t){var n=/^(https?:\/\/[^\/]*)(?:\/|$)/.exec(t);if(n)return n[1]+e}else if(t){var r=/^(.*\/)[^\/]*$/.exec(t);if(r)return r[1]+e}return null},Jane.locate=function(e){window.location=e||"/"},Daria.forceNodeReflow=function(e){Modernizr.opera&&!Modernizr.webkit||e.offsetHeight},Daria.isCtrlPressed=function(e){if(!e)return!1;var t=e.originalEvent&&e.originalEvent.key;return e.ctrlKey||e.metaKey||"Control"===t},Daria.isLeftClickWithCtrl=function(e){var t=Modernizr.mac?"metaKey":"ctrlKey";return 1===e.which&&e[t]},Daria.isLeftButton=function(e){return 1===e.which&&(!Modernizr.mac||!e.ctrlKey)||Modernizr.msie&&"click"===e.type&&0===e.which},Daria.isMiddleButton=function(e){return 2===e.which},Daria.is3pane=function(){return"2pane"!==Daria.Config.layout},Daria.is3pv=function(){return"3pane-vertical"===Daria.Config.layout},Daria.is3ph=function(){return"3pane-horizontal"===Daria.Config.layout},Daria.is2pane=function(){return"2pane"===Daria.Config.layout},Daria.isMessagePage=function(){return"message"===ns.page.current.page},Daria.isMessageOpenedInList=function(){return"messages"===ns.page.current.page&&Daria.Page.isParamsForMessage(ns.page.current.params)},Daria.isComposePage=function(){return"compose2"===ns.page.current.page},Daria.isSettingsPage=function(){return/^setup*/.test(ns.page.current.page)},Daria.isSearchPage=function(){return"search"===ns.page.current.params.search},Daria.isAbookPage=function(){return"abook"===ns.page.current.page},Daria.areTabsVisible=function(){var e=["label","attachments","unread","important"],t=["search","setup","compose","contacts","message","thread"].concat(e),n=!t.some(function(e){return-1!==ns.page.currentUrl.indexOf("#"+e)}),r=ns.Model.get("settings"),i=r.getSign("show_tabs"),o=!r.isCompactHeaderMode(),a=Daria.hasFeature("new-typefilter-tabs"),s=Daria.is2pane();return a&&i&&o&&s&&n},Daria.isPageWithResizableLeftColumn=function(){return!_.startsWith(ns.page.current.page,"setup")&&"abook"!==ns.page.current.page},Daria.goHomePage=function(){window.location.href=window.location.pathname+window.location.search},Daria.toIntFlag=function(e){switch(e){case 1:case"1":case!0:case"true":return 1;default:return 0}},Daria.isInnerMailLinkHostname=function(e){return location.hostname===e},Daria.getPrevPageSearchContext=function(){var e,t=0,n=ns.page.history.getPrevious(t),r=ns.page.current;if(r.params.fromNotification)return null;for(;n&&(e=ns.router(n),"messages"!==e.page||"search"!==e.params.search);)n="message"===r.page&&"message"===e.page&&r.params.ids===e.params.ids?ns.page.history.getPrevious(++t):void 0;if(!n)return null;var i={url:n,page:e},o=e.params.request;if(o){if("rpopinfo"===e.params.scope){var a=ns.Model.get("collectors").getById(o);a&&(o=a.email)}i.request=o}return i},Daria.getThemeId=function(){return ns.Model.get("settings").getSetting("color_scheme")},Daria.hasSid=function(e){return-1!==Daria.SIDS.indexOf(String(e))},Daria.tid2mid=function(e){return"t"===e.charAt(0)?e.substr(1):e},Daria.showPriorityLabel=function(){return!1},Daria.arrangeMatchingFirstInline=function(e,t){ns.assert("function"==typeof t,"Daria.arrangeMatchingFirstInline","matcher should be a function");for(var n=0,r=0;r<e.length;r++)t(e[r])&&(r!==n&&e.splice(n,0,e.splice(r,1)[0]),n++);return e},Daria.getParamsHash=function(e){return e=e||{},Object.keys(e).sort().map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")},Daria.getUrlParams=function(){for(var e,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,r=window.location.search.substring(1),i=function(e){return decodeURIComponent(e.replace(t," "))},o={};e=n.exec(r);)o[i(e[1])]=i(e[2]);return o},Daria.hasFeature=function(e){return Daria.Config.features&&Daria.Config.features[e]},Daria.allowUnsubscribeFiltersPopup=function(){var e=Daria.hasFeature("unsubscribe-filters"),t=Daria.hasSid("669");return e||t},Daria.showUnsubscribePromoFolder=function(){var e=ns.Model.get("settings"),t=e.isSet("create-u-filters-once"),n=e.isSet("show-u-promo-folder");return Daria.allowUnsubscribeFiltersPopup()&&t&&!n},Daria.showGoToThreadControl=function(){return Daria.IS_CORP&&Daria.is3pane()&&Daria.isSearchPage()&&ns.Model.get("settings").isThreaded()}},function(e,t){!function(e){e.Metric={},e.Metric.getPath=function(e){var t=ns.page.current.params,n=ns.Model.get("messages",t);if(t){if(t.current_folder){var r=ns.Model.get("folders").getFolderById(t.current_folder)||{};return r?r.user?["Пользовательская папка",r.name]:[r.name]:["Без папки"]}if(t.search)return e&&n.isSearchTopResult(e.get(".mid"))?["Поиск Top Results"]:["Поиск"];if(t.important)return["Фильтр Важные"];if(t.unread)return["Фильтр Непрочитанные"];if(t.attachments)return["Фильтр С вложениями"];if(t.current_label){var i=ns.Model.get("labels"),o=i.getWaitingForReplyLabel();return t.current_label===o.lid?["Фильтр Ждут Ответа"]:["Метки"]}return["Без папки"]}return["Без папки"]}}(Daria)},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){e.contextHelpPages={RUS:{message:1113120,contacts:1113487,compose:1113122,trash:1113223,search:1113140,spam:1113148,setup:{interface:1113091,sender:1113397,collectors:1113142,security:1113446,folders:1113138,filters:1113121,"filters-create":1113121,abook:1113487,chat:1113272,client:1113199,journal:1113469,todo:1124708}},TUR:{message:1121442,contacts:1121408,compose:1121420,search:1121447,spam:1121451,setup:{interface:1121406,sender:1121429,collectors:1121433,security:1121453,folders:1121445,filters:1121443,"filters-create":1121443,abook:1121408,client:1118704,journal:1121407}},INT:{message:1114243,contacts:1114216,compose:1114252,trash:1114276,search:1114248,spam:1114262,setup:{interface:1114213,sender:1114258,collectors:1114250,folders:1114245,filters:1114244,"filters-create":1114244,abook:1114216,security:1114267,client:1114232,journal:1114215}}};var t;ns.events.on("help-link.forceUpdate",function(e,n){void 0===n&&(n=t||"")}),ns.events.on("ns-page-after-load",function(){var r=ns.page.current.page,i=ns.page.current.params,o=e.contextHelpPages;o=o&&o[Daria.Config.product]?o[Daria.Config.product]:{};var a,s=0,u=ns.Model.get("folders");if(o&&o[r]&&(a=o[r],s="object"==(void 0===a?"undefined":n(a))?a[i.tab]||0:a),"messages"===r&&"search"===i.search)s=o.search;else if(i.current_folder)for(var c=i.current_folder,l=["spam","trash"],f=0,d=l.length;f<d;f++)if(u.isFolder(c,l[f])){s=o[l[f]];break}var h=Daria.Config["pdd-custom-help"];h||(h="/mail/"+(s?"?id="+s:"")),t=h})}(Jane)},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Daria.getCookie=function(e,t){if(!e)return!1;var n=" "+_.escape(document.cookie);if(n.length<2)return!1;var r=n.indexOf(" "+e)+1;if(0===r)return!1;if(r+=e.length+1,";"===n.charAt(r-1))return"";var i,o=n.indexOf(";",r);return i=o>0?n.substr(r,o-r):n.substr(r),t?i:decodeURIComponent(i)},Daria.delCookie=function(e){Daria.setCookie(e,"",-1)},Daria.setCookie=function(e,t,r){if(void 0===r?r={}:"object"!=(void 0===r?"undefined":n(r))&&(r={duration:parseInt(r,10)||0}),"dont_encode"in r||(t=encodeURIComponent(t)),r.path&&(t+="; path="+r.path),r.domain&&(t+="; domain="+r.domain),r.expires)t+="; expires="+r.expires;else if(r.duration){var i=new Date;i.setTime(i.getTime()+864e5*r.duration),t+="; expires="+i.toGMTString()}document.cookie=e+"="+t}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function i(e){return decodeURIComponent(e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Daria.yCookie={getExpirationDate:function(e){return Math.round(Date.now()/1e3+24*e*60*60)},getDefaultYpCookieParams:function(){return{expires:new Date("Tue Jan 1 00:00:00 2038").toGMTString(),domain:".yandex."+Daria.Config["domain-options"].domain,path:"/"}},ypRead:function(){for(var e=Daria.getCookie("yp",!0),t=e?e.split("#"):[],n=new Date/1e3,r={},o=0,a=t.length;o<a;o++){var s=t[o].split("."),u=s[0],c=s[1],l=s.slice(2).join(".");u>n&&(r[c]={value:i(l),expires:u})}return r},ypWrite:function(e){for(var t,n=[],i=0,o=Object.keys(e),a=o.length;i<a;i++)t=e[o[i]],n.push([t.expires,o[i],!1===t.encode?t.value:r(t.value)].join("."));Daria.setCookie("yp",n.join("#"),Object.assign({dont_encode:!0},this.getDefaultYpCookieParams()))},ypRemove:function(e){var t=this.ypRead();e&&t[e]&&(delete t[e],this.ypWrite(t))},ypHas:function(e){var t=this.ypRead();return e&&t[e]},yp:function(e,t,n){var r={};"object"===(void 0===e?"undefined":o(e))&&(r=e,e=r.name,t=r.value,n=r.expires);var i=this.ypRead(),a=i[e];return void 0===t?a&&a.value:(a||(a={}),a.value=t,a.expires=n||a.expires||this.getExpirationDate(7),a.encode=r.encode,i[e]=a,this.ypWrite(i))}}},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){function e(e){for(var t=e.pop();e.length;)t=n({},e.pop(),t);return t}function t(e){if(!Array.isArray(e))return[e];for(var t=[];e.length;)t=t.concat(e.shift());return t}Daria.metrikaGroup={_paramsQueue:[],addCount:function(n){this._paramsQueue.push(e(t(n))),this._sendParamsOnIdle()},addGroupedCount:function(e){this._paramsGrouper.push(t(e)),this._sendParamsOnIdle()},sendAllImmediate:function(){this._sendParamsOnIdle.forceExecute()},_sendParamsOnIdle:Daria.createDelayedIdleCallback(function(){return Daria.metrikaGroup._sendParamsPortion()},{delay:1e3,idleTimeout:900,runMode:"once",logName:"Daria.metrikaGroup"}),_sendParamsPortion:function(){if(this._paramsGrouper.isEmpty()&&!this._paramsQueue.length)return!1;var e=this._paramsGrouper.release(128),t=128-e.length;128===t?e=this._paramsQueue.splice(0,t):t>0&&(e=e.concat(this._paramsQueue.splice(0,t)));try{Jane.Metrika.counter.params(e)}catch(e){}return!this._paramsGrouper.isEmpty()||Boolean(this._paramsQueue.length)}},Daria.metrikaGroup._paramsGrouper={SPLIT_SYMBOL:"__",_metrikaIds:{},_uniqueParamsCount:0,_groupMaxQuantity:128,push:function(e){var t=this._paramsToString(e);if(Array.isArray(this._metrikaIds[t])){var n=this._metrikaIds[t].length-1;this._metrikaIds[t][n]>=this._groupMaxQuantity?this._metrikaIds[t].push(1):this._metrikaIds[t][n]+=1}else this._metrikaIds[t]=[1],this._uniqueParamsCount+=1},isEmpty:function(){return this._uniqueParamsCount<=0},release:function(e){var t=this,n=[];return this.isEmpty()?n:((!e||e<0||e>this._uniqueParamsCount)&&(e=this._uniqueParamsCount),_.forOwn(this._metrikaIds,function(r,i){if(e<=0)return!1;var o=t._pop(i);if(!o)return!0;n.push(o),e-=1}),n)},_pop:function(e){var t=this._metrikaIds[e];if(!Array.isArray(t)||!t.length)return delete this._metrikaIds[e],null;t.length>1&&t.push(t.pop(),t.pop());var n=this._paramsToObj(e,t.pop());return t.length||(delete this._metrikaIds[e],this._uniqueParamsCount-=1),n},_paramsToString:function(e){return e.join(this.SPLIT_SYMBOL)},_paramsToObj:function(t,n){var r=t.split(this.SPLIT_SYMBOL),i=r.length-1;return n>1&&(r[i]=_.fill(Array(n),r[i])),e(r)}}}()},function(e,t){!function(e){function t(e,t){t=t||["pid","cid","path"];for(var n=[],r=t.length,i=0;i<r;i++){var o=t[i],a=e[i];a&&n.push(o+"="+a)}return n}function n(e,t,n,r,i){var o=Daria.Config["clck-url"]+"/"+e+"/dtype="+n+"/"+t.join("/");return i||(o+="/rnd="+($.now()+Daria.getRandomNumber())),o+="/*"+(r||location.href)}e.c=function(){var e=arguments;return Number(e[0])?Daria.counter(2,e[0],e[1]):r.count.apply(r,e),""},e.groupedCount=function(){var e=arguments;return Number(e[0])?Daria.counter(2,e[0],e[1]):r.groupedCount.apply(r,e),""},Daria.counter=function(e,r,i){e&&r&&((new Image).src=n("click",t(arguments),"stred"))},Daria.searchClickCounter=function(e){(new Image).src=n("click",e,"PS",null,!0)};var r={inited:!1,counts:[],groupedCounts:[],counter:null,init:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;if(!t)return this.clear();var i=setTimeout(function(){r.clear(),e.ErrorLog.send({metrika:"init_timeout"})},1e4);Daria.Libs("Ya.Metrika",function(){n=Object.assign({ut:"noindex",trackLinks:!0,trackHash:!0},n),n.id=t;try{r.counter=window["yaCounter"+t]=new Ya.Metrika(n)}catch(e){return r.clear()}for(clearTimeout(i),r.inited=!0;r.groupedCounts.length;)r.groupedCount.apply(r,r.groupedCounts.shift());for(;r.counts.length;)r.count.apply(r,r.counts.shift());window.addEventListener("beforeunload",function(){Daria.metrikaGroup.sendAllImmediate()},!1)})},count:function(){var e=Array.prototype.slice.call(arguments);if(!this.inited)return this.counts.push(e);Daria.metrikaGroup.addCount(e)},groupedCount:function(){var e=Array.prototype.slice.call(arguments);if(!this.inited)return this.groupedCounts.push(e);Daria.metrikaGroup.addGroupedCount(e)},clear:function(){this.count=$.noop,this.counts=[]}};e.Metrika=r}(Jane)},function(e,t){Daria.Experiments={},Daria.Experiments.useMessagesItemMixins=function(){return!0},Daria.Experiments.showPriorityLabel=function(){return Daria.hasExperiment("35006")||Daria.hasExperiment("35007")}},function(e,t){!function(e,t){function n(e){var t=r[e];return!(!t.status&&!Boolean(t.ref()))||t.status}var r={};t.Libs=function(t,i){"string"==typeof t&&(t=[t]),i=i||_.noop;var o={n:0,libs:{}},a=e(o);if(e.each(t,function(e,t){var i=n(t);i||(r[t].loaders.push(a),o.n++,o.libs[t]=void 0===i)}),!o.n)return i.call();a.on("daria-libs-loaded",function(e,t){if(void 0!==o.libs[t]&&o.n--,!o.n)return i.call()}),e.each(o.libs,function(t,n){var i=r[t];if(n){i.status=!1;var o=i.url;e.getScript(o,function(){e.each(i.loaders,function(e,n){n.trigger("daria-libs-loaded",t)}),i.loaders=null,i.status=!0})}})},t.Libs.add=function(n){e.each(n,function(e,n){if(!(e in r)){r[e]=n;var i=n.url;/^(http|\/)/.test(i)||(n.url=t.Config.staticRoot+"/"+i),n.loaders=[]}})}}(jQuery,Daria)},function(e,t){Daria.lom={},Daria.lom._cache=null,Daria.lom.get=function(){if(!this._cache){try{var e=ns.Model.get("settings");this._cache=JSON.parse(decodeURIComponent(e.getSetting("last_open_msg")||"{}"))}catch(e){}this._cache=_.isPlainObject(this._cache)?this._cache:{}}return this._cache},Daria.lom.getByParams=function(e){if(this._validParams(e)){return this.get()[e.current_folder]}return null},Daria.lom._validParams=function(e){return Daria.messages.params4SimplePath(e)&&!ns.Model.get("folders").isFolder(e.current_folder,["trash","spam","draft","template"])},Daria.lom.save=_.debounce(function(e){if(this._validParams(e)){var t=ns.Model.get("folders"),n=this.get();for(var r in n)t.getFolderById(r)||delete n[r];n[e.current_folder]=e.ids||e.thread_id,ns.Model.get("settings").setSettings({last_open_msg:encodeURIComponent(JSON.stringify(n))})}},500),Daria.lom.deleteFid=function(e){delete this.get()[e]}},function(e,t,n){var r=Daria.Page={hash:null,forceHashChange:null,type:null,key:null,selected:!1,selects:{},params:{},loadingHash:null,specialPages:/^(#inbox|#folder|#sent|#spam|#trash|#draft|#template|#archive|#outbox|#label|#unread|#unsubscribe)($|\W)+/};r.forceReload=function(e){var t=window.location;$(document).off("hashchange"),t.replace(e||t.hash),t.reload()},r.params2query=function(e,t,n){function r(e,t){s++&&(a+="&"),a+=e+"="+t}t=t||{},n=n||{};var i,o,a="",s=0;for(i in e)if("_"!==i.charAt(0)&&!t[i]&&(o=e[i]))if($.isArray(o)&&n.multipleParam)for(var u=0;u<o.length;u++)r(i,o[u]);else r(i,o);return a},r.params2url=function(e,t){t=t||{};var n,i,o=e._page,a={goto:1,search:1,current_label:1,current_folder:1,threaded:1},s=ns.Model.get("folders"),u=s.symbols(),c=e.current_folder||s.getFidBySymbol("inbox"),l="";if("messages"===o){if("all"===e.goto){a.extra_cond=1;var f=e.extra_cond;"only_new"===f?n="#unread":"only_atta"===f?n="#attachments":f||(n="#all")}else"search"===e.search?n="#search":e.current_label?n="#label/"+e.current_label:c&&(i=u[c],n=i?"#"+i:"#folder/"+c);Daria.is3pane()&&e.ids&&(a.ids=1,l="/message/"+e.ids)}else"message"===o&&(a.ids=1,n="#",Daria.is3pane()&&(i=u[c],n+=i?i+"/":"folder/"+c+"/"),n+="message/"+e.ids);var d=r.params2query(e,a,t);return d&&(n+="/"+d),n+l},r.getCurrentCleanUrl=function(){var e=$.extend({},r.params);return delete e.ids,r.params2url(e)},Daria.gotNewMail=0,r.fixEmptyImage=function(e,t){var r=$(e);if(1===r.width()||1===r.height())switch(e.onload=$.noop,t){case"setup-avatar":ns.events.trigger("daria:vSetupAvatar:remove");break;case"message-right":r.parent().addClass("g-hidden error"),ns.events.trigger("message-right.avatar-error",e);break;case"message-right-single":r.attr("src",n(735));break;case"message-right-link":r.attr("src",n(736));break;case"collectors":r.attr("src",n(737));break;case"Link-Earth":var i=r.parent().find(".js-icon-stub:eq(0)");r.remove(),i.removeClass("g-hidden");break;default:r.addClass("g-hidden")}},r.isParamsForSearch=function(e){return"search"in e},r.isParamsForSingleThread=function(e){var t=_.keys(e);return 1===t.length&&"thread_id"===t[0]},r.isParamsForMessage=function(e){return Boolean(e.ids||e.thread_id)},r.generateUrl={},r.generateUrl.closeMessage=function(){var e=_.omit(ns.page.current.params,["ids"]);return Daria.Page.isParamsForSingleThread(e)||delete e.thread_id,ns.router.generateUrl("messages",e)},r.generateUrl.contentMessage2pane=function(e,t){var n=Daria.Page.generateUrl.contentMessageCompose(e,t);if(n)return n;var r,i=_.extend({},t),o=e.mid;if(e.count>1)r="messages",i.thread_id=o;else{if(r="message",this._isFakeThread(e))return this._logFakeThreadErrorOnce(e),"";if(o&&"t"===o.charAt(0)&&o.length>1){var a=ns.Model.get("messages",{thread_id:o});i.ids=a.models[0]&&a.models[0].params.ids||e.last_mid}else i.ids=o}return ns.router.generateUrl(r,i)},r.generateUrl.contentMessage3pane=function(e,t){var n=Daria.Page.generateUrl.contentMessageCompose(e,t);if(n)return n;if(this._isFakeThread(e))return this._logFakeThreadErrorOnce(e),"";var r,i=_.extend({},t),o=ns.page.current.params,a=ns.Model.get("folders"),s=e.mid,u=e.count>1||e.tid===e.mid;return o.current_folder?(r=_.pick(o,["datePager","extra_cond"]),_.assign(i,r)):o.current_label?i.current_label=o.current_label:"search"===o.search?_.extend(i,o):o.thread_id?i.thread_id=o.thread_id:o.category&&(r=_.pick(o,["datePager","extra_cond","category"]),_.assign(i,r)),(o.attachments||o.unread)&&no.extend(i,o),u?i.thread_id=s:i.ids=s,"setup"===ns.page.current.page&&(i.current_folder=e.fid),!this._hasFolder(i)&&this._isMessagesPageWithFolder(o)&&(this._fixFolderInParams(i,o.current_folder,e),this._hasFolder(i)||this._logCurrentFolderLost(a,e)),ns.router.generateUrl("messages",i)},r.generateUrl._hasFolder=function(e){return Boolean(e.current_folder||e.default_folder)},r.generateUrl._isMessagesPageWithFolder=function(e){var t=Boolean(e.category),n="attachments"===e.attachments,r="unread"===e.unread,i="important"===e.important,o="search"===e.search,a=Boolean(e.current_label);return!(t||n||r||i||o||a)},r.generateUrl._fixFolderInParams=function(e,t,n){var r,i=ns.Model.get("folders");t&&(r=i.getFolderById(t)||i.getFolderBySymbol(t)),r||(r=i.getFolderById(n.fid)),r?r.symbol?e.default_folder=r.symbol:e.current_folder=r.fid:(t&&(e.current_folder=t),this._logFolderNotFoundOnce(i))},r.generateUrl._logFolderNotFoundOnce=_.once(function(e){var t=ns.page.current.params;Jane.ErrorLog.send({errorType:"debug.folder-not-found",current_folder:t.current_folder,mFoldersStatus:e.status,mFoldersData:JSON.stringify(e.getData())})}),r.generateUrl._logCurrentFolderLost=function(e,t){Jane.ErrorLog.send({errorType:"current_folder_lost",pageParams:JSON.stringify(ns.page.current.params),mFoldersStatus:e.status,messageMid:t.mid,messageFid:t.fid})},r.generateUrl._logFakeThreadErrorOnce=_.once(function(e){Jane.ErrorLog.send({type:"fake_thread_url_error",message:JSON.stringify(e),pageParams:JSON.stringify(ns.page.current.params)})}),r.generateUrl._isFakeThread=function(e){return e.mid&&"t"===e.mid||!e.mid&&Boolean(e.FAKE_THREAD_DATA)},r.generateUrl.contentMessageCompose=function(e){var t=ns.Model.get("folders"),n=e.fid,r=e.mid,i=e.count>1;if(t.isFolder(n,["draft","outbox","template"])&&!i)return ns.router.generateUrl("compose2",{ids:r})},r.generateUrl.contentMessage=function(e,t){return Daria.is2pane()?Daria.Page.generateUrl.contentMessage2pane(e,t):Daria.Page.generateUrl.contentMessage3pane(e,t)},r.getMessageId=function(e){return e.ids||e.thread_id}},function(e,t,n){e.exports=n.p+"_/9de170af75031898edeba5eb86591d86-unknown-50.png"},function(e,t,n){e.exports=n.p+"_/4d2474a6ef1cb0a2c3814f496dcff96e-external.png"},function(e,t,n){e.exports=n.p+"_/4024a537c261f2eb73700ab5db15b396-mailbox.png"},function(e,t){!function(e,t){if("hidden"in e||"msHidden"in e||"mozHidden"in e||"webkitHidden"in e){var n=function(){t.watcher.set("pageVisible",!(e.hidden||e.msHidden||e.mozHidden||e.webkitHidden))};n(),e.addEventListener("visibilitychange",n,!1),e.addEventListener("msvisibilitychange",n,!1),e.addEventListener("mozvisibilitychange",n,!1),e.addEventListener("webkitvisibilitychange",n,!1)}else{var r=!Modernizr.webkit&&"hasFocus"in e,i=function(n){var i=null;if(r)try{i=e.hasFocus()}catch(e){}null===i&&(i=!n||!("blur"===n.type||"focusout"===n.type)),t.watcher.set("pageVisible",i)};i(),Modernizr.msie?$(e).on("focusout focusin",i):$(window).on("blur focus",i)}}(document,Jane)},function(e,t){Daria.router={},Daria.router.addThreadedParam=function(e){var t=ns.Model.get("folders"),n=t.symbols(),r=e.current_folder,i=r&&r!==n.spam&&r!==n.trash&&r!==n.draft&&r!==n.template;ns.Model.get("settings").isThreaded()&&!e.extra_cond&&!e.datePager&&i?e.threaded="yes":delete e.threaded},Daria.router.symbolToFid=function(e){var t=ns.Model.get("folders");if(e.default_folder){var n=t.getFolderBySymbol(e.default_folder);n||(n=t.getFolderBySymbol("inbox")),e.current_folder=n.fid,delete e.default_folder}}},function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Daria.Constants=r({AVATARS:n(741),LAYOUT_3PANE:n(742),LAYOUT_MAIL:n(743),LEFT_COLUMN:n(744),TIMINGS:n(745),TOOLBAR_BUTTONS:n(746)},n(747),n(748),n(749))},function(e,t){e.exports={DEFAULT_SIZE:30,VALID_SIZES:[16,20,22,26,28,30,32,36,42,50,100,150]}},function(e,t){e.exports={MIN_WIDTH_FIRST_PANE_3PV:250,MIN_WIDTH_SECOND_PANE_3PV:570,MIN_HEIGHT_FIRST_PANE_3PH:88}},function(e,t){e.exports={MIN_WIDTH:1024}},function(e,t){e.exports={LAYOUT_MIN_WIDTH:60,LAYOUT_MAX_WIDTH:400}},function(e,t){e.exports={LAZY_UPDATE_DELAY:51}},function(e,t){e.exports={ABOOK_ADD:"abook-add",ABOOK_DESELECT_ALL:"abook-deselect-all",ABOOK_MORE:"abook-more",ABOOK_OUT_OF_GROUP:"abook-outofgroup",ABOOK_REMOVE:"abook-remove",ABOOK_RESTORE:"abook-restore",ABOOK_SELECT_ALL:"abook-select-all",ABOOK_TO_GROUP:"abook-togroup",ADD_TEMPLATE:"add-template",ARCHIVE:"archive",CHECK_MAIL:"check-mail",COMPOSE_ABOOK:"compose-abook",COMPOSE_GO:"compose-go",COMPOSE_REPLY:"compose-reply",COMPOSE_REPLY_ALL:"compose-reply-all",DELETE:"delete",DELETE_DRAFT:"delete-draft",DRAFT_FINISH:"draft-finish",EDIT:"edit",FILTERS_CREATE:"filters-create",FOLDERS_ACTIONS:"folders-actions",FORWARD:"forward",INFOLDER:"infolder",LABEL:"label",LABELS_ACTIONS:"labels-actions",MAIN_DESELECT_ALL:"main-deselect-all",MAIN_SELECT_ALL:"main-select-all",MARK_AS_READ:"mark-as-read",MARK_AS_UNREAD:"mark-as-unread",MESSAGE_SOURCE:"message-source",MORE:"more",NOT_SPAM:"not-spam",PIN:"pin",PRINT:"print",REPLY:"reply",REPLY_ALL:"reply-all",SENDON:"sendon",SPAM:"spam",TEMPLATE:"template",TOOLBAR_SETTINGS:"toolbar-settings",TRANSLATE:"translate",UNPIN:"unpin",UNSUBSCRIBE:"unsubscribe"}},function(e,t){e.exports={MAX_MESSAGES_TO_FORWARD:30,MAX_MESSAGES_TO_PIN:15,MAX_MESSAGES_TO_REMOVE_OR_SPAM:20,MAX_MESSAGES_TO_SEND:Daria.IS_CORP?150:50}},function(e,t){e.exports={HTTP_REG_EX:/^https?:/}},function(e,t){e.exports={UPDATE:1}},function(e,t){!function(){function e(e,t,n){return e<t?t:e>n?n:e}function t(e,t){if(e.data("center-aligned-resize")){var n=e.rect(),r=n.width+2*(t-n.right);return Math.min(r,$(window).width())}}var n=Daria.Constants.LAYOUT_MAIL.MIN_WIDTH,r=Daria.Constants.LEFT_COLUMN.LAYOUT_MIN_WIDTH,i=Daria.Constants.LEFT_COLUMN.LAYOUT_MAX_WIDTH,o=Daria.Constants.LAYOUT_3PANE.MIN_WIDTH_FIRST_PANE_3PV,a=Daria.Constants.LAYOUT_3PANE.MIN_WIDTH_SECOND_PANE_3PV,s=Daria.Constants.LAYOUT_3PANE.MIN_HEIGHT_FIRST_PANE_3PH;!function(){if($&&$.ui&&$.ui.resizable){var e=$.ui.resizable.prototype._respectSize;$.ui.resizable.prototype._respectSize=function(n,r){return n.width=t($(this.ui().originalElement),r.clientX)||n.width,e.apply(this,arguments)}}}(),Daria.resize={elements:{layout:{selector:".mail-Layout",type:"h",params:{handles:"e",minWidth:n},callback:function(){ns.events.trigger("daria:vApp:changeAppWidth")},events:{resize:function(){ns.events.trigger("daria:vApp:changeRightColumSize")}},settingName:"size-view-app"},leftPane:{selector:".js-layout-left",type:"h",params:{handles:"e",minWidth:r,maxWidth:i},settingName:"size-layout-left",callback:function(){ns.events.trigger("daria:vApp:changeLeftColumWidth")},events:{resize:function(e,t){ns.events.trigger("daria:vApp:changeLeftColumWidth",t),ns.events.trigger("daria:vApp:changeRightColumSize")}}},is3paneVertical:{selector:".js-layout-first-pane",type:"h",params:{handles:"e",minWidth:o},events:{start:function(){Daria.resize._doNotKeepProportions=!0,Daria.resize._updateLeftColumnMaxWidthFor3pv(),Daria.resize._updateFirstPaneMaxWidthFor3pv()},resize:function(){ns.events.trigger("daria:vApp:changeRightColumSize"),Daria.resize._saveColumnsProportionFor3pv()}},settingName:"size-first-pane-3pv"},is3paneHorizontal:{selector:".js-layout-first-pane",scrollAreaSelector:".js-messages-scroll-area",type:"v",params:{handles:{s:".js-Mail-MessagesWrap .js-resizer-of-messages-list"},minHeight:s,maxHeightCoefficient:.6},settingName:"size-first-pane-3ph",callback:function(){$(".js-Mail-MessagesWrap .js-resizer-of-messages-list").removeClass("is-hidden"),Daria.resize._updateResizeHandleFor3ph()},events:{start:function(){Daria.resize._doNotKeepProportions=!0},resize:function(){Daria.resize._updateResizeHandleFor3ph(),ns.events.trigger("daria:vApp:changeRightColumSize"),Daria.resize._saveColumnsProportionFor3ph()}}}},setMaximumSizes:function(e){function t(t){var i=$(t.selector);t.params.maxWidthCoefficient&&(t.params.maxWidth=parseInt(n*t.params.maxWidthCoefficient,10),e&&i.resizable("option","maxWidth",t.params.maxWidth)),t.params.maxHeightCoefficient&&(t.params.maxHeight=parseInt(r*t.params.maxHeightCoefficient,10),e&&i.resizable("option","maxHeight",t.params.maxHeight))}var n=window.innerWidth,r=window.innerHeight;_.forEach(this._resizableElements,function(e){t(e)})},expandToViewport:function(){if(-1!==this._resizableElements.indexOf(this.elements.layout)){var e=parseInt(ns.Model.get("settings").getSetting("size-view-app2"),10)||"100%";this.$layout.css({width:e})}},resetExpandToViewport:function(){if(-1!==this._resizableElements.indexOf(this.elements.layout)){var e=this.elements.layout;this.setSizesFromSettings(this.$layout,e.type,e.settingName)}},init:function(){var e=this,t=this;this._saveSettingsDelayed=_.debounce(this._saveSettings.bind(this),1e3),this.setMaximumSizes(),this.bindResizeEvent(),this.$layout=$(".mail-Layout"),this.$layoutPanes=$(".js-mail-Layout-Panes"),this.$layoutLeft=$(".js-layout-left"),this.$firstPane=$(".js-layout-first-pane"),this.$secondPane=$(".js-layout-second-pane");var n=this._resizableElements=[];Daria.IS_CORP||n.push(this.elements.layout),n.push(this.elements.leftPane),Daria.is3pv()?n.push(this.elements.is3paneVertical):Daria.is3ph()&&n.push(this.elements.is3paneHorizontal),n.forEach(function(t){return e._turnOnResize(t)}),Daria.isPageWithResizableLeftColumn()&&(Daria.is3pv()&&(this._updateLeftColumnMaxWidthFor3pv(),this._updateFirstPaneMaxWidthFor3pv(),this._saveColumnsProportionFor3pv(),ns.events.on("daria:vApp:changeAppWidth",this.onAppWidthChange.bind(this))),Daria.is3ph()&&(this._saveColumnsProportionFor3ph(),ns.events.on("daria:vApp:changeAppWidth",this.onAppHeightChange.bind(this)))),ns.Model.get("settings").on("ns-model-changed.liza_minified",this.adjustToCompactMode.bind(this)),ns.Model.get("settings").on("ns-model-changed.liza_minified_header",this.adjustToCompactMode.bind(this)),_.defer(function(){t.adjustToCompactMode()})},bindResizeEvent:function(){var e=this;ns.Model.get("dimensions").on("resize",function(t,n){e.setMaximumSizes(!0),ns.events.trigger("daria:vApp:changeAppWidth",{saveRightColumnWidthSettings:!0,saveRightColumnHeightSetting:!0,isLeftResized:$(n.target).hasClass("js-layout-left")}),ns.events.trigger("daria:vApp:changeLeftColumWidth"),ns.events.trigger("daria:vApp:changeRightColumSize")})},_saveColumnsProportionFor3pv:function(){var e=this.$firstPane.width(),t=this.$secondPane.width();this._3pvColumnsProportion=e/(e+t)},_saveColumnsProportionFor3ph:function(){var e=this.$firstPane.height(),t=this.$secondPane.height();this._3phColumnsProportion=e/(e+t)},_updateLeftColumnMaxWidthFor3pv:function(){var t=this.$layout.width(),n=t-o-a;n=e(n,r,i),this.$layoutLeft.resizable("option","maxWidth",n)},_updateFirstPaneMaxWidthFor3pv:function(){var e=this.$layout.width(),t=this.$layoutLeft.width(),n=this.$layoutLeft.resizable("option","maxWidth");t>n&&(t=n);var r=e-t-a;this.$firstPane.resizable("option","maxWidth",r)},_updateResizeHandleFor3ph:function(){var e=this.elements.is3paneHorizontal,t=$(e.scrollAreaSelector),n=$(".js-Mail-MessagesWrap .js-resizer-of-messages-list");n.css({top:t.scrollTop()+t.height()-n.height()})},onAppWidthChange:function(t,n){if(!this._doNotKeepProportions){this._updateLeftColumnMaxWidthFor3pv(),this._updateFirstPaneMaxWidthFor3pv();var i=this.$layout.width(),s=this.$layoutLeft.width(),u=this.$layoutLeft.resizable("option","maxWidth"),c=this.$firstPane.resizable("option","maxWidth"),l=parseInt(ns.Model.get("settings").getSetting("size-layout-left"),10);n=n||{};var f=s;n.isLeftResized||s<l&&(f=l),f=e(f,r,u);var d=Math.floor((i-f)*this._3pvColumnsProportion);d=e(d,o,c),d=Math.min(d,i-f-a),this.$layoutLeft.width(f),this.$firstPane.width(d),n.saveRightColumnWidthSettings&&this._saveRightColumnWidthSettingFor3pv(),ns.events.trigger("daria:vApp:changeLeftColumWidth"),ns.events.trigger("daria:vApp:changeRightColumSize")}},onAppHeightChange:function(e,t){if(!this._doNotKeepProportions){var n=this.$layoutPanes.height();t=t||{};var r=Math.floor(n*Math.min(this._3phColumnsProportion,.8));r=Math.max(r,s),this.$firstPane.height(r),this._updateResizeHandleFor3ph(),t.saveRightColumnHeightSetting&&this._saveRightColumnHeightSettingFor3ph(),ns.events.trigger("daria:vApp:changeRightColumSize")}},reinit3paneHorizontalResizer:function(){this._clearOldSizes(),this._turnOnResize(this.elements.is3paneHorizontal)},reinit3paneVerticalResizer:function(){this._turnOnResize(this.elements.is3paneVertical)},_clearOldSizes:function(){var e=$(".js-resizer-of-messages-list");e.addClass("is-hidden").removeClass("ui-resizable-handle ui-resizable-s");var t=this.$firstPane;t.hasClass("ui-resizable")&&t.resizable("destroy"),Daria.is3pv()?t.css({height:"auto"}):Daria.is3ph()?t.css({width:"auto"}):t.css({height:"auto",width:"auto"}),e.addClass("ui-resizable-handle ui-resizable-s")},_turnOnResize:function(e){var t=$(e.selector);this.setSizesFromSettings(t,e.type,e.settingName);var n=e.events||{};n.stop=this._onResizeStop.bind(this,e,t),t.resizable($.extend(e.params,n)),e.callback&&e.callback()},_onResizeStop:function(e,t){Daria.is3pv()&&(this._updateLeftColumnMaxWidthFor3pv(),this._updateFirstPaneMaxWidthFor3pv(),this._saveRightColumnWidthSettingFor3pv(),this._doNotKeepProportions=!1),Daria.is3ph()&&(this._updateResizeHandleFor3ph(),this._saveRightColumnHeightSettingFor3ph(),this._doNotKeepProportions=!1),this.saveSizeOnSettings(e,t),this._clearGlobalCursorStyle()},_clearGlobalCursorStyle:function(){$("body").css("cursor","")},setSizesFromSettings:function(e,t,n){var r=parseInt(ns.Model.get("settings").getSetting(n),10);if(r)if(n===Daria.resize.elements.layout.settingName&&(r=r>>1<<1),"h"===t)e.width(r);else if("v"===t)e.height(r);else{var i=r.split("|");e.width(i[0]),e.height(i[1])}},saveSizeOnSettings:function(e,t){var n=ns.Model.get("settings"),r=e.settingName;"size-view-app"===r&&n.isCompactMode()&&(r="size-view-app2");var i={};"h"===e.type?i[r]=t.width():"v"===e.type?i[r]=t.height():i[r]=t.width()+"|"+t.height(),this._setSettingsWithDelay(i)},_settingsDiff:null,_setSettingsWithDelay:function(e){this._settingsDiff=_.extend(this._settingsDiff||{},e),this._saveSettingsDelayed()},_saveSettings:function(){if(this._settingsDiff){ns.Model.get("settings").setSettings(this._settingsDiff),this._settingsDiff=null}},_saveRightColumnWidthSettingFor3pv:function(){var e=this.elements.is3paneVertical,t=$(e.selector);this.saveSizeOnSettings(e,t)},_saveRightColumnHeightSettingFor3ph:function(){var e=this.elements.is3paneHorizontal,t=$(e.selector);this.saveSizeOnSettings(e,t)},adjustToCompactMode:function(){var e=ns.Model.get("settings");e.isCompactHeaderMode()||e.isCompactMode()?this.expandToViewport():this.resetExpandToViewport(),ns.events.trigger("daria:vApp:changeAppWidth")}}}()},function(e,t){!function(){function e(){return"messages"===ns.page.current.page?ns.Model.getKeyAndParams("messages",ns.page.current.params).params:null}function t(){var e;return"message"===ns.page.current.page?(e=ns.Model.getKeyAndParams("message",ns.page.current.params).params,e.mid=e.ids,delete e.ids,e):null}function n(){var e=ns.page.current.page,t=null;return"abook"===e&&(t=ns.Model.getKeyAndParams("abook-contacts",ns.page.current.params).params),t}Daria.params={toolbarButtons:function(){var r=ns.page.current.page,i=e()||t()||n()||{};return _.extend(i,{layout:r})},messagesChecked:function(n){return n.mid?{mid:n.mid}:e()||t()||{}}}}()},function(e,t){!function(){Daria.Clipboard=function(e,t){this._lock=!1,this._needDestroy=!1,this._target=$(e),this._destroyed=!1,this._clipboard=null,this._text="",this._options=_.assign({hoverClass:"hover"},t),_.bindAll(this,["_onLoad","_onMouseenter","_onMouseleave","_onMousedown","_getText"]),this._target.on("mouseenter.clipboard",this._onMouseenter).on("mouseleave.clipboard",this._onMouseleave).on("mousedown.clipboard",this._onMousedown),Jane.Services.runModules(["clipboard.js"],this._onLoad)},no.extend(Daria.Clipboard.prototype,ns.Events),Daria.Clipboard.canUse=function(){var e;try{e=document.queryCommandSupported("copy"),e&&!Modernizr.msie&&document.execCommand("copy")}catch(t){e=!1}return e?"native":!!swfobject.hasFlashPlayerVersion("11.0.0")&&"flash"}(),Daria.Clipboard.prototype.EV={SUCCESS:"success",ERROR:"error",COMPLETE:"complete",READY:"ready"},Daria.Clipboard.prototype.destroy=function(){if(this._lock)return void(this._needDestroy=!0);this._needDestroy=!1,this._destroyed=!0,this._text="";for(var e in this.EV)this.off(this.EV[e]);this._target&&(this._target.off(".clipboard"),this._target=null),this._clipboard&&(this._clipboard.destroy(),this._clipboard=null)},Daria.Clipboard.prototype.setText=function(e){this._text=e},Daria.Clipboard.prototype._onLoad=function(){if(!this._destroyed){var e;e="native"===Daria.Clipboard.canUse?this._clipboardInit():"flash"===Daria.Clipboard.canUse?this._zeroClipboardInit():vow.reject(),e.then(function(){this.trigger(this.EV.SUCCESS)},function(){this.trigger(this.EV.ERROR)},this).always(function(){this._lock=!1,this._needDestroy&&this.destroy(),this.atrigger(this.EV.COMPLETE)},this)}},Daria.Clipboard.prototype._onMouseenter=function(){this._target.addClass(this._options.hoverClass)},Daria.Clipboard.prototype._onMouseleave=function(){this._target.removeClass(this._options.hoverClass)},Daria.Clipboard.prototype._onMousedown=function(){this._lock=!0},Daria.Clipboard.prototype._getText=function(){return this._text},Daria.Clipboard.prototype._clipboardInit=function(){return new vow.Promise(function(e,t){this._clipboard=new Clipboard(this._target[0],{text:this._getText}),this._clipboard.onClick=function(e){Clipboard.prototype.onClick.call(this,e),this.clipboardAction.fakeElem&&this.clipboardAction.fakeElem.blur()},this._clipboard.on("success",e),this._clipboard.on("error",t),this.atrigger(this.EV.READY)}.bind(this))},Daria.Clipboard.prototype._zeroClipboardInit=function(){return new vow.Promise(function(e,t){var n=this;this._clipboard=new ZeroClipboard(this._target[0]),this._clipboard.on("ready",function(){n.atrigger(n.EV.READY)}),this._clipboard.on("copy",function(){n._clipboard.setText(n._getText()),e()}),this._clipboard.on("error",t)}.bind(this))}}()},function(e,t,n){"use strict";function r(){var e="granted"===d.permission,t="denied"===d.permission;return e||t?vow.Promise.resolve(e):i()}function i(){return new vow.Promise(function(e){d.requestPermission(function(t){var n=Daria.PushManager.permissionCode(t);return ns.events.trigger("daria:PushManager:permissionResolved",n),ns.forcedRequest("do-service-worker-log",{params:JSON.stringify({type:"info",reason:"decision-resolved",value:n,source:"u2709-push"})}),e(n===Daria.PushManager.PERMISSION.GRANTED)})})}function o(e){if(!Daria.LS.compatible||!e||!e.subscription)return!1;var t=Daria.LS.getItem("push-subscription-data"),n=Daria.LS.getItem("push-subscription-time")||0,r=t===JSON.stringify(e),i=Date.now()-n<f;return r&&i}function a(){return ns.forcedRequest("push-vapid").then(function(e){var t=e[0].getData();return s(window.atob(t))})}function s(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function u(e){return function(t){return vow.Promise.resolve(void 0===t?e:t)}}function c(e){return function(t){return ns.forcedRequest("do-service-worker-log",{params:JSON.stringify({type:"error",reason:e,message:t&&t.message||t,source:"u2709-push"})}),u(!1)()}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(357),f=864e5,d=window.Notification,h=Boolean(d)&&function(){return"Gecko"!==Daria.UA.BrowserEngine||Daria.UA.BrowserVersion>=46}()&&l.default.compatible,p=void 0;try{p=new l.default(l.default.ROLE.PUSH_MANAGER)}catch(c){ns.forcedRequest("do-service-worker-log",{params:JSON.stringify({type:"error",reason:"push-setup",message:c&&c.message||c,source:"u2709-push"})})}var g=_.bindAll({PERMISSION:{SKIPPED:0,DENIED:1,GRANTED:2},compatible:p&&h,_worker:p,_pending:null,_subscribed:null,permission:function(){return d&&d.permission||""},permissionCode:function(e){return{denied:Daria.PushManager.PERMISSION.DENIED,granted:Daria.PushManager.PERMISSION.GRANTED}[e]||Daria.PushManager.PERMISSION.SKIPPED},_subscription:function(e){return e?e.pushManager.getSubscription():u(null)()},subscribe:function(e,t){return h?!0!==this._subscribed||t?(this._subscribed=!0,this._folders=e||[],this._pending=this._pending?this._pending.then(this._subscribe):this._subscribe(),this._pending):this._pending:u(!1)()},_subscribe:function(){var e=this;return r().then(function(t){return t?e._worker.update().then(e._makeSubscription).then(e._saveSubscription).then(u(!0)):(e._subscribed=null,u(!1)())},c("subscribe"))},_makeSubscription:function(e){var t=this;return this._subscription(e).then(function(n){return o(t._getSubscriptionData(n))?u(null)():n?u(n)():a().then(function(t){return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})})})},_saveSubscription:function(e){if(!e)return u(!0)();var t=this._getSubscriptionData(e);return ns.forcedRequest("do-push-subscribe",t).then(function(){Daria.LS.setItem("push-subscription-data",JSON.stringify(t)),Daria.LS.setItem("push-subscription-time",Date.now()),ns.events.trigger("daria:PushManager:subscriptionUpdated",t)})},_getSubscriptionData:function(e){return{folders:JSON.stringify(this._folders),subscription:JSON.stringify(e)}},unsubscribe:function(e){return!1===this._subscribed?this._pending:(this._subscribed=!1,this._pending=this._unsubscribe(e),this._pending)},_unsubscribe:function(e){return this._worker.stop(),Daria.LS.getItem("push-subscription-data","")||e?(Daria.LS.setItem("push-subscription-data",""),Daria.LS.setItem("push-subscription-time",""),ns.forcedRequest("do-push-unsubscribe").then(u(!0),c("unsubscribe"))):u(!1)()},requestPermission:i,resetSubscriptionDatetime:function(){Daria.LS.setItem("push-subscription-data",""),Daria.LS.setItem("push-subscription-time","")},settings:function(e){return this._worker.settings(e)}});Daria.PushManager=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return function(t){return new Promise(function(n){if(!t)return n(!1);e(n)})}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){var n=this;r(this,e),this._isXivaSubscriptionAllowed=i(function(e){n._api.isXivaSubscriptionAllowed(n._uid,e)}),this._denySubscriptionToXiva=i(function(e){n._api.denySubscriptionToXiva(n._uid,function(){return e(!0)})}),this._allowNotifications=i(function(e){n._api.allowNotifications(function(){return e(!0)})}),this._setNotificationSetting=i(function(e){var t=Daria.PushManager.permissionCode(Notification.permission);ns.events.trigger("daria:PushManager:permissionConverted",t),e(!0)}),this._logError=function(e){Daria.monitoring.workflow.ipush({action:"error",message:e.message||e,stack:e.stack})},this._uid=t,this._api=window.yandex&&window.yandex.yamail,this._conversion=null,this._compatible=Boolean(Daria.PushManager.compatible&&this._api&&this._api.isXivaSubscriptionAllowed)}return o(e,[{key:"convert",value:function(){return this._conversion?this._conversion:this._conversion=Promise.resolve(this._compatible).then(this._isXivaSubscriptionAllowed).then(this._denySubscriptionToXiva).then(this._allowNotifications).then(this._setNotificationSetting).catch(this._logError)}}]),e}();ns.events.on("pageinit",function(){return new a(Daria.uid).convert()})},function(e,t,n){Daria.Cryprox=n(756)},function(e,t){e.exports={getEncryptedResource:function(e,t){var n=Daria.Config.cryprox["encrypted-resources"][e];return t?n[t]:n}}},function(e,t,n){"use strict";Object.defineProperty(Jane,"HAS_AD",{configurable:!0,get:function(){var e=ns.Model.get("settings").getSetting("show_advertisement"),t=ns.Model.get("account-information").getDataKey("reg_date"),n=Boolean(Daria.Config.mayHaveAdv&&e&&Daria.now()-t>864e6&&Daria.messages.everHadMessages());return ns.Model.get("messages",ns.page.current.params).isValid()&&Object.defineProperty(Jane,"HAS_AD",{value:n}),n}})},function(e,t,n){"use strict";var r={"do-client-log":[],"do-journal-log":[]};!function e(){requestIdleCallback(function(){setTimeout(e,1e3),Object.keys(r).forEach(function(e){var t=r[e];if(t.length){var n=ns.Model.get(e,{messages:JSON.stringify(t.splice(0,50))});ns.forcedRequest([n])}})})}();var i=Daria.monitoring=e.exports;i.workflow=function(e){r["do-client-log"].push(Object.assign(e,{reason:"workflow"}))},i.workflow.ads=function(e){i.workflow(Object.assign(e,{flow:"ads"}))},i.workflow.ipush=function(e){i.workflow(Object.assign(e,{flow:"ipush"}))},i.journal=function(e,t){r["do-journal-log"].push(Object.assign(t,{operation:e}))}},function(e,t){Daria.assert=function(e,t,n,r){n=n||null;var i,o,a,s=Daria.DEBUG,u=e?"PASS":"FAIL";switch(s){case n:a="assert-namespace";break;case"obtrusive-assertions":case"all-assertions":a=s;break;default:a=s?"default-debug":"disable-debug"}var c=function(e){return!$.isArray(e)&&arguments.length&&(e=Array.prototype.slice.call(arguments)),function(t,n){t=t||null,n=n||[],$.each(e,function(e,r){$.isFunction(r)&&r.apply(t,n)})}},l=function(e,t){if(console.assert)console.assert("PASS"===e,t);else if("FAIL"===e)throw new Error(t+": "+e)},f=function(e,t){alert(t+": "+e)},d=function(){};r=r||function(e,t){if("FAIL"===e)throw new Error(t+": "+e)};var h={"obtrusive-assertions:PASS":c(l),"obtrusive-assertions:FAIL":c(f,l),"all-assertions:PASS":c(l),"all-assertions:FAIL":c(l),"assert-namespace:PASS":c(r,l),"assert-namespace:FAIL":c(r,f,l),"default-debug:PASS":c(l),"default-debug:FAIL":c(l),"disable-debug:PASS":d,"disable-debug:FAIL":d};i=[a,u].join(":"),(o=h[i])(null,[u,t])}},function(e,t){!function(){var e=/[_-]/g,t={"-":"+",_:"/"};Daria.base64UrlDecode=function(n){return n=window.atob(n.replace(e,function(e){return t[e]})),decodeURIComponent(escape(n))}}()},function(e,t){!function(){var e={},t=function(e){return e=e||ns.page.current.params,_.pick(e,"current_label","current_folder","extra_cond")},n=function(e){switch(e){case"abook":case"compose2":break;default:Daria.scrollRestore.getScrollArea().scrollTop(0)}},r=function(){var t=ns.page.current.page;_.method(t)(e)||n(t),e[t]=no.true};Daria.scrollRestore={},Daria.scrollRestore.getScrollArea=function(){var e;return Daria.is3pane()&&(e=$(".js-messages-scroll-area")),e&&e.length?e:$(window)},Daria.scrollRestore.restore=function(e){if(Daria.scrollRestore._disabled)return!1;var r=ns.page.current.page,i=ns.page.current.params,o=t(),a=Daria.scrollRestore.getScrollArea();switch(r){case"messages":if(!Boolean(Daria.is2pane()&&(i.ids||i.thread_id))){var s=0;!_.isEmpty(e)&&_.isEqual(e.params,o)&&(s=e.position),a.scrollTop(s)}break;default:n(r)}return!0},Daria.scrollRestore.save=function(e){if(!Daria.scrollRestore._disabled)return{params:t(e),position:Daria.scrollRestore.getScrollArea().scrollTop()}},Daria.scrollRestore.disable=function(){Daria.scrollRestore._disabled=!0},Daria.scrollRestore.enable=function(){Daria.scrollRestore._disabled=!1},ns.events.on("ns-page-before-load",function(n,r){if(!_.isEqual(r[0],r[1])&&("messages"!==r[0].page||"messages"!==r[1].page||_.isEmpty(r[0].params)||_.isEmpty(r[1].params)||!_.isEqual(t(r[0].params),t(r[1].params)))){var i=r[0].page&&Daria.scrollRestore.save(r[0].params);i&&(e[r[0].page]=_.once(Daria.scrollRestore.restore.bind(null,i)))}}),ns.events.on("ns-page-after-load",r),ns.events.on("ns-page-error-load",r)}()},function(e,t){Daria.timify=function(e,t){t=t||"milliseconds";var n,r={milliseconds:1,seconds:Jane.Date.SECOND,timestamp:1e3,minutes:Jane.Date.MINUTE,hours:Jane.Date.HOUR,days:Jane.Date.DAY,weeks:Jane.Date.WEEK,months:Jane.Date.MONTH,years:31104e6};if(!e)throw new Error("Not provided any time parameter");var i=_.chain(e).pairs().reduce(function(e,t){var n=t[0],i=t[1],o=r[n];if(o)return e+o*i;throw new TypeError("Unknow time entity in timeSettings")},0).value();if(!r[t])throw new TypeError("Unknow time entity in timeSettings");return n=r[t],i/n}},function(e,t){Daria.WMI={},Daria.WMI.ERROR_CODES={AUTH_NO_AUTH:"2001",AUTH_NO_MAILBOX:"2003",AUTH_NO_DOMAIN:"2004",AUTH_NO_PASSWORD:"2008",AUTH_NO_SECURE_COOKIE:"2011",NO_SUCH_MESSAGE:"5000"}},function(e,t,n){Jane.LAYOUTS=["2pane","3pane-horizontal","3pane-vertical"],n(765),n(766),n(767),function(e,t){var r=t.Config;Modernizr["input-multiple"]&&(r["input-multiple"]=!0),t.IS_CORP&&(r["is-corp"]=!0),r["timeline-yandex-host"]=r["calendar-url"],r["timeline-yandex-host-event"]=r["timeline-yandex-host"]+"/event",r["timeline-yandex-host-week"]=r["timeline-yandex-host"]+"/week",r["is-timeline"]=Boolean("RUS"===r.product),r.MAY_HAVE_SMS_COPY=!r.pddDomain&&"TUR"!==r.product&&!t.IS_CORP&&!r.workspace,n(768),n(769),n(770),n(771),n(772),n(773),n(774),n(775),n(776),n(777),n(779),e.ajaxSetup({cache:!0,traditional:!0}),n(789),n(791)}(jQuery,Daria)},function(e,t){!function(e,t){var n=Jane.Common.keyCode,r=function t(n){this._onKeyInputBinded=this._onKeyInput.bind(this),this._onFocusBinded=this._onFocus.bind(this),this._onFocusOutBinded=this._onFocusOut.bind(this),this._onClickBinded=this._onClick.bind(this),this.options=e.extend({},t.defaults,n),this.sections=this.options.sections||[],this.results=[],this.requests=[],this.$body=null,this.selected=null,this.prevVal="",this.currentValue="",this.selectedIdx=-1,this.firstRender=!0,this.isVisible=!1,this.hasFocus=0,this.lastKeyPressCode=null,this.timeout=null,this.bodyClass="",this.cache={},this._id="autocomplete"+e.now(),e(this.init.bind(this))};r.utils={trimWords:function(e,t){if(!e)return[""];var n;return n=t.lastWord?/\s/:t.multipleSeparator,e.split(n).map(function(e){return e.trim()})},lastWord:function(e,t){if(!t.multiple&&!t.lastWord)return e;var n=this.trimWords(e,t);return _(n).last()},selection:function(e,n,r){e.offsetHeight&&(t.setSelection(e,n,r),e.focus())},highlight:function(e,n){n=t.regexpEscape(n);var r=new RegExp("(?!<[^<>]*)(\\s|>)("+n+")(?![^<>]*>)","i");return e.replace(r,"$1<strong>$2</strong>")}},r.defaults={sections:[],container:document.body,selectFirst:!0,multiple:!1,multipleSeparator:",",excludeSelected:!1,matchCase:!0,minChars:1,delay:100,cacheSize:50,doubleOrient:!1,scroll:!1,blockSubmit:!0,abortRequests:!0,hideOnScroll:!1,topOffset:0,saveSelectionOnBlur:!0,fakeRequestParams:!0},e.extend(r.prototype,{init:function(){this.appendBody(),this.$body&&this.bindResults()},getCache:function(e){return this.cache[e]},setCache:function(e,t){var n=this.cache;Object.keys(n).length>this.options.cacheSize&&this.flushCache(),n[e]=t},flushCache:function(){this.cache={}},appendBody:function(){this.$body=e(this.options.tpl).appendTo(this.options.container),this.$body&&this.$body.length&&(this.bodyClass=this.$body[0].className)},bindResults:function(){var t=this.options,n=this;this.$body.on("mousedown",t.item,function(r){r.preventDefault(),r.stopPropagation(),e(this).addClass(t.activeClass),n.select(this,r),n.hide()}).on("mouseenter",t.item,function(){n.$body.find(t.item).removeClass(t.activeClass),e(this).addClass(t.activeClass)}),t.saveSelectionOnBlur||this.$body.on("mouseleave",t.item,function(){e(this).removeClass(t.activeClass)})},_selectIfVisible:function(e,t,n){(this.isVisible||n)&&t.preventDefault(),this.isVisible?this.select(e,t):this.onChange()},select:function(t,n){var i,o,a=this.options,s=this.$body.find(a.item),u=s.length,c="",l=[];if("number"==typeof t)t>u-1?t=0:t<0&&(t=u-1);else if((t=e.inArray(t||s.filter("."+a.activeClass)[0],s))>-1){if(!(i=this.results[t]))return;if(c=(a.formatResult||i.section.formatResult||_.noop).call(this,i.data,s[t],n,{dataContext:i}),i.section.onselect&&i.section.onselect.call(this,i.data,t),"string"==typeof c&&a.multiple&&(l=r.utils.trimWords(this.$input.val(),a),l.length>1&&(c=l.slice(0,l.length-1).join(a.multipleSeparator+" ")+a.multipleSeparator+" "+c),c+=a.multipleSeparator+" "),this.prevVal=c,this.abort(),o=this.$input.val(),"string"==typeof c){if(a.lastWord){var f=r.utils.lastWord(o,a),d=o.lastIndexOf(f);c=o.substr(0,d)+c+o.substr(d+f.length)}this.$input.val(c),r.utils.selection(this.$input[0],c.length,c.length)}var h=!0;i.section.onresult&&(h=!i.section.onresult(i.data,i.$item,n)),a.onresult&&h&&a.onresult.call(this,i.data,n),i.section.isStatic||this.$input.trigger("result",[i.data,i.$item,n,o])}if(this.selected=s[t],this.selectedIdx=t,s.removeClass(a.activeClass),e(this.selected).addClass(a.activeClass),a.scroll&&this.selected){var p=this.$body.find(a.scrollElem)[0],g=p.offsetHeight,m=this.selected.offsetTop+this.selected.offsetHeight;m-p.scrollTop>g?p.scrollTop=m-g:this.selected.offsetTop<p.scrollTop&&(p.scrollTop=this.selected.scrollTop)}},bindField:function(t){var n=t.field;!n||this.$input&&n===this.$input[0]||(this.$input&&this.destroy(),this.options.hideOnScroll&&e(document).on("scroll."+this._id,this.hide.bind(this)),this.$input=e(n),this.prevVal=this.$input.val(),this.currentValue=t.currentValue,this.hasFocus=t.focus||0,this.$input.on("keydown.autocomplete",this._onKeyInputBinded).on("focusin.autocomplete",this._onFocusBinded).on("focusout.autocomplete",this._onFocusOutBinded).on("click.autocomplete",this._onClickBinded))},_onKeyInput:function(t){if(this.lastKeyPressCode=t.which,this.options.multiple&&","===e.trim(this.options.multipleSeparator)&&(t.which===n.COMMA_CHAR||t.which===n.SEMI_CHAR||t.which===n.SPACE_CHAR&&1===this.results.length))return this._selectIfVisible(null,t);switch(this.lastKeyPressCode){case n.UP:this._selectIfVisible(this.selectedIdx-1,t);break;case n.DOWN:this._selectIfVisible(this.selectedIdx+1,t);break;case n.PAGEUP:this._selectIfVisible(this.selectedIdx-8,t,!0);break;case n.PAGEDOWN:this._selectIfVisible(this.selectedIdx+8,t,!0);break;case n.RETURN:this.isVisible&&(this.options.blockSubmit&&t.preventDefault(),this.select(null,t),this.hide());break;case n.TAB:this.isVisible&&(t.preventDefault(),this.select(null,t),this.hide());break;case n.ESC:this.options.dontProcessEscape||(t.preventDefault(),this.hide());break;case n.CTRL:case n.SHIFT:case n.ALT:case n.META:break;default:var r=this;this.keyPressed=!0,clearTimeout(this.timeout),this.timeout=setTimeout(function(){r.onChange(t.type),r.keyPressed=!1},this.options.delay)}},_onFocus:function(){this.hasFocus=1},_onFocusOut:function(){this.hasFocus=0,setTimeout(this.hide.bind(this),1.5*this.options.delay)},_onClick:function(){var e=_.isNumber(this.options.minClickCount)?this.options.minClickCount:1;this.hasFocus++>=e&&!this.isVisible&&this.onChange()},onChange:function(e){if(this.lastKeyPressCode===n.DEL&&"keypress"!==e)return void this.hide();var t=this.$input.val();""!==t&&t===this.prevVal&&this.isVisible||(this.prevVal=t,t.length>=this.options.minChars&&this.$input.is(":focus")?(this.options.matchCase||(t=t.toLowerCase()),this.fetch(t)):this.hide())},show:function(){var e=this.$body,t=this.options;"width"in t&&e.css("width",null==t.width?"":t.width),"additionalClass"in t&&e.attr("class",this.bodyClass+" "+(t.additionalClass||"")),this.firstRender&&!this.isVisible&&(this.firstRender=!1,this.setPosition(e,t)),this.$sectionsAnchor.html(this.$sectionsBuffer.children()),this.$sectionsAnchor.add(e).show().removeClass("UNUSED"),this.setPosition(e,t),this.isVisible=!0,t.onrender&&t.onrender(e),t.onshow&&t.onshow.call(this)},hide:function(){this.$body.hide(),this.isVisible=!1,this.selected=null,this.selectedIdx=-1,clearTimeout(this.timeout)},fetch:function(t){this.options.matchCase||(t=t.toLowerCase());var n=this;if(t&&t in this.cache)return void this.receiveData(t,this.getCache(t));this.abort();var i=this.requests;this.sections.sort(function(r){return e.isFunction(r.beforeRequest)&&!r.beforeRequest(t,n)?1:0}),e.each(this.sections,function(){if("string"==typeof this.url&&this.url.length){if(e.isFunction(this.beforeRequest)&&!this.beforeRequest(t,n))return;var o={},a=this.extraParams||{};e.isFunction(this.contextExtraParams)&&(a=e.extend({},a,this.contextExtraParams())),o[this.param]=_.isFunction(this.getParamFromTerm)?this.getParamFromTerm(t,n.options):r.utils.lastWord(t,n.options);var s={};e.extend(o,a);var u=this.fakeRequestParams?".0":"";for(var c in o)s[c+u]=o[c];this.fakeRequestParams&&ns.request.addRequestParams(s),i.push(e.ajax({dataType:this.dataType,jsonp:this.jsonp,scriptCharset:this.scriptCharset,cache:!1,url:this.url,data:s}))}else if(!this.url&&this.isStatic){var l=e.Deferred();l.resolve([[{term:t}]]),i.push(l)}}),e.when.apply(this,i).then(function(){if(arguments.length){for(var e=[],r=i.length,o=0,a=arguments.length;o<a&&!(o>=r);o++){var s=n.sections[o],u=(r>1?arguments[o][0]:arguments[o])||[],c=s.parse?s.parse(u,t,n):n.parse(u,s,t);e.push(c)}n.setCache(t,e),n.receiveData(t,e)}})},abort:function(){if(this.options.abortRequests)for(var e=0,t=this.requests.length;e<t;e++){var n=this.requests[e];4!==n.readyState&&"abort"in n&&n.abort()}this.requests=[]},destroy:function(t){this.abort(),this.timeout&&clearTimeout(this.timeout),this.$input&&(this.$input.off(".autocomplete"),this.$input=null),this.options.hideOnScroll&&e(document).off("scroll."+this._id),t?this.$body.remove():this.hide()},receiveData:function(t,n){var r=this.options;if(n&&n.length&&this.hasFocus){if(r.excludeSelected&&e.isFunction(r.filterItem)){n=[].concat.call(n);for(var i=0,o=n.length;i<o;i++)n[i]=e.grep(n[i],r.filterItem.bind(this))}this.render(t,n),r.selectFirst&&this.select(0)}else this.hide()},render:function(t,n){var r=!1;this.$sectionsAnchor=this.$body.find(".js-sections"),this.$sectionsBuffer=e("<div>"),this.results=[],this.$body.removeClass("b-mail-suggest_domain");for(var i=0;i<n.length;i++){var o=this.sections[i];if(!o.dontShow){var a,s=n[i],u=!1,c=e(o.tpl||'<div class="js-section-items"></div>');a=c.hasClass("js-section-items")?c:c.find(".js-section-items"),o.onfetch&&o.onfetch.call(this,n,!s.length);for(var l=0;l<s.length;l++){var f=s[l];f.$item&&f.$item.length&&(f.section=o,this.results.push(f),u||-1!==f.data.id||(a.append('<div class="b-mail-suggest__notify">'+i18n("%Suggest_notify")+"</div>"),this.$body.addClass("b-mail-suggest_domain")),a.append(f.$item),u=!0)}u&&(r=!0,this.$sectionsBuffer.append(c),o.onshow&&o.onshow())}}r?this.show():this.hide()},setPosition:function(t,n){if(t.css({top:"",bottom:"",left:"",right:""}),n.position&&n.position.at&&n.position.my)t.position(n.position),t.css("left","+=1");else{var r,i=this.$input.offset(),o=this.$input[0].offsetHeight,a=document.body.scrollHeight,s=t.outerHeight();r=n.doubleOrient&&i.top+o+n.topOffset+s+3>=a&&i.top>=s?i.top-n.topOffset-s-2:n.doubleOrientWinHeight&&(n.doubleOrientWinHeightAlwaysOnTop||i.top+o+n.topOffset+this.$input.height()>=e(window).height())?i.top-n.topOffset-s+1:i.top+o+n.topOffset+2;var u=e.extend(n.position||{left:i.left,right:"auto"},{top:r});t.css(u)}},parse:function(t,n,r){for(var i=[],o=0,a=t.length;o<a&&o!==n.max;o++){var s=t[o];if(s){var u=n.formatItem(s,r);i.push({data:s,$item:u?e(u):null})}}return i},setOptions:function(e){_.extend(this.options,e)}}),t.Autocompleter=r,t.Autocompleter.getRegion=function(){var n;n=-1!==e.inArray(t.Config.locale,["ru","uk","be","tt","tr","en"])?t.Config.locale:"INT"===t.Config.product?"en":"ru";var i=ns.Model.get("languages").get('.languages.lang[.abbr=="'+n+'"].locale_short')[0];return t.Autocompleter.__regionInstance||(t.Autocompleter.__regionInstance=new r({tpl:'<div class="mail-Region-Autocompleter"><div class="mail-Region-Autocompleter_inner"><ul class="mail-Region-Autocompleter-List js-sections"></ul></div></div>',activeClass:"mail-Region-Autocompleter-List-Item_hover",hideOnScroll:!0,doubleOrient:!0,abortRequests:!1,fakeRequestParams:!1,minChars:2,item:".mail-Region-Autocompleter-List-Item",sections:[{url:"//suggest-maps.yandex.ru/suggest-geo",dataType:"jsonp",param:"part",jsonp:"callback",extraParams:{lang:i,n:10,search_type:"weather",v:8},scriptCharset:"utf-8",max:5,tpl:'<div class="js-section-items"></div>',formatItem:function(e){return'<li class="mail-Region-Autocompleter-List-Item">'+e.name+"</li>"},parse:function(t,n){var r=this,i=t[1],o=_.filter(i,{kind:"weather"}).map(function(t){var i=r.formatItem(t,n);return{data:t,$item:i?e(i):null}});return r.max?_.take(o,r.max):o},onresult:function(e){t.Autocompleter.__regionInstance.$input.val(e.name),ns.Model.get("settings").setSettings({geoid:e.geoid}),ns.Model.get("theme-weather").getWeather()}}]})),t.Autocompleter.__regionInstance}}(jQuery,Daria)},function(e,t){var n=/^<[^<]*>/;Jane.FormValidation={reEmail:/^[^@\s,;]+@[^\.\s,;]+(\.[^\.]+)*\.[^@\.\s,;]{2,}$/i,splitContacts:function(e){if(!e)return[];e=e.replace(/[\s,;]*$/,",");for(var t=[],r=!1,i=0,o=void 0,a=0,s=e.length;a<s;++a){var u=e[a];if("<"===u){var c=e.substring(a).match(n),l=Array.isArray(c)&&c[0];l&&(a=a+l.length-1)}else","!==u&&";"!==u||r?'"'===u&&"\\"!==e[a-1]&&'"'!==e[a+1]&&(r=!r):(o=e.substring(i,a),o=$.trim(o),o&&(o=this.contact2obj(o),t.push(o)),i=a+1)}if(!t.length){var f=e.match(/<(.*?)>/);f&&t.push({email:f[1],name:f[1]})}return t},splitPhones:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/[,;]/).map(function(e){return e.trim()}).filter(_.identity)},getEmailFromString:function(e){var t=e.match(/[-а-яёa-z0-9._]+@[-а-яёa-z0-9._]+/i);return t?t[0]:""},contact2obj:function(e){var t=/^"(.*)"\s*<([^>]+)>$/,n=/^(.*)<([^>]+)>$/,r=e.match(t)||e.match(n),i=r&&r[2]||e,o=i.replace(/\s/g,""),a=this.checkEmail(o);return r?{name:$.trim(r[1].replace(/\\"/g,'"').replace(/\\\\/g,"\\")),email:a?o:$.trim(r[2])}:{email:a&&o.replace(/^['"]|['"]$/g,"")||e}},obj2contact:function(e){if(!e.email)return"";var t="<"+e.email+">";if(e.name){return'"'+e.name.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'" '+t}return t},checkEmail:function(e){var t=Daria.Recipients.isEmailValid(e);return"boolean"==typeof t?t:!(e.indexOf("@")<0||e.indexOf(".")<0)&&this.reEmail.test(e)},checkContacts:function(e){var t=this.splitContacts(e),n=t.length;if(!n)return!1;for(var r=0;r<n;r+=1)if(!this.checkEmail(t[r].email))return!1;return!0},checkPhoneNumber:function(e){var t=e.replace(/^\+\s?(\d)/,"$1").replace(/\s|\D/g,"");return 11===t.length||12===t.length},checkExternalEmail:function(e){return!!Daria.IS_CORP&&(!!(e||"").match(/@([^.]+)/)&&!Daria.email.isCorp(e)&&!Daria.email.isSupport(e))},isUrl:function(e,t){return"string"==typeof e&&(t=_.isPlainObject(t)?t:{},Daria.urlRegex(_.extend({exact:!0},t)).test(_.trim(e)))}}},function(e,t){!function(e){function t(e){var t,n,i,o=[],a=[];for(t=e[0]||"",o.push(t),i=1;i<e.length;++i)((n=e[i])!==r.INLINE||t!==r.INLINE&&t!==r.BLOCK)&&(n===r.BLOCK&&t===r.INLINE?(o[o.length-1]=r.BLOCK,t=r.BLOCK):(o.push(n),t=n));for(t=o[0]||"",a.push(t),i=1;i<o.length;++i)(n=o[i])===r.BLOCK&&t===r.BLOCK||(t=n,a.push(n));for(i=0;i<a.length;++i)a[i]===r.BLOCK?a[i]="\n":a[i]===r.INLINE&&(a[i]=" ");return a.join("")}function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];_.isArray(n)?Array.prototype.push.apply(e,n):e.push(n)}}var r={BLOCK:1,INLINE:2},i={ELEMENT_NODE:1,TEXT_NODE:3},o={html2text:function(e){if(!e)return"";var n=document.implementation.createHTMLDocument("").body;n.innerHTML=e,this._isTextInserted=!1;var r=[];return this._convertChildNodes(n,r),t(r).replace(/^[\u0020\u00a0]+$/gm,"").replace(/^\n/,"").replace(/\n$/,"")},text2html:function(e,t){t=t||"div";var n="<"+t+">",r="</"+t+">",i=_.escape(e).replace(/^--[\u0020\u00a0]$/gm,"--&nbsp;");return i=n+i+r,i=i.replace(/\n/g,r+n)},quoteText:function(e){return e=this.normalize(e),e.replace(/^.?/gm,function(e){return">"===e?">"+e:e?"> "+e:">"})},quoteHtml:function(e){return'<blockquote type="cite">'+e+"</blockquote>"},normalize:function(e){return e=e.replace(/\u0020+/g," ").replace(/^\u0020+|[\u0020\u00a0]+$/gm,"").replace(/\n{3,}/g,"\n\n").replace(/^[\u0020\n\r\t]+|[\u0020\u00a0\n\r\t]+$/g,"")},_convertChildNodes:function(e,t){for(var n=0;n<e.childNodes.length;++n)this._convertNode(e.childNodes[n],t)},_isBufferContainText:function(e){for(var t=0;t<e.length;t++)if(e[t].length)return!0;return!1},_convertNode:function(o,a){var s;if(o.nodeType===i.ELEMENT_NODE){var u=e(o);if(u.is("BLOCKQUOTE")||u.hasClass("b-quote"))return n(a,r.BLOCK),s=[],this._convertChildNodes(o,s),void n(a,r.BLOCK,this.quoteText(t(s)),r.BLOCK);if(u.hasClass("b-quote__show"))return;if(u.hasClass("normalize"))return s=[],this._convertChildNodes(o,s),void n(a,this.normalize(t(s)),r.BLOCK);switch(o.tagName.toLowerCase()){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"pre":case"p":case"ol":case"ul":case"dl":case"table":return this._isTextInserted||this._isBufferContainText(a)?n(a,r.BLOCK,"",r.BLOCK):(n(a,r.BLOCK),this._isTextInserted=!0),this._convertChildNodes(o,a),void n(a,r.BLOCK);case"div":case"address":case"fieldset":case"form":case"dt":case"dd":case"tr":return n(a,r.BLOCK),this._convertChildNodes(o,a),void n(a,r.BLOCK);case"br":return void n(a,"",r.BLOCK);case"hr":return void n(a,r.BLOCK,"----------------------------------------",r.BLOCK);case"li":return n(a,r.BLOCK,"* "),this._convertChildNodes(o,a),void n(a,r.BLOCK);case"td":case"th":return n(a,r.INLINE),this._convertChildNodes(o,a),void n(a,r.INLINE);default:return void this._convertChildNodes(o,a)}}else o.nodeType===i.TEXT_NODE&&n(a,o.data.replace(/[\u0020\n\r\t]+/g," "))},flatDOMHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,Daria.Html2Text.flatDOM(t).innerHTML.replace(/^\s+|\s+$/gm,"")},flatDOM:function(e){"normalize"in e&&e.normalize();var t,n=document.createElement("div"),r=[],i=function(e,t,r){for(var i=0;i<r.length;i++)r[i].specified&&t.setAttribute(r[i].nodeName,r[i].value);return e&&e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e?e.parentNode.appendChild(t):n.appendChild(t)};r.push([e,n.appendChild(document.createTextNode("")),[]]);for(var o=1e3;(t=r.pop())&&o;){for(var a=null,s=0,u=t[0].childNodes.length;s<u;s++){var c=t[0].childNodes[s],l=c.tagName&&c.tagName.toLowerCase();1!==c.nodeType||"div"!==l&&"p"!==l?(a||(a=document.createElement("div")),a.appendChild(c.cloneNode(!0))):(a&&(t[1]=i(t[1],a,t[2],t[3])),r.push([c,t[1],c.attributes,c.style.cssText]),a=null)}a&&(i(t[1],a,t[2],t[3]),a=null),o--}return o?n:e}};Daria.Html2Text=o}(jQuery)},function(e,t){function n(){try{navigator.registerProtocolHandler("mailto",location.protocol+"//"+location.host+"/compose?mailto=%s",i18n("%Title_mail")),Jane.c("registerProtocolHandler",location.protocol)}catch(e){Jane.ErrorLog.sendException("registerProtocolHandler",e)}}Daria.IS_CORP||Daria.hasYaBar||Daria.Config.NO_SETTINGS||!navigator.registerProtocolHandler||ns.events.on("pageinit",function(){var e=Modernizr.mozilla&&"mozilla"||Modernizr.opera&&"opera"||Modernizr.webkit&&"webkit",t=ns.Model.get("settings");if(e)return"webkit"===e?(n(),void t.recordAttemptToRegisterMAILTOProtocolHandler(e,!0)):Daria.LS.getItem("rph")?void t.recordAttemptToRegisterMAILTOProtocolHandler(e,!0):void(t.recordAttemptToRegisterMAILTOProtocolHandler(e,!0)&&window.setTimeout(n,3e3))}),Daria.IS_CORP||ns.events.on("pageinit",function(){Daria.AdBlock.detect().then(function(e){e||window.setTimeout(function(){$('<iframe id="jane-awaps-speed-test" src="//awaps.yandex.ru/0/9947/001001.htm" style="position:absolute;top:-9999px;left:-9999px"/>').appendTo("body"),window.setTimeout(function(){$("#jane-awaps-speed-test").remove()},18e4)},2e4)})}),ns.events.on("pageinit",_.debounce(function(){function e(){Jane.Promo.run(),ns.events.on("ns-page-after-load",function(){Jane.Promo.run()})}Daria.Config.NO_SETTINGS||ns.request("system-status").then(function(t){t[0].getData().problem||Daria.loadPromoModule(function(){Daria.WelcomeWizard.shouldShow()?Jane.Services.runModules(["setup.js"],function(){Daria.WelcomeWizard.show(),ns.events.on("daria:WelcomeWizard:closed",function(){e()})}):e(),ns.events.trigger("modules:promo:loaded")})})},1)),ns.events.on("pageinit",function(){var e=new Date,t=ns.Model.get("account-information").getData(),n=(e.getTime()-Daria.now())/6e4,r=e.getTimezoneOffset()-t.tz_offset;(Math.abs(n)>10||0!==Math.abs(r))&&Jane.ErrorLog.send({name:"wrongUserTimeAndTimezone",userTime:e.toString(),difference:Math.round(n),passportTZ:t.timezone,diffTZ:r,regionId:t.region_id})}),ns.events.on("pageinit",function(){var e=navigator.userAgent.match(/YaBrowser\/([.\d]+)/);if(e&&e[1]){var t=parseFloat(e[1].split(".").slice(0,2).join(".")),n="1"!==Daria.getCookie("yabrowser-mail-notif");t>=1.7&&n&&Daria.setCookie("yabrowser-mail-notif","1")}}),ns.events.on("pageinit",function(){Daria.Config.NO_SETTINGS&&Jane.c("tech","настройки лежали")}),ns.events.on("pageinit",function(){_.isArray(Daria.Config["exp-test-ids"])&&Daria.Config["exp-test-ids"].forEach(function(e){Jane.c("stat","eexp",e)}),Jane.c("stat","puid",Daria.uid),Jane.c("lang",Daria.Config.locale)}),ns.events.on("pageinit",function(){Daria.Config["pdd-metrika-mark"]&&Jane.c("user",Daria.Config["pdd-metrika-mark"])})},function(e,t){Daria.UI=Daria.UI||{},Daria.UI.IEvent=function(e){function t(t){return r[t]||(a[t]=e[t]||"unique",r[t]=$.Callbacks(a[t])),r[t]}function n(e){if(o[e]){for(var n=0,r=o[e].length;n<r;n++)t(e).add(o[e][n]);delete o[e]}}e=e||{};var r={},i={},o={},a={};return{_events:{lock:function(e){i[e]=!0,o[e]=[]},unlock:function(e){delete i[e]},empty:function(e){e?(t(e).empty(),delete o[e]):(r={},o={})}},on:function(e,n){if(i[e]){-1===$.inArray(n,o[e])&&o[e].push(n)}else t(e).add(n);return this},off:function(e,n){if(i[e]){var r=$.inArray(n,o[e]);-1!==r&&o[e].splice(r,1)}return t(e).remove(n),this},trigger:function(e,r){if(!i[e]){var o=a[e]&&-1!==a[e].indexOf("memory");o||n(e),t(e).fireWith(this,r),o&&n(e)}return this}}}},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=$(".b-stamp"),r={locked:!1,status:t.hasClass("b-stamp_loading"),start:function(){r.status=!0,t.addClass("b-stamp_loading")},stop:function(){r.status=!1,r.locked||t.removeClass("b-stamp_loading")}},i={start:_.noop,stop:_.noop};e.Loader=function(t,o){if(t instanceof e.Loader)return t;"object"==(void 0===t?"undefined":n(t))?(this.loader=null===t?i:t,"number"==typeof o?this.timeout=o:t&&"number"==typeof t.timeout?this.timeout=t.timeout:this.timeout=this.defaultTimeout):(this.loader=r,this.timeout=void 0===t||!1===t||!0===t?this.defaultTimeout:t)},e.Loader.prototype.defaultTimeout=500,e.Loader.prototype.start=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timeout>0?this.timer=setTimeout(this.loader.start,this.timeout):this.loader.start()},e.Loader.prototype.stop=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.loader.stop()},e.Loader.lock=function(t){r.locked=!0,setTimeout(e.Loader.unlock,t)},e.Loader.unlock=function(){r.locked=!1,r.status||r.stop()},e.Loader.createToolbarLoader=function(t){var n=$('<div class="b-toolbar__spinner"/>'),r=$(".b-toolbar_fixed .js-toolbar-item-"+t.action);if(r){var i=function(e){var t=$(".b-toolbar"),i=t.filter(".b-toolbar_fixed");t.removeClass("b-toolbar_in-action"),i.toggleClass("b-toolbar_in-action",e),r.toggleClass("b-toolbar__item_active",e),e?r.find(".b-toolbar__item__label").after(n):r.find(".b-toolbar__spinner").remove()};return new e.Loader({start:i.bind(null,!0),stop:i.bind(null,!1)},0)}},e.Loader.getActualLoader=function(t,n){var r=e.Loader.createToolbarLoader(t);return r||new e.Loader(n)},e.loader=new e.Loader}(Jane)},function(e,t){ns.action.define("dialog.cancel",function(e,t,n,r){ns.events.trigger("dialog.cancel",t,n,r)}),ns.action.define("dialog.action",function(e,t,n,r){var i=$(n).data("dialogAction");ns.events.trigger(i,t,n,r)}),Daria.Dialog={_isInit:!1,_isOpen:!1,_classHidden:null,_timeoutPosition:null,init:function(){this.webkitWrapper=$("<div></div>").appendTo(document.body),this.$paranja=$('<div class="b-paranja b-paranja_mail"><iframe></iframe></div>').addClass("g-hidden").appendTo(this.webkitWrapper);var e=Jane.tt("common:dialog",{});this.$dialog=$(e),this._classHidden?this.$dialog.addClass(this._classHidden):this.$dialog.hide(),this.$dialog.appendTo(this.webkitWrapper),this.$title=this.$dialog.find(".b-popup__header"),this.$body=this.$dialog.find(".b-popup__body"),this.$buttons=this.$dialog.find(".b-popup__confirm"),this._isInit=!0,this._closeBinded=this.close.bind(this),this.bindHandlers()},bindHandlers:function(){ns.events.on("dialog.close",this._closeBinded),ns.events.on("ns-page-before-changed",this._closeBinded),$(window).scroll(this.handleScroll.bind(this))},toggleClosingOnPageChange:function(e){e!==this._closingOnPageGo&&(ns.events[e?"on":"off"]("ns-page-before-changed",this._closeBinded),this._closingOnPageGo=e)},enableEasyClose:function(){var e=this;$("body").on("click.dialog",function(t){$(t.target).is(".b-popup__box, .b-popup__box *")||e.close()}),this.$paranja.addClass("g-hidden")},isOpen:function(){return this._isOpen},open:function(e){var t=this;if(this._isInit||this.init(),this._isOpen?this.close():ns.events.trigger("dialog.close"),!e.body)throw new Error('Daria.Dialog.open: required parameter "params.body" is missing or undefined.');$(document).trigger("b-mail-dropdown-closeall"),this._isOpen=!0,this.params=e||{},this.params.width=this.params.width||320,this.params.nbInit=!1!==this.params.nbInit,e.title?this.$title.html(e.title).show():this.$title.hide(),this._additionalClass&&($.each(this._additionalClass,function(e,n){t.$dialog.removeClass(n)}),this._additionalClass=null),e.additionalClass&&($.isArray(e.additionalClass)||(e.additionalClass=[e.additionalClass]),this._additionalClass=e.additionalClass,$.each(this._additionalClass,function(e,n){t.$dialog.addClass(n)})),this.toggleClosingOnPageChange(!e.dontCloseOnPageGo),(e.onTarget&&!1!==e.easyclose||e.easyclose)&&this.enableEasyClose(),this.updateBody(this.params),this._makeActions(),this._makeButtons(),this.$dialog.removeAttr("style"),this.$body.removeAttr("style"),this.position(),this.params.onTarget||e.easyclose||this.$paranja.removeClass("g-hidden"),this._classHidden?this.$dialog.removeClass(this._classHidden):this.$dialog.show();var n=this.$dialog.find(".b-popup__focus-me");n.length||(n=this.$buttons.find(".nb-button")),n[0]&&n[0].focus(),this.params.noShortcuts||$.Shortcuts.modalListOn("dialog");var r=this.$dialog.find(".b-popup__close");return r.removeData("crossClose"),this.params.hideCrossClose&&r.is(":visible")&&(r.addClass("g-hidden"),r.data("crossClose",!0)),$.isFunction(e.onopen)&&e.onopen(this),ns.events.trigger("dialog.open"),(e.onInit||$.noop).call(this),this},updateBody:function(e){this.replaceBody(e.body)},replaceBody:function(e){this.params.nbInit&&nb.destroy(this.$body),this.$body.html(e),this.params.nbInit&&nb.init(this.$body)},_makeButtons:function(){var e,t=this.params.buttons||[],n=t.length;if(0===n)return void this.$buttons.hide();for(var r=0;r<n;r+=1){var i,o,a=t[r],s="";a.action?(e=$(Jane.tt("common:dialog-buttons",{button:a})),$.isFunction(a.onclick)&&ns.events.on(a.action,a.onclick)):($.isFunction(a.onclick)?(i=a.value||i18n("%Продолжить"),o="dialog."+a.name,ns.events.on(o,a.onclick)):(i=a.value||i18n("%Отменить"),o="dialog.cancel"),a.focus&&(s=" b-popup__focus-me"),e=$(Jane.tt("common:dialog-buttons",{button:a,title:i,action:o,focusClass:s}))),e.appendTo(this.$buttons)}this.$buttons.show()},getButton:function(e){return this.$buttons.find('.nb-button[data-dialog-action="dialog.'+e+'"]')},toggleButton:function(e,t){this.getButton(e).toggleClass("g-hidden",!t)},setButtonText:function(e,t){this.getButton(e).each(function(){var e=nb.block(this);e&&e.setContent(t)})},disableButton:function(e){Jane.disableButton(this.getButton(e))},enableButton:function(e){Jane.enableButton(this.getButton(e))},close:function(e,t,n){if("ns-page-before-changed"!==e||!n&&!t||!/#compose\/+/.test(t)&&!/#compose\/+/.test(n)){if(!this._isOpen)return this;if($.isFunction(this.params.onclose)){var r=Array.prototype.slice.call(arguments);r.unshift(this),this.params.onclose.apply(void 0,r)}var i=this.$dialog.find(".b-popup__close");return i.data("crossClose")&&(i.removeClass("g-hidden"),i.removeData("crossClose")),this.$dialog.find(".nb-select").each(function(){var e=nb.block(this);e&&e.close()}),this._classHidden?this.$dialog.addClass(this._classHidden):this.$dialog.hide(),this.params.onTarget||this.$paranja.addClass("g-hidden"),$("body").off("click.dialog"),$(document).trigger("b-mail-dropdown-closeall"),Daria.removeDropdowns(this.$body[0]),this.$title.empty(),this.hideBody(),this.$buttons.empty(),this._deleteActions(),$.Shortcuts.modalListOff(ns.page.current.page),this._isOpen=!1,ns.events.trigger("dialog.close"),this}},hideBody:function(){this.params.nbInit&&nb.destroy(this.$body),this.$body.empty()},cancel:function(){this.params&&$.isFunction(this.params.oncancel)&&this.params.oncancel(this),this.close()},_makeActions:function(){ns.events.on("dialog.cancel",this.cancel.bind(this))},_deleteActions:function(){(this.params.buttons||[]).forEach(function(e){$.isFunction(e.onclick)&&ns.events.off("dialog."+e.name)}),ns.events.off("dialog.cancel")},position:function(e){if(this._isOpen){this.$dialog.find(".nb-select").each(function(){var e=nb.block(this);e&&e.close()});var t,n,r,i=$(window),o=i.height(),a=i.scrollTop();if(this.params.onTarget&&/^(top|right|bottom|left)$/.test(this.params.onTarget.side)){var s=$.extend({},this.params.onTarget);if(s.pos=s.pos||("left"===s.side?"bottom":"left"),s.target){var u=$(s.target),c=u.offset(),l=u.width(),f=u.height();s.x=c.left+(s.hasOwnProperty("x")?s.x:0),"top"===s.side||"bottom"===s.side?s.x+=l/2:"left"===s.side&&(s.x+=l),s.y=c.top+(s.hasOwnProperty("y")?s.y:0),"left"===s.side||"right"===s.side?s.y+=f/2:"top"===s.side&&(s.y+=f)}this.$paranja.removeClass("b-paranja_mail b-paranja_fade").addClass("b-paranja_transparent"),this.$dialog.addClass("b-popup_contextual"),this.$dialog.css({width:this.params.width}),this.$dialog.find(".b-popup__tail").length?!1===s.needTail&&this.$dialog.find(".b-popup__tail").remove():!1!==s.needTail&&$('<div class="b-popup__tail"><div class="b-popup__tail__i"></div>').appendTo(this.$dialog);var d=this.$dialog.find(".b-popup__tail");d.css({top:"",left:""}),d.removeClass().addClass("b-popup__tail b-popup__tail_"+s.side);var h=0,p=0;t=this.$dialog.height(),n=this.$dialog.width(),"top"!==s.side&&"bottom"!==s.side||(h="left"===s.pos?20:"right"===s.pos?n-30:n/2-10,s.x-=h+12),"left"===s.side&&(h=-10,s.x+=10),"right"===s.side&&(h=n+10,s.x-=h-2),"left"!==s.side&&"right"!==s.side||(p="top"===s.pos?20:"bottom"===s.pos?t-30:t/2-10,s.y-=p+10),"top"===s.side&&(p=-10,s.y+=8),"bottom"===s.side&&(p=t,s.y-=p+8),this.$dialog.css({left:s.x+"px",top:s.y+"px"}),d.css({left:h+"px",top:p+"px"}),r=s.y}else{this.$dialog.removeClass("b-popup_contextual"),this.$dialog.find(".b-popup__tail").remove();var g=this.params.paranjaFade?"b-paranja_fade":"b-paranja_mail";this.$paranja.addClass(g).removeClass("b-paranja_transparent"),this.params.noPosition||(this.$dialog.css({width:this.params.width,"margin-right":-Math.round(this.params.width/2)}),this.params.isMaxHeight&&this.$body.css({position:"relative","max-height":o-80,overflow:"auto"})),t=this.$dialog.height(),r=t<o?(o-t)/2:0}if(!(this.params.noPosition||this.params.onTarget&&this.params.onTarget.target)){var m=this.params.notFixed?0:a;e?this.$dialog.animate({top:m+Math.round(r)},{queue:!1}):this.$dialog.css({top:m+Math.round(r)})}}},confirm:function(e){var t=this,n=[{name:"submit",value:e.okValue,onclick:function(){t.close("submit"),$.isFunction(e.okHandler)&&e.okHandler()}},{name:"cancel",value:e.cancelValue}];$.extend(e||{},{buttons:n}),this.open(e)},notice:function(e){var t=[{name:"submit",value:i18n("%Закрыть")}];$.extend(e||{},{buttons:t}),this.open(e)},handleScroll:function(){this._timeoutPosition&&(window.clearTimeout(this._timeoutPosition),this._timeoutPosition=null),$(document).trigger("b-mail-dropdown-closeall-onscroll"),this.isOpen()&&(this.params.hideOnScroll?this.close():this.params.onTarget||(this._timeoutPosition=window.setTimeout(function(){this.position(!0)}.bind(this),200)))}}},function(e,t){!function(){var e,t,n,r,i,o,a,s,u,c=$(document),l=$(window),f=function(e){if(!e||!$.isFunction(e.find))throw new Error("Error(Daria.Dropdown): Node is not jQuery object");return e.find(".b-mail-dropdown__handle, .js-dropdown-handle")},d=function(e){return e.hasClass("b-mail-dropdown_disabled")},h=function(e){return f(e).hasClass("b-mail-dropdown__handle_open")},p=function(){ns.events.trigger("daria:dropdown:close","current"),o&&D(o)},g=function(e){27!==e.keyCode||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||v()},m=function(e,t){var n=$(e.target),r=t&&t.selectors;(!n.is(".b-mail-dropdown__box *")&&!n.is(r)||n.is(".b-mail-dropdown__close"))&&v(),n=null},v=function(){ns.events.trigger("daria:dropdown:close","all");var e=Boolean(o);clearTimeout(u),k(),p(),e&&ns.events.trigger("dropdowns-closed")},_=function(){o&&!o.hasClass("js-not-hide-onscroll")&&v()},y=function(){e||(e=$('<div class="b-mail-dropdown__box"></div>'),t=$('<div class="b-popup__tail b-popup__tail_top"><div class="b-popup__tail__i"></div></div>').appendTo(e),r=$('<div class="b-popup__tail b-popup__tail_right"><div class="b-popup__tail__i"></div></div>').appendTo(e),n=$('<div class="b-popup__tail b-popup__tail_bottom"><div class="b-popup__tail__i"></div></div>').appendTo(e),i=$('<div class="b-popup__tail b-popup__tail_left"><div class="b-popup__tail__i"></div></div>').appendTo(e),e.appendTo(document.body))},b=function(a,s,u){u=u||{},s=s||{},s.horiz=s.horiz||"down",e.width("auto");var c;o&&(c=$(o.data("dropdown-content")).find(".b-mail-dropdown__box__wrapper"),c.css({height:"auto","max-height":"none"}));var f,d=a.offset(),h=a.innerWidth(),p=a.innerHeight(),g=e.innerWidth(),m=e.innerHeight(),v=l.width();switch(s.horiz){case"up":f=d.top-m;break;case"center":f=d.top-(m-p)/2;break;case"top":f=d.top;break;case"bottom":f=d.top+p-m;break;default:f=d.top+p+10}Modernizr.opera&&a.closest(".b-toolbar").hasClass("b-toolbar_fixed")&&(f-=40);var _;switch(s.vert){case"inright":_=d.left+h+20;break;case"inleft":_=d.left-g-20,s.maxright&&_+g>s.maxright&&(_=s.maxright-g);break;case"left":_=d.left;break;default:_=d.left-(g-h)/2}if(_+g+7>v){_=v-g-(u.noRightIndent?0:7)}if(u.alignToolbar){var y=$(".b-service-tabs"),b=y.offset().top+y.innerHeight();f=d.top+p+10<b?b:f}if(c&&f<0&&(c.height(Math.round(c.height())+f-10),f=10),e.css({top:Math.round(f),left:Math.round(_)}),e.width(e.width()),c){var w=$(window).height()-e.rect().top-70;c.css("max-height",w).scrollTop(0)}if(c&&"up"===s.horiz&&c.height(c.height()),"hide-tail"in s)t.hide(),n.hide(),r.hide(),i.hide();else{var D;switch(s.tailvert){case"left":D=0;break;case"boxcenter":D=g/2-11;break;default:D=d.left-_+h/2-12}"up"===s.horiz?(n.css({left:Math.round(D)}).show(),t.hide(),r.hide(),i.hide()):(t.css({left:Math.round(D)}).show(),n.hide(),r.hide(),i.hide()),"inleft"===s.vert&&(t.hide(),n.hide(),i.hide(),"bottom"===s.tailhotiz?r.css({bottom:21,top:"auto"}).show():"top"===s.tailhoriz?r.css({top:11,bottom:"auto"}).show():r.css({top:m/2-11,bottom:"auto"}).show()),"inright"===s.vert&&(t.hide(),n.hide(),r.hide(),"bottom"===s.tailhotiz?i.css({bottom:21,top:"auto"}).show():"top"===s.tailhoriz?i.css({top:11,bottom:"auto"}).show():i.css({top:m/2-11,bottom:"auto"}).show())}},w=function(t,n){y(),v();var r,i=!n.content&&t.data("dropdown-content"),a=Daria.parseQuery(t.attr("data-params"));if(i?r=$(i):(r=n.content?n.content.appendTo(e):t.find(".b-mail-dropdown__box__content").appendTo(e),t.data("dropdown-content",r[0]),r.data("dropdown-handle",t[0])),r.length){r.add(e).show();var s=n.handle||f(t),u=t.hasClass("b-mail-dropdown_up"),l=$.extend({horiz:u?"up":"down"},a);o=t,b(s,l,n),r.removeClass("UNUSED"),s.addClass("b-mail-dropdown__handle_open"),c.on("keydown.dropdown",g).on("click.dropdown",function(e){m(e,n)}).on("b-mail-dropdown-closeall",v).on("b-mail-dropdown-closeall-onscroll",_),t.trigger("b-mail-dropdown-open"),b(s,l,n),r.find("input:first").focus()}},D=function(t){f(t).removeClass("b-mail-dropdown__handle_open");var n=t.data("dropdown-content");$(n).find(".nb-select").each(function(){var e=nb.block(this);e&&e.close()}),$(n).hide(),e.hide(),Modernizr.msie>8&&$("html").removeClass("UNUSED"),ns.events.trigger("b-mail-dropdown-closed",t),c.off("keydown.dropdown click.dropdown").off("b-mail-dropdown-closeall",v),o=null,t.trigger("b-mail-dropdown-close")},C=function(e,t){t=t||{};var n=t.dropdown||$(e).closest(".b-mail-dropdown");return o&&o[0]===n[0]&&h(n)?void D(n):d(n)?void ns.events.trigger("daria:dropdown:disabled",n):void w(n,t)},T=function(){clearTimeout(u)},A=function(){x()},E=function(e,t,n){n=n||{},clearTimeout(u),a&&a[0]===e||(u=setTimeout(function(){S(e,t,n.location),n.counter&&Jane.c(n.counter.cid,n.counter.path),n.callback&&n.callback()},n.timeout||500))},S=function(t,n,r){y(),v();var i=$(t),o=$(n).appendTo(e).show(),u={vert:"left",tailvert:"boxcenter"};b(i,r||u),e.on("mouseenter",T).on("mouseleave",A).show(),c.on("keydown.dropdown",g).on("click.dropdown",m).on("b-mail-dropdown-closeall",v),a=i,s=o},x=function(){clearTimeout(u),u=setTimeout(function(){k()},500)},k=function(){a&&(e.hide().off("mouseenter",T).off("mouseleave",A),c.off("keydown.dropdown click.dropdown").off("b-mail-dropdown-closeall",v),s.remove(),a=null,s=null)},M=function(){return o},O=function(){return e};Daria.Dropdown={toggle:C,showHover:E,hideHover:x,closeCurrent:p,closeAll:v,getCurrent:M,getBox:O,getHandleNode:f},ns.events.on("ns-page-before-changed",v),$(window).on("resize",function(){$(document).trigger("b-mail-dropdown-closeall")})}()},function(e,t){!function(e,t){function n(t){f.is_draggable&&(t&&t.preventDefault(),h.on("mousemove",p).on("mouseover",m).on("mouseup",v).on("focusout",g),Modernizr.msie||e(window).on("blur",v))}var r,i,o=e.contains,a=function(){var t=e(".b-drag-helper:eq(0)");return 0===t.length?(this.$control=e('<div class="b-drag-helper g-hidden"><div class="b-drag-helper__box"><div class="b-drag-helper__box__content"><div class="b-drag-helper__content"><div class="b-drag-helper__item b-drag-helper__item_message"></div></div></div></div></div>'),e("body").append(this.$control)):this.$control=t,this.$control.removeClass("b-drag-helper_few").removeClass("b-drag-helper_many"),this.$message=this.$control.find(".b-drag-helper__item_message").html(""),this};a.prototype.alignByEvent=function(e,t){t=t||{animate:!1};var n=Math.min(e.pageY+5,r-this.height+e.pageY-e.clientY),o=Math.min(e.pageX+5,i-this.width+e.pageX-e.clientX-2),a={left:o,top:n};t.animate?this.$control.animate(a,function(){this.hide()}.bind(this)):this.$control.css(a)},a.prototype.show=function(){this.$control.removeClass("g-hidden"),this.evaluateDimensions()},a.prototype.evaluateDimensions=function(){this.height=this.$control.height(),this.width=this.$control.width()},a.prototype.hide=function(){this.$control.addClass("g-hidden")},a.prototype.setText=function(e){this.$message.text(e)};var s=function(){};s.prototype.init=function(){return this.is_active=!1,this.is_draggable=!1,this};var u=function(){};u.prototype={traction:20,init:function(){},getTargetData:function(){return{valid:!1}},testTarget:function(e,t){for(var n,r,i={valid:!1},o=0,a=e.length;o<a;o++)if(n=e[o],r=n.test(t))return i={valid:!0,name:n.name,target:r};return i},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onDragEnter:function(){},onDragLeave:function(){},onDragOver:function(){},onDrop:function(){},hilite:function(t){e(t).hasClass("mail-DropArea-Section")||e(t).addClass("g-drop-place_hover")},nohilite:function(t){e(t).removeClass("g-drop-place_hover")},hiliteAll:function(){},nohiliteAll:function(){},getLabelText:function(t){return e(t).attr("data-title")}};var c,l=function(n){for(var r=e(n.target),i=t.DragNDrop._tests,o=0,a=i.length;o<a;o++){var u=i[o],c=u.test(n,r);if(c)return u.result(n,c)}return(new s).init()},f=!1,d=!1,h=e(document),p=function(t){if(!f.is_draggable)return!1;if(d||m(t),t.preventDefault(),f.is_active)f.onDrag(t,d);else{var n=Math.pow(t.clientX-f.evt.clientX,2),o=Math.pow(t.clientY-f.evt.clientY,2);Math.sqrt(n+o)>=f.traction&&(r=e(window).height(),i=e(window).width(),f.onDragStart(t))}},g=function(e){null===e.toElement&&v.call(this,e)},m=function(e){if(!f.is_active)return!1;var t=f.getTargetData(e.target);t.valid?d?t.target[0]!==d.target[0]&&(f.onDragLeave(e,d),d=t,f.onDragEnter(e,d)):(d=t,f.onDragEnter(e,d)):d&&d.target[0]&&!o(d.target[0],e.target)&&(f.onDragLeave(e,d),d=!1)},v=function t(n){f.is_active&&(d?f.onDrop(n,d):f.onDragEnd(n)),h.off("mousemove",p).off("mouseover",m).off("mouseup",t).off("focusout",g),Modernizr.msie||e(window).off("blur",t),f=(new s).init(),d=!1},_=function(e){1===e.which&&2!==e.buttons&&(f=l(e),n(e))};t.DragNDrop={_tests:[],add:function(t){e.isArray(t)?this._tests=this._tests.concat(t):this._tests.push(t)},EmptyDrag:u,getDragMessageArea:function(){return c||(c=new a),c},startDrag:_,setDragData:function(e){f=e},bindDragEvents:n,_enabled:!1,enable:function(){this._enabled||(h.on("mousedown.daria-dnd",_),ns.Model.get("folders").logDragndropAbility()),this._enabled=!0},disable:function(){h.off("mousedown.daria-dnd"),this._enabled=!1},isEnabled:function(){return this._enabled}},Daria.DragNDrop=t.DragNDrop}(jQuery,Jane)},function(e,t){!function(){function e(){}var t;Daria.nbFormCacher=function(e,t){this.init(e,t)},Daria.nbFormCacher.prototype={root:null,cache:null,dependenceController:null,changedControls:null,hasChangedControls:0,hasFocusedControls:!1,instanceId:null,dirtyStateClass:"b-setup__inner_show-submit",normalStateClass:"b-setup__inner_no-submit",inputCheckboxClass:"b-form-element__checkbox__input",inputRadioClass:"b-form-element__radio__input",inputTextClass:"b-form-element__input-text",textareaClass:"b-form-element__textarea",resetLinkSelector:".b-setup__inner__reset",init:function(e,t){var n=this;this.root=e,this.instanceId=t;var r=this.root.find(".daria-form-changeble");r.length&&(this.cache={},this.changedControls=[],r.each(function(){n.addControl(this)}),ns.events.on("cachedvalue.change",function(e,t){t.instance===this.instanceId&&this.onControlChange(t.control)}.bind(this)),this.root.find(this.resetLinkSelector).click(function(e){e.preventDefault(),e.stopPropagation(),this.cancelChanges()}.bind(this)),this.root.find("form").on("onSave",function(){this.applyChanges()}.bind(this)))},addControl:function(t){function n(){e("focus",this),i.hasFocusedControls=i.cache[a].focused=!0,i.changeDisplayMode()}function r(){e("blur",this),i.hasFocusedControls=i.cache[a].focused=!1,i.changeDisplayMode()}var i=this,o=nb.block(t),a=i.getControlName(o),s=o.getType();i._add(a,o),e(a,o.getType()),"input"!==s&&"textarea"!==s||(o.on("nb-focused",n),o.on("focusin",n.bind(o)),o.on("nb-blured",r),o.on("focusout",r.bind(o))),o.on("nb-changed",function(){i.onControlChange(o)})},updateControls:function(){var e=this;this.root.find(".daria-form-changeble").each(function(t,n){var r=nb.block(n),i=e.getControlName(r);e.cache[i]||e.addControl(n)})},onControlChange:function(e){var t=this.getControlName(e),n=this.cache[t],r=this.getControlValue(n.control);n.value===r?n.changed&&(n.changed=!1,this.hasChangedControls--):n.changed||(n.changed=!0,this.hasChangedControls++),this.changeDisplayMode()},applyChanges:function(){function e(e){e.blur()}for(var t in this.cache){var n=this.cache[t];n.changed&&(n.value=this.getControlValue(n.control),n.changed=!1,this.hasChangedControls--),n.focused&&n.control.forEach(e)}this.changeDisplayMode()},cancelChanges:function(){var e=this.cache;for(var t in e){var n=e[t];n.changed&&(this.setControlValue(n.control,n.value),n.changed=!1)}this.changeDisplayMode()},changeDisplayMode:function(){var e=this;if(this.hasChangedControls||this.hasFocusedControls){t&&clearTimeout(t),this.root.removeClass(this.normalStateClass).addClass(this.dirtyStateClass);var n=Object.keys(this.cache).map(function(t){return e.cache[t].changed||null});ns.events.trigger("form-cacher.changed",{instance:this.instanceId,changed:n})}else t=setTimeout(function(){e.root.addClass(e.normalStateClass).removeClass(e.dirtyStateClass),ns.events.trigger("form-cacher.unchanged",{instance:e.instanceId})},0)},isFormDirty:function(){return Boolean(this.hasChangedControls)},getForm:function(){return this._prepareForm(this.root.find("form"))},getControlValue:function(e){e=$.makeArray(e);var t,n=e[0].getType();switch(n){case"checkbox":e.length>1?(t=$.map($.grep(e,function(e){return e.isChecked()}),function(e){return e.getValue()||""}),t=t.join("|")):t=e[0].isChecked();break;case"radio":$.each(e,function(e,n){n.isChecked()&&(t=n.getValue())});break;case"select":$.each(e,function(e,n){t=n.getState().value});break;default:$.each(e,function(e,n){t=n.getValue()})}return t},setControlValue:function(e,t){e=$.makeArray(e);var n=e[0].getType(),r=this,i=[];if("radio"===n)$.each(e,function(e,n){n.getValue()===t?(n.isChecked()||i.push(n),n.check()):(n.isChecked()&&i.push(n),n.uncheck())}),$.each(i,function(e,t){t.$node.hasClass("daria-dependence-parent")&&ns.events.trigger("dependence.change",{block:t,instance:r.instanceId})});else if("checkbox"===n){if(1===e.length){var o=e[0];t?(o.isChecked()||i.push(o),o.check()):(o.isChecked()&&i.push(o),o.uncheck())}else{var a=new RegExp(t);$.each(e,function(e,n){t&&a.test(n.getValue())?(n.isChecked()||i.push(n),n.check()):(n.isChecked()&&i.push(n),n.uncheck())})}$.each(i,function(e,t){t.$node.hasClass("daria-dependence-parent")&&ns.events.trigger("dependence.change",{block:t,instance:r.instanceId})})}else"select"===n?$.each(e,function(e,n){n.setState({value:t})}):$.each(e,function(e,n){n.setValue(t)})},_add:function(e,t){if(this.cache[e]){var n=this.cache[e];n.control.push(t),"radio"===t.getType()&&n.value||(n.value=this.getControlValue(n.control))}else this.cache[e]={control:[t],value:this.getControlValue(t),changed:!1,focused:!1}},getControlName:function(e){var t=e.getName();return t&&"input"===e.getType()&&(t+="_"+e.id),e.$node.attr("cacher-id")||t},_prepareForm:function(e){var t=["disable_yabbles"],n=$(e);return _.each(t,function(e){var t=n.find("[name="+e+"]");t.is(":checked")?t.attr("checked",!1):t.attr("checked",!0)}),e}}}()},function(e,t){!function(e){var t={inbox:"Входящие",message:"Письмо",sent:"Отправленные",trash:"Удаленные",spam:"Спам",draft:"Черновики",template:"Шаблоны",archive:"Архив",contacts:"Адресная книга",unsubscribe:"Скрытые"},n={"compose.go":"написать","mailbox.check":"проверить",reply:"ответить","reply-tmpl":"автоответ","reply-all":"ответить всем",forward:"переслать",remove:"удалить","folder-delete":"удалить папку","add-template":"создать шаблон",tospam:"спам",notspam:"не спам",mark:"прочитано",unmark:"не прочитано","folder-mark-as-read":"прочитано для папки","folder-mark-as-unread":"не прочитано для папки",ignore:"игнорировать",unignore:"не игнорировать",archive:"архивировать",sendon:"переадресовать",move:"в папку",infolder:"в папку","folders.move-in-folder":"в папку",label:"метка",template:"автоответ",unsubscribe:"отписаться","toolbar-settings":"настройки тулбара","toolbar-add-button":"добавить кнопку",print:"распечатать",pin:"закрепить",unpin:"открепить",translate:"перевести","filters-create":"создать правило","message-source":"свойства письма","abook.select-all":"Клик Выделить все","abook.compose-go":"Клик Написать","mail-common.person-popup":"Клик Добавить контакт","abook.remove-contacts":"удалить контакт","abook.open-backups-dialog":"Клик Восстановить","abook.groups-dropdown":"Клик Добавить в группу","abook.remove-contacts-from-group":"Клик Удалить из группы","abook.toolbar-more-actions":"Клик Ещё"};e.ToolbarMetric={},e.ToolbarMetric.tbActive=function(r){if(!/9$/.test(Daria.uid))return!0;if(!ns.page.currentUrl)return!0;var i=ns.page.currentUrl.match(/^\#([a-z0-9]+)/),o=i&&i[1]||"inbox",a=["Toolbar"];return!t[o]||(a.push(t[o]),!n[r]||(a.push(n[r]),a.push("активна"),e.c(a),!0))},e.ToolbarMetric.tb=function(t){if(!n[t.buttonView.action])return!0;var r=Daria.Metric.getPath();e.c("Toolbar",r,Daria.is2pane()?"2pane":"3pane",n[t.buttonView.action],"клик")},e.ToolbarMetric.messageToolbar=function(t){e.c("Toolbar","Письмо",Daria.is2pane()?"2pane":"3pane",t,"клик")},e.ToolbarMetric.messageThreadToolbar=function(t){e.c("Toolbar треда",Daria.Metric.getPath(),Daria.is2pane()?"2pane":"3pane",t,"клик")},e.ToolbarMetric.abook=function(e){Daria.vAbook.Metrika.c("Тулбар",e)},e.ToolbarMetric.setMetricsForToolbars=function(t,r,i){t&&n[r]&&("abook-toolbar"===t?e.ToolbarMetric.abook(n[r]):"message-toolbar"===t?e.ToolbarMetric.messageToolbar(n[r]):"toolbar"===t?e.c("Toolbar",Daria.Metric.getPath(i),Daria.is2pane()?"2pane":"3pane",n[r],"клик"):"thread-toolbar"===t&&e.ToolbarMetric.messageThreadToolbar(n[r]))},e.ToolbarMetric.setToolbarMetrics=function(t,n,r,i){(n=n||ns.action.getParams(t.currentTarget))&&n.source&&e.ToolbarMetric.setMetricsForToolbars(n.source,r,i)},e.ToolbarMetric.btnActive=function(t,n){t&&Daria.uidEnds([9])&&("message-toolbar"===t?e.c("Toolbar","Письмо",Daria.is2pane()?"2pane":"3pane",n,"показ 0.1"):"toolbar"===t&&e.c("Toolbar",Daria.Metric.getPath(),Daria.is2pane()?"2pane":"3pane",n,"показ 0.1"))},e.ToolbarMetric.ub=function(t){if(!ns.page.current.page)return!1;var n=["folders","labels","filters"];return Daria.IS_CORP||n.push("collectors"),ns.request(n,{}).then(function(){var n=["User Button"];if(ns.Model.get("folders").getCountUserFolders()>0){if(!/(03|13|23|33|43)$/.test(Daria.uid))return;n.push("Пользователи с папками")}else if(ns.Model.get("filters").getCountEnableFilters()>0)n.push("Пользователи с фильтрами");else if(ns.Model.get("labels").getUserLabelsCount()>2){if(!/(03|13|23|33|43)$/.test(Daria.uid))return;n.push("Пользователи с метками")}else if(!Daria.IS_CORP&&ns.Model.get("collectors").getCount()>0)n.push("Пользователи со сборщиками");else{if(!/61$/.test(Daria.uid))return;n.push("Случайная выборка")}switch(ns.page.current.page){case"messages":n.push("Inbox");break;case"message":n.push("Compose");break;default:return}n=n.concat($.makeArray(t)),e.c(n)}),!0}}(Jane)},function(e,t){Daria.SendMail={__callback:{},send:function(e){var t=this,n="frame"+(new Date).getTime()+Daria.getRandomNumber(),r={frameId:n,compose_check:ns.Model.get("account-information").getDataKey("compose-check"),_connection_id:Daria.Config.connection_id,_ckey:Daria.ckey,_uid:Daria.uid};e.params&&$.extend(r,e.params),ns.Model.get("settings").isSet("save_sent")||(r.nosave="yes");var i={};$.isFunction(e.success)&&(i.success=e.success),$.isFunction(e.error)&&(i.error=e.error),this.addCallback(n,i),$.ajax({type:"POST",data:r,url:Daria.api["do-send"]+"?request="+n,complete:function(e,r){if(e&&200===e.status)t.callback(n,e.responseText);else{var i=e&&413===e.status;Jane.ErrorLog.send({errorType:"sendmail.send",status:e&&e.status,statustext:r},!i&&e.responseText),i?t.callback(n,'{"status":"attachment_too_big"}'):t.callback(n,"http_status_0")}}})},callback:function(e,t){var n=this.__callback[e];n&&(n.data=t,this._onload(e))},_onload:function(e){window.setTimeout(function(){this._runCallback(e)}.bind(this),100)},_runCallback:function(e){var t=this.__callback[e];if(t)if(this.stop(e),t.data){if(t.success)if("{"===t.data.charAt(0)){var n;try{n=JSON.parse(t.data)}catch(e){return void this._callOnError("BadData",t,"no_data")}Daria.parseLoginInfo(n)?t.success(n):this._callOnError("NoAuth",t,"no_data")}else this._callOnError("Exception",t,t.data)}else this._callOnError("NoResponse",t,"no_data")},_callOnError:function(e,t,n){Jane.ErrorLog.send({errorType:"sendmail.process_response",status:e,ckey:Daria.ckey,data:t.data}),t.error&&t.error(n||e)},addCallback:function(e,t){this.__callback[e]=t},stop:function(e){delete this.__callback[e],$("#"+e).empty().remove()},showSendingMessageProgress:function(e){var t=e.onResolve,n=e.sendUndoMetric;return new vow.Promise(function(e,r){var i=void 0;ns.events.trigger("message.sending",{name:"sending_message_progress",hideOnTimeout:!1,body:i18n("%Compose_Письмо_отправляется"),isCloseButtonVisible:!1,hideOnClick:!1,params:{onCancel:function(){clearTimeout(i),Daria.Statusline.hide("sending_message_progress"),n('Клик на "Отменить"'),r()}}}),n("Показ прогресс-бара"),i=setTimeout(function(){e(),t()},Daria.React.MESSAGE_SENDING_PROGRESS_TIME)})}}},function(e,t,n){Daria.AuthDialog=function(e,t){function r(e,t){switch(window.clearTimeout(J),k.setValue(""),k.disable(),e.status){case"ok":var n=F.getValue().split("@");return n[1]||(n[1]=t),void h(n[0],n[1]);case"login-empty":case"password-empty":case"account-not-found":case"password-invalid":case"account-disabled":c(e.status);break;case"captcha-invalid":c("captcha-invalid");break;case"captcha-required":break;case"internal-exception":return c("internal-exception"),void a();default:return void(e.url?window.location=e.url:a())}W=e.captcha_url,W&&(W=W.replace(/^http:/,"https:"),O.attr("src",W),k.enable(),M.removeClass("g-hidden")),d(),x.prop("disabled",!1).val(e.idkey?e.idkey:""),"captcha-required"===e.status&&W||N.setValue(""),i(),p()}function i(){window.setTimeout(function(){F.getValue()?N.getValue()?k.focus():N.focus():F.focus()},50)}function o(){Jane.ErrorLog.send({errorType:"noPassportResponse"}),p(),r({status:"internal-exception"})}function a(){location.reload()}function s(){return Daria.Config.pddDomain}function u(){return window.location.protocol+"//"+window.location.host+"/u2709/"}function c(e){V=e,S.html(H[e]).removeClass("g-hidden")}function l(e){e&&V!==e||(S.addClass("g-hidden"),V=null)}function f(){$(document).trigger("b-mail-dropdown-closeall"),L.addClass("b-mail-domik__button_loading")}function d(){L.removeClass("b-mail-domik__button_loading")}function h(e,t){g(),Daria.login!==e||s()!==t||ns.Model.get("account-information").hasMA()?($(document).off("hashchange"),$(window).off("beforeunload"),window.location=u(t)):ns.events.trigger("getauth")}function p(){j&&j.empty().remove(),U&&U.empty().remove(),j=U=null}function g(){B=null,delete Daria.AuthDialog.onResponse,delete Daria.AuthDialog.close,$(window).off("message",Daria.AuthDialog._onPostMessage),E.empty().remove(),E=null,p(),window.clearTimeout(z),window.clearTimeout(J)}var m=Daria.WMI.ERROR_CODES;if(t=t||{},!$(".b-auth-dialog")[0]){"postMessage"in window&&$(window).on("message",Daria.AuthDialog._onPostMessage);var v=Daria.getCookie("yandex_login");!1!==v&&t.error_code!==m.AUTH_NO_MAILBOX&&t.error_code!==m.AUTH_NO_PASSWORD||(v="");var _=s(),y=[],b=[],w=0;e=$.isArray(e)?e:[];for(var D=0,C=e.length;D<C;D++){var T=e[D];T.enabled&&(T.primary?y.push(T):(w%2==0?b.push({provider:[T]}):b[Math.floor(w/2)].provider.push(T),w++))}var A=b.length?b[b.length-1].provider:[];1===A.length&&A.push(!0);var E=$(Jane.tt("auth-dialog",{login:v.split("@")[0],pdd:_,"loading-icon":n(778),"social-providers":{"primary-providers":{provider:y},"popup-providers":b}}));Daria.AuthDialog.insertToDocument(E),ns.events.trigger("dialog.open");var S=E.find(".b-mail-domik__error"),x=E.find('input[name="idkey"]'),k=nb.$block(".js-authfield-captcha_answer",E),M=E.find(".b-mail-domik__captcha"),O=M.find(".b-captcha__image"),F=nb.$block(".js-authfield-login",E),N=nb.$block(".js-authfield-password",E),I=nb.$block(".js-auth-submit",E),P=nb.$block(".js-auth-cancel",E),L=E.find(".b-mail-domik__button"),R=E.find("input[name=twoweeks]"),B=new Lego.block["i-social"]({retpath:u()+"i-social__closer.html"});nb.$block(".js-domik-permament",E).on("nb-changed",function(){this.isChecked()?R.val("no"):R.val("yes")}),E.find(".b-mail-domik__social-link").click(function(){return f(),B.start(function(){var e=Daria.getCookie("yandex_login");e?(e=e.split("@"),e[1]=e[1]||"",h(e[0],e[1])):location.reload()},function(){r({status:"internal-exception"})},{provider:$(this).data("provider")}),!1}),i();var j,U,z=window.setTimeout(function e(){var t=F.getValue(),n=N.getValue(),r=!/^[-a-z0-9.`!@#$%^&*()_=+\[\]{};:"\\|,<>\/?]*$/i.test(n);n&&t?I.enable():I.disable(),r?c("login-invalid"):l("login-invalid"),z=window.setTimeout(e,100)},100),H={"captcha-invalid":i18n("%Authdialog_captcha-invalid"),"account-disabled":i18n("%Authdialog_account-disabled"),"account-not-found":i18n("%Authdialog_account-not-found"),"password-invalid":i18n("%Authdialog_password-invalid"),"login-invalid":i18n("%Authdialog_login-invalid"),"password-empty":i18n("%Authdialog_password-empty"),"login-empty":i18n("%Authdialog_login-empty"),"internal-exception":i18n("%Authdialog_internal-exception")},W="",J=null;E.on("click",".b-captcha-cantread",function(){return O.attr("src",W+"&cantread=1&ncrnd="+Math.floor(1e5*Math.random())),!1}),Daria.AuthDialog.onResponse=function(e){for(var t=e.split("?")[1].split("&"),n={},i=0,o=t.length;i<o;i++){var a=t[i].split("=");n[a.shift()]=decodeURIComponent(a.join("="))}delete n.ncrnd,r(n,s(e))},Daria.AuthDialog.close=function(){g(),Daria.AuthDialog.afterClose()},P.$node.click(function(){return a(),!1}).keydown(function(e){if(e&&27===e.keyCode)return a(),!1}),E.find("form").submit(function(){var e=F.getValue();window.clearTimeout(J),J=window.setTimeout(o,1e4),F.setValue(e),l(),M.addClass("g-hidden"),f();var t=u(_)+"login-status.html";$(this).find(".b-captcha__image").removeAttr("src");var n=this.cloneNode(!0);n.className="g-invisible";var r="auth-iframe-"+Daria.getRandomNumber();return U=$(n).attr("target",r).append('<input type="hidden" name="retpath" value="'+t+'"/>').appendTo("body"),j=$('<iframe class="g-invisible" name="'+r+'" src="javascript:false"></iframe>').appendTo("body"),window.setTimeout(function(){n.submit()},1),!1});var V}},Daria.AuthDialog.insertToDocument=function(e){e.appendTo("body")},Daria.AuthDialog._onPostMessage=function(e){if($.isFunction(Daria.AuthDialog.onResponse)){var t,n=e.originalEvent;try{t=$.parseJSON(n.data)["async-auth"]}catch(e){}var r=window.location.host.replace(/[.*+?(){}\[\]\/\\]/g,function(e){return"\\"+e});t&&new RegExp(r+"$").test(n.origin)&&Daria.AuthDialog.onResponse(t)}},Daria.AuthDialog.afterClose=function(){ns.Model.get("account-information").hasMA()?ns.page.forceReload():ns.events.trigger("getauth")}},function(e,t,n){e.exports=n.p+"_/f3957c530d285acd99830923ba63b05a-loading.gif"},function(e,t,n){n(780),n(781),n(782),n(783),n(784),n(785),n(786),n(787)},function(e,t){ns.action.define("common.trigger",function(e,t,n,r){var i={event:r,params:t},o=i.params.event,a=i.params.noprevent,s=$.extend({$event:i.event},i.params);if("string"==typeof o&&ns.events.trigger(o,s),a)return!0}),ns.action.define("common.back",function(){ns.page.history.back()}),ns.action.define("common.go",function(e,t,n,r){var i={params:t,event:r},o=i.event&&i.event.currentTarget;if(o&&"A"===o.tagName&&i.params.hasOwnProperty("new_window")){var a=$(o),s={href:a.attr("href")||null,target:a.attr("target")||null};return a.attr({href:i.params.url,target:"_blank"}),setTimeout(function(){a.attr(s)},1e3),!0}ns.page.go(i.params.url)}),ns.action.define("common.hide",function(e,t,n,r){var i={params:t,event:r};i.params.selector&&$(i.params.selector).hide()}),ns.action.define("common.clck",function(e,t){return t&&(t.pid?Daria.counter(t.pid,t.cid,t.path):t.metrika?Jane.c(t.metrika.split(":")):Jane.c(t.cid,t.path)),!0}),ns.action.define("common.change-lang",function(e,t){var n=t.lang,r=encodeURIComponent(document.location.href),i=Number(t.promo);if(i){var o;1===i||2===i?(ns.Model.get("settings").setSettings({lang_promo:1}),o=["Промо Языков","Первая страница",1===i?"Переключение языка "+n:"Переключения языка из выпадушки "+n]):3===i&&(ns.Model.get("settings").setSettings({lang_promo:2}),o=["Промо Языков","Вторая страница","Переключения языка из выпадушки "+n]),Jane.c(o)}var a=window.location;Daria.IS_CORP?ns.forcedRequest(["do-staff-settings"],{lang_ui:n}).then(function(e){"ok"===e[0].get(".status")&&window.location.reload(!0)}):ns.request(["secret-key"]).then(function(e){var t=Daria.Config["tune-url"],i=e[0].get(".key");try{a.href=t+"/?intl="+n+"&retpath="+r+"&sk="+i}catch(e){Jane.ErrorLog.send({errorType:"cancel_beforeunload_ie"})}})}),ns.action.define("common.ignore",function(e,t,n,r){({params:t,event:r}).event.preventDefault()}),ns.action.define("common.copy",function(e,t){var n=$(t.container).find('[data-click-action="common.copy"]');if(n.length){if(!Daria.Clipboard.canUse)return void n.addClass("g-hidden");var r=new Daria.Clipboard(n);r.on("ready",function(){this.setText(t.text)}),r.on("complete",function(){this.destroy(),t.onmouseup&&t.onmouseup()})}}),ns.action.define("common.close-share",function(){var e=ns.Model.get("settings"),t=Daria.themeId.slice(0,18)+"_x";e.setSettingOn(t),Jane.c(["Тема: "+Daria.themeId,"Клик по крестику"]),$(".b-service-tabs__share").remove()}),ns.action.define("common.close-dropdawn-if-curren-page",function(e,t,n,r){var i={params:t,event:r},o=i.event.currentTarget.href.split("#")[1];return Jane.c(i.params.metrika.split(":")),!(ns.page.getCurrentUrl().indexOf(o)>-1)||(Daria.Dropdown.closeAll(),!1)}),ns.action.define("common.show-themes-selector",function(e,t,n,r){r.preventDefault(),Jane.c(t.metrika.split(":")),ns.Model.get("themes-selector").open(),ns.page.go()}),ns.action.define("common.show-unsubscribe-popup",function(e,t,n,r){r.preventDefault(),Jane.c(t.metrika.split(":")),ns.events.trigger("daria:unsubscribe-popup:show")}),ns.action.define("common.lang-promo-close",function(e,t,n,r){var i={params:t,event:r};Jane.c(["Промо Языков","Вторая страница","Закрытие крестиком"]),$(i.event.currentTarget).closest(".b-promo-lang").remove()}),ns.action.define("common.exitAll",function(e,t,n,r){var i=r.currentTarget.href;Jane.c("Залогиновая шапка. Правая часть","Меню за логином",'Показали диалог "Выход со всех устройств"'),Daria.Dialog.open({title:i18n("%Exit_all_dialog_title"),body:Jane.tt("mail:js-exit-all-dialog",{"exitall-url":i}),width:380,oncancel:function(){Jane.c("Залогиновая шапка. Правая часть","Меню за логином",'Диалог "Выход со всех устройств" нажали Отмена')}})}),ns.action.define("common.toggle-birthday-background",function(){ns.Model.get("settings").toggleSetting("no-birthday-skin",function(e){if(e){var t=$("html");t.hasClass("m-skin-birthday-bg")?Jane.c({"Днерожденческий фон":"Вернуть обычное оформление"}):Jane.c({"Днерожденческий фон":"Праздничное оформление"}),t.toggleClass("m-skin-birthday-bg")}})}),ns.action.define("common.scroll-top",function(){$("html, body").animate({scrollTop:"0px"},"fast")})},function(e,t){ns.action.define("common.show-hint",function(e,t,n){var r="42em";window.opener&&(r="30em"),t.text||(t=Daria.parseQuery($(n).data("params"))),Daria.Dialog.open({body:t.text,hideOnScroll:t["hide-on-scroll"],onTarget:{target:n,side:t&&t.side||"top",pos:t&&t.pos||"center"},width:t&&t.width?t.width:r})}),function(){function e(){window.clearTimeout(r),t&&t.removeClass("b-hint_show")}var t,n,r;ns.events.on("pageVisible.change",e),ns.action.define("common.hover-hint",function(i){e();var o=i.params,a=o.text;if(a&&"mouseenter"===i.event.type){t||(t=$('<span class="b-hint"/>').appendTo("body")),n||(n=$(window));var s=$(i.event.currentTarget),u=o.v||"bottom";r=window.setTimeout(function(){if(s.hasClass("daria-hover")){t[0].style.cssText="",t.html(a);var e=Daria.Dimensions.rect(s[0]);if(e.left||e.right){var r=Daria.Dimensions.rect(t[0]),i={left:e.left+Math.floor(e.width/2-r.width/2),top:e.top+("top"===u?-r.height-5:e.height)};i.left+r.width>n.width()-10&&(i.left=e.right-r.width),t.css(i).addClass("b-hint_show")}}},1e3)}})}()},function(e,t){ns.action.define("sound.message",function(e,t,n,r){if(t.setup){nb.$block($(r.target).closest(".js-sound-message")).isChecked()||Daria.Sound.play("message")}else Daria.Sound.play("message");return!0})},function(e,t){ns.action.define("compose.go",function(e,t){t=t||{};var n={};t.tab&&(n.tab=t.tab),"template"===t.save_symbol&&"reply"===ns.page.current.params.oper&&t.ids?Daria.vCompose.addReplyTemplate(t.ids):"template"===t.save_symbol&&"forward"===ns.page.current.params.oper&&t.ids?Daria.vCompose.addForwardTemplate(t.ids):"compose"===ns.page.current.page?Daria.composeGo(n,{force:t.force}).then(function(){t.restore||Daria.vCompose.reset(),Daria.vCompose.setCheckChanges(),Daria.vCompose.open(t)}):(Daria.composeParams=t,Daria.composeGo($.extend(n,t),{force:!0}))}),ns.action.define("compose.edit",function(e,t){Daria.composeGo({ids:t.ids})}),ns.action.define("compose.open",function(e,t){var n=$.extend({},t||{},ns.page.current.params),r=$.makeArray(n.ids),i={};n.tab&&(i.tab=n.tab),n.oper&&(i.oper=n.oper),r.length>0&&(i.ids=r);var o=Daria.vCompose.notifyNoReplyGetSelectedTime();o&&(i.no_reply_notify_time=o),Daria.composeGo(i)})},function(e,t){ns.action.define("dropdown.toggle",function(e,t,n,r){n=n||r.currentTarget,Daria.Dropdown.toggle(n),_.isPlainObject(t)&&(t["dropdown-charset"]&&Jane.c({"Просмотр письма":{"Развернутая шапка":'клик по "Сменить кодировку"'}}),t.metrika&&Jane.c(t.metrika.split(":")))}),ns.action.define("dropdown.adaptive-toggle",function(e,t,n,r){n=n||r.currentTarget;var i=$(n).closest(".b-mail-dropdown"),o=i.offset(),a=o.top,s=$(window).height()-i.height()-o.top;i.attr("data-params","horiz="+(a>s?"up":"down")),Daria.Dropdown.toggle(n)}),ns.action.define("dropdown.close-current",function(){Daria.Dropdown.closeCurrent()})},function(e,t){var n=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){ns.action.define("mailbox.check",function(e,t){t&&t.hasOwnProperty("from-logo")&&Jane.c("Залогиновая шапка.Левая часть","Меню-бургер сервисов","Логотип",'Клик по "Почта"'),ns.events.trigger("fake-loader");var r=ns.page.home;if("messages"===ns.page.current.page)if(Daria.is2pane()){var i=Daria.Page.generateUrl.closeMessage();r=ns.page.go.bind(ns.router,i)}else r=ns.page.go;var o=ns.Model.get("skin-saver-state");return o.isPreviewMode()&&o.togglePreviewMode(!1),ns.request("get_user_activity").then(function(e){return n(e,1)[0].syncLcn().then(function(e){e&&Daria.invalidateMailHandlers(!0,"mailbox.check")},function(){Daria.invalidateMailHandlers(!0,"mailbox.check")}).then(function(){r()})})})}()},function(e,t){ns.action.define("collector.create",function(e,t,n,r){r&&r.preventDefault();var i=$(n).closest("form"),o=t.checkType,a=t.owner,s=t.modelParams;(Daria.Collectors.Checker.shouldSkipClientCheck(o)||$.data(i[0],"settings").validate())&&(ns.Model.get("collectors").getCount()<10?Daria.Collectors.Creator.run(i,a,s,o):Daria.Dialog.notice({title:i18n("%Setup_Collector_Dialog_Create_title"),body:i18n("%Setup_Collector_Dialog_Create_body")}))})},function(e,t,n){!function(){function e(){if(!a){var e=Jane.tt("common:settings-dropdown",t());$(e).appendTo("body"),a=nb.block(e),r&&a.$node.find(".settings-popup").css({width:r}),a.$node.on("click",".settings-popup-top A",function(){a.close()}),a.on("nb-opened",function(){$(".js-header-settings:eq(0)").addClass("is-active"),Jane.c("Залогиновая шапка. Правая часть","Настройки","Открытие поп-апа настроек")}),a.on("nb-closed",function(){$(".js-header-settings:eq(0)").removeClass("is-active")})}$(".js-header-settings").addClass("nb").attr("data-nb-popup-toggler","{id: 'settings-dropdown'}").attr("data-nb","popup-toggler"),nb.$block(".js-header-settings")}function t(){if(!o){var e=new i;o={columns:[{col:e.getColumn(1)},{col:e.getColumn(2)},{col:e.getColumn(3)}]}}return o}var r,i=n(788),o=null,a=null,s=["ka","hy"],u=["az","kk","tt","tr","ro"];-1!==_.indexOf(s,Daria.Config.locale)?r="860px":-1!==_.indexOf(u,Daria.Config.locale)&&(r="780px"),ns.events.on("ns-page-after-load",e)}()},function(e,t,n){"use strict";function r(){this.menuItemsData=_.extend({},o),this.menuItemsHeap=_.extend({},a,{"setup-collectors":!Daria.IS_CORP,"setup-unsubscribe-filters":Daria.allowUnsubscribeFiltersPopup(),themes:!Daria.Config.workspace&&!Daria.Config.NO_SETTINGS}),this.builders=[this._firstColumnBuilder.bind(this),this._secondColumnBuilder.bind(this),this._thirdColumnBuilder.bind(this)]}var i="metrika=Залогиновая шапка. Правая часть:Настройки:Открытие поп-апа настроек:Клик по ",o={"setup-sender":{name:"setup-sender",attrs:{href:"#setup/sender","data-click-action":"common.close-dropdawn-if-curren-page","data-params":i+"«Личные данные, подпись, портрет»"},text:i18n("%Setup_personal_data")},"setup-filters":{name:"setup-filters",attrs:{href:"#setup/filters","data-click-action":"common.close-dropdawn-if-curren-page","data-params":i+"«Правила обработки писем»"},text:i18n("%Setup_Правила_обработки_писем")},"setup-collectors":{name:"setup-collectors",attrs:{href:"#setup/collectors","data-click-action":"common.close-dropdawn-if-curren-page","data-params":i+"«Сбор почты с других ящиков»"},text:i18n("%Setup_collectors_name")},"setup-folders":{name:"setup-folders",attrs:{href:"#setup/folders","data-click-action":"common.close-dropdawn-if-curren-page","data-params":i+"«Папки и метки»"},text:i18n("%Setup_folders_name")},"setup-security":{name:"setup-security",attrs:{href:"#setup/security","data-click-action":"common.close-dropdawn-if-curren-page","data-params":i+"«Безопасность»"},text:i18n("%Setup_security_name")},"setup-other":{name:"setup-other",attrs:{href:"#setup/other","data-action":"common.close-dropdawn-if-curren-page","data-params":i+"«Прочие»"},text:i18n("%Setup_other")},"setup-abook":{name:"setup-abook",attrs:{href:"#setup/abook","data-action":"common.close-dropdawn-if-curren-page","data-params":i+"«Контакты»"},text:i18n("%Setup_abook_name")},"setup-todo":{name:"setup-todo",attrs:{href:"#setup/todo","data-action":"common.close-dropdawn-if-curren-page","data-params":i+"«Дела»"},text:i18n("%Setup_todo_name")},themes:{name:"themes",attrs:{href:"#","data-action":"common.show-themes-selector","data-params":i+"«Оформление»"},text:i18n("%Setup_themes_name")},"setup-unsubscribe-filters":{name:"setup-unsubscribe-filters",attrs:{href:"#","data-action":"common.show-unsubscribe-popup","data-params":i+"«Управление рассылками»"},text:i18n("%Setup_subscribes_manage"),isNew:!0}},a={"setup-sender":!0,"setup-filters":!0,"setup-collectors":!0,"setup-folders":!0,"setup-security":!0,"setup-other":!0,"setup-abook":!0,"setup-todo":!0,themes:!0,"setup-unsubscribe-filters":!0};r.prototype.getColumn=function(e){if(e=Number(e),isNaN(e)||e<=0)throw new Error("SettingsDropdownColumnsFactory.getColumn принимает числа > 0");return this.builders[e-1]()},r.prototype._firstColumnBuilder=function(){var e=["setup-sender","setup-filters","setup-collectors","setup-unsubscribe-filters","themes","setup-abook"],t=Daria.IS_CORP||!Daria.allowUnsubscribeFiltersPopup()?3:4;return this._columnBuilder(e,t)},r.prototype._secondColumnBuilder=function(){var e=["setup-folders","setup-security","themes"];return(Daria.Config.workspace||Daria.Config.NO_SETTINGS)&&e.push("setup-abook"),e.push("setup-other"),this._columnBuilder(e,3)},r.prototype._thirdColumnBuilder=function(){var e=["setup-abook","setup-todo","setup-other"];return this._columnBuilder(e,3)},r.prototype._columnBuilder=function(e,t){var n=[],r=this;return e.every(function(e){return!r.menuItemsHeap[e]||!r.menuItemsData[e]||(n.push(_.extend({},r.menuItemsData[e])),r.menuItemsHeap[e]=!1,n.length<t)}),n},e.exports=r},function(e,t,n){Daria.Libs.add({Atom:{url:"//yastatic.net/daas/atom.js",ref:function(){return window.Atom}},"Ya.share":{url:"//yastatic.net/share/share.js",ref:function(){return window.Ya&&Ya.share}},"Ya.Metrika":{url:"//mc.yandex.ru/metrika/watch.js",ref:function(){return window.Ya&&Ya.Metrika}},"Ya.Zen":{url:"//"+Daria.Config["zen-url"]+"/widget-loader",ref:function(){return window.YandexZen}},"Ya.Maps":{url:function(){return"//api-maps.yandex.ru/2.1/?lang="+Daria.Config.locale+"_"+Daria.Config["domain-options"].region}(),ref:function(){return window.ymaps}},Wookmark:{url:n(790),ref:function(){return $.fn.wookmark}},DiskWidgetSaveApi:{url:"//yastatic.net/disk/widget-save/api/0.3.2/widget-save-api.min.js",ref:function(){return window.WidgetSaveApi}},PageTranslator:{url:"//translate.yandex.net/v2.139.1487074262/js/tr_page.js",ref:function(){return(window.yt||{}).PageTranslator}}})},function(e,t,n){e.exports=n.p+"_/98a6cec94803490bb217a87bb7b546ca-jquery.wookmark.min.js"},function(e,t,n){Daria.Transport=function(e){this.url=e,this._queue=new vow.Queue({weightLimit:1}),this._msgQueue=[],this._enqueue=_.debounce(this._enqueue,200),this._onConnectBackend=this._onConnectBackend.bind(this),this._onDisconnectBackend=this._onDisconnectBackend.bind(this)},Daria.Transport.prototype={onmessage:function(e){Daria.Transport.log("new message",e);var t;try{t=JSON.parse(e),"calendar"===t.service&&(t.message=JSON.parse(t.message)),t.raw_data&&(t.raw_data=JSON.parse(t.raw_data))}catch(t){return Jane.ErrorLog.send({errorType:"xiva.json_parse"},e),this._socket.sendConfirm(),!1}return"ping"===t.operation?(t["server-interval-sec"]&&this._socket.updatePingEventTimeout(t["server-interval-sec"]),!1):(this._socket.sendConfirm(t),this.processMessage(t,e),!0)},processMessage:function(e,t){if(e.uid&&e.uid!==Daria.uid){if(e.raw_data&&"transfer"===e.raw_data.operation)return;return void("insert"===e.operation?ns.events.trigger("xiva.mail.multi.insert",e):ns.events.trigger("xiva.mail.multi.update",e))}return _.contains(["calendar","mail"],e.service)&&Jane.ErrorLog.send({ts:Date.now(),msg:JSON.stringify(_.omit(e,["raw_data","message"])),type:"xivaMsg"}),"calendar"===e.service?void this.sendCommonEvent(e):"mail"===e.service&&e.operation&&e.lcn?void this.enqueue(e):(Daria.Transport.log("unknown message",t),void Jane.ErrorLog.send({errorType:"xiva.unknown.message"},t))},enqueue:function(e){this._msgQueue.push(e),this._enqueue()},sendCommonEvent:function(e){var t=["xiva",e.service,e.operation].join(".");ns.events.trigger(t,e)},abort:function(){return this._socket&&(this._socket.abort(),delete this._socket),this},connect:function(){Daria.Transport.Backend.test()||Jane.ErrorLog.send({event:"xiva.no_websocket"}),Daria.Transport.log("Transport","create"),this._socket=new Daria.Transport.Backend(this.url,this.onmessage.bind(this)),this._socket.on("connect",this._onConnectBackend),this._socket.on("disconnect",this._onDisconnectBackend)},onLine:function(){return _.get(this._socket,"_opened",!1)},_enqueue:function(){this._queue.stop(),this._msgQueue.forEach(function(e){var t=Daria.Xiva.handlers[e.operation];if(!_.isFunction(t))return void Jane.ErrorLog.send({event:"xiva.mail.unhandled",data:JSON.stringify(e)});this._queue.enqueue(t.bind(Daria.Xiva.handlers,e),{weight:1,priority:-e.lcn})},this),this._msgQueue=[],this._queue.start()},_onConnectBackend:function(){this.atrigger("online")},_onDisconnectBackend:function(){this.atrigger("offline")}},no.extend(Daria.Transport.prototype,ns.Events),Daria.Transport.__instance=null,Daria.Transport.getInstance=function(e){if(null===Daria.Transport.__instance&&!1!==e||e){Daria.Transport.abortInstance();var t=new Daria.Transport(e);t.connect(),Daria.Transport.__instance=t}return Daria.Transport.__instance},Daria.Transport.abortInstance=function(){Daria.Transport.__instance&&(Daria.Transport.__instance.abort(),Daria.Transport.__instance=null)},Daria.Transport.LOG_MAX_ENTRIES=100,Daria.Transport.LOG=[],Daria.Transport.log=function(e,t){var n={msg:t,tm:(new Date).toString(),type:e||""};Daria.Transport.LOG.push(n),Daria.Transport.LOG.length>Daria.Transport.LOG_MAX_ENTRIES&&Daria.Transport.LOG.splice(0,1)},n(792),n(793),n(794)},function(e,t){Daria.Transport.Backend=function(e,t){this.url=e,this.msgProcessor=t,this._aborted=!1,this._reconnectCnt=0,this._reconnectTimer=null,this._pingEventTimer=null,this._pingEventTimeout=65e3,this._opened=!1,this.__onOpenTimer=null,this.__ON_OPEN_TIMEOUT=6e4,this._onWindowFocus=null,this._watchWindowFocus(),this.reconnect(!0)},Daria.Transport.Backend.prototype={sendConfirm:function(e){var t={reaction:"ack",parsed:Boolean(e)};e&&"server_notify_id"in e&&(t.server_notify_id=e.server_notify_id),this.sendMessage(t)},updatePingEventTimeout:function(e){this._pingEventTimeout=1e3*(e+5)},__successConnect:function(){this._reconnectCnt=0},_onOpen:function(e){this.__clearReconnectTimer(),this.__clearOnOpenTimer(),this.__onOpenTimer=window.setTimeout(this.__successConnect.bind(this),this.__ON_OPEN_TIMEOUT);var t=this._opened;this._opened=!0,this._aborted=!1,t||this.atrigger("connect"),e&&ns.Model.get("get_user_activity").syncLcn()},_watchWindowFocus:function(){this._onWindowFocus=function(){if(this._aborted)return void $(window).off("focus",this._onWindowFocus);this._opened||this.reconnect(!0)}.bind(this),$(window).on("focus",this._onWindowFocus)},_unwatchWindowFocus:function(){this._onWindowFocus&&($(window).off("focus",this._onWindowFocus),this._onWindowFocus=null)},_onClose:function(){var e=this._opened;this._opened=!1,this.__clearOnOpenTimer(),this.__clearReconnectTimer(),this.disablePingEventCheck(),e&&this.atrigger("disconnect")},abort:function(){this._aborted=!0,this._closeConnection(),this._unwatchWindowFocus(),this.off("connect"),this.off("disconnect")},_closeConnection:function(){this._onClose(),this.transportAbort()},reconnect:function(e){if(!this._aborted){this._closeConnection();var t;e?t=0:(t=this._reconnectCnt?Math.min(3e4+3e3*this._reconnectCnt,6e4):0,this._reconnectCnt++),this._reconnectTimer=window.setTimeout(function(){this.connect(!e)}.bind(this),t)}},enablePingEventCheck:function(){this.disablePingEventCheck(),this._pingEventTimer=window.setTimeout(function(e){return function(){Daria.Transport.log("Backend","reconnect because ping"),e.reconnect()}}(this),this._pingEventTimeout)},disablePingEventCheck:function(){null!==this._pingEventTimer&&window.clearTimeout(this._pingEventTimer),this._pingEventTimer=null},__clearOnOpenTimer:function(){null!==this.__onOpenTimer&&window.clearTimeout(this.__onOpenTimer),this.__onOpenTimer=null},__clearReconnectTimer:function(){null!==this._reconnectTimer&&window.clearTimeout(this._reconnectTimer),this._reconnectTimer=null},connect:function(e){if(!this.ws||!this._opened){this.ws=new WebSocket(this.url.toString());var t=this;this.ws.onopen=function(){Daria.Transport.log("WebSocket","open"),t._onOpen(e)},this.ws.onmessage=function(e){t.enablePingEventCheck(),t.msgProcessor(e.data)},this.ws.onclose=function(){Daria.Transport.log("WebSocket","close"),t.reconnect()},this.ws.onerror=function(){Daria.Transport.log("WebSocket:error",arguments),t.reconnect()},this.enablePingEventCheck()}},sendMessage:function(e){this.ws&&this.ws.send(JSON.stringify(e))},transportAbort:function(){this.ws&&(this.ws.onopen=this.ws.onmessage=this.ws.onclose=this.ws.onerror=null);try{this.ws&&this.ws.close(1e3)}catch(e){}this.ws=null}},no.extend(Daria.Transport.Backend.prototype,ns.Events),Daria.Transport.Backend.test=function(){return Boolean(window.WebSocket)}},function(e,t){Daria.TransportWrapper=function(){function e(){Daria.Transport.abortInstance();var e=[];e.push(Daria.uid),ns.Model.get("account-information").getMA().forEach(function(t){e.push(t.uid)});var n=$.url("");n.path("/v1/subscribe/").proto("wss").host(Daria.Config.xivaHost).addParam("uid",e.join(",")).addParam("service",t.join(",")).addParam("client","u2709").addParam("session",Daria.Config.connection_id),Daria.Transport.getInstance(n)}var t=["mail","calendar"];e(),ns.events.on("noauth",function(){Daria.Transport.abortInstance()}),ns.events.on("getauth",e)},ns.events.on("pageinit",function(){Daria.TransportWrapper()})},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e){return decodeURIComponent(e.replace(/\+/g,"%20"))}function r(t,n,r){s.undef(t[n])&&(t[n]=[]),e.isArray(r)?t[n]=t[n].concat(r):t[n].push(r)}function i(e,t){for(var n=e[t],r=n.length,i=new Array(r),o=l(t),a=0;a<r;a++)i[a]=o+"="+l(n[a]);return i}function o(e){for(var n,i,o,a={},s=e.replace(/\+/g,"%20").split("&"),u=0,c=s.length;u<c;u++)n=s[u].split("="),(i=n.shift())&&(o=n.length>1?n.join("="):n[0]||"",r(a,t(i),t(o)));return a}var a,s={def:function(e){return"undefined"!=(void 0===e?"undefined":n(e))},undef:function(e){return"undefined"==(void 0===e?"undefined":n(e))},string:function(e){return"string"==typeof e}},u=/^((((\w+):)\/\/)(([\w\-\.]+)(\:(\d+))?))?(\/?[^\?#]*)?(\?([^#]*))?(#(.*))?$/,c=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/,l=encodeURIComponent,f={proto:"Proto",host:"Host",port:"Port",path:"Path",hash:"Hash"},d=function(e){e=s.def(e)?e.toString():window.location.href;var n=e.match(u);if(!n)throw new Error("This is not an url");this.Href=n[0],this.Proto=n[4]||"",this.Host=n[6]||"",this.Port=n[8]||0,this.Path=decodeURI(n[9]||""),this.Query=o(n[11]||""),this.Hash=t(n[13]||"")};d.prototype={go:function(){window.location.href=this.toString()},toString:function(){var e="";(this.Proto||this.Host)&&this.Host&&(e+=(this.Proto||"http")+"://"+this.Host,this.Port&&(e+=":"+this.Port)),this.Path&&(this.Host&&0!==this.Path.indexOf("/")&&(e+="/"),e+=encodeURI(this.Path));var t=this.query();return t&&(e+="?"+t),this.Hash&&(e+="#"+l(this.Hash)),e},clone:function(){return new e.url(this.toString())},query:function(e){if(s.def(e))return this.clearQuery(),s.string(e)?this.Query=o(e):this.replaceParams(e),this;var t=[];for(var n in this.Query)t=t.concat(i(this.Query,n));return t.join("&")},queryKeys:function(){var e=[];for(var t in this.Query)e.push(t);return e.sort()},addParam:function(e,t){return r(this.Query,e,t),this},addParams:function(e){for(var t in e)r(this.Query,t,e[t]);return this},removeParams:function(e){for(var t=0,n=e.length;t<n;t++)delete this.Query[e[t]];return this},replaceParams:function(e){var t=[];for(var n in e)t.push(n);return this.removeParams(t),this.addParams(e),this},clearQuery:function(){return this.Query={},this},getParam:function(e){var t=this.Query[e];return t?t[0]:null},getParams:function(e){return this.Query[e]||[]}};for(a in f)d.prototype[a]=function(e){return function(t){return s.def(t)?(this[e]=t,this):this[e]}}(f[a]);d.isValid=function(e){return c.test(e)},e.extend({url:function(e){return new d(e)}})}(jQuery)},function(e,t){ns.events.on("daria-before-init",function(){var e={experiments:Daria.Config.metrikaExps};!Daria.IS_CORP&&!Daria.Config.pddDomain&&!Daria.Config.workspace&&(e.tns={account:"yandex_ru",tmsec:"yandex_mail"}),Jane.Metrika.init(Daria.Config.metricaID,e)}),ns.events.on("daria-before-init",function(){var e=Daria.is2pane()?"одна страница":Daria.is3pv()?"письмо справа":"письмо снизу";Jane.c("theme","u2709",e,Daria.Config.themeId)}),ns.events.on("daria-before-init",function(){ns.Model.get("settings").isSet("dnd_enabled")&&Daria.DragNDrop.enable()})},function(e,t){ns.router.regexps.any=".+?",ns.router.regexps.int="-?[0-9]+",ns.router.regexps.uint="[0-9]+",ns.router.regexps.anyWithQuestionMark=".+",ns.router.regexps.search_type="discount|news|password|people|social|ticket",Daria.IS_CORP?ns.router.regexps["setup-tab"]="abook|client|filters|filters-create|folders|interface|journal|other|security|sender|todo":ns.router.regexps["setup-tab"]="abook|client|collector|collectors|filters|filters-create|folders|interface|journal|other|security|sender|todo",ns.router.regexps.TFolderDefault="archive|draft|inbox|outbox|sent|spam|template|trash|unsubscribe",ns.router.regexps["TMessage-right-tab"]="attachments|history|links|thread",ns.router.regexps.TThreadID="t[0-9]+",ns.router.regexps.TComposeOper="forward|reply|reply-all|template",ns.router.regexps.TComposeMode="html|plain",ns.router.routes={redirect:{"#":"#inbox","#message/{ids:int}.*":function(e){if(Daria.is3pane()){var t=e.ids,n=ns.Model.get("message",{ids:t}).getFolderId();return ns.router.generateUrl("messages",{current_folder:n||ns.Model.get("folders").getFidBySymbol("inbox")})+"/message/"+t}return!1},"#setup":function(){if(Daria.Config.NO_SETTINGS)return"#inbox"},"#setup/interface":function(){return Daria.Config.NO_SETTINGS?"#inbox":"#setup/interface/"+Daria.Config.layout},"#setup/{tab:setup-tab}/":function(){if(Daria.Config.NO_SETTINGS)return"#inbox"},"#folder/{current_folder:int}":function(e){if(!ns.Model.get("folders").getFolderById(e.current_folder))return ns.router.url("#404")},"#{default_folder:TFolderDefault}":function(e){Daria.router.symbolToFid(e)},"#.*thread/\\d+":function(){return ns.page.getCurrentUrl().replace(/thread\/(\d+)/,"thread/t$1")},"#done":function(){var e=!1,t=ns.Model.isDefined("done")&&ns.Model.get("done");return t&&t.isDoneAllowed()||(e="#"),e},"#categories/{category:id}":function(e){var t=Daria.Config.workspace,n=Boolean(Daria.Config.pddDomain),r=ns.Model.get("settings").isCompactHeaderMode();if(Daria.is3pane()||t||n||r)return"#search?request=filter:"+e.category},"#search-options":"#inbox"},rewriteUrl:{},route:_.extend(Daria.IS_CORP?{}:{"#setup/{tab:setup-tab==collector}/":"setup-collector"},{"#categories/{category:id}/thread/{thread_id:TThreadID}":"messages","#categories/{category:id}/message/{ids:int}":"messages","#categories/{category:id}":"messages","#compose2/{ids:int}":"compose","#compose2/oper={oper:TComposeOper}":"compose","#compose2/to={to:any}":"compose","#compose2/mailto={mailto:any}":"compose","#compose2/mode={mode:TComposeMode}":"compose","#compose2":"compose","#compose/{ids:int}":"compose2","#compose/{ids:int}/oper={oper:TComposeOper}":"compose2","#compose/oper={oper:TComposeOper}":"compose2","#compose/mailto={mailto:any}":"compose2","#compose":"compose2","#done":"done","#contacts/group{tid:int}/{q:any}":"abook","#contacts/group{tid:int}":"abook","#contacts/all/{q:any}":"abook","#contacts/all":"abook","#contacts/shared{shared:int=1}":"abook","#contacts":"abook","#{attachments==attachments}/{ids:int}":"messages","#{attachments==attachments}":"messages","#{unread==unread}/{ids:int}":"messages","#{unread==unread}":"messages","#{important==important}/{ids:int}":"messages","#{important==important}":"messages","#{search==search}/{thread_id:TThreadID}":"messages","#{search==search}/{ids:int}":"messages","#{search==search}":"messages","#{default_folder:TFolderDefault}/message/{ids:int}":"messages","#{default_folder:TFolderDefault}/thread/{thread_id:TThreadID}":"messages","#folder/{current_folder:int}/message/{ids:int}":"messages","#folder/{current_folder:int}/thread/{thread_id:TThreadID}":"messages","#label/{current_label:int}/message/{ids:int}":"messages","#label/{current_label:int}/thread/{thread_id:TThreadID}":"messages","#folder/{current_folder:int}":"messages","#label/{current_label:int}":"messages","#thread/{thread_id:TThreadID}/message/{ids:int}":"messages","#thread/{thread_id:TThreadID}":"messages","#message/{ids:int}":"message","#message/{ids:TThreadID}":"message","#no-message":"no-message","#setup/{tab:setup-tab==sender}/":"setup-sender","#setup/{tab:setup-tab==filters-create}/id={id:int}":"setup","#setup/{tab:setup-tab==filters-create}/folder={folder:int}":"setup","#setup/{tab:setup-tab==filters-create}/label={label:any}":"setup","#setup/{tab:setup-tab==filters-create-simple}/":"setup","#setup/{tab:setup-tab==filters-create-simple}/{action:any}":"setup","#setup/{tab:setup-tab}/":"setup","#setup":"setup"}),rewriteParams:{messages:function(e){if(e.search||e.category)return e;var t=Daria.is2pane();Daria.router.symbolToFid(e),e.datePager&&!/^(((1[0-2])|(0[0-9]))\.)?((19[7-9][0-9])|(20[0-9]{2}))$/.test(e.datePager)&&delete e.datePager,e.attachments&&(e.extra_cond="only_atta",e.goto="all"),e.unread&&(e.extra_cond="only_new",e.goto="all"),e.important&&(e.current_label=ns.Model.get("labels").getImportantLID()),Daria.router.addThreadedParam(e);var n=/\d{2}\.\d{2}\.\d{4}/;return!e.search&&!e.threaded&&n.test(e.from)&&n.test(e.to)&&t&&(e.datePagerSearch="yes"),e},abook:function(e){if(!e.lang){var t=_(["ru","tt","uk","be"]).contains(Daria.Config.locale)?"ru":"en";e.lang=ns.Model.get("settings").getSetting("abook-switch-lang")||t}return e.type||(e.type="normal"),"shared"in e&&(e.shared=Daria.toIntFlag(e.shared)),e},compose:function(e){return e.mailto&&(e.to=e.mailto,delete e.mailto),e.subj&&(e.subject=e.subj,delete e.subj),e},compose2:function(e){var t=e.mailto&&e.mailto.replace(/^mailto:/,"");if(!t)return e;var n=t.split("?")[0],r=Daria.parseQuery(t.split("?")[1]),i=Daria.lowerifyObjectKeys(r);return n&&(e.to=decodeURIComponent(n)),i.to&&(e.to=e.to?e.to+","+i.to:decodeURIComponent(i.to)),i.subject&&(e.subject=decodeURIComponent(i.subject)),i.cc&&(e.cc=decodeURIComponent(i.cc)),i.bcc&&(e.bcc=decodeURIComponent(i.bcc)),i.body&&(e.body=decodeURIComponent(i.body)),delete e.mailto,e}}},ns.events.on("daria-before-init",ns.router.buildFoldersUrls),ns.events.on("daria:mFolders:symbolSet",function(){ns.router.buildFoldersUrls(),ns.router.init()})},function(e,t){ns.events.on("pageinit",function(){if(window.history&&window.history.replaceState){var e=$.url();e.hash(""),e.replaceParams({uid:Daria.uid,login:Daria.login}),e.removeParams(["origin"]),e=e.toString()+window.location.hash,window.history.replaceState({},document.title||"",e.toString())}})},function(e,t,n){yr.externals.entityify=_.escape,yr.externals.i18n=window.i18n,yr.externals["ns-render"]=function(e){var t=yr.nodeset2data(e),n="mail",r=t.bosphorus;return r&&(n=r.info.yateModule),ns.assert(n,"ns-render","yateModule is not defined for view '%s'",t.id),yr.run(n,t,"ns-render")},yr.externals.c=function(){return _.defer(Jane.c,Array.prototype.slice.call(arguments)),""},yr.externals.ckey=function(){return Daria.ckey},yr.externals["daria-now"]=Daria.now,yr.externals["date-format"]=Jane.Date.format,yr.externals["date-get-interval"]=Jane.Date.getInterval,function(){var e=1;yr.externals["generate-id"]=function(){return e++}}(),yr.externals["arr-isfind"]=function(e,t){return-1!==t.indexOf(e)},yr.externals["get-random-string"]=Daria.getRandomString,yr.externals["seasons-modifier"]=function(){var e=(new Date).getDate(),t=(new Date).getMonth()+1,n="";return n=2===t&&e>24||t>2&&t<6?"spring":t>5&&t<9?"summer":t>8&&t<12?"autumn":"winter",(12===t&&e>16||1===t&&e<3)&&(n="newyear"),n},yr.externals["set-time"]=function(e,t,n,r){var i=new Date(e);return i.setHours(t),i.setMinutes(n),i.setSeconds(r),i.setMilliseconds(0),i.getTime()},yr.externals["str-escape"]=_.escape,yr.externals.translate=function(e,t,n){for(var r=0,i=t.length;r<i;r++){var o=new RegExp(Daria.regexpEscape(t.substr(r,1)),"g");e=e.replace(o,n.substr(r,1)||"")}return e},yr.externals.uid=function(){return Daria.uid},yr.externals["has-sid"]=function(e){return-1!==$.inArray(e,Daria.SIDS)},yr.externals.tid2mid=function(e){return Daria.tid2mid(e)},yr.externals.join=function(e,t,n){var r=yr.nodeset2data(e);return 2===arguments.length?r instanceof Array?r.join(t):r:jpath(r,t).join(n)},function(e){var t={};e.externals["regexp-test"]=function(e,n,r){return n in t||(t[n]=new RegExp(n,r)),t[n].test(e)}}(yr),yr.externals.config=function(e){return Daria.Config[e]},yr.externals["web-api"]=function(e){return Daria.api[e]},yr.externals["phone-number-format"]=function(e){var t=/^(\+7)(\d{3})(\d{3})(\d{2})(\d{2})$/,n=t.exec(e),r=e;return n&&(r=Daria.supplant("{1} ({2}) {3}-{4}-{5}",n)),r},yr.externals.extend=function(e,t){var n,r;return _.isObject(e)&&(n=yr.nodeset2data(e)),_.isObject(t)&&(r=yr.nodeset2data(t)),yr.object2nodeset($.extend({},n,r))},yr.externals["add-params-to-location"]=Daria.addParamsToLocation=function(e,t,n,r){var i=["inbox","sent","trash","spam","draft","setup","outbox","compose","contacts"],o=$.url(t||void 0);return Array.isArray(r)&&r.length&&o.removeParams(r),o.Hash&&!_.includes(i,o.Hash)&&(o.Hash=""),o.removeParams(["login","uid"]),e&&!e.__empty__&&o.replaceParams(e),n?decodeURIComponent(o.toString()):o.toString()},yr.externals["uid-ends"]=function(e){return Daria.uidEnds(yr.nodeset2data(e).item)},yr.externals.setting=function(e){return ns.Model.get("settings").getSetting(e)},yr.externals["is-pg-user"]=function(){return ns.Model.get("account-information").isPG()},yr.externals["is-retina"]=function(){return window.devicePixelRatio>1},yr.externals.has=function(e,t){var n=yr.nodeset2data(e);return Boolean(n[t])},yr.externals.cookie=Daria.getCookie,n(799),n(800),n(801),n(802),n(803),n(804)},function(e,t,n){"use strict";var r=n(318);yr.externals["frozen-link"]=function(e,t){return r.get(e,t)}},function(e,t){!function(e){e["arr-concat"]=function(e,t){return e.concat(t)}}(yr.externals)},function(e,t){!function(e){var t=function(){var e=new Date;return e.setMinutes(0),e.setHours(0),e.setSeconds(0),e};e["date-is-today"]=function(e){return e=1e3*parseInt(e,10),t().getTime()<=e},e["date-is-week-current"]=function(e){return e=1e3*parseInt(e,10),new Date(t().getTime()-6048e5).getTime()<=e},e["date-is-yesterday"]=function(e){e=1e3*parseInt(e,10);var n=t();return new Date(n.getTime()-864e5).getTime()<=e&&e<n.getTime()},e["date-now"]=function(){return+new Date}}(yr.externals)},function(e,t){!function(e){e["math-abs"]=function(e){return Math.abs(e)},e["math-random"]=function(){return Math.round(1e5*Math.random())},e["math-round"]=function(e){return Math.round(e)},e["math-sum"]=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=Number(e[n].data);return t}}(yr.externals)},function(e,t){!function(e,t){e.modernizr=function(e){return!0===t[e]}}(yr.externals,Modernizr)},function(e,t){!function(e){e["encode-uri-component"]=function(e){return encodeURIComponent(e)},e["str-contains"]=function(e,t){return String(e).indexOf(t)>-1},e["str-length"]=function(e){return String(e).length},e["str-substr"]=function(e,t,n){return e.substr(t,n)},e["str-substr-after"]=function(e,t){e=String(e);var n=e.indexOf(t);return n>-1?e.substr(n+1):""},e["str-substr-before"]=function(e,t){e=String(e);var n=e.indexOf(t);return n>-1?e.substr(0,n):""},e["str-to-lower"]=function(e){return String(e).toLowerCase()},e["str-to-upper"]=function(e){return String(e).toUpperCase()}}(yr.externals)},function(e,t){yr.externals["use-or-inline-svg"]=function(){var e={},t={auto:"auto",forceInline:"forceInline"};return function(n,r){if("MSIE"===Daria.UA.BrowserName&&(r=t.forceInline),r!==t.forceInline)return'<use xlink:href="#svgicon-'+n+'"></use>';if(e[n])return e[n];var i="svgicon-"+n,o=document.getElementById(i);if(o){var a=Array.prototype.slice.call(o.childNodes),s=new XMLSerializer,u=a.reduce(function(e,t){return e+s.serializeToString(t)},""),c=o.getAttribute("viewBox");return e[n]='<svg id="'+i+'" viewBox="'+c+'">'+u+"</svg>",e[n]}Daria.DEBUG&&console.warn("Не могу найти иконку #"+i)}}()}]);